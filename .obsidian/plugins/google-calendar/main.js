/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var iL=Object.create;var cu=Object.defineProperty,aL=Object.defineProperties,sL=Object.getOwnPropertyDescriptor,oL=Object.getOwnPropertyDescriptors,lL=Object.getOwnPropertyNames,l_=Object.getOwnPropertySymbols,uL=Object.getPrototypeOf,u_=Object.prototype.hasOwnProperty,cL=Object.prototype.propertyIsEnumerable;var c_=(t,e,r)=>e in t?cu(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,qr=(t,e)=>{for(var r in e||(e={}))u_.call(e,r)&&c_(t,r,e[r]);if(l_)for(var r of l_(e))cL.call(e,r)&&c_(t,r,e[r]);return t},gn=(t,e)=>aL(t,oL(e)),f_=t=>cu(t,"__esModule",{value:!0});var gV=typeof require!="undefined"?require:t=>{throw new Error('Dynamic require of "'+t+'" is not supported')};var de=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),fL=(t,e)=>{f_(t);for(var r in e)cu(t,r,{get:e[r],enumerable:!0})},dL=(t,e,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of lL(e))!u_.call(t,n)&&n!=="default"&&cu(t,n,{get:()=>e[n],enumerable:!(r=sL(e,n))||r.enumerable});return t},_t=t=>dL(f_(cu(t!=null?iL(uL(t)):{},"default",t&&t.__esModule&&"default"in t?{get:()=>t.default,enumerable:!0}:{value:t,enumerable:!0})),t);var M=(t,e,r)=>new Promise((n,i)=>{var a=u=>{try{l(r.next(u))}catch(f){i(f)}},s=u=>{try{l(r.throw(u))}catch(f){i(f)}},l=u=>u.done?n(u.value):Promise.resolve(u.value).then(a,s);l((r=r.apply(t,e)).next())});var m0=de((CV,E_)=>{"use strict";var Tf=Object.prototype.hasOwnProperty,p_=Object.prototype.toString,g_=Object.defineProperty,m_=Object.getOwnPropertyDescriptor,y_=function(e){return typeof Array.isArray=="function"?Array.isArray(e):p_.call(e)==="[object Array]"},v_=function(e){if(!e||p_.call(e)!=="[object Object]")return!1;var r=Tf.call(e,"constructor"),n=e.constructor&&e.constructor.prototype&&Tf.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!r&&!n)return!1;var i;for(i in e);return typeof i=="undefined"||Tf.call(e,i)},__=function(e,r){g_&&r.name==="__proto__"?g_(e,r.name,{enumerable:!0,configurable:!0,value:r.newValue,writable:!0}):e[r.name]=r.newValue},w_=function(e,r){if(r==="__proto__")if(Tf.call(e,r)){if(m_)return m_(e,r).value}else return;return e[r]};E_.exports=function t(){var e,r,n,i,a,s,l=arguments[0],u=1,f=arguments.length,d=!1;for(typeof l=="boolean"&&(d=l,l=arguments[1]||{},u=2),(l==null||typeof l!="object"&&typeof l!="function")&&(l={});u<f;++u)if(e=arguments[u],e!=null)for(r in e)n=w_(l,r),i=w_(e,r),l!==i&&(d&&i&&(v_(i)||(a=y_(i)))?(a?(a=!1,s=n&&y_(n)?n:[]):s=n&&v_(n)?n:{},__(l,{name:r,newValue:t(d,s,i)})):typeof i!="undefined"&&__(l,{name:r,newValue:i}));return l}});var y0=de((Fo,C_)=>{"use strict";var hL=function(){if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;if(typeof Ea!="undefined")return Ea;throw new Error("unable to locate global object")},Ea=hL();C_.exports=Fo=Ea.fetch;Ea.fetch&&(Fo.default=Ea.fetch.bind(Ea));Fo.Headers=Ea.Headers;Fo.Request=Ea.Request;Fo.Response=Ea.Response});var v0=de((bV,b_)=>{"use strict";var Vi=t=>t!==null&&typeof t=="object"&&typeof t.pipe=="function";Vi.writable=t=>Vi(t)&&t.writable!==!1&&typeof t._write=="function"&&typeof t._writableState=="object";Vi.readable=t=>Vi(t)&&t.readable!==!1&&typeof t._read=="function"&&typeof t._readableState=="object";Vi.duplex=t=>Vi.writable(t)&&Vi.readable(t);Vi.transform=t=>Vi.duplex(t)&&typeof t._transform=="function";b_.exports=Vi});var _0=de(Af=>{"use strict";Object.defineProperty(Af,"__esModule",{value:!0});Af.GaxiosError=void 0;var x_=class extends Error{constructor(e,r,n){super(e);this.response=n,this.config=r,this.code=n.status.toString()}};Af.GaxiosError=x_});var T_=de(kf=>{"use strict";Object.defineProperty(kf,"__esModule",{value:!0});kf.getRetryConfig=void 0;function pL(t){return M(this,null,function*(){var e;let r=S_(t);if(!t||!t.config||!r&&!t.config.retry)return{shouldRetry:!1};r=r||{},r.currentRetryAttempt=r.currentRetryAttempt||0,r.retry=r.retry===void 0||r.retry===null?3:r.retry,r.httpMethodsToRetry=r.httpMethodsToRetry||["GET","HEAD","PUT","OPTIONS","DELETE"],r.noResponseRetries=r.noResponseRetries===void 0||r.noResponseRetries===null?2:r.noResponseRetries;let n=[[100,199],[429,429],[500,599]];if(r.statusCodesToRetry=r.statusCodesToRetry||n,t.config.retryConfig=r,!(yield(r.shouldRetry||gL)(t)))return{shouldRetry:!1,config:t.config};let s=(r.currentRetryAttempt?0:(e=r.retryDelay)!==null&&e!==void 0?e:100)+(Math.pow(2,r.currentRetryAttempt)-1)/2*1e3;t.config.retryConfig.currentRetryAttempt+=1;let l=new Promise(u=>{setTimeout(u,s)});return r.onRetryAttempt&&r.onRetryAttempt(t),yield l,{shouldRetry:!0,config:t.config}})}kf.getRetryConfig=pL;function gL(t){let e=S_(t);if(t.name==="AbortError"||!e||e.retry===0||!t.response&&(e.currentRetryAttempt||0)>=e.noResponseRetries||!t.config.method||e.httpMethodsToRetry.indexOf(t.config.method.toUpperCase())<0)return!1;if(t.response&&t.response.status){let r=!1;for(let[n,i]of e.statusCodesToRetry){let a=t.response.status;if(a>=n&&a<=i){r=!0;break}}if(!r)return!1}return e.currentRetryAttempt=e.currentRetryAttempt||0,!(e.currentRetryAttempt>=e.retry)}function S_(t){if(t&&t.config&&t.config.retryConfig)return t.config.retryConfig}});var k_=de((TV,A_)=>{var qo=1e3,Go=qo*60,Vo=Go*60,Ls=Vo*24,mL=Ls*7,yL=Ls*365.25;A_.exports=function(t,e){e=e||{};var r=typeof t;if(r==="string"&&t.length>0)return vL(t);if(r==="number"&&isFinite(t))return e.long?wL(t):_L(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function vL(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(!!e){var r=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*yL;case"weeks":case"week":case"w":return r*mL;case"days":case"day":case"d":return r*Ls;case"hours":case"hour":case"hrs":case"hr":case"h":return r*Vo;case"minutes":case"minute":case"mins":case"min":case"m":return r*Go;case"seconds":case"second":case"secs":case"sec":case"s":return r*qo;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function _L(t){var e=Math.abs(t);return e>=Ls?Math.round(t/Ls)+"d":e>=Vo?Math.round(t/Vo)+"h":e>=Go?Math.round(t/Go)+"m":e>=qo?Math.round(t/qo)+"s":t+"ms"}function wL(t){var e=Math.abs(t);return e>=Ls?If(t,e,Ls,"day"):e>=Vo?If(t,e,Vo,"hour"):e>=Go?If(t,e,Go,"minute"):e>=qo?If(t,e,qo,"second"):t+" ms"}function If(t,e,r,n){var i=e>=r*1.5;return Math.round(t/r)+" "+n+(i?"s":"")}});var R_=de((AV,I_)=>{function EL(t){r.debug=r,r.default=r,r.coerce=u,r.disable=a,r.enable=i,r.enabled=s,r.humanize=k_(),r.destroy=f,Object.keys(t).forEach(d=>{r[d]=t[d]}),r.names=[],r.skips=[],r.formatters={};function e(d){let h=0;for(let g=0;g<d.length;g++)h=(h<<5)-h+d.charCodeAt(g),h|=0;return r.colors[Math.abs(h)%r.colors.length]}r.selectColor=e;function r(d){let h,g=null,y,m;function _(...E){if(!_.enabled)return;let w=_,b=Number(new Date),k=b-(h||b);w.diff=k,w.prev=h,w.curr=b,h=b,E[0]=r.coerce(E[0]),typeof E[0]!="string"&&E.unshift("%O");let N=0;E[0]=E[0].replace(/%([a-zA-Z%])/g,(B,ee)=>{if(B==="%%")return"%";N++;let q=r.formatters[ee];if(typeof q=="function"){let U=E[N];B=q.call(w,U),E.splice(N,1),N--}return B}),r.formatArgs.call(w,E),(w.log||r.log).apply(w,E)}return _.namespace=d,_.useColors=r.useColors(),_.color=r.selectColor(d),_.extend=n,_.destroy=r.destroy,Object.defineProperty(_,"enabled",{enumerable:!0,configurable:!1,get:()=>g!==null?g:(y!==r.namespaces&&(y=r.namespaces,m=r.enabled(d)),m),set:E=>{g=E}}),typeof r.init=="function"&&r.init(_),_}function n(d,h){let g=r(this.namespace+(typeof h=="undefined"?":":h)+d);return g.log=this.log,g}function i(d){r.save(d),r.namespaces=d,r.names=[],r.skips=[];let h,g=(typeof d=="string"?d:"").split(/[\s,]+/),y=g.length;for(h=0;h<y;h++)!g[h]||(d=g[h].replace(/\*/g,".*?"),d[0]==="-"?r.skips.push(new RegExp("^"+d.slice(1)+"$")):r.names.push(new RegExp("^"+d+"$")))}function a(){let d=[...r.names.map(l),...r.skips.map(l).map(h=>"-"+h)].join(",");return r.enable(""),d}function s(d){if(d[d.length-1]==="*")return!0;let h,g;for(h=0,g=r.skips.length;h<g;h++)if(r.skips[h].test(d))return!1;for(h=0,g=r.names.length;h<g;h++)if(r.names[h].test(d))return!0;return!1}function l(d){return d.toString().substring(2,d.toString().length-2).replace(/\.\*\?$/,"*")}function u(d){return d instanceof Error?d.stack||d.message:d}function f(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}I_.exports=EL});var Nf=de((Gn,Rf)=>{Gn.formatArgs=bL;Gn.save=xL;Gn.load=SL;Gn.useColors=CL;Gn.storage=TL();Gn.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();Gn.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function CL(){return typeof window!="undefined"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document!="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function bL(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+Rf.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;t.splice(1,0,e,"color: inherit");let r=0,n=0;t[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(r++,i==="%c"&&(n=r))}),t.splice(n,0,e)}Gn.log=console.debug||console.log||(()=>{});function xL(t){try{t?Gn.storage.setItem("debug",t):Gn.storage.removeItem("debug")}catch(e){}}function SL(){let t;try{t=Gn.storage.getItem("debug")}catch(e){}return!t&&typeof process!="undefined"&&"env"in process&&(t=process.env.DEBUG),t}function TL(){try{return localStorage}catch(t){}}Rf.exports=R_()(Gn);var{formatters:AL}=Rf.exports;AL.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var N_=de(w0=>{"use strict";Object.defineProperty(w0,"__esModule",{value:!0});function kL(t){return function(e,r){return new Promise((n,i)=>{t.call(this,e,r,(a,s)=>{a?i(a):n(s)})})}}w0.default=kL});var O_=de((C0,D_)=>{"use strict";var B_=C0&&C0.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},IL=require("events"),RL=B_(Nf()),NL=B_(N_()),du=RL.default("agent-base");function BL(t){return Boolean(t)&&typeof t.addRequest=="function"}function E0(){let{stack:t}=new Error;return typeof t!="string"?!1:t.split(`
`).some(e=>e.indexOf("(https.js:")!==-1||e.indexOf("node:https:")!==-1)}function Bf(t,e){return new Bf.Agent(t,e)}(function(t){class e extends IL.EventEmitter{constructor(n,i){super();let a=i;typeof n=="function"?this.callback=n:n&&(a=n),this.timeout=null,a&&typeof a.timeout=="number"&&(this.timeout=a.timeout),this.maxFreeSockets=1,this.maxSockets=1,this.maxTotalSockets=1/0,this.sockets={},this.freeSockets={},this.requests={},this.options={}}get defaultPort(){return typeof this.explicitDefaultPort=="number"?this.explicitDefaultPort:E0()?443:80}set defaultPort(n){this.explicitDefaultPort=n}get protocol(){return typeof this.explicitProtocol=="string"?this.explicitProtocol:E0()?"https:":"http:"}set protocol(n){this.explicitProtocol=n}callback(n,i,a){throw new Error('"agent-base" has no default implementation, you must subclass and override `callback()`')}addRequest(n,i){let a=Object.assign({},i);typeof a.secureEndpoint!="boolean"&&(a.secureEndpoint=E0()),a.host==null&&(a.host="localhost"),a.port==null&&(a.port=a.secureEndpoint?443:80),a.protocol==null&&(a.protocol=a.secureEndpoint?"https:":"http:"),a.host&&a.path&&delete a.path,delete a.agent,delete a.hostname,delete a._defaultAgent,delete a.defaultPort,delete a.createConnection,n._last=!0,n.shouldKeepAlive=!1;let s=!1,l=null,u=a.timeout||this.timeout,f=y=>{n._hadError||(n.emit("error",y),n._hadError=!0)},d=()=>{l=null,s=!0;let y=new Error(`A "socket" was not created for HTTP request before ${u}ms`);y.code="ETIMEOUT",f(y)},h=y=>{s||(l!==null&&(clearTimeout(l),l=null),f(y))},g=y=>{if(s)return;if(l!=null&&(clearTimeout(l),l=null),BL(y)){du("Callback returned another Agent instance %o",y.constructor.name),y.addRequest(n,a);return}if(y){y.once("free",()=>{this.freeSocket(y,a)}),n.onSocket(y);return}let m=new Error(`no Duplex stream was returned to agent-base for \`${n.method} ${n.path}\``);f(m)};if(typeof this.callback!="function"){f(new Error("`callback` is not defined"));return}this.promisifiedCallback||(this.callback.length>=3?(du("Converting legacy callback function to promise"),this.promisifiedCallback=NL.default(this.callback)):this.promisifiedCallback=this.callback),typeof u=="number"&&u>0&&(l=setTimeout(d,u)),"port"in a&&typeof a.port!="number"&&(a.port=Number(a.port));try{du("Resolving socket for %o request: %o",a.protocol,`${n.method} ${n.path}`),Promise.resolve(this.promisifiedCallback(n,a)).then(g,h)}catch(y){Promise.reject(y).catch(h)}}freeSocket(n,i){du("Freeing socket %o %o",n.constructor.name,i),n.destroy()}destroy(){du("Destroying agent %o",this.constructor.name)}}t.Agent=e,t.prototype=t.Agent.prototype})(Bf||(Bf={}));D_.exports=Bf});var L_=de(pu=>{"use strict";var DL=pu&&pu.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(pu,"__esModule",{value:!0});var OL=DL(Nf()),hu=OL.default("https-proxy-agent:parse-proxy-response");function LL(t){return new Promise((e,r)=>{let n=0,i=[];function a(){let h=t.read();h?d(h):t.once("readable",a)}function s(){t.removeListener("end",u),t.removeListener("error",f),t.removeListener("close",l),t.removeListener("readable",a)}function l(h){hu("onclose had error %o",h)}function u(){hu("onend")}function f(h){s(),hu("onerror %o",h),r(h)}function d(h){i.push(h),n+=h.length;let g=Buffer.concat(i,n);if(g.indexOf(`\r
\r
`)===-1){hu("have not received end of HTTP headers yet..."),a();return}let m=g.toString("ascii",0,g.indexOf(`\r
`)),_=+m.split(" ")[1];hu("got proxy server response: %o",m),e({statusCode:_,buffered:g})}t.on("error",f),t.on("close",l),t.on("end",u),a()})}pu.default=LL});var F_=de(Ps=>{"use strict";var PL=Ps&&Ps.__awaiter||function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function l(d){try{f(n.next(d))}catch(h){s(h)}}function u(d){try{f(n.throw(d))}catch(h){s(h)}}function f(d){d.done?a(d.value):i(d.value).then(l,u)}f((n=n.apply(t,e||[])).next())})},jo=Ps&&Ps.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ps,"__esModule",{value:!0});var P_=jo(require("net")),M_=jo(require("tls")),ML=jo(require("url")),UL=jo(require("assert")),FL=jo(Nf()),qL=O_(),GL=jo(L_()),gu=FL.default("https-proxy-agent:agent"),U_=class extends qL.Agent{constructor(e){let r;if(typeof e=="string"?r=ML.default.parse(e):r=e,!r)throw new Error("an HTTP(S) proxy server `host` and `port` must be specified!");gu("creating new HttpsProxyAgent instance: %o",r);super(r);let n=Object.assign({},r);this.secureProxy=r.secureProxy||KL(n.protocol),n.host=n.hostname||n.host,typeof n.port=="string"&&(n.port=parseInt(n.port,10)),!n.port&&n.host&&(n.port=this.secureProxy?443:80),this.secureProxy&&!("ALPNProtocols"in n)&&(n.ALPNProtocols=["http 1.1"]),n.host&&n.path&&(delete n.path,delete n.pathname),this.proxy=n}callback(e,r){return PL(this,void 0,void 0,function*(){let{proxy:n,secureProxy:i}=this,a;i?(gu("Creating `tls.Socket`: %o",n),a=M_.default.connect(n)):(gu("Creating `net.Socket`: %o",n),a=P_.default.connect(n));let s=Object.assign({},n.headers),u=`CONNECT ${`${r.host}:${r.port}`} HTTP/1.1\r
`;n.auth&&(s["Proxy-Authorization"]=`Basic ${Buffer.from(n.auth).toString("base64")}`);let{host:f,port:d,secureEndpoint:h}=r;jL(d,h)||(f+=`:${d}`),s.Host=f,s.Connection="close";for(let E of Object.keys(s))u+=`${E}: ${s[E]}\r
`;let g=GL.default(a);a.write(`${u}\r
`);let{statusCode:y,buffered:m}=yield g;if(y===200){if(e.once("socket",VL),r.secureEndpoint){gu("Upgrading socket connection to TLS");let E=r.servername||r.host;return M_.default.connect(Object.assign(Object.assign({},HL(r,"host","hostname","path","port")),{socket:a,servername:E}))}return a}a.destroy();let _=new P_.default.Socket({writable:!1});return _.readable=!0,e.once("socket",E=>{gu("replaying proxy buffer for failed request"),UL.default(E.listenerCount("data")>0),E.push(m),E.push(null)}),_})}};Ps.default=U_;function VL(t){t.resume()}function jL(t,e){return Boolean(!e&&t===80||e&&t===443)}function KL(t){return typeof t=="string"?/^https:?$/i.test(t):!1}function HL(t,...e){let r={},n;for(n in t)e.includes(n)||(r[n]=t[n]);return r}});var T0=de((S0,q_)=>{"use strict";var YL=S0&&S0.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},b0=YL(F_());function x0(t){return new b0.default(t)}(function(t){t.HttpsProxyAgent=b0.default,t.prototype=b0.default.prototype})(x0||(x0={}));q_.exports=x0});var Y_=de(Ko=>{"use strict";var Df=Ko&&Ko.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ko,"__esModule",{value:!0});Ko.Gaxios=void 0;var WL=Df(m0()),zL=require("https"),QL=Df(y0()),XL=Df(require("querystring")),JL=Df(v0()),G_=require("url"),ZL=_0(),$L=T_(),eP=rP()?window.fetch:QL.default;function tP(){return typeof window!="undefined"&&!!window}function rP(){return tP()&&!!window.fetch}function nP(){return typeof Buffer!="undefined"}function V_(t,e){return!!j_(t,e)}function j_(t,e){e=e.toLowerCase();for(let r of Object.keys((t==null?void 0:t.headers)||{}))if(e===r.toLowerCase())return t.headers[r]}var A0;function K_(){var t,e,r,n;let i=((t=process==null?void 0:process.env)===null||t===void 0?void 0:t.HTTPS_PROXY)||((e=process==null?void 0:process.env)===null||e===void 0?void 0:e.https_proxy)||((r=process==null?void 0:process.env)===null||r===void 0?void 0:r.HTTP_PROXY)||((n=process==null?void 0:process.env)===null||n===void 0?void 0:n.http_proxy);return i&&(A0=T0()),i}K_();function iP(t){var e;let r=(e=process.env.NO_PROXY)!==null&&e!==void 0?e:process.env.no_proxy;if(!r)return!1;let n=r.split(","),i=new G_.URL(t);return!!n.find(a=>a.startsWith("*.")||a.startsWith(".")?(a=a.replace(/^\*\./,"."),i.hostname.endsWith(a)):a===i.origin||a===i.hostname)}function aP(t){if(!iP(t))return K_()}var H_=class{constructor(e){this.agentCache=new Map,this.defaults=e||{}}request(){return M(this,arguments,function*(e={}){return e=this.validateOpts(e),this._request(e)})}_defaultAdapter(e){return M(this,null,function*(){let n=yield(e.fetchImplementation||eP)(e.url,e),i=yield this.getResponseData(e,n);return this.translateResponse(e,n,i)})}_request(){return M(this,arguments,function*(e={}){try{let r;if(e.adapter?r=yield e.adapter(e,this._defaultAdapter.bind(this)):r=yield this._defaultAdapter(e),!e.validateStatus(r.status))throw new ZL.GaxiosError(`Request failed with status code ${r.status}`,e,r);return r}catch(r){let n=r;n.config=e;let{shouldRetry:i,config:a}=yield(0,$L.getRetryConfig)(n);if(i&&a)return n.config.retryConfig.currentRetryAttempt=a.retryConfig.currentRetryAttempt,this._request(n.config);throw n}})}getResponseData(e,r){return M(this,null,function*(){switch(e.responseType){case"stream":return r.body;case"json":{let n=yield r.text();try{n=JSON.parse(n)}catch(i){}return n}case"arraybuffer":return r.arrayBuffer();case"blob":return r.blob();default:return r.text()}})}validateOpts(e){let r=(0,WL.default)(!0,{},this.defaults,e);if(!r.url)throw new Error("URL is required.");let n=r.baseUrl||r.baseURL;if(n&&(r.url=n+r.url),r.paramsSerializer=r.paramsSerializer||this.paramsSerializer,r.params&&Object.keys(r.params).length>0){let a=r.paramsSerializer(r.params);a.startsWith("?")&&(a=a.slice(1));let s=r.url.includes("?")?"&":"?";r.url=r.url+s+a}if(typeof e.maxContentLength=="number"&&(r.size=e.maxContentLength),typeof e.maxRedirects=="number"&&(r.follow=e.maxRedirects),r.headers=r.headers||{},r.data){let a=typeof FormData=="undefined"?!1:(r==null?void 0:r.data)instanceof FormData;JL.default.readable(r.data)?r.body=r.data:nP()&&Buffer.isBuffer(r.data)?(r.body=r.data,V_(r,"Content-Type")||(r.headers["Content-Type"]="application/json")):typeof r.data=="object"?a||(j_(r,"content-type")==="application/x-www-form-urlencoded"?r.body=r.paramsSerializer(r.data):(V_(r,"Content-Type")||(r.headers["Content-Type"]="application/json"),r.body=JSON.stringify(r.data))):r.body=r.data}r.validateStatus=r.validateStatus||this.validateStatus,r.responseType=r.responseType||"json",!r.headers.Accept&&r.responseType==="json"&&(r.headers.Accept="application/json"),r.method=r.method||"GET";let i=aP(r.url);if(i)if(this.agentCache.has(i))r.agent=this.agentCache.get(i);else{if(r.cert&&r.key){let a=new G_.URL(i);r.agent=new A0({port:a.port,host:a.host,protocol:a.protocol,cert:r.cert,key:r.key})}else r.agent=new A0(i);this.agentCache.set(i,r.agent)}else r.cert&&r.key&&(this.agentCache.has(r.key)?r.agent=this.agentCache.get(r.key):(r.agent=new zL.Agent({cert:r.cert,key:r.key}),this.agentCache.set(r.key,r.agent)));return r}validateStatus(e){return e>=200&&e<300}paramsSerializer(e){return XL.default.stringify(e)}translateResponse(e,r,n){let i={};return r.headers.forEach((a,s)=>{i[s]=a}),{config:e,data:n,headers:i,status:r.status,statusText:r.statusText,request:{responseURL:r.url}}}};Ko.Gaxios=H_});var Ho=de(Ei=>{"use strict";Object.defineProperty(Ei,"__esModule",{value:!0});Ei.request=Ei.instance=Ei.Gaxios=Ei.GaxiosError=void 0;var W_=Y_();Object.defineProperty(Ei,"Gaxios",{enumerable:!0,get:function(){return W_.Gaxios}});var sP=_0();Object.defineProperty(Ei,"GaxiosError",{enumerable:!0,get:function(){return sP.GaxiosError}});Ei.instance=new W_.Gaxios;function oP(t){return M(this,null,function*(){return Ei.instance.request(t)})}Ei.request=oP});var k0=de((z_,Of)=>{(function(t){"use strict";var e,r=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,n=Math.ceil,i=Math.floor,a="[BigNumber Error] ",s=a+"Number primitive has more than 15 significant digits: ",l=1e14,u=14,f=9007199254740991,d=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],h=1e7,g=1e9;function y(D){var B,ee,q,U=le.prototype={constructor:le,toString:null,valueOf:null},oe=new le(1),ae=20,Ee=4,Ie=-7,Qe=21,Ne=-1e7,me=1e7,ne=!1,Ge=1,Je=0,ut={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"\xA0",suffix:""},Xe="0123456789abcdefghijklmnopqrstuvwxyz",ct=!0;function le(I,O){var L,H,j,Q,J,Y,X,te,Z=this;if(!(Z instanceof le))return new le(I,O);if(O==null){if(I&&I._isBigNumber===!0){Z.s=I.s,!I.c||I.e>me?Z.c=Z.e=null:I.e<Ne?Z.c=[Z.e=0]:(Z.e=I.e,Z.c=I.c.slice());return}if((Y=typeof I=="number")&&I*0==0){if(Z.s=1/I<0?(I=-I,-1):1,I===~~I){for(Q=0,J=I;J>=10;J/=10,Q++);Q>me?Z.c=Z.e=null:(Z.e=Q,Z.c=[I]);return}te=String(I)}else{if(!r.test(te=String(I)))return q(Z,te,Y);Z.s=te.charCodeAt(0)==45?(te=te.slice(1),-1):1}(Q=te.indexOf("."))>-1&&(te=te.replace(".","")),(J=te.search(/e/i))>0?(Q<0&&(Q=J),Q+=+te.slice(J+1),te=te.substring(0,J)):Q<0&&(Q=te.length)}else{if(w(O,2,Xe.length,"Base"),O==10&&ct)return Z=new le(I),tt(Z,ae+Z.e+1,Ee);if(te=String(I),Y=typeof I=="number"){if(I*0!=0)return q(Z,te,Y,O);if(Z.s=1/I<0?(te=te.slice(1),-1):1,le.DEBUG&&te.replace(/^0\.0*|\./,"").length>15)throw Error(s+I)}else Z.s=te.charCodeAt(0)===45?(te=te.slice(1),-1):1;for(L=Xe.slice(0,O),Q=J=0,X=te.length;J<X;J++)if(L.indexOf(H=te.charAt(J))<0){if(H=="."){if(J>Q){Q=X;continue}}else if(!j&&(te==te.toUpperCase()&&(te=te.toLowerCase())||te==te.toLowerCase()&&(te=te.toUpperCase()))){j=!0,J=-1,Q=0;continue}return q(Z,String(I),Y,O)}Y=!1,te=ee(te,O,10,Z.s),(Q=te.indexOf("."))>-1?te=te.replace(".",""):Q=te.length}for(J=0;te.charCodeAt(J)===48;J++);for(X=te.length;te.charCodeAt(--X)===48;);if(te=te.slice(J,++X)){if(X-=J,Y&&le.DEBUG&&X>15&&(I>f||I!==i(I)))throw Error(s+Z.s*I);if((Q=Q-J-1)>me)Z.c=Z.e=null;else if(Q<Ne)Z.c=[Z.e=0];else{if(Z.e=Q,Z.c=[],J=(Q+1)%u,Q<0&&(J+=u),J<X){for(J&&Z.c.push(+te.slice(0,J)),X-=u;J<X;)Z.c.push(+te.slice(J,J+=u));J=u-(te=te.slice(J)).length}else J-=X;for(;J--;te+="0");Z.c.push(+te)}}else Z.c=[Z.e=0]}le.clone=y,le.ROUND_UP=0,le.ROUND_DOWN=1,le.ROUND_CEIL=2,le.ROUND_FLOOR=3,le.ROUND_HALF_UP=4,le.ROUND_HALF_DOWN=5,le.ROUND_HALF_EVEN=6,le.ROUND_HALF_CEIL=7,le.ROUND_HALF_FLOOR=8,le.EUCLID=9,le.config=le.set=function(I){var O,L;if(I!=null)if(typeof I=="object"){if(I.hasOwnProperty(O="DECIMAL_PLACES")&&(L=I[O],w(L,0,g,O),ae=L),I.hasOwnProperty(O="ROUNDING_MODE")&&(L=I[O],w(L,0,8,O),Ee=L),I.hasOwnProperty(O="EXPONENTIAL_AT")&&(L=I[O],L&&L.pop?(w(L[0],-g,0,O),w(L[1],0,g,O),Ie=L[0],Qe=L[1]):(w(L,-g,g,O),Ie=-(Qe=L<0?-L:L))),I.hasOwnProperty(O="RANGE"))if(L=I[O],L&&L.pop)w(L[0],-g,-1,O),w(L[1],1,g,O),Ne=L[0],me=L[1];else if(w(L,-g,g,O),L)Ne=-(me=L<0?-L:L);else throw Error(a+O+" cannot be zero: "+L);if(I.hasOwnProperty(O="CRYPTO"))if(L=I[O],L===!!L)if(L)if(typeof crypto!="undefined"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))ne=L;else throw ne=!L,Error(a+"crypto unavailable");else ne=L;else throw Error(a+O+" not true or false: "+L);if(I.hasOwnProperty(O="MODULO_MODE")&&(L=I[O],w(L,0,9,O),Ge=L),I.hasOwnProperty(O="POW_PRECISION")&&(L=I[O],w(L,0,g,O),Je=L),I.hasOwnProperty(O="FORMAT"))if(L=I[O],typeof L=="object")ut=L;else throw Error(a+O+" not an object: "+L);if(I.hasOwnProperty(O="ALPHABET"))if(L=I[O],typeof L=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(L))ct=L.slice(0,10)=="0123456789",Xe=L;else throw Error(a+O+" invalid: "+L)}else throw Error(a+"Object expected: "+I);return{DECIMAL_PLACES:ae,ROUNDING_MODE:Ee,EXPONENTIAL_AT:[Ie,Qe],RANGE:[Ne,me],CRYPTO:ne,MODULO_MODE:Ge,POW_PRECISION:Je,FORMAT:ut,ALPHABET:Xe}},le.isBigNumber=function(I){if(!I||I._isBigNumber!==!0)return!1;if(!le.DEBUG)return!0;var O,L,H=I.c,j=I.e,Q=I.s;e:if({}.toString.call(H)=="[object Array]"){if((Q===1||Q===-1)&&j>=-g&&j<=g&&j===i(j)){if(H[0]===0){if(j===0&&H.length===1)return!0;break e}if(O=(j+1)%u,O<1&&(O+=u),String(H[0]).length==O){for(O=0;O<H.length;O++)if(L=H[O],L<0||L>=l||L!==i(L))break e;if(L!==0)return!0}}}else if(H===null&&j===null&&(Q===null||Q===1||Q===-1))return!0;throw Error(a+"Invalid BigNumber: "+I)},le.maximum=le.max=function(){return Bt(arguments,U.lt)},le.minimum=le.min=function(){return Bt(arguments,U.gt)},le.random=function(){var I=9007199254740992,O=Math.random()*I&2097151?function(){return i(Math.random()*I)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(L){var H,j,Q,J,Y,X=0,te=[],Z=new le(oe);if(L==null?L=ae:w(L,0,g),J=n(L/u),ne)if(crypto.getRandomValues){for(H=crypto.getRandomValues(new Uint32Array(J*=2));X<J;)Y=H[X]*131072+(H[X+1]>>>11),Y>=9e15?(j=crypto.getRandomValues(new Uint32Array(2)),H[X]=j[0],H[X+1]=j[1]):(te.push(Y%1e14),X+=2);X=J/2}else if(crypto.randomBytes){for(H=crypto.randomBytes(J*=7);X<J;)Y=(H[X]&31)*281474976710656+H[X+1]*1099511627776+H[X+2]*4294967296+H[X+3]*16777216+(H[X+4]<<16)+(H[X+5]<<8)+H[X+6],Y>=9e15?crypto.randomBytes(7).copy(H,X):(te.push(Y%1e14),X+=7);X=J/7}else throw ne=!1,Error(a+"crypto unavailable");if(!ne)for(;X<J;)Y=O(),Y<9e15&&(te[X++]=Y%1e14);for(J=te[--X],L%=u,J&&L&&(Y=d[u-L],te[X]=i(J/Y)*Y);te[X]===0;te.pop(),X--);if(X<0)te=[Q=0];else{for(Q=-1;te[0]===0;te.splice(0,1),Q-=u);for(X=1,Y=te[0];Y>=10;Y/=10,X++);X<u&&(Q-=u-X)}return Z.e=Q,Z.c=te,Z}}(),le.sum=function(){for(var I=1,O=arguments,L=new le(O[0]);I<O.length;)L=L.plus(O[I++]);return L},ee=function(){var I="0123456789";function O(L,H,j,Q){for(var J,Y=[0],X,te=0,Z=L.length;te<Z;){for(X=Y.length;X--;Y[X]*=H);for(Y[0]+=Q.indexOf(L.charAt(te++)),J=0;J<Y.length;J++)Y[J]>j-1&&(Y[J+1]==null&&(Y[J+1]=0),Y[J+1]+=Y[J]/j|0,Y[J]%=j)}return Y.reverse()}return function(L,H,j,Q,J){var Y,X,te,Z,he,Oe,Ue,dt,Qt=L.indexOf("."),Xt=ae,rt=Ee;for(Qt>=0&&(Z=Je,Je=0,L=L.replace(".",""),dt=new le(H),Oe=dt.pow(L.length-Qt),Je=Z,dt.c=O(N(_(Oe.c),Oe.e,"0"),10,j,I),dt.e=dt.c.length),Ue=O(L,H,j,J?(Y=Xe,I):(Y=I,Xe)),te=Z=Ue.length;Ue[--Z]==0;Ue.pop());if(!Ue[0])return Y.charAt(0);if(Qt<0?--te:(Oe.c=Ue,Oe.e=te,Oe.s=Q,Oe=B(Oe,dt,Xt,rt,j),Ue=Oe.c,he=Oe.r,te=Oe.e),X=te+Xt+1,Qt=Ue[X],Z=j/2,he=he||X<0||Ue[X+1]!=null,he=rt<4?(Qt!=null||he)&&(rt==0||rt==(Oe.s<0?3:2)):Qt>Z||Qt==Z&&(rt==4||he||rt==6&&Ue[X-1]&1||rt==(Oe.s<0?8:7)),X<1||!Ue[0])L=he?N(Y.charAt(1),-Xt,Y.charAt(0)):Y.charAt(0);else{if(Ue.length=X,he)for(--j;++Ue[--X]>j;)Ue[X]=0,X||(++te,Ue=[1].concat(Ue));for(Z=Ue.length;!Ue[--Z];);for(Qt=0,L="";Qt<=Z;L+=Y.charAt(Ue[Qt++]));L=N(L,te,Y.charAt(0))}return L}}(),B=function(){function I(H,j,Q){var J,Y,X,te,Z=0,he=H.length,Oe=j%h,Ue=j/h|0;for(H=H.slice();he--;)X=H[he]%h,te=H[he]/h|0,J=Ue*X+te*Oe,Y=Oe*X+J%h*h+Z,Z=(Y/Q|0)+(J/h|0)+Ue*te,H[he]=Y%Q;return Z&&(H=[Z].concat(H)),H}function O(H,j,Q,J){var Y,X;if(Q!=J)X=Q>J?1:-1;else for(Y=X=0;Y<Q;Y++)if(H[Y]!=j[Y]){X=H[Y]>j[Y]?1:-1;break}return X}function L(H,j,Q,J){for(var Y=0;Q--;)H[Q]-=Y,Y=H[Q]<j[Q]?1:0,H[Q]=Y*J+H[Q]-j[Q];for(;!H[0]&&H.length>1;H.splice(0,1));}return function(H,j,Q,J,Y){var X,te,Z,he,Oe,Ue,dt,Qt,Xt,rt,Dt,pr,Fa,bs,xs,xn,ca,an=H.s==j.s?1:-1,Nr=H.c,ur=j.c;if(!Nr||!Nr[0]||!ur||!ur[0])return new le(!H.s||!j.s||(Nr?ur&&Nr[0]==ur[0]:!ur)?NaN:Nr&&Nr[0]==0||!ur?an*0:an/0);for(Qt=new le(an),Xt=Qt.c=[],te=H.e-j.e,an=Q+te+1,Y||(Y=l,te=m(H.e/u)-m(j.e/u),an=an/u|0),Z=0;ur[Z]==(Nr[Z]||0);Z++);if(ur[Z]>(Nr[Z]||0)&&te--,an<0)Xt.push(1),he=!0;else{for(bs=Nr.length,xn=ur.length,Z=0,an+=2,Oe=i(Y/(ur[0]+1)),Oe>1&&(ur=I(ur,Oe,Y),Nr=I(Nr,Oe,Y),xn=ur.length,bs=Nr.length),Fa=xn,rt=Nr.slice(0,xn),Dt=rt.length;Dt<xn;rt[Dt++]=0);ca=ur.slice(),ca=[0].concat(ca),xs=ur[0],ur[1]>=Y/2&&xs++;do{if(Oe=0,X=O(ur,rt,xn,Dt),X<0){if(pr=rt[0],xn!=Dt&&(pr=pr*Y+(rt[1]||0)),Oe=i(pr/xs),Oe>1)for(Oe>=Y&&(Oe=Y-1),Ue=I(ur,Oe,Y),dt=Ue.length,Dt=rt.length;O(Ue,rt,dt,Dt)==1;)Oe--,L(Ue,xn<dt?ca:ur,dt,Y),dt=Ue.length,X=1;else Oe==0&&(X=Oe=1),Ue=ur.slice(),dt=Ue.length;if(dt<Dt&&(Ue=[0].concat(Ue)),L(rt,Ue,Dt,Y),Dt=rt.length,X==-1)for(;O(ur,rt,xn,Dt)<1;)Oe++,L(rt,xn<Dt?ca:ur,Dt,Y),Dt=rt.length}else X===0&&(Oe++,rt=[0]);Xt[Z++]=Oe,rt[0]?rt[Dt++]=Nr[Fa]||0:(rt=[Nr[Fa]],Dt=1)}while((Fa++<bs||rt[0]!=null)&&an--);he=rt[0]!=null,Xt[0]||Xt.splice(0,1)}if(Y==l){for(Z=1,an=Xt[0];an>=10;an/=10,Z++);tt(Qt,Q+(Qt.e=Z+te*u-1)+1,J,he)}else Qt.e=te,Qt.r=+he;return Qt}}();function Nt(I,O,L,H){var j,Q,J,Y,X;if(L==null?L=Ee:w(L,0,8),!I.c)return I.toString();if(j=I.c[0],J=I.e,O==null)X=_(I.c),X=H==1||H==2&&(J<=Ie||J>=Qe)?k(X,J):N(X,J,"0");else if(I=tt(new le(I),O,L),Q=I.e,X=_(I.c),Y=X.length,H==1||H==2&&(O<=Q||Q<=Ie)){for(;Y<O;X+="0",Y++);X=k(X,Q)}else if(O-=J,X=N(X,Q,"0"),Q+1>Y){if(--O>0)for(X+=".";O--;X+="0");}else if(O+=Q-Y,O>0)for(Q+1==Y&&(X+=".");O--;X+="0");return I.s<0&&j?"-"+X:X}function Bt(I,O){for(var L,H=1,j=new le(I[0]);H<I.length;H++)if(L=new le(I[H]),L.s)O.call(j,L)&&(j=L);else{j=L;break}return j}function et(I,O,L){for(var H=1,j=O.length;!O[--j];O.pop());for(j=O[0];j>=10;j/=10,H++);return(L=H+L*u-1)>me?I.c=I.e=null:L<Ne?I.c=[I.e=0]:(I.e=L,I.c=O),I}q=function(){var I=/^(-?)0([xbo])(?=\w[\w.]*$)/i,O=/^([^.]+)\.$/,L=/^\.([^.]+)$/,H=/^-?(Infinity|NaN)$/,j=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(Q,J,Y,X){var te,Z=Y?J:J.replace(j,"");if(H.test(Z))Q.s=isNaN(Z)?null:Z<0?-1:1;else{if(!Y&&(Z=Z.replace(I,function(he,Oe,Ue){return te=(Ue=Ue.toLowerCase())=="x"?16:Ue=="b"?2:8,!X||X==te?Oe:he}),X&&(te=X,Z=Z.replace(O,"$1").replace(L,"0.$1")),J!=Z))return new le(Z,te);if(le.DEBUG)throw Error(a+"Not a"+(X?" base "+X:"")+" number: "+J);Q.s=null}Q.c=Q.e=null}}();function tt(I,O,L,H){var j,Q,J,Y,X,te,Z,he=I.c,Oe=d;if(he){e:{for(j=1,Y=he[0];Y>=10;Y/=10,j++);if(Q=O-j,Q<0)Q+=u,J=O,X=he[te=0],Z=X/Oe[j-J-1]%10|0;else if(te=n((Q+1)/u),te>=he.length)if(H){for(;he.length<=te;he.push(0));X=Z=0,j=1,Q%=u,J=Q-u+1}else break e;else{for(X=Y=he[te],j=1;Y>=10;Y/=10,j++);Q%=u,J=Q-u+j,Z=J<0?0:X/Oe[j-J-1]%10|0}if(H=H||O<0||he[te+1]!=null||(J<0?X:X%Oe[j-J-1]),H=L<4?(Z||H)&&(L==0||L==(I.s<0?3:2)):Z>5||Z==5&&(L==4||H||L==6&&(Q>0?J>0?X/Oe[j-J]:0:he[te-1])%10&1||L==(I.s<0?8:7)),O<1||!he[0])return he.length=0,H?(O-=I.e+1,he[0]=Oe[(u-O%u)%u],I.e=-O||0):he[0]=I.e=0,I;if(Q==0?(he.length=te,Y=1,te--):(he.length=te+1,Y=Oe[u-Q],he[te]=J>0?i(X/Oe[j-J]%Oe[J])*Y:0),H)for(;;)if(te==0){for(Q=1,J=he[0];J>=10;J/=10,Q++);for(J=he[0]+=Y,Y=1;J>=10;J/=10,Y++);Q!=Y&&(I.e++,he[0]==l&&(he[0]=1));break}else{if(he[te]+=Y,he[te]!=l)break;he[te--]=0,Y=1}for(Q=he.length;he[--Q]===0;he.pop());}I.e>me?I.c=I.e=null:I.e<Ne&&(I.c=[I.e=0])}return I}function ft(I){var O,L=I.e;return L===null?I.toString():(O=_(I.c),O=L<=Ie||L>=Qe?k(O,L):N(O,L,"0"),I.s<0?"-"+O:O)}return U.absoluteValue=U.abs=function(){var I=new le(this);return I.s<0&&(I.s=1),I},U.comparedTo=function(I,O){return E(this,new le(I,O))},U.decimalPlaces=U.dp=function(I,O){var L,H,j,Q=this;if(I!=null)return w(I,0,g),O==null?O=Ee:w(O,0,8),tt(new le(Q),I+Q.e+1,O);if(!(L=Q.c))return null;if(H=((j=L.length-1)-m(this.e/u))*u,j=L[j])for(;j%10==0;j/=10,H--);return H<0&&(H=0),H},U.dividedBy=U.div=function(I,O){return B(this,new le(I,O),ae,Ee)},U.dividedToIntegerBy=U.idiv=function(I,O){return B(this,new le(I,O),0,1)},U.exponentiatedBy=U.pow=function(I,O){var L,H,j,Q,J,Y,X,te,Z,he=this;if(I=new le(I),I.c&&!I.isInteger())throw Error(a+"Exponent not an integer: "+ft(I));if(O!=null&&(O=new le(O)),Y=I.e>14,!he.c||!he.c[0]||he.c[0]==1&&!he.e&&he.c.length==1||!I.c||!I.c[0])return Z=new le(Math.pow(+ft(he),Y?2-b(I):+ft(I))),O?Z.mod(O):Z;if(X=I.s<0,O){if(O.c?!O.c[0]:!O.s)return new le(NaN);H=!X&&he.isInteger()&&O.isInteger(),H&&(he=he.mod(O))}else{if(I.e>9&&(he.e>0||he.e<-1||(he.e==0?he.c[0]>1||Y&&he.c[1]>=24e7:he.c[0]<8e13||Y&&he.c[0]<=9999975e7)))return Q=he.s<0&&b(I)?-0:0,he.e>-1&&(Q=1/Q),new le(X?1/Q:Q);Je&&(Q=n(Je/u+2))}for(Y?(L=new le(.5),X&&(I.s=1),te=b(I)):(j=Math.abs(+ft(I)),te=j%2),Z=new le(oe);;){if(te){if(Z=Z.times(he),!Z.c)break;Q?Z.c.length>Q&&(Z.c.length=Q):H&&(Z=Z.mod(O))}if(j){if(j=i(j/2),j===0)break;te=j%2}else if(I=I.times(L),tt(I,I.e+1,1),I.e>14)te=b(I);else{if(j=+ft(I),j===0)break;te=j%2}he=he.times(he),Q?he.c&&he.c.length>Q&&(he.c.length=Q):H&&(he=he.mod(O))}return H?Z:(X&&(Z=oe.div(Z)),O?Z.mod(O):Q?tt(Z,Je,Ee,J):Z)},U.integerValue=function(I){var O=new le(this);return I==null?I=Ee:w(I,0,8),tt(O,O.e+1,I)},U.isEqualTo=U.eq=function(I,O){return E(this,new le(I,O))===0},U.isFinite=function(){return!!this.c},U.isGreaterThan=U.gt=function(I,O){return E(this,new le(I,O))>0},U.isGreaterThanOrEqualTo=U.gte=function(I,O){return(O=E(this,new le(I,O)))===1||O===0},U.isInteger=function(){return!!this.c&&m(this.e/u)>this.c.length-2},U.isLessThan=U.lt=function(I,O){return E(this,new le(I,O))<0},U.isLessThanOrEqualTo=U.lte=function(I,O){return(O=E(this,new le(I,O)))===-1||O===0},U.isNaN=function(){return!this.s},U.isNegative=function(){return this.s<0},U.isPositive=function(){return this.s>0},U.isZero=function(){return!!this.c&&this.c[0]==0},U.minus=function(I,O){var L,H,j,Q,J=this,Y=J.s;if(I=new le(I,O),O=I.s,!Y||!O)return new le(NaN);if(Y!=O)return I.s=-O,J.plus(I);var X=J.e/u,te=I.e/u,Z=J.c,he=I.c;if(!X||!te){if(!Z||!he)return Z?(I.s=-O,I):new le(he?J:NaN);if(!Z[0]||!he[0])return he[0]?(I.s=-O,I):new le(Z[0]?J:Ee==3?-0:0)}if(X=m(X),te=m(te),Z=Z.slice(),Y=X-te){for((Q=Y<0)?(Y=-Y,j=Z):(te=X,j=he),j.reverse(),O=Y;O--;j.push(0));j.reverse()}else for(H=(Q=(Y=Z.length)<(O=he.length))?Y:O,Y=O=0;O<H;O++)if(Z[O]!=he[O]){Q=Z[O]<he[O];break}if(Q&&(j=Z,Z=he,he=j,I.s=-I.s),O=(H=he.length)-(L=Z.length),O>0)for(;O--;Z[L++]=0);for(O=l-1;H>Y;){if(Z[--H]<he[H]){for(L=H;L&&!Z[--L];Z[L]=O);--Z[L],Z[H]+=l}Z[H]-=he[H]}for(;Z[0]==0;Z.splice(0,1),--te);return Z[0]?et(I,Z,te):(I.s=Ee==3?-1:1,I.c=[I.e=0],I)},U.modulo=U.mod=function(I,O){var L,H,j=this;return I=new le(I,O),!j.c||!I.s||I.c&&!I.c[0]?new le(NaN):!I.c||j.c&&!j.c[0]?new le(j):(Ge==9?(H=I.s,I.s=1,L=B(j,I,0,3),I.s=H,L.s*=H):L=B(j,I,0,Ge),I=j.minus(L.times(I)),!I.c[0]&&Ge==1&&(I.s=j.s),I)},U.multipliedBy=U.times=function(I,O){var L,H,j,Q,J,Y,X,te,Z,he,Oe,Ue,dt,Qt,Xt,rt=this,Dt=rt.c,pr=(I=new le(I,O)).c;if(!Dt||!pr||!Dt[0]||!pr[0])return!rt.s||!I.s||Dt&&!Dt[0]&&!pr||pr&&!pr[0]&&!Dt?I.c=I.e=I.s=null:(I.s*=rt.s,!Dt||!pr?I.c=I.e=null:(I.c=[0],I.e=0)),I;for(H=m(rt.e/u)+m(I.e/u),I.s*=rt.s,X=Dt.length,he=pr.length,X<he&&(dt=Dt,Dt=pr,pr=dt,j=X,X=he,he=j),j=X+he,dt=[];j--;dt.push(0));for(Qt=l,Xt=h,j=he;--j>=0;){for(L=0,Oe=pr[j]%Xt,Ue=pr[j]/Xt|0,J=X,Q=j+J;Q>j;)te=Dt[--J]%Xt,Z=Dt[J]/Xt|0,Y=Ue*te+Z*Oe,te=Oe*te+Y%Xt*Xt+dt[Q]+L,L=(te/Qt|0)+(Y/Xt|0)+Ue*Z,dt[Q--]=te%Qt;dt[Q]=L}return L?++H:dt.splice(0,1),et(I,dt,H)},U.negated=function(){var I=new le(this);return I.s=-I.s||null,I},U.plus=function(I,O){var L,H=this,j=H.s;if(I=new le(I,O),O=I.s,!j||!O)return new le(NaN);if(j!=O)return I.s=-O,H.minus(I);var Q=H.e/u,J=I.e/u,Y=H.c,X=I.c;if(!Q||!J){if(!Y||!X)return new le(j/0);if(!Y[0]||!X[0])return X[0]?I:new le(Y[0]?H:j*0)}if(Q=m(Q),J=m(J),Y=Y.slice(),j=Q-J){for(j>0?(J=Q,L=X):(j=-j,L=Y),L.reverse();j--;L.push(0));L.reverse()}for(j=Y.length,O=X.length,j-O<0&&(L=X,X=Y,Y=L,O=j),j=0;O;)j=(Y[--O]=Y[O]+X[O]+j)/l|0,Y[O]=l===Y[O]?0:Y[O]%l;return j&&(Y=[j].concat(Y),++J),et(I,Y,J)},U.precision=U.sd=function(I,O){var L,H,j,Q=this;if(I!=null&&I!==!!I)return w(I,1,g),O==null?O=Ee:w(O,0,8),tt(new le(Q),I,O);if(!(L=Q.c))return null;if(j=L.length-1,H=j*u+1,j=L[j]){for(;j%10==0;j/=10,H--);for(j=L[0];j>=10;j/=10,H++);}return I&&Q.e+1>H&&(H=Q.e+1),H},U.shiftedBy=function(I){return w(I,-f,f),this.times("1e"+I)},U.squareRoot=U.sqrt=function(){var I,O,L,H,j,Q=this,J=Q.c,Y=Q.s,X=Q.e,te=ae+4,Z=new le("0.5");if(Y!==1||!J||!J[0])return new le(!Y||Y<0&&(!J||J[0])?NaN:J?Q:1/0);if(Y=Math.sqrt(+ft(Q)),Y==0||Y==1/0?(O=_(J),(O.length+X)%2==0&&(O+="0"),Y=Math.sqrt(+O),X=m((X+1)/2)-(X<0||X%2),Y==1/0?O="5e"+X:(O=Y.toExponential(),O=O.slice(0,O.indexOf("e")+1)+X),L=new le(O)):L=new le(Y+""),L.c[0]){for(X=L.e,Y=X+te,Y<3&&(Y=0);;)if(j=L,L=Z.times(j.plus(B(Q,j,te,1))),_(j.c).slice(0,Y)===(O=_(L.c)).slice(0,Y))if(L.e<X&&--Y,O=O.slice(Y-3,Y+1),O=="9999"||!H&&O=="4999"){if(!H&&(tt(j,j.e+ae+2,0),j.times(j).eq(Q))){L=j;break}te+=4,Y+=4,H=1}else{(!+O||!+O.slice(1)&&O.charAt(0)=="5")&&(tt(L,L.e+ae+2,1),I=!L.times(L).eq(Q));break}}return tt(L,L.e+ae+1,Ee,I)},U.toExponential=function(I,O){return I!=null&&(w(I,0,g),I++),Nt(this,I,O,1)},U.toFixed=function(I,O){return I!=null&&(w(I,0,g),I=I+this.e+1),Nt(this,I,O)},U.toFormat=function(I,O,L){var H,j=this;if(L==null)I!=null&&O&&typeof O=="object"?(L=O,O=null):I&&typeof I=="object"?(L=I,I=O=null):L=ut;else if(typeof L!="object")throw Error(a+"Argument not an object: "+L);if(H=j.toFixed(I,O),j.c){var Q,J=H.split("."),Y=+L.groupSize,X=+L.secondaryGroupSize,te=L.groupSeparator||"",Z=J[0],he=J[1],Oe=j.s<0,Ue=Oe?Z.slice(1):Z,dt=Ue.length;if(X&&(Q=Y,Y=X,X=Q,dt-=Q),Y>0&&dt>0){for(Q=dt%Y||Y,Z=Ue.substr(0,Q);Q<dt;Q+=Y)Z+=te+Ue.substr(Q,Y);X>0&&(Z+=te+Ue.slice(Q)),Oe&&(Z="-"+Z)}H=he?Z+(L.decimalSeparator||"")+((X=+L.fractionGroupSize)?he.replace(new RegExp("\\d{"+X+"}\\B","g"),"$&"+(L.fractionGroupSeparator||"")):he):Z}return(L.prefix||"")+H+(L.suffix||"")},U.toFraction=function(I){var O,L,H,j,Q,J,Y,X,te,Z,he,Oe,Ue=this,dt=Ue.c;if(I!=null&&(Y=new le(I),!Y.isInteger()&&(Y.c||Y.s!==1)||Y.lt(oe)))throw Error(a+"Argument "+(Y.isInteger()?"out of range: ":"not an integer: ")+ft(Y));if(!dt)return new le(Ue);for(O=new le(oe),te=L=new le(oe),H=X=new le(oe),Oe=_(dt),Q=O.e=Oe.length-Ue.e-1,O.c[0]=d[(J=Q%u)<0?u+J:J],I=!I||Y.comparedTo(O)>0?Q>0?O:te:Y,J=me,me=1/0,Y=new le(Oe),X.c[0]=0;Z=B(Y,O,0,1),j=L.plus(Z.times(H)),j.comparedTo(I)!=1;)L=H,H=j,te=X.plus(Z.times(j=te)),X=j,O=Y.minus(Z.times(j=O)),Y=j;return j=B(I.minus(L),H,0,1),X=X.plus(j.times(te)),L=L.plus(j.times(H)),X.s=te.s=Ue.s,Q=Q*2,he=B(te,H,Q,Ee).minus(Ue).abs().comparedTo(B(X,L,Q,Ee).minus(Ue).abs())<1?[te,H]:[X,L],me=J,he},U.toNumber=function(){return+ft(this)},U.toPrecision=function(I,O){return I!=null&&w(I,1,g),Nt(this,I,O,2)},U.toString=function(I){var O,L=this,H=L.s,j=L.e;return j===null?H?(O="Infinity",H<0&&(O="-"+O)):O="NaN":(I==null?O=j<=Ie||j>=Qe?k(_(L.c),j):N(_(L.c),j,"0"):I===10&&ct?(L=tt(new le(L),ae+j+1,Ee),O=N(_(L.c),L.e,"0")):(w(I,2,Xe.length,"Base"),O=ee(N(_(L.c),j,"0"),10,I,H,!0)),H<0&&L.c[0]&&(O="-"+O)),O},U.valueOf=U.toJSON=function(){return ft(this)},U._isBigNumber=!0,D!=null&&le.set(D),le}function m(D){var B=D|0;return D>0||D===B?B:B-1}function _(D){for(var B,ee,q=1,U=D.length,oe=D[0]+"";q<U;){for(B=D[q++]+"",ee=u-B.length;ee--;B="0"+B);oe+=B}for(U=oe.length;oe.charCodeAt(--U)===48;);return oe.slice(0,U+1||1)}function E(D,B){var ee,q,U=D.c,oe=B.c,ae=D.s,Ee=B.s,Ie=D.e,Qe=B.e;if(!ae||!Ee)return null;if(ee=U&&!U[0],q=oe&&!oe[0],ee||q)return ee?q?0:-Ee:ae;if(ae!=Ee)return ae;if(ee=ae<0,q=Ie==Qe,!U||!oe)return q?0:!U^ee?1:-1;if(!q)return Ie>Qe^ee?1:-1;for(Ee=(Ie=U.length)<(Qe=oe.length)?Ie:Qe,ae=0;ae<Ee;ae++)if(U[ae]!=oe[ae])return U[ae]>oe[ae]^ee?1:-1;return Ie==Qe?0:Ie>Qe^ee?1:-1}function w(D,B,ee,q){if(D<B||D>ee||D!==i(D))throw Error(a+(q||"Argument")+(typeof D=="number"?D<B||D>ee?" out of range: ":" not an integer: ":" not a primitive number: ")+String(D))}function b(D){var B=D.c.length-1;return m(D.e/u)==B&&D.c[B]%2!=0}function k(D,B){return(D.length>1?D.charAt(0)+"."+D.slice(1):D)+(B<0?"e":"e+")+B}function N(D,B,ee){var q,U;if(B<0){for(U=ee+".";++B;U+=ee);D=U+D}else if(q=D.length,++B>q){for(U=ee,B-=q;--B;U+=ee);D+=U}else B<q&&(D=D.slice(0,B)+"."+D.slice(B));return D}e=y(),e.default=e.BigNumber=e,typeof define=="function"&&define.amd?define(function(){return e}):typeof Of!="undefined"&&Of.exports?Of.exports=e:(t||(t=typeof self!="undefined"&&self?self:window),t.BigNumber=e)})(z_)});var Z_=de((DV,J_)=>{var Q_=k0(),X_=J_.exports;(function(){"use strict";function t(f){return f<10?"0"+f:f}var e=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,r=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,n,i,a={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},s;function l(f){return r.lastIndex=0,r.test(f)?'"'+f.replace(r,function(d){var h=a[d];return typeof h=="string"?h:"\\u"+("0000"+d.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+f+'"'}function u(f,d){var h,g,y,m,_=n,E,w=d[f],b=w!=null&&(w instanceof Q_||Q_.isBigNumber(w));switch(w&&typeof w=="object"&&typeof w.toJSON=="function"&&(w=w.toJSON(f)),typeof s=="function"&&(w=s.call(d,f,w)),typeof w){case"string":return b?w:l(w);case"number":return isFinite(w)?String(w):"null";case"boolean":case"null":case"bigint":return String(w);case"object":if(!w)return"null";if(n+=i,E=[],Object.prototype.toString.apply(w)==="[object Array]"){for(m=w.length,h=0;h<m;h+=1)E[h]=u(h,w)||"null";return y=E.length===0?"[]":n?`[
`+n+E.join(`,
`+n)+`
`+_+"]":"["+E.join(",")+"]",n=_,y}if(s&&typeof s=="object")for(m=s.length,h=0;h<m;h+=1)typeof s[h]=="string"&&(g=s[h],y=u(g,w),y&&E.push(l(g)+(n?": ":":")+y));else Object.keys(w).forEach(function(k){var N=u(k,w);N&&E.push(l(k)+(n?": ":":")+N)});return y=E.length===0?"{}":n?`{
`+n+E.join(`,
`+n)+`
`+_+"}":"{"+E.join(",")+"}",n=_,y}}typeof X_.stringify!="function"&&(X_.stringify=function(f,d,h){var g;if(n="",i="",typeof h=="number")for(g=0;g<h;g+=1)i+=" ";else typeof h=="string"&&(i=h);if(s=d,d&&typeof d!="function"&&(typeof d!="object"||typeof d.length!="number"))throw new Error("JSON.stringify");return u("",{"":f})})})()});var ew=de((OV,$_)=>{var Lf=null,lP=/(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])/,uP=/(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)/,cP=function(t){"use strict";var e={strict:!1,storeAsString:!1,alwaysParseAsBig:!1,useNativeBigInt:!1,protoAction:"error",constructorAction:"error"};if(t!=null){if(t.strict===!0&&(e.strict=!0),t.storeAsString===!0&&(e.storeAsString=!0),e.alwaysParseAsBig=t.alwaysParseAsBig===!0?t.alwaysParseAsBig:!1,e.useNativeBigInt=t.useNativeBigInt===!0?t.useNativeBigInt:!1,typeof t.constructorAction!="undefined")if(t.constructorAction==="error"||t.constructorAction==="ignore"||t.constructorAction==="preserve")e.constructorAction=t.constructorAction;else throw new Error(`Incorrect value for constructorAction option, must be "error", "ignore" or undefined but passed ${t.constructorAction}`);if(typeof t.protoAction!="undefined")if(t.protoAction==="error"||t.protoAction==="ignore"||t.protoAction==="preserve")e.protoAction=t.protoAction;else throw new Error(`Incorrect value for protoAction option, must be "error", "ignore" or undefined but passed ${t.protoAction}`)}var r,n,i={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},a,s=function(_){throw{name:"SyntaxError",message:_,at:r,text:a}},l=function(_){return _&&_!==n&&s("Expected '"+_+"' instead of '"+n+"'"),n=a.charAt(r),r+=1,n},u=function(){var _,E="";for(n==="-"&&(E="-",l("-"));n>="0"&&n<="9";)E+=n,l();if(n===".")for(E+=".";l()&&n>="0"&&n<="9";)E+=n;if(n==="e"||n==="E")for(E+=n,l(),(n==="-"||n==="+")&&(E+=n,l());n>="0"&&n<="9";)E+=n,l();if(_=+E,!isFinite(_))s("Bad number");else return Lf==null&&(Lf=k0()),E.length>15?e.storeAsString?E:e.useNativeBigInt?BigInt(E):new Lf(E):e.alwaysParseAsBig?e.useNativeBigInt?BigInt(_):new Lf(_):_},f=function(){var _,E,w="",b;if(n==='"')for(var k=r;l();){if(n==='"')return r-1>k&&(w+=a.substring(k,r-1)),l(),w;if(n==="\\"){if(r-1>k&&(w+=a.substring(k,r-1)),l(),n==="u"){for(b=0,E=0;E<4&&(_=parseInt(l(),16),!!isFinite(_));E+=1)b=b*16+_;w+=String.fromCharCode(b)}else if(typeof i[n]=="string")w+=i[n];else break;k=r}}s("Bad string")},d=function(){for(;n&&n<=" ";)l()},h=function(){switch(n){case"t":return l("t"),l("r"),l("u"),l("e"),!0;case"f":return l("f"),l("a"),l("l"),l("s"),l("e"),!1;case"n":return l("n"),l("u"),l("l"),l("l"),null}s("Unexpected '"+n+"'")},g,y=function(){var _=[];if(n==="["){if(l("["),d(),n==="]")return l("]"),_;for(;n;){if(_.push(g()),d(),n==="]")return l("]"),_;l(","),d()}}s("Bad array")},m=function(){var _,E=Object.create(null);if(n==="{"){if(l("{"),d(),n==="}")return l("}"),E;for(;n;){if(_=f(),d(),l(":"),e.strict===!0&&Object.hasOwnProperty.call(E,_)&&s('Duplicate key "'+_+'"'),lP.test(_)===!0?e.protoAction==="error"?s("Object contains forbidden prototype property"):e.protoAction==="ignore"?g():E[_]=g():uP.test(_)===!0?e.constructorAction==="error"?s("Object contains forbidden constructor property"):e.constructorAction==="ignore"?g():E[_]=g():E[_]=g(),d(),n==="}")return l("}"),E;l(","),d()}}s("Bad object")};return g=function(){switch(d(),n){case"{":return m();case"[":return y();case'"':return f();case"-":return u();default:return n>="0"&&n<="9"?u():h()}},function(_,E){var w;return a=_+"",r=0,n=" ",w=g(),d(),n&&s("Syntax error"),typeof E=="function"?function b(k,N){var D,B,ee=k[N];return ee&&typeof ee=="object"&&Object.keys(ee).forEach(function(q){B=b(ee,q),B!==void 0?ee[q]=B:delete ee[q]}),E.call(k,N,ee)}({"":w},""):w}};$_.exports=cP});var nw=de((LV,Pf)=>{var tw=Z_().stringify,rw=ew();Pf.exports=function(t){return{parse:rw(t),stringify:tw}};Pf.exports.parse=rw();Pf.exports.stringify=tw});var Uf=de(Ut=>{"use strict";Object.defineProperty(Ut,"__esModule",{value:!0});Ut.requestTimeout=Ut.resetIsAvailableCache=Ut.isAvailable=Ut.project=Ut.instance=Ut.HEADERS=Ut.HEADER_VALUE=Ut.HEADER_NAME=Ut.SECONDARY_HOST_ADDRESS=Ut.HOST_ADDRESS=Ut.BASE_PATH=void 0;var I0=Ho(),fP=nw();Ut.BASE_PATH="/computeMetadata/v1";Ut.HOST_ADDRESS="http://169.254.169.254";Ut.SECONDARY_HOST_ADDRESS="http://metadata.google.internal.";Ut.HEADER_NAME="Metadata-Flavor";Ut.HEADER_VALUE="Google";Ut.HEADERS=Object.freeze({[Ut.HEADER_NAME]:Ut.HEADER_VALUE});function R0(t){return t||(t=process.env.GCE_METADATA_IP||process.env.GCE_METADATA_HOST||Ut.HOST_ADDRESS),/^https?:\/\//.test(t)||(t=`http://${t}`),new URL(Ut.BASE_PATH,t).href}function dP(t){Object.keys(t).forEach(e=>{switch(e){case"params":case"property":case"headers":break;case"qs":throw new Error("'qs' is not a valid configuration option. Please use 'params' instead.");default:throw new Error(`'${e}' is not a valid configuration option.`)}})}function N0(t,e,r=3,n=!1){return M(this,null,function*(){e=e||{},typeof e=="string"&&(e={property:e});let i="";typeof e=="object"&&e.property&&(i="/"+e.property),dP(e);try{let s=yield(n?hP:I0.request)({url:`${R0()}/${t}${i}`,headers:Object.assign({},Ut.HEADERS,e.headers),retryConfig:{noResponseRetries:r},params:e.params,responseType:"text",timeout:iw()});if(s.headers[Ut.HEADER_NAME.toLowerCase()]!==Ut.HEADER_VALUE)throw new Error(`Invalid response from metadata service: incorrect ${Ut.HEADER_NAME} header.`);if(!s.data)throw new Error("Invalid response from the metadata service");if(typeof s.data=="string")try{return fP.parse(s.data)}catch(l){}return s.data}catch(a){let s=a;throw s.response&&s.response.status!==200&&(s.message=`Unsuccessful response status code. ${s.message}`),a}})}function hP(t){return M(this,null,function*(){let e=gn(qr({},t),{url:t.url.replace(R0(),R0(Ut.SECONDARY_HOST_ADDRESS))}),r=!1,n=(0,I0.request)(t).then(a=>(r=!0,a)).catch(a=>{if(r)return i;throw r=!0,a}),i=(0,I0.request)(e).then(a=>(r=!0,a)).catch(a=>{if(r)return n;throw r=!0,a});return Promise.race([n,i])})}function pP(t){return N0("instance",t)}Ut.instance=pP;function gP(t){return N0("project",t)}Ut.project=gP;function mP(){return process.env.DETECT_GCP_RETRIES?Number(process.env.DETECT_GCP_RETRIES):0}var Mf;function yP(){return M(this,null,function*(){try{return Mf===void 0&&(Mf=N0("instance",void 0,mP(),!(process.env.GCE_METADATA_IP||process.env.GCE_METADATA_HOST))),yield Mf,!0}catch(t){let e=t;if(process.env.DEBUG_AUTH&&console.info(e),e.type==="request-timeout"||e.response&&e.response.status===404)return!1;if(!(e.response&&e.response.status===404)&&(!e.code||!["EHOSTDOWN","EHOSTUNREACH","ENETUNREACH","ENOENT","ENOTFOUND","ECONNREFUSED"].includes(e.code))){let r="UNKNOWN";e.code&&(r=e.code),process.emitWarning(`received unexpected error = ${e.message} code = ${r}`,"MetadataLookupWarning")}return!1}})}Ut.isAvailable=yP;function vP(){Mf=void 0}Ut.resetIsAvailableCache=vP;function iw(){return process.env.K_SERVICE||process.env.FUNCTION_NAME?0:3e3}Ut.requestTimeout=iw});var ow=de(Ff=>{"use strict";Ff.byteLength=wP;Ff.toByteArray=CP;Ff.fromByteArray=SP;var ji=[],ti=[],_P=typeof Uint8Array!="undefined"?Uint8Array:Array,B0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(Ms=0,aw=B0.length;Ms<aw;++Ms)ji[Ms]=B0[Ms],ti[B0.charCodeAt(Ms)]=Ms;var Ms,aw;ti["-".charCodeAt(0)]=62;ti["_".charCodeAt(0)]=63;function sw(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");r===-1&&(r=e);var n=r===e?0:4-r%4;return[r,n]}function wP(t){var e=sw(t),r=e[0],n=e[1];return(r+n)*3/4-n}function EP(t,e,r){return(e+r)*3/4-r}function CP(t){var e,r=sw(t),n=r[0],i=r[1],a=new _P(EP(t,n,i)),s=0,l=i>0?n-4:n,u;for(u=0;u<l;u+=4)e=ti[t.charCodeAt(u)]<<18|ti[t.charCodeAt(u+1)]<<12|ti[t.charCodeAt(u+2)]<<6|ti[t.charCodeAt(u+3)],a[s++]=e>>16&255,a[s++]=e>>8&255,a[s++]=e&255;return i===2&&(e=ti[t.charCodeAt(u)]<<2|ti[t.charCodeAt(u+1)]>>4,a[s++]=e&255),i===1&&(e=ti[t.charCodeAt(u)]<<10|ti[t.charCodeAt(u+1)]<<4|ti[t.charCodeAt(u+2)]>>2,a[s++]=e>>8&255,a[s++]=e&255),a}function bP(t){return ji[t>>18&63]+ji[t>>12&63]+ji[t>>6&63]+ji[t&63]}function xP(t,e,r){for(var n,i=[],a=e;a<r;a+=3)n=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(t[a+2]&255),i.push(bP(n));return i.join("")}function SP(t){for(var e,r=t.length,n=r%3,i=[],a=16383,s=0,l=r-n;s<l;s+=a)i.push(xP(t,s,s+a>l?l:s+a));return n===1?(e=t[r-1],i.push(ji[e>>2]+ji[e<<4&63]+"==")):n===2&&(e=(t[r-2]<<8)+t[r-1],i.push(ji[e>>10]+ji[e>>4&63]+ji[e<<2&63]+"=")),i.join("")}});var uw=de(lw=>{(function(t){function e(){}function r(u,f){if(u=u===void 0?"utf-8":u,f=f===void 0?{fatal:!1}:f,s.indexOf(u.toLowerCase())===-1)throw new RangeError("Failed to construct 'TextDecoder': The encoding label provided ('"+u+"') is invalid.");if(f.fatal)throw Error("Failed to construct 'TextDecoder': the 'fatal' option is unsupported.")}function n(u){return Buffer.from(u.buffer,u.byteOffset,u.byteLength).toString("utf-8")}function i(u){var f=URL.createObjectURL(new Blob([u],{type:"text/plain;charset=UTF-8"}));try{var d=new XMLHttpRequest;return d.open("GET",f,!1),d.send(),d.responseText}catch(h){return a(u)}finally{URL.revokeObjectURL(f)}}function a(u){for(var f=0,d=Math.min(65536,u.length+1),h=new Uint16Array(d),g=[],y=0;;){var m=f<u.length;if(!m||y>=d-1){if(g.push(String.fromCharCode.apply(null,h.subarray(0,y))),!m)return g.join("");u=u.subarray(f),y=f=0}if(m=u[f++],(m&128)==0)h[y++]=m;else if((m&224)==192){var _=u[f++]&63;h[y++]=(m&31)<<6|_}else if((m&240)==224){_=u[f++]&63;var E=u[f++]&63;h[y++]=(m&31)<<12|_<<6|E}else if((m&248)==240){_=u[f++]&63,E=u[f++]&63;var w=u[f++]&63;m=(m&7)<<18|_<<12|E<<6|w,65535<m&&(m-=65536,h[y++]=m>>>10&1023|55296,m=56320|m&1023),h[y++]=m}}}if(t.TextEncoder&&t.TextDecoder)return!1;var s=["utf-8","utf8","unicode-1-1-utf-8"];Object.defineProperty(e.prototype,"encoding",{value:"utf-8"}),e.prototype.encode=function(u,f){if(f=f===void 0?{stream:!1}:f,f.stream)throw Error("Failed to encode: the 'stream' option is unsupported.");f=0;for(var d=u.length,h=0,g=Math.max(32,d+(d>>>1)+7),y=new Uint8Array(g>>>3<<3);f<d;){var m=u.charCodeAt(f++);if(55296<=m&&56319>=m){if(f<d){var _=u.charCodeAt(f);(_&64512)==56320&&(++f,m=((m&1023)<<10)+(_&1023)+65536)}if(55296<=m&&56319>=m)continue}if(h+4>y.length&&(g+=8,g*=1+f/u.length*2,g=g>>>3<<3,_=new Uint8Array(g),_.set(y),y=_),(m&4294967168)==0)y[h++]=m;else{if((m&4294965248)==0)y[h++]=m>>>6&31|192;else if((m&4294901760)==0)y[h++]=m>>>12&15|224,y[h++]=m>>>6&63|128;else if((m&4292870144)==0)y[h++]=m>>>18&7|240,y[h++]=m>>>12&63|128,y[h++]=m>>>6&63|128;else continue;y[h++]=m&63|128}}return y.slice?y.slice(0,h):y.subarray(0,h)},Object.defineProperty(r.prototype,"encoding",{value:"utf-8"}),Object.defineProperty(r.prototype,"fatal",{value:!1}),Object.defineProperty(r.prototype,"ignoreBOM",{value:!1});var l=a;typeof Buffer=="function"&&Buffer.from?l=n:typeof Blob=="function"&&typeof URL=="function"&&typeof URL.createObjectURL=="function"&&(l=i),r.prototype.decode=function(u,f){if(f=f===void 0?{stream:!1}:f,f.stream)throw Error("Failed to decode: the 'stream' option is unsupported.");return u=u instanceof Uint8Array?u:u.buffer instanceof ArrayBuffer?new Uint8Array(u.buffer):new Uint8Array(u),l(u)},t.TextEncoder=e,t.TextDecoder=r})(typeof window!="undefined"?window:typeof global!="undefined"?global:lw)});var cw=de(qf=>{"use strict";Object.defineProperty(qf,"__esModule",{value:!0});qf.BrowserCrypto=void 0;var Yo=ow();typeof process=="undefined"&&typeof TextEncoder=="undefined"&&uw();var TP=Wo(),mu=class{constructor(){if(typeof window=="undefined"||window.crypto===void 0||window.crypto.subtle===void 0)throw new Error("SubtleCrypto not found. Make sure it's an https:// website.")}sha256DigestBase64(e){return M(this,null,function*(){let r=new TextEncoder().encode(e),n=yield window.crypto.subtle.digest("SHA-256",r);return Yo.fromByteArray(new Uint8Array(n))})}randomBytesBase64(e){let r=new Uint8Array(e);return window.crypto.getRandomValues(r),Yo.fromByteArray(r)}static padBase64(e){for(;e.length%4!=0;)e+="=";return e}verify(e,r,n){return M(this,null,function*(){let i={name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},a=new TextEncoder().encode(r),s=Yo.toByteArray(mu.padBase64(n)),l=yield window.crypto.subtle.importKey("jwk",e,i,!0,["verify"]);return yield window.crypto.subtle.verify(i,l,s,a)})}sign(e,r){return M(this,null,function*(){let n={name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},i=new TextEncoder().encode(r),a=yield window.crypto.subtle.importKey("jwk",e,n,!0,["sign"]),s=yield window.crypto.subtle.sign(n,a,i);return Yo.fromByteArray(new Uint8Array(s))})}decodeBase64StringUtf8(e){let r=Yo.toByteArray(mu.padBase64(e));return new TextDecoder().decode(r)}encodeBase64StringUtf8(e){let r=new TextEncoder().encode(e);return Yo.fromByteArray(r)}sha256DigestHex(e){return M(this,null,function*(){let r=new TextEncoder().encode(e),n=yield window.crypto.subtle.digest("SHA-256",r);return(0,TP.fromArrayBufferToHex)(n)})}signWithHmacSha256(e,r){return M(this,null,function*(){let n=typeof e=="string"?e:String.fromCharCode(...new Uint16Array(e)),i=new TextEncoder,a=yield window.crypto.subtle.importKey("raw",i.encode(n),{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]);return window.crypto.subtle.sign("HMAC",a,i.encode(r))})}};qf.BrowserCrypto=mu});var dw=de(Gf=>{"use strict";Object.defineProperty(Gf,"__esModule",{value:!0});Gf.NodeCrypto=void 0;var zo=require("crypto"),fw=class{sha256DigestBase64(e){return M(this,null,function*(){return zo.createHash("sha256").update(e).digest("base64")})}randomBytesBase64(e){return zo.randomBytes(e).toString("base64")}verify(e,r,n){return M(this,null,function*(){let i=zo.createVerify("sha256");return i.update(r),i.end(),i.verify(e,n,"base64")})}sign(e,r){return M(this,null,function*(){let n=zo.createSign("RSA-SHA256");return n.update(r),n.end(),n.sign(e,"base64")})}decodeBase64StringUtf8(e){return Buffer.from(e,"base64").toString("utf-8")}encodeBase64StringUtf8(e){return Buffer.from(e,"utf-8").toString("base64")}sha256DigestHex(e){return M(this,null,function*(){return zo.createHash("sha256").update(e).digest("hex")})}signWithHmacSha256(e,r){return M(this,null,function*(){let n=typeof e=="string"?e:kP(e);return AP(zo.createHmac("sha256",n).update(r).digest())})}};Gf.NodeCrypto=fw;function AP(t){return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}function kP(t){return Buffer.from(t)}});var Wo=de(Za=>{"use strict";Object.defineProperty(Za,"__esModule",{value:!0});Za.fromArrayBufferToHex=Za.hasBrowserCrypto=Za.createCrypto=void 0;var IP=cw(),RP=dw();function NP(){return hw()?new IP.BrowserCrypto:new RP.NodeCrypto}Za.createCrypto=NP;function hw(){return typeof window!="undefined"&&typeof window.crypto!="undefined"&&typeof window.crypto.subtle!="undefined"}Za.hasBrowserCrypto=hw;function BP(t){return Array.from(new Uint8Array(t)).map(r=>r.toString(16).padStart(2,"0")).join("")}Za.fromArrayBufferToHex=BP});var pw=de(Vf=>{"use strict";Object.defineProperty(Vf,"__esModule",{value:!0});Vf.validate=void 0;function DP(t){let e=[{invalid:"uri",expected:"url"},{invalid:"json",expected:"data"},{invalid:"qs",expected:"params"}];for(let r of e)if(t[r.invalid]){let n=`'${r.invalid}' is not a valid configuration option. Please use '${r.expected}' instead. This library is using Axios for requests. Please see https://github.com/axios/axios to learn more about the valid request options.`;throw new Error(n)}}Vf.validate=DP});var gw=de((jV,OP)=>{OP.exports={_args:[["google-auth-library@8.0.2","/home/runner/work/obsidian-google-calendar/obsidian-google-calendar"]],_from:"google-auth-library@8.0.2",_id:"google-auth-library@8.0.2",_inBundle:!1,_integrity:"sha512-HoG+nWFAThLovKpvcbYzxgn+nBJPTfAwtq0GxPN821nOO+21+8oP7MoEHfd1sbDulUFFGfcjJr2CnJ4YssHcyg==",_location:"/google-auth-library",_phantomChildren:{},_requested:{type:"version",registry:!0,raw:"google-auth-library@8.0.2",name:"google-auth-library",escapedName:"google-auth-library",rawSpec:"8.0.2",saveSpec:null,fetchSpec:"8.0.2"},_requiredBy:["/"],_resolved:"https://registry.npmjs.org/google-auth-library/-/google-auth-library-8.0.2.tgz",_spec:"8.0.2",_where:"/home/runner/work/obsidian-google-calendar/obsidian-google-calendar",author:{name:"Google Inc."},bugs:{url:"https://github.com/googleapis/google-auth-library-nodejs/issues"},dependencies:{arrify:"^2.0.0","base64-js":"^1.3.0","ecdsa-sig-formatter":"^1.0.11","fast-text-encoding":"^1.0.0",gaxios:"^5.0.0","gcp-metadata":"^5.0.0",gtoken:"^5.3.2",jws:"^4.0.0","lru-cache":"^6.0.0"},description:"Google APIs Authentication Client Library for Node.js",devDependencies:{"@compodoc/compodoc":"^1.1.7","@types/base64-js":"^1.2.5","@types/chai":"^4.1.7","@types/jws":"^3.1.0","@types/lru-cache":"^5.0.0","@types/mocha":"^8.0.0","@types/mv":"^2.1.0","@types/ncp":"^2.0.1","@types/node":"^16.0.0","@types/sinon":"^10.0.0","@types/tmp":"^0.2.0","assert-rejects":"^1.0.0",c8:"^7.0.0",chai:"^4.2.0",codecov:"^3.0.2",execa:"^5.0.0",gts:"^3.1.0","is-docker":"^2.0.0",karma:"^6.0.0","karma-chrome-launcher":"^3.0.0","karma-coverage":"^2.0.0","karma-firefox-launcher":"^2.0.0","karma-mocha":"^2.0.0","karma-sourcemap-loader":"^0.3.7","karma-webpack":"^5.0.0",keypair:"^1.0.4",linkinator:"^3.0.3",mocha:"^9.2.2",mv:"^2.1.1",ncp:"^2.0.0",nock:"^13.0.0","null-loader":"^4.0.0",puppeteer:"^13.0.0",sinon:"^13.0.0",tmp:"^0.2.0","ts-loader":"^8.0.0",typescript:"^4.6.3",webpack:"^5.21.2","webpack-cli":"^4.0.0"},engines:{node:">=12"},files:["build/src","!build/src/**/*.map"],homepage:"https://github.com/googleapis/google-auth-library-nodejs#readme",keywords:["google","api","google apis","client","client library"],license:"Apache-2.0",main:"./build/src/index.js",name:"google-auth-library",repository:{type:"git",url:"git+https://github.com/googleapis/google-auth-library-nodejs.git"},scripts:{"browser-test":"karma start",clean:"gts clean",compile:"tsc -p .",docs:"compodoc src/","docs-test":"linkinator docs",fix:"gts fix",lint:"gts check",precompile:"gts clean","predocs-test":"npm run docs",prelint:"cd samples; npm link ../; npm install",prepare:"npm run compile","presystem-test":"npm run compile",pretest:"npm run compile","samples-setup":"cd samples/ && npm link ../ && npm run setup && cd ../","samples-test":"cd samples/ && npm link ../ && npm test && cd ../","system-test":"mocha build/system-test --timeout 60000",test:"c8 mocha build/test",webpack:"webpack"},types:"./build/src/index.d.ts",version:"8.0.2"}});var yu=de(jf=>{"use strict";Object.defineProperty(jf,"__esModule",{value:!0});jf.DefaultTransporter=void 0;var mw=Ho(),LP=pw(),yw=gw(),vw="google-api-nodejs-client",Qo=class{configure(e={}){if(e.headers=e.headers||{},typeof window=="undefined"){let r=e.headers["User-Agent"];r?r.includes(`${vw}/`)||(e.headers["User-Agent"]=`${r} ${Qo.USER_AGENT}`):e.headers["User-Agent"]=Qo.USER_AGENT;let n=`auth/${yw.version}`;if(e.headers["x-goog-api-client"]&&!e.headers["x-goog-api-client"].includes(n))e.headers["x-goog-api-client"]=`${e.headers["x-goog-api-client"]} ${n}`;else if(!e.headers["x-goog-api-client"]){let i=process.version.replace(/^v/,"");e.headers["x-goog-api-client"]=`gl-node/${i} ${n}`}}return e}request(e,r){e=this.configure(e);try{(0,LP.validate)(e)}catch(n){if(r)return r(n);throw n}if(r)(0,mw.request)(e).then(n=>{r(null,n)},n=>{r(this.processError(n))});else return(0,mw.request)(e).catch(n=>{throw this.processError(n)})}processError(e){let r=e.response,n=e,i=r?r.data:null;return r&&i&&i.error&&r.status!==200?typeof i.error=="string"?(n.message=i.error,n.code=r.status.toString()):Array.isArray(i.error.errors)?(n.message=i.error.errors.map(a=>a.message).join(`
`),n.code=i.error.code,n.errors=i.error.errors):(n.message=i.error.message,n.code=i.error.code||r.status):r&&r.status>=400&&(n.message=i,n.code=r.status.toString()),n}};jf.DefaultTransporter=Qo;Qo.USER_AGENT=`${vw}/${yw.version}`});var ww=de((HV,_w)=>{"use strict";var PP=t=>t==null?[]:Array.isArray(t)?t:typeof t=="string"?[t]:typeof t[Symbol.iterator]=="function"?[...t]:[t];_w.exports=PP});var Xo=de((D0,Cw)=>{var Kf=require("buffer"),Ki=Kf.Buffer;function Ew(t,e){for(var r in t)e[r]=t[r]}Ki.from&&Ki.alloc&&Ki.allocUnsafe&&Ki.allocUnsafeSlow?Cw.exports=Kf:(Ew(Kf,D0),D0.Buffer=Us);function Us(t,e,r){return Ki(t,e,r)}Us.prototype=Object.create(Ki.prototype);Ew(Ki,Us);Us.from=function(t,e,r){if(typeof t=="number")throw new TypeError("Argument must not be a number");return Ki(t,e,r)};Us.alloc=function(t,e,r){if(typeof t!="number")throw new TypeError("Argument must be a number");var n=Ki(t);return e!==void 0?typeof r=="string"?n.fill(e,r):n.fill(e):n.fill(0),n};Us.allocUnsafe=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return Ki(t)};Us.allocUnsafeSlow=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return Kf.SlowBuffer(t)}});var xw=de((YV,bw)=>{"use strict";function O0(t){var e=(t/8|0)+(t%8==0?0:1);return e}var MP={ES256:O0(256),ES384:O0(384),ES512:O0(521)};function UP(t){var e=MP[t];if(e)return e;throw new Error('Unknown algorithm "'+t+'"')}bw.exports=UP});var L0=de((WV,Rw)=>{"use strict";var Hf=Xo().Buffer,Sw=xw(),Yf=128,Tw=0,FP=32,qP=16,GP=2,Aw=qP|FP|Tw<<6,Wf=GP|Tw<<6;function VP(t){return t.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function kw(t){if(Hf.isBuffer(t))return t;if(typeof t=="string")return Hf.from(t,"base64");throw new TypeError("ECDSA signature must be a Base64 string or a Buffer")}function jP(t,e){t=kw(t);var r=Sw(e),n=r+1,i=t.length,a=0;if(t[a++]!==Aw)throw new Error('Could not find expected "seq"');var s=t[a++];if(s===(Yf|1)&&(s=t[a++]),i-a<s)throw new Error('"seq" specified length of "'+s+'", only "'+(i-a)+'" remaining');if(t[a++]!==Wf)throw new Error('Could not find expected "int" for "r"');var l=t[a++];if(i-a-2<l)throw new Error('"r" specified length of "'+l+'", only "'+(i-a-2)+'" available');if(n<l)throw new Error('"r" specified length of "'+l+'", max of "'+n+'" is acceptable');var u=a;if(a+=l,t[a++]!==Wf)throw new Error('Could not find expected "int" for "s"');var f=t[a++];if(i-a!==f)throw new Error('"s" specified length of "'+f+'", expected "'+(i-a)+'"');if(n<f)throw new Error('"s" specified length of "'+f+'", max of "'+n+'" is acceptable');var d=a;if(a+=f,a!==i)throw new Error('Expected to consume entire buffer, but "'+(i-a)+'" bytes remain');var h=r-l,g=r-f,y=Hf.allocUnsafe(h+l+g+f);for(a=0;a<h;++a)y[a]=0;t.copy(y,a,u+Math.max(-h,0),u+l),a=r;for(var m=a;a<m+g;++a)y[a]=0;return t.copy(y,a,d+Math.max(-g,0),d+f),y=y.toString("base64"),y=VP(y),y}function Iw(t,e,r){for(var n=0;e+n<r&&t[e+n]===0;)++n;var i=t[e+n]>=Yf;return i&&--n,n}function KP(t,e){t=kw(t);var r=Sw(e),n=t.length;if(n!==r*2)throw new TypeError('"'+e+'" signatures must be "'+r*2+'" bytes, saw "'+n+'"');var i=Iw(t,0,r),a=Iw(t,r,t.length),s=r-i,l=r-a,u=1+1+s+1+1+l,f=u<Yf,d=Hf.allocUnsafe((f?2:3)+u),h=0;return d[h++]=Aw,f?d[h++]=u:(d[h++]=Yf|1,d[h++]=u&255),d[h++]=Wf,d[h++]=s,i<0?(d[h++]=0,h+=t.copy(d,h,0,r)):h+=t.copy(d,h,i,r),d[h++]=Wf,d[h++]=l,a<0?(d[h++]=0,t.copy(d,h,r)):t.copy(d,h,r+a),d}Rw.exports={derToJose:jP,joseToDer:KP}});var vu=de(zf=>{"use strict";Object.defineProperty(zf,"__esModule",{value:!0});zf.AuthClient=void 0;var HP=require("events"),YP=yu(),Nw=class extends HP.EventEmitter{constructor(){super(...arguments);this.transporter=new YP.DefaultTransporter,this.credentials={},this.eagerRefreshThresholdMillis=5*60*1e3,this.forceRefreshOnFailure=!1}setCredentials(e){this.credentials=e}addSharedMetadataHeaders(e){return!e["x-goog-user-project"]&&this.quotaProjectId&&(e["x-goog-user-project"]=this.quotaProjectId),e}};zf.AuthClient=Nw});var P0=de(Qf=>{"use strict";Object.defineProperty(Qf,"__esModule",{value:!0});Qf.LoginTicket=void 0;var Bw=class{constructor(e,r){this.envelope=e,this.payload=r}getEnvelope(){return this.envelope}getPayload(){return this.payload}getUserId(){let e=this.getPayload();return e&&e.sub?e.sub:null}getAttributes(){return{envelope:this.getEnvelope(),payload:this.getPayload()}}};Qf.LoginTicket=Bw});var Fs=de(Hi=>{"use strict";Object.defineProperty(Hi,"__esModule",{value:!0});Hi.OAuth2Client=Hi.CertificateFormat=Hi.CodeChallengeMethod=void 0;var Xf=require("querystring"),WP=require("stream"),zP=L0(),M0=Wo(),QP=vu(),XP=P0(),JP;(function(t){t.Plain="plain",t.S256="S256"})(JP=Hi.CodeChallengeMethod||(Hi.CodeChallengeMethod={}));var $a;(function(t){t.PEM="PEM",t.JWK="JWK"})($a=Hi.CertificateFormat||(Hi.CertificateFormat={}));var rr=class extends QP.AuthClient{constructor(e,r,n){super();this.certificateCache={},this.certificateExpiry=null,this.certificateCacheFormat=$a.PEM,this.refreshTokenPromises=new Map;let i=e&&typeof e=="object"?e:{clientId:e,clientSecret:r,redirectUri:n};this._clientId=i.clientId,this._clientSecret=i.clientSecret,this.redirectUri=i.redirectUri,this.eagerRefreshThresholdMillis=i.eagerRefreshThresholdMillis||5*60*1e3,this.forceRefreshOnFailure=!!i.forceRefreshOnFailure}generateAuthUrl(e={}){if(e.code_challenge_method&&!e.code_challenge)throw new Error("If a code_challenge_method is provided, code_challenge must be included.");return e.response_type=e.response_type||"code",e.client_id=e.client_id||this._clientId,e.redirect_uri=e.redirect_uri||this.redirectUri,e.scope instanceof Array&&(e.scope=e.scope.join(" ")),rr.GOOGLE_OAUTH2_AUTH_BASE_URL_+"?"+Xf.stringify(e)}generateCodeVerifier(){throw new Error("generateCodeVerifier is removed, please use generateCodeVerifierAsync instead.")}generateCodeVerifierAsync(){return M(this,null,function*(){let e=(0,M0.createCrypto)(),n=e.randomBytesBase64(96).replace(/\+/g,"~").replace(/=/g,"_").replace(/\//g,"-"),a=(yield e.sha256DigestBase64(n)).split("=")[0].replace(/\+/g,"-").replace(/\//g,"_");return{codeVerifier:n,codeChallenge:a}})}getToken(e,r){let n=typeof e=="string"?{code:e}:e;if(r)this.getTokenAsync(n).then(i=>r(null,i.tokens,i.res),i=>r(i,null,i.response));else return this.getTokenAsync(n)}getTokenAsync(e){return M(this,null,function*(){let r=rr.GOOGLE_OAUTH2_TOKEN_URL_,n={code:e.code,client_id:e.client_id||this._clientId,client_secret:this._clientSecret,redirect_uri:e.redirect_uri||this.redirectUri,grant_type:"authorization_code",code_verifier:e.codeVerifier},i=yield this.transporter.request({method:"POST",url:r,data:Xf.stringify(n),headers:{"Content-Type":"application/x-www-form-urlencoded"}}),a=i.data;return i.data&&i.data.expires_in&&(a.expiry_date=new Date().getTime()+i.data.expires_in*1e3,delete a.expires_in),this.emit("tokens",a),{tokens:a,res:i}})}refreshToken(e){return M(this,null,function*(){if(!e)return this.refreshTokenNoCache(e);if(this.refreshTokenPromises.has(e))return this.refreshTokenPromises.get(e);let r=this.refreshTokenNoCache(e).then(n=>(this.refreshTokenPromises.delete(e),n),n=>{throw this.refreshTokenPromises.delete(e),n});return this.refreshTokenPromises.set(e,r),r})}refreshTokenNoCache(e){return M(this,null,function*(){if(!e)throw new Error("No refresh token is set.");let r=rr.GOOGLE_OAUTH2_TOKEN_URL_,n={refresh_token:e,client_id:this._clientId,client_secret:this._clientSecret,grant_type:"refresh_token"},i=yield this.transporter.request({method:"POST",url:r,data:Xf.stringify(n),headers:{"Content-Type":"application/x-www-form-urlencoded"}}),a=i.data;return i.data&&i.data.expires_in&&(a.expiry_date=new Date().getTime()+i.data.expires_in*1e3,delete a.expires_in),this.emit("tokens",a),{tokens:a,res:i}})}refreshAccessToken(e){if(e)this.refreshAccessTokenAsync().then(r=>e(null,r.credentials,r.res),e);else return this.refreshAccessTokenAsync()}refreshAccessTokenAsync(){return M(this,null,function*(){let e=yield this.refreshToken(this.credentials.refresh_token),r=e.tokens;return r.refresh_token=this.credentials.refresh_token,this.credentials=r,{credentials:this.credentials,res:e.res}})}getAccessToken(e){if(e)this.getAccessTokenAsync().then(r=>e(null,r.token,r.res),e);else return this.getAccessTokenAsync()}getAccessTokenAsync(){return M(this,null,function*(){if(!this.credentials.access_token||this.isTokenExpiring()){if(!this.credentials.refresh_token)if(this.refreshHandler){let n=yield this.processAndValidateRefreshHandler();if(n==null?void 0:n.access_token)return this.setCredentials(n),{token:this.credentials.access_token}}else throw new Error("No refresh token or refresh handler callback is set.");let r=yield this.refreshAccessTokenAsync();if(!r.credentials||r.credentials&&!r.credentials.access_token)throw new Error("Could not refresh access token.");return{token:r.credentials.access_token,res:r.res}}else return{token:this.credentials.access_token}})}getRequestHeaders(e){return M(this,null,function*(){return(yield this.getRequestMetadataAsync(e)).headers})}getRequestMetadataAsync(e){return M(this,null,function*(){let r=this.credentials;if(!r.access_token&&!r.refresh_token&&!this.apiKey&&!this.refreshHandler)throw new Error("No access, refresh token, API key or refresh handler callback is set.");if(r.access_token&&!this.isTokenExpiring()){r.token_type=r.token_type||"Bearer";let l={Authorization:r.token_type+" "+r.access_token};return{headers:this.addSharedMetadataHeaders(l)}}if(this.refreshHandler){let l=yield this.processAndValidateRefreshHandler();if(l==null?void 0:l.access_token){this.setCredentials(l);let u={Authorization:"Bearer "+this.credentials.access_token};return{headers:this.addSharedMetadataHeaders(u)}}}if(this.apiKey)return{headers:{"X-Goog-Api-Key":this.apiKey}};let n=null,i=null;try{n=yield this.refreshToken(r.refresh_token),i=n.tokens}catch(l){let u=l;throw u.response&&(u.response.status===403||u.response.status===404)&&(u.message=`Could not refresh access token: ${u.message}`),u}let a=this.credentials;a.token_type=a.token_type||"Bearer",i.refresh_token=a.refresh_token,this.credentials=i;let s={Authorization:a.token_type+" "+i.access_token};return{headers:this.addSharedMetadataHeaders(s),res:n.res}})}static getRevokeTokenUrl(e){let r=Xf.stringify({token:e});return`${rr.GOOGLE_OAUTH2_REVOKE_URL_}?${r}`}revokeToken(e,r){let n={url:rr.getRevokeTokenUrl(e),method:"POST"};if(r)this.transporter.request(n).then(i=>r(null,i),r);else return this.transporter.request(n)}revokeCredentials(e){if(e)this.revokeCredentialsAsync().then(r=>e(null,r),e);else return this.revokeCredentialsAsync()}revokeCredentialsAsync(){return M(this,null,function*(){let e=this.credentials.access_token;if(this.credentials={},e)return this.revokeToken(e);throw new Error("No access token to revoke.")})}request(e,r){if(r)this.requestAsync(e).then(n=>r(null,n),n=>r(n,n.response));else return this.requestAsync(e)}requestAsync(e,r=!1){return M(this,null,function*(){let n;try{let i=yield this.getRequestMetadataAsync(e.url);e.headers=e.headers||{},i.headers&&i.headers["x-goog-user-project"]&&(e.headers["x-goog-user-project"]=i.headers["x-goog-user-project"]),i.headers&&i.headers.Authorization&&(e.headers.Authorization=i.headers.Authorization),this.apiKey&&(e.headers["X-Goog-Api-Key"]=this.apiKey),n=yield this.transporter.request(e)}catch(i){let a=i.response;if(a){let s=a.status,l=this.credentials&&this.credentials.access_token&&this.credentials.refresh_token&&(!this.credentials.expiry_date||this.forceRefreshOnFailure),u=this.credentials&&this.credentials.access_token&&!this.credentials.refresh_token&&(!this.credentials.expiry_date||this.forceRefreshOnFailure)&&this.refreshHandler,f=a.config.data instanceof WP.Readable,d=s===401||s===403;if(!r&&d&&!f&&l)return yield this.refreshAccessTokenAsync(),this.requestAsync(e,!0);if(!r&&d&&!f&&u){let h=yield this.processAndValidateRefreshHandler();return(h==null?void 0:h.access_token)&&this.setCredentials(h),this.requestAsync(e,!0)}}throw i}return n})}verifyIdToken(e,r){if(r&&typeof r!="function")throw new Error("This method accepts an options object as the first parameter, which includes the idToken, audience, and maxExpiry.");if(r)this.verifyIdTokenAsync(e).then(n=>r(null,n),r);else return this.verifyIdTokenAsync(e)}verifyIdTokenAsync(e){return M(this,null,function*(){if(!e.idToken)throw new Error("The verifyIdToken method requires an ID Token");let r=yield this.getFederatedSignonCertsAsync();return yield this.verifySignedJwtWithCertsAsync(e.idToken,r.certs,e.audience,rr.ISSUERS_,e.maxExpiry)})}getTokenInfo(e){return M(this,null,function*(){let{data:r}=yield this.transporter.request({method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:`Bearer ${e}`},url:rr.GOOGLE_TOKEN_INFO_URL}),n=Object.assign({expiry_date:new Date().getTime()+r.expires_in*1e3,scopes:r.scope.split(" ")},r);return delete n.expires_in,delete n.scope,n})}getFederatedSignonCerts(e){if(e)this.getFederatedSignonCertsAsync().then(r=>e(null,r.certs,r.res),e);else return this.getFederatedSignonCertsAsync()}getFederatedSignonCertsAsync(){return M(this,null,function*(){let e=new Date().getTime(),r=(0,M0.hasBrowserCrypto)()?$a.JWK:$a.PEM;if(this.certificateExpiry&&e<this.certificateExpiry.getTime()&&this.certificateCacheFormat===r)return{certs:this.certificateCache,format:r};let n,i;switch(r){case $a.PEM:i=rr.GOOGLE_OAUTH2_FEDERATED_SIGNON_PEM_CERTS_URL_;break;case $a.JWK:i=rr.GOOGLE_OAUTH2_FEDERATED_SIGNON_JWK_CERTS_URL_;break;default:throw new Error(`Unsupported certificate format ${r}`)}try{n=yield this.transporter.request({url:i})}catch(f){throw f instanceof Error&&(f.message=`Failed to retrieve verification certificates: ${f.message}`),f}let a=n?n.headers["cache-control"]:void 0,s=-1;if(a){let d=new RegExp("max-age=([0-9]*)").exec(a);d&&d.length===2&&(s=Number(d[1])*1e3)}let l={};switch(r){case $a.PEM:l=n.data;break;case $a.JWK:for(let f of n.data.keys)l[f.kid]=f;break;default:throw new Error(`Unsupported certificate format ${r}`)}let u=new Date;return this.certificateExpiry=s===-1?null:new Date(u.getTime()+s),this.certificateCache=l,this.certificateCacheFormat=r,{certs:l,format:r,res:n}})}getIapPublicKeys(e){if(e)this.getIapPublicKeysAsync().then(r=>e(null,r.pubkeys,r.res),e);else return this.getIapPublicKeysAsync()}getIapPublicKeysAsync(){return M(this,null,function*(){let e,r=rr.GOOGLE_OAUTH2_IAP_PUBLIC_KEY_URL_;try{e=yield this.transporter.request({url:r})}catch(n){throw n instanceof Error&&(n.message=`Failed to retrieve verification certificates: ${n.message}`),n}return{pubkeys:e.data,res:e}})}verifySignedJwtWithCerts(){throw new Error("verifySignedJwtWithCerts is removed, please use verifySignedJwtWithCertsAsync instead.")}verifySignedJwtWithCertsAsync(e,r,n,i,a){return M(this,null,function*(){let s=(0,M0.createCrypto)();a||(a=rr.MAX_TOKEN_LIFETIME_SECS_);let l=e.split(".");if(l.length!==3)throw new Error("Wrong number of segments in token: "+e);let u=l[0]+"."+l[1],f=l[2],d,h;try{d=JSON.parse(s.decodeBase64StringUtf8(l[0]))}catch(k){throw k instanceof Error&&(k.message=`Can't parse token envelope: ${l[0]}': ${k.message}`),k}if(!d)throw new Error("Can't parse token envelope: "+l[0]);try{h=JSON.parse(s.decodeBase64StringUtf8(l[1]))}catch(k){throw k instanceof Error&&(k.message=`Can't parse token payload '${l[0]}`),k}if(!h)throw new Error("Can't parse token payload: "+l[1]);if(!Object.prototype.hasOwnProperty.call(r,d.kid))throw new Error("No pem found for envelope: "+JSON.stringify(d));let g=r[d.kid];if(d.alg==="ES256"&&(f=zP.joseToDer(f,"ES256").toString("base64")),!(yield s.verify(g,u,f)))throw new Error("Invalid token signature: "+e);if(!h.iat)throw new Error("No issue time in token: "+JSON.stringify(h));if(!h.exp)throw new Error("No expiration time in token: "+JSON.stringify(h));let m=Number(h.iat);if(isNaN(m))throw new Error("iat field using invalid format");let _=Number(h.exp);if(isNaN(_))throw new Error("exp field using invalid format");let E=new Date().getTime()/1e3;if(_>=E+a)throw new Error("Expiration time too far in future: "+JSON.stringify(h));let w=m-rr.CLOCK_SKEW_SECS_,b=_+rr.CLOCK_SKEW_SECS_;if(E<w)throw new Error("Token used too early, "+E+" < "+w+": "+JSON.stringify(h));if(E>b)throw new Error("Token used too late, "+E+" > "+b+": "+JSON.stringify(h));if(i&&i.indexOf(h.iss)<0)throw new Error("Invalid issuer, expected one of ["+i+"], but got "+h.iss);if(typeof n!="undefined"&&n!==null){let k=h.aud,N=!1;if(n.constructor===Array?N=n.indexOf(k)>-1:N=k===n,!N)throw new Error("Wrong recipient, payload audience != requiredAudience")}return new XP.LoginTicket(d,h)})}processAndValidateRefreshHandler(){return M(this,null,function*(){if(this.refreshHandler){let e=yield this.refreshHandler();if(!e.access_token)throw new Error("No access token is returned by the refreshHandler callback.");return e}})}isTokenExpiring(){let e=this.credentials.expiry_date;return e?e<=new Date().getTime()+this.eagerRefreshThresholdMillis:!1}};Hi.OAuth2Client=rr;rr.GOOGLE_TOKEN_INFO_URL="https://oauth2.googleapis.com/tokeninfo";rr.GOOGLE_OAUTH2_AUTH_BASE_URL_="https://accounts.google.com/o/oauth2/v2/auth";rr.GOOGLE_OAUTH2_TOKEN_URL_="https://oauth2.googleapis.com/token";rr.GOOGLE_OAUTH2_REVOKE_URL_="https://oauth2.googleapis.com/revoke";rr.GOOGLE_OAUTH2_FEDERATED_SIGNON_PEM_CERTS_URL_="https://www.googleapis.com/oauth2/v1/certs";rr.GOOGLE_OAUTH2_FEDERATED_SIGNON_JWK_CERTS_URL_="https://www.googleapis.com/oauth2/v3/certs";rr.GOOGLE_OAUTH2_IAP_PUBLIC_KEY_URL_="https://www.gstatic.com/iap/verify/public_key";rr.CLOCK_SKEW_SECS_=300;rr.MAX_TOKEN_LIFETIME_SECS_=86400;rr.ISSUERS_=["accounts.google.com","https://accounts.google.com"]});var U0=de(Jf=>{"use strict";Object.defineProperty(Jf,"__esModule",{value:!0});Jf.Compute=void 0;var ZP=ww(),$P=Ho(),Dw=Uf(),e4=Fs(),Ow=class extends e4.OAuth2Client{constructor(e={}){super(e);this.credentials={expiry_date:1,refresh_token:"compute-placeholder"},this.serviceAccountEmail=e.serviceAccountEmail||"default",this.scopes=ZP(e.scopes)}refreshTokenNoCache(e){return M(this,null,function*(){let r=`service-accounts/${this.serviceAccountEmail}/token`,n;try{let a={property:r};this.scopes.length>0&&(a.params={scopes:this.scopes.join(",")}),n=yield Dw.instance(a)}catch(a){throw a instanceof $P.GaxiosError&&(a.message=`Could not refresh access token: ${a.message}`,this.wrapError(a)),a}let i=n;return n&&n.expires_in&&(i.expiry_date=new Date().getTime()+n.expires_in*1e3,delete i.expires_in),this.emit("tokens",i),{tokens:i,res:null}})}fetchIdToken(e){return M(this,null,function*(){let r=`service-accounts/${this.serviceAccountEmail}/identity?format=full&audience=${e}`,n;try{let i={property:r};n=yield Dw.instance(i)}catch(i){throw i instanceof Error&&(i.message=`Could not fetch ID token: ${i.message}`),i}return n})}wrapError(e){let r=e.response;r&&r.status&&(e.code=r.status.toString(),r.status===403?e.message="A Forbidden error was returned while attempting to retrieve an access token for the Compute Engine built-in service account. This may be because the Compute Engine instance does not have the correct permission scopes specified: "+e.message:r.status===404&&(e.message="A Not Found error was returned while attempting to retrieve an accesstoken for the Compute Engine built-in service account. This may be because the Compute Engine instance does not have any permission scopes specified: "+e.message))}};Jf.Compute=Ow});var F0=de(Zf=>{"use strict";Object.defineProperty(Zf,"__esModule",{value:!0});Zf.IdTokenClient=void 0;var t4=Fs(),Lw=class extends t4.OAuth2Client{constructor(e){super();this.targetAudience=e.targetAudience,this.idTokenProvider=e.idTokenProvider}getRequestMetadataAsync(e){return M(this,null,function*(){if(!this.credentials.id_token||(this.credentials.expiry_date||0)<Date.now()){let n=yield this.idTokenProvider.fetchIdToken(this.targetAudience);this.credentials={id_token:n,expiry_date:this.getIdTokenExpiryDate(n)}}return{headers:{Authorization:"Bearer "+this.credentials.id_token}}})}getIdTokenExpiryDate(e){let r=e.split(".")[1];if(r)return JSON.parse(Buffer.from(r,"base64").toString("ascii")).exp*1e3}};Zf.IdTokenClient=Lw});var q0=de(Ca=>{"use strict";Object.defineProperty(Ca,"__esModule",{value:!0});Ca.getEnv=Ca.clear=Ca.GCPEnv=void 0;var Pw=Uf(),es;(function(t){t.APP_ENGINE="APP_ENGINE",t.KUBERNETES_ENGINE="KUBERNETES_ENGINE",t.CLOUD_FUNCTIONS="CLOUD_FUNCTIONS",t.COMPUTE_ENGINE="COMPUTE_ENGINE",t.CLOUD_RUN="CLOUD_RUN",t.NONE="NONE"})(es=Ca.GCPEnv||(Ca.GCPEnv={}));var _u;function r4(){_u=void 0}Ca.clear=r4;function n4(){return M(this,null,function*(){return _u||(_u=i4(),_u)})}Ca.getEnv=n4;function i4(){return M(this,null,function*(){let t=es.NONE;return a4()?t=es.APP_ENGINE:s4()?t=es.CLOUD_FUNCTIONS:(yield u4())?(yield l4())?t=es.KUBERNETES_ENGINE:o4()?t=es.CLOUD_RUN:t=es.COMPUTE_ENGINE:t=es.NONE,t})}function a4(){return!!(process.env.GAE_SERVICE||process.env.GAE_MODULE_NAME)}function s4(){return!!(process.env.FUNCTION_NAME||process.env.FUNCTION_TARGET)}function o4(){return!!process.env.K_CONFIGURATION}function l4(){return M(this,null,function*(){try{return yield Pw.instance("attributes/cluster-name"),!0}catch(t){return!1}})}function u4(){return M(this,null,function*(){return Pw.isAvailable()})}});var G0=de($f=>{"use strict";Object.defineProperty($f,"__esModule",{value:!0});$f.GaxiosError=void 0;var Mw=class extends Error{constructor(e,r,n){super(e);this.response=n,this.config=r,this.code=n.status.toString()}};$f.GaxiosError=Mw});var Fw=de(ed=>{"use strict";Object.defineProperty(ed,"__esModule",{value:!0});ed.getRetryConfig=void 0;function c4(t){return M(this,null,function*(){var e;let r=Uw(t);if(!t||!t.config||!r&&!t.config.retry)return{shouldRetry:!1};r=r||{},r.currentRetryAttempt=r.currentRetryAttempt||0,r.retry=r.retry===void 0||r.retry===null?3:r.retry,r.httpMethodsToRetry=r.httpMethodsToRetry||["GET","HEAD","PUT","OPTIONS","DELETE"],r.noResponseRetries=r.noResponseRetries===void 0||r.noResponseRetries===null?2:r.noResponseRetries;let n=[[100,199],[429,429],[500,599]];if(r.statusCodesToRetry=r.statusCodesToRetry||n,t.config.retryConfig=r,!(yield(r.shouldRetry||f4)(t)))return{shouldRetry:!1,config:t.config};let s=(r.currentRetryAttempt?0:(e=r.retryDelay)!==null&&e!==void 0?e:100)+(Math.pow(2,r.currentRetryAttempt)-1)/2*1e3;t.config.retryConfig.currentRetryAttempt+=1;let l=new Promise(u=>{setTimeout(u,s)});return r.onRetryAttempt&&r.onRetryAttempt(t),yield l,{shouldRetry:!0,config:t.config}})}ed.getRetryConfig=c4;function f4(t){let e=Uw(t);if(t.name==="AbortError"||!e||e.retry===0||!t.response&&(e.currentRetryAttempt||0)>=e.noResponseRetries||!t.config.method||e.httpMethodsToRetry.indexOf(t.config.method.toUpperCase())<0)return!1;if(t.response&&t.response.status){let r=!1;for(let[n,i]of e.statusCodesToRetry){let a=t.response.status;if(a>=n&&a<=i){r=!0;break}}if(!r)return!1}return e.currentRetryAttempt=e.currentRetryAttempt||0,!(e.currentRetryAttempt>=e.retry)}function Uw(t){if(t&&t.config&&t.config.retryConfig)return t.config.retryConfig}});var Hw=de(Jo=>{"use strict";var td=Jo&&Jo.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Jo,"__esModule",{value:!0});Jo.Gaxios=void 0;var d4=td(m0()),h4=require("https"),p4=td(y0()),g4=td(require("querystring")),m4=td(v0()),qw=require("url"),y4=G0(),v4=Fw(),_4=E4()?window.fetch:p4.default;function w4(){return typeof window!="undefined"&&!!window}function E4(){return w4()&&!!window.fetch}function C4(){return typeof Buffer!="undefined"}function Gw(t,e){return!!Vw(t,e)}function Vw(t,e){e=e.toLowerCase();for(let r of Object.keys((t==null?void 0:t.headers)||{}))if(e===r.toLowerCase())return t.headers[r]}var V0;function jw(){let t=process.env.HTTPS_PROXY||process.env.https_proxy||process.env.HTTP_PROXY||process.env.http_proxy;return t&&(V0=T0()),t}jw();function b4(t){var e;let r=(e=process.env.NO_PROXY)!==null&&e!==void 0?e:process.env.no_proxy;if(!r)return!1;let n=r.split(","),i=new qw.URL(t);return!!n.find(a=>a.startsWith("*.")||a.startsWith(".")?(a=a.replace(/^\*\./,"."),i.hostname.endsWith(a)):a===i.origin||a===i.hostname)}function x4(t){if(!b4(t))return jw()}var Kw=class{constructor(e){this.agentCache=new Map,this.defaults=e||{}}request(){return M(this,arguments,function*(e={}){return e=this.validateOpts(e),this._request(e)})}_defaultAdapter(e){return M(this,null,function*(){let n=yield(e.fetchImplementation||_4)(e.url,e),i=yield this.getResponseData(e,n);return this.translateResponse(e,n,i)})}_request(){return M(this,arguments,function*(e={}){try{let r;if(e.adapter?r=yield e.adapter(e,this._defaultAdapter.bind(this)):r=yield this._defaultAdapter(e),!e.validateStatus(r.status))throw new y4.GaxiosError(`Request failed with status code ${r.status}`,e,r);return r}catch(r){let n=r;n.config=e;let{shouldRetry:i,config:a}=yield v4.getRetryConfig(r);if(i&&a)return n.config.retryConfig.currentRetryAttempt=a.retryConfig.currentRetryAttempt,this._request(n.config);throw n}})}getResponseData(e,r){return M(this,null,function*(){switch(e.responseType){case"stream":return r.body;case"json":{let n=yield r.text();try{n=JSON.parse(n)}catch(i){}return n}case"arraybuffer":return r.arrayBuffer();case"blob":return r.blob();default:return r.text()}})}validateOpts(e){let r=d4.default(!0,{},this.defaults,e);if(!r.url)throw new Error("URL is required.");let n=r.baseUrl||r.baseURL;if(n&&(r.url=n+r.url),r.paramsSerializer=r.paramsSerializer||this.paramsSerializer,r.params&&Object.keys(r.params).length>0){let a=r.paramsSerializer(r.params);a.startsWith("?")&&(a=a.slice(1));let s=r.url.includes("?")?"&":"?";r.url=r.url+s+a}if(typeof e.maxContentLength=="number"&&(r.size=e.maxContentLength),typeof e.maxRedirects=="number"&&(r.follow=e.maxRedirects),r.headers=r.headers||{},r.data){let a=typeof FormData=="undefined"?!1:(r==null?void 0:r.data)instanceof FormData;m4.default.readable(r.data)?r.body=r.data:C4()&&Buffer.isBuffer(r.data)?(r.body=r.data,Gw(r,"Content-Type")||(r.headers["Content-Type"]="application/json")):typeof r.data=="object"?a||(Vw(r,"content-type")==="application/x-www-form-urlencoded"?r.body=r.paramsSerializer(r.data):(Gw(r,"Content-Type")||(r.headers["Content-Type"]="application/json"),r.body=JSON.stringify(r.data))):r.body=r.data}r.validateStatus=r.validateStatus||this.validateStatus,r.responseType=r.responseType||"json",!r.headers.Accept&&r.responseType==="json"&&(r.headers.Accept="application/json"),r.method=r.method||"GET";let i=x4(r.url);if(i)if(this.agentCache.has(i))r.agent=this.agentCache.get(i);else{if(r.cert&&r.key){let a=new qw.URL(i);r.agent=new V0({port:a.port,host:a.host,protocol:a.protocol,cert:r.cert,key:r.key})}else r.agent=new V0(i);this.agentCache.set(i,r.agent)}else r.cert&&r.key&&(this.agentCache.has(r.key)?r.agent=this.agentCache.get(r.key):(r.agent=new h4.Agent({cert:r.cert,key:r.key}),this.agentCache.set(r.key,r.agent)));return r}validateStatus(e){return e>=200&&e<300}paramsSerializer(e){return g4.default.stringify(e)}translateResponse(e,r,n){let i={};return r.headers.forEach((a,s)=>{i[s]=a}),{config:e,data:n,headers:i,status:r.status,statusText:r.statusText,request:{responseURL:r.url}}}};Jo.Gaxios=Kw});var Ww=de(Yi=>{"use strict";Object.defineProperty(Yi,"__esModule",{value:!0});Yi.request=Yi.instance=Yi.Gaxios=void 0;var Yw=Hw();Object.defineProperty(Yi,"Gaxios",{enumerable:!0,get:function(){return Yw.Gaxios}});var S4=G0();Object.defineProperty(Yi,"GaxiosError",{enumerable:!0,get:function(){return S4.GaxiosError}});Yi.instance=new Yw.Gaxios;function T4(t){return M(this,null,function*(){return Yi.instance.request(t)})}Yi.request=T4});var j0=de((ij,zw)=>{var rd=Xo().Buffer,A4=require("stream"),k4=require("util");function nd(t){if(this.buffer=null,this.writable=!0,this.readable=!0,!t)return this.buffer=rd.alloc(0),this;if(typeof t.pipe=="function")return this.buffer=rd.alloc(0),t.pipe(this),this;if(t.length||typeof t=="object")return this.buffer=t,this.writable=!1,process.nextTick(function(){this.emit("end",t),this.readable=!1,this.emit("close")}.bind(this)),this;throw new TypeError("Unexpected data type ("+typeof t+")")}k4.inherits(nd,A4);nd.prototype.write=function(e){this.buffer=rd.concat([this.buffer,rd.from(e)]),this.emit("data",e)};nd.prototype.end=function(e){e&&this.write(e),this.emit("end",e),this.emit("close"),this.writable=!1,this.readable=!1};zw.exports=nd});var Xw=de((aj,Qw)=>{"use strict";var wu=require("buffer").Buffer,K0=require("buffer").SlowBuffer;Qw.exports=id;function id(t,e){if(!wu.isBuffer(t)||!wu.isBuffer(e)||t.length!==e.length)return!1;for(var r=0,n=0;n<t.length;n++)r|=t[n]^e[n];return r===0}id.install=function(){wu.prototype.equal=K0.prototype.equal=function(e){return id(this,e)}};var I4=wu.prototype.equal,R4=K0.prototype.equal;id.restore=function(){wu.prototype.equal=I4,K0.prototype.equal=R4}});var W0=de((sj,aE)=>{var N4=Xw(),Zo=Xo().Buffer,Wi=require("crypto"),Jw=L0(),Zw=require("util"),B4=`"%s" is not a valid algorithm.
  Supported algorithms are:
  "HS256", "HS384", "HS512", "RS256", "RS384", "RS512", "PS256", "PS384", "PS512", "ES256", "ES384", "ES512" and "none".`,Eu="secret must be a string or buffer",$o="key must be a string or a buffer",D4="key must be a string, a buffer or an object",H0=typeof Wi.createPublicKey=="function";H0&&($o+=" or a KeyObject",Eu+="or a KeyObject");function $w(t){if(!Zo.isBuffer(t)&&typeof t!="string"&&(!H0||typeof t!="object"||typeof t.type!="string"||typeof t.asymmetricKeyType!="string"||typeof t.export!="function"))throw Ci($o)}function eE(t){if(!Zo.isBuffer(t)&&typeof t!="string"&&typeof t!="object")throw Ci(D4)}function O4(t){if(!Zo.isBuffer(t)){if(typeof t=="string")return t;if(!H0||typeof t!="object"||t.type!=="secret"||typeof t.export!="function")throw Ci(Eu)}}function Y0(t){return t.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function tE(t){t=t.toString();var e=4-t.length%4;if(e!==4)for(var r=0;r<e;++r)t+="=";return t.replace(/\-/g,"+").replace(/_/g,"/")}function Ci(t){var e=[].slice.call(arguments,1),r=Zw.format.bind(Zw,t).apply(null,e);return new TypeError(r)}function L4(t){return Zo.isBuffer(t)||typeof t=="string"}function Cu(t){return L4(t)||(t=JSON.stringify(t)),t}function rE(t){return function(r,n){O4(n),r=Cu(r);var i=Wi.createHmac("sha"+t,n),a=(i.update(r),i.digest("base64"));return Y0(a)}}function P4(t){return function(r,n,i){var a=rE(t)(r,i);return N4(Zo.from(n),Zo.from(a))}}function nE(t){return function(r,n){eE(n),r=Cu(r);var i=Wi.createSign("RSA-SHA"+t),a=(i.update(r),i.sign(n,"base64"));return Y0(a)}}function iE(t){return function(r,n,i){$w(i),r=Cu(r),n=tE(n);var a=Wi.createVerify("RSA-SHA"+t);return a.update(r),a.verify(i,n,"base64")}}function M4(t){return function(r,n){eE(n),r=Cu(r);var i=Wi.createSign("RSA-SHA"+t),a=(i.update(r),i.sign({key:n,padding:Wi.constants.RSA_PKCS1_PSS_PADDING,saltLength:Wi.constants.RSA_PSS_SALTLEN_DIGEST},"base64"));return Y0(a)}}function U4(t){return function(r,n,i){$w(i),r=Cu(r),n=tE(n);var a=Wi.createVerify("RSA-SHA"+t);return a.update(r),a.verify({key:i,padding:Wi.constants.RSA_PKCS1_PSS_PADDING,saltLength:Wi.constants.RSA_PSS_SALTLEN_DIGEST},n,"base64")}}function F4(t){var e=nE(t);return function(){var n=e.apply(null,arguments);return n=Jw.derToJose(n,"ES"+t),n}}function q4(t){var e=iE(t);return function(n,i,a){i=Jw.joseToDer(i,"ES"+t).toString("base64");var s=e(n,i,a);return s}}function G4(){return function(){return""}}function V4(){return function(e,r){return r===""}}aE.exports=function(e){var r={hs:rE,rs:nE,ps:M4,es:F4,none:G4},n={hs:P4,rs:iE,ps:U4,es:q4,none:V4},i=e.match(/^(RS|PS|ES|HS)(256|384|512)$|^(none)$/);if(!i)throw Ci(B4,e);var a=(i[1]||i[3]).toLowerCase(),s=i[2];return{sign:r[a](s),verify:n[a](s)}}});var z0=de((oj,sE)=>{var j4=require("buffer").Buffer;sE.exports=function(e){return typeof e=="string"?e:typeof e=="number"||j4.isBuffer(e)?e.toString():JSON.stringify(e)}});var dE=de((lj,fE)=>{var K4=Xo().Buffer,oE=j0(),H4=W0(),Y4=require("stream"),lE=z0(),Q0=require("util");function uE(t,e){return K4.from(t,e).toString("base64").replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function W4(t,e,r){r=r||"utf8";var n=uE(lE(t),"binary"),i=uE(lE(e),r);return Q0.format("%s.%s",n,i)}function cE(t){var e=t.header,r=t.payload,n=t.secret||t.privateKey,i=t.encoding,a=H4(e.alg),s=W4(e,r,i),l=a.sign(s,n);return Q0.format("%s.%s",s,l)}function ad(t){var e=t.secret||t.privateKey||t.key,r=new oE(e);this.readable=!0,this.header=t.header,this.encoding=t.encoding,this.secret=this.privateKey=this.key=r,this.payload=new oE(t.payload),this.secret.once("close",function(){!this.payload.writable&&this.readable&&this.sign()}.bind(this)),this.payload.once("close",function(){!this.secret.writable&&this.readable&&this.sign()}.bind(this))}Q0.inherits(ad,Y4);ad.prototype.sign=function(){try{var e=cE({header:this.header,payload:this.payload.buffer,secret:this.secret.buffer,encoding:this.encoding});return this.emit("done",e),this.emit("data",e),this.emit("end"),this.readable=!1,e}catch(r){this.readable=!1,this.emit("error",r),this.emit("close")}};ad.sign=cE;fE.exports=ad});var CE=de((uj,EE)=>{var hE=Xo().Buffer,pE=j0(),z4=W0(),Q4=require("stream"),gE=z0(),X4=require("util"),J4=/^[a-zA-Z0-9\-_]+?\.[a-zA-Z0-9\-_]+?\.([a-zA-Z0-9\-_]+)?$/;function Z4(t){return Object.prototype.toString.call(t)==="[object Object]"}function $4(t){if(Z4(t))return t;try{return JSON.parse(t)}catch(e){return}}function mE(t){var e=t.split(".",1)[0];return $4(hE.from(e,"base64").toString("binary"))}function e6(t){return t.split(".",2).join(".")}function yE(t){return t.split(".")[2]}function t6(t,e){e=e||"utf8";var r=t.split(".")[1];return hE.from(r,"base64").toString(e)}function vE(t){return J4.test(t)&&!!mE(t)}function _E(t,e,r){if(!e){var n=new Error("Missing algorithm parameter for jws.verify");throw n.code="MISSING_ALGORITHM",n}t=gE(t);var i=yE(t),a=e6(t),s=z4(e);return s.verify(a,i,r)}function wE(t,e){if(e=e||{},t=gE(t),!vE(t))return null;var r=mE(t);if(!r)return null;var n=t6(t);return(r.typ==="JWT"||e.json)&&(n=JSON.parse(n,e.encoding)),{header:r,payload:n,signature:yE(t)}}function el(t){t=t||{};var e=t.secret||t.publicKey||t.key,r=new pE(e);this.readable=!0,this.algorithm=t.algorithm,this.encoding=t.encoding,this.secret=this.publicKey=this.key=r,this.signature=new pE(t.signature),this.secret.once("close",function(){!this.signature.writable&&this.readable&&this.verify()}.bind(this)),this.signature.once("close",function(){!this.secret.writable&&this.readable&&this.verify()}.bind(this))}X4.inherits(el,Q4);el.prototype.verify=function(){try{var e=_E(this.signature.buffer,this.algorithm,this.key.buffer),r=wE(this.signature.buffer,this.encoding);return this.emit("done",e,r),this.emit("data",e),this.emit("end"),this.readable=!1,e}catch(n){this.readable=!1,this.emit("error",n),this.emit("close")}};el.decode=wE;el.isValid=vE;el.verify=_E;EE.exports=el});var X0=de(ts=>{var bE=dE(),sd=CE(),r6=["HS256","HS384","HS512","RS256","RS384","RS512","PS256","PS384","PS512","ES256","ES384","ES512"];ts.ALGORITHMS=r6;ts.sign=bE.sign;ts.verify=sd.verify;ts.decode=sd.decode;ts.isValid=sd.isValid;ts.createSign=function(e){return new bE(e)};ts.createVerify=function(e){return new sd(e)}});var mt=de((fj,xE)=>{xE.exports={options:{usePureJavaScript:!1}}});var AE=de((dj,TE)=>{var J0={};TE.exports=J0;var SE={};J0.encode=function(t,e,r){if(typeof e!="string")throw new TypeError('"alphabet" must be a string.');if(r!==void 0&&typeof r!="number")throw new TypeError('"maxline" must be a number.');var n="";if(!(t instanceof Uint8Array))n=n6(t,e);else{var i=0,a=e.length,s=e.charAt(0),l=[0];for(i=0;i<t.length;++i){for(var u=0,f=t[i];u<l.length;++u)f+=l[u]<<8,l[u]=f%a,f=f/a|0;for(;f>0;)l.push(f%a),f=f/a|0}for(i=0;t[i]===0&&i<t.length-1;++i)n+=s;for(i=l.length-1;i>=0;--i)n+=e[l[i]]}if(r){var d=new RegExp(".{1,"+r+"}","g");n=n.match(d).join(`\r
`)}return n};J0.decode=function(t,e){if(typeof t!="string")throw new TypeError('"input" must be a string.');if(typeof e!="string")throw new TypeError('"alphabet" must be a string.');var r=SE[e];if(!r){r=SE[e]=[];for(var n=0;n<e.length;++n)r[e.charCodeAt(n)]=n}t=t.replace(/\s/g,"");for(var i=e.length,a=e.charAt(0),s=[0],n=0;n<t.length;n++){var l=r[t.charCodeAt(n)];if(l===void 0)return;for(var u=0,f=l;u<s.length;++u)f+=s[u]*i,s[u]=f&255,f>>=8;for(;f>0;)s.push(f&255),f>>=8}for(var d=0;t[d]===a&&d<t.length-1;++d)s.push(0);return typeof Buffer!="undefined"?Buffer.from(s.reverse()):new Uint8Array(s.reverse())};function n6(t,e){var r=0,n=e.length,i=e.charAt(0),a=[0];for(r=0;r<t.length();++r){for(var s=0,l=t.at(r);s<a.length;++s)l+=a[s]<<8,a[s]=l%n,l=l/n|0;for(;l>0;)a.push(l%n),l=l/n|0}var u="";for(r=0;t.at(r)===0&&r<t.length()-1;++r)u+=i;for(r=a.length-1;r>=0;--r)u+=e[a[r]];return u}});var Ft=de((hj,NE)=>{var kE=mt(),IE=AE(),K=NE.exports=kE.util=kE.util||{};(function(){if(typeof process!="undefined"&&process.nextTick&&!process.browser){K.nextTick=process.nextTick,typeof setImmediate=="function"?K.setImmediate=setImmediate:K.setImmediate=K.nextTick;return}if(typeof setImmediate=="function"){K.setImmediate=function(){return setImmediate.apply(void 0,arguments)},K.nextTick=function(l){return setImmediate(l)};return}if(K.setImmediate=function(l){setTimeout(l,0)},typeof window!="undefined"&&typeof window.postMessage=="function"){let l=function(u){if(u.source===window&&u.data===t){u.stopPropagation();var f=e.slice();e.length=0,f.forEach(function(d){d()})}};var s=l,t="forge.setImmediate",e=[];K.setImmediate=function(u){e.push(u),e.length===1&&window.postMessage(t,"*")},window.addEventListener("message",l,!0)}if(typeof MutationObserver!="undefined"){var r=Date.now(),n=!0,i=document.createElement("div"),e=[];new MutationObserver(function(){var u=e.slice();e.length=0,u.forEach(function(f){f()})}).observe(i,{attributes:!0});var a=K.setImmediate;K.setImmediate=function(u){Date.now()-r>15?(r=Date.now(),a(u)):(e.push(u),e.length===1&&i.setAttribute("a",n=!n))}}K.nextTick=K.setImmediate})();K.isNodejs=typeof process!="undefined"&&process.versions&&process.versions.node;K.globalScope=function(){return K.isNodejs?global:typeof self=="undefined"?window:self}();K.isArray=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};K.isArrayBuffer=function(t){return typeof ArrayBuffer!="undefined"&&t instanceof ArrayBuffer};K.isArrayBufferView=function(t){return t&&K.isArrayBuffer(t.buffer)&&t.byteLength!==void 0};function bu(t){if(!(t===8||t===16||t===24||t===32))throw new Error("Only 8, 16, 24, or 32 bits supported: "+t)}K.ByteBuffer=Z0;function Z0(t){if(this.data="",this.read=0,typeof t=="string")this.data=t;else if(K.isArrayBuffer(t)||K.isArrayBufferView(t))if(typeof Buffer!="undefined"&&t instanceof Buffer)this.data=t.toString("binary");else{var e=new Uint8Array(t);try{this.data=String.fromCharCode.apply(null,e)}catch(n){for(var r=0;r<e.length;++r)this.putByte(e[r])}}else(t instanceof Z0||typeof t=="object"&&typeof t.data=="string"&&typeof t.read=="number")&&(this.data=t.data,this.read=t.read);this._constructedStringLength=0}K.ByteStringBuffer=Z0;var i6=4096;K.ByteStringBuffer.prototype._optimizeConstructedString=function(t){this._constructedStringLength+=t,this._constructedStringLength>i6&&(this.data.substr(0,1),this._constructedStringLength=0)};K.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read};K.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0};K.ByteStringBuffer.prototype.putByte=function(t){return this.putBytes(String.fromCharCode(t))};K.ByteStringBuffer.prototype.fillWithByte=function(t,e){t=String.fromCharCode(t);for(var r=this.data;e>0;)e&1&&(r+=t),e>>>=1,e>0&&(t+=t);return this.data=r,this._optimizeConstructedString(e),this};K.ByteStringBuffer.prototype.putBytes=function(t){return this.data+=t,this._optimizeConstructedString(t.length),this};K.ByteStringBuffer.prototype.putString=function(t){return this.putBytes(K.encodeUtf8(t))};K.ByteStringBuffer.prototype.putInt16=function(t){return this.putBytes(String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};K.ByteStringBuffer.prototype.putInt24=function(t){return this.putBytes(String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};K.ByteStringBuffer.prototype.putInt32=function(t){return this.putBytes(String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};K.ByteStringBuffer.prototype.putInt16Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255))};K.ByteStringBuffer.prototype.putInt24Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255))};K.ByteStringBuffer.prototype.putInt32Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>24&255))};K.ByteStringBuffer.prototype.putInt=function(t,e){bu(e);var r="";do e-=8,r+=String.fromCharCode(t>>e&255);while(e>0);return this.putBytes(r)};K.ByteStringBuffer.prototype.putSignedInt=function(t,e){return t<0&&(t+=2<<e-1),this.putInt(t,e)};K.ByteStringBuffer.prototype.putBuffer=function(t){return this.putBytes(t.getBytes())};K.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)};K.ByteStringBuffer.prototype.getInt16=function(){var t=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,t};K.ByteStringBuffer.prototype.getInt24=function(){var t=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,t};K.ByteStringBuffer.prototype.getInt32=function(){var t=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,t};K.ByteStringBuffer.prototype.getInt16Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,t};K.ByteStringBuffer.prototype.getInt24Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,t};K.ByteStringBuffer.prototype.getInt32Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,t};K.ByteStringBuffer.prototype.getInt=function(t){bu(t);var e=0;do e=(e<<8)+this.data.charCodeAt(this.read++),t-=8;while(t>0);return e};K.ByteStringBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),r=2<<t-2;return e>=r&&(e-=r<<1),e};K.ByteStringBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):t===0?e="":(e=this.read===0?this.data:this.data.slice(this.read),this.clear()),e};K.ByteStringBuffer.prototype.bytes=function(t){return typeof t=="undefined"?this.data.slice(this.read):this.data.slice(this.read,this.read+t)};K.ByteStringBuffer.prototype.at=function(t){return this.data.charCodeAt(this.read+t)};K.ByteStringBuffer.prototype.setAt=function(t,e){return this.data=this.data.substr(0,this.read+t)+String.fromCharCode(e)+this.data.substr(this.read+t+1),this};K.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)};K.ByteStringBuffer.prototype.copy=function(){var t=K.createBuffer(this.data);return t.read=this.read,t};K.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this};K.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this};K.ByteStringBuffer.prototype.truncate=function(t){var e=Math.max(0,this.length()-t);return this.data=this.data.substr(this.read,e),this.read=0,this};K.ByteStringBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.length;++e){var r=this.data.charCodeAt(e);r<16&&(t+="0"),t+=r.toString(16)}return t};K.ByteStringBuffer.prototype.toString=function(){return K.decodeUtf8(this.bytes())};function a6(t,e){e=e||{},this.read=e.readOffset||0,this.growSize=e.growSize||1024;var r=K.isArrayBuffer(t),n=K.isArrayBufferView(t);if(r||n){r?this.data=new DataView(t):this.data=new DataView(t.buffer,t.byteOffset,t.byteLength),this.write="writeOffset"in e?e.writeOffset:this.data.byteLength;return}this.data=new DataView(new ArrayBuffer(0)),this.write=0,t!=null&&this.putBytes(t),"writeOffset"in e&&(this.write=e.writeOffset)}K.DataBuffer=a6;K.DataBuffer.prototype.length=function(){return this.write-this.read};K.DataBuffer.prototype.isEmpty=function(){return this.length()<=0};K.DataBuffer.prototype.accommodate=function(t,e){if(this.length()>=t)return this;e=Math.max(e||this.growSize,t);var r=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),n=new Uint8Array(this.length()+e);return n.set(r),this.data=new DataView(n.buffer),this};K.DataBuffer.prototype.putByte=function(t){return this.accommodate(1),this.data.setUint8(this.write++,t),this};K.DataBuffer.prototype.fillWithByte=function(t,e){this.accommodate(e);for(var r=0;r<e;++r)this.data.setUint8(t);return this};K.DataBuffer.prototype.putBytes=function(t,e){if(K.isArrayBufferView(t)){var r=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),n=r.byteLength-r.byteOffset;this.accommodate(n);var i=new Uint8Array(this.data.buffer,this.write);return i.set(r),this.write+=n,this}if(K.isArrayBuffer(t)){var r=new Uint8Array(t);this.accommodate(r.byteLength);var i=new Uint8Array(this.data.buffer);return i.set(r,this.write),this.write+=r.byteLength,this}if(t instanceof K.DataBuffer||typeof t=="object"&&typeof t.read=="number"&&typeof t.write=="number"&&K.isArrayBufferView(t.data)){var r=new Uint8Array(t.data.byteLength,t.read,t.length());this.accommodate(r.byteLength);var i=new Uint8Array(t.data.byteLength,this.write);return i.set(r),this.write+=r.byteLength,this}if(t instanceof K.ByteStringBuffer&&(t=t.data,e="binary"),e=e||"binary",typeof t=="string"){var a;if(e==="hex")return this.accommodate(Math.ceil(t.length/2)),a=new Uint8Array(this.data.buffer,this.write),this.write+=K.binary.hex.decode(t,a,this.write),this;if(e==="base64")return this.accommodate(Math.ceil(t.length/4)*3),a=new Uint8Array(this.data.buffer,this.write),this.write+=K.binary.base64.decode(t,a,this.write),this;if(e==="utf8"&&(t=K.encodeUtf8(t),e="binary"),e==="binary"||e==="raw")return this.accommodate(t.length),a=new Uint8Array(this.data.buffer,this.write),this.write+=K.binary.raw.decode(a),this;if(e==="utf16")return this.accommodate(t.length*2),a=new Uint16Array(this.data.buffer,this.write),this.write+=K.text.utf16.encode(a),this;throw new Error("Invalid encoding: "+e)}throw Error("Invalid parameter: "+t)};K.DataBuffer.prototype.putBuffer=function(t){return this.putBytes(t),t.clear(),this};K.DataBuffer.prototype.putString=function(t){return this.putBytes(t,"utf16")};K.DataBuffer.prototype.putInt16=function(t){return this.accommodate(2),this.data.setInt16(this.write,t),this.write+=2,this};K.DataBuffer.prototype.putInt24=function(t){return this.accommodate(3),this.data.setInt16(this.write,t>>8&65535),this.data.setInt8(this.write,t>>16&255),this.write+=3,this};K.DataBuffer.prototype.putInt32=function(t){return this.accommodate(4),this.data.setInt32(this.write,t),this.write+=4,this};K.DataBuffer.prototype.putInt16Le=function(t){return this.accommodate(2),this.data.setInt16(this.write,t,!0),this.write+=2,this};K.DataBuffer.prototype.putInt24Le=function(t){return this.accommodate(3),this.data.setInt8(this.write,t>>16&255),this.data.setInt16(this.write,t>>8&65535,!0),this.write+=3,this};K.DataBuffer.prototype.putInt32Le=function(t){return this.accommodate(4),this.data.setInt32(this.write,t,!0),this.write+=4,this};K.DataBuffer.prototype.putInt=function(t,e){bu(e),this.accommodate(e/8);do e-=8,this.data.setInt8(this.write++,t>>e&255);while(e>0);return this};K.DataBuffer.prototype.putSignedInt=function(t,e){return bu(e),this.accommodate(e/8),t<0&&(t+=2<<e-1),this.putInt(t,e)};K.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)};K.DataBuffer.prototype.getInt16=function(){var t=this.data.getInt16(this.read);return this.read+=2,t};K.DataBuffer.prototype.getInt24=function(){var t=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,t};K.DataBuffer.prototype.getInt32=function(){var t=this.data.getInt32(this.read);return this.read+=4,t};K.DataBuffer.prototype.getInt16Le=function(){var t=this.data.getInt16(this.read,!0);return this.read+=2,t};K.DataBuffer.prototype.getInt24Le=function(){var t=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,t};K.DataBuffer.prototype.getInt32Le=function(){var t=this.data.getInt32(this.read,!0);return this.read+=4,t};K.DataBuffer.prototype.getInt=function(t){bu(t);var e=0;do e=(e<<8)+this.data.getInt8(this.read++),t-=8;while(t>0);return e};K.DataBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),r=2<<t-2;return e>=r&&(e-=r<<1),e};K.DataBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):t===0?e="":(e=this.read===0?this.data:this.data.slice(this.read),this.clear()),e};K.DataBuffer.prototype.bytes=function(t){return typeof t=="undefined"?this.data.slice(this.read):this.data.slice(this.read,this.read+t)};K.DataBuffer.prototype.at=function(t){return this.data.getUint8(this.read+t)};K.DataBuffer.prototype.setAt=function(t,e){return this.data.setUint8(t,e),this};K.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)};K.DataBuffer.prototype.copy=function(){return new K.DataBuffer(this)};K.DataBuffer.prototype.compact=function(){if(this.read>0){var t=new Uint8Array(this.data.buffer,this.read),e=new Uint8Array(t.byteLength);e.set(t),this.data=new DataView(e),this.write-=this.read,this.read=0}return this};K.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this};K.DataBuffer.prototype.truncate=function(t){return this.write=Math.max(0,this.length()-t),this.read=Math.min(this.read,this.write),this};K.DataBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.byteLength;++e){var r=this.data.getUint8(e);r<16&&(t+="0"),t+=r.toString(16)}return t};K.DataBuffer.prototype.toString=function(t){var e=new Uint8Array(this.data,this.read,this.length());if(t=t||"utf8",t==="binary"||t==="raw")return K.binary.raw.encode(e);if(t==="hex")return K.binary.hex.encode(e);if(t==="base64")return K.binary.base64.encode(e);if(t==="utf8")return K.text.utf8.decode(e);if(t==="utf16")return K.text.utf16.decode(e);throw new Error("Invalid encoding: "+t)};K.createBuffer=function(t,e){return e=e||"raw",t!==void 0&&e==="utf8"&&(t=K.encodeUtf8(t)),new K.ByteBuffer(t)};K.fillString=function(t,e){for(var r="";e>0;)e&1&&(r+=t),e>>>=1,e>0&&(t+=t);return r};K.xorBytes=function(t,e,r){for(var n="",i="",a="",s=0,l=0;r>0;--r,++s)i=t.charCodeAt(s)^e.charCodeAt(s),l>=10&&(n+=a,a="",l=0),a+=String.fromCharCode(i),++l;return n+=a,n};K.hexToBytes=function(t){var e="",r=0;for(t.length&!0&&(r=1,e+=String.fromCharCode(parseInt(t[0],16)));r<t.length;r+=2)e+=String.fromCharCode(parseInt(t.substr(r,2),16));return e};K.bytesToHex=function(t){return K.createBuffer(t).toHex()};K.int32ToBytes=function(t){return String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255)};var rs="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",ns=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],RE="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";K.encode64=function(t,e){for(var r="",n="",i,a,s,l=0;l<t.length;)i=t.charCodeAt(l++),a=t.charCodeAt(l++),s=t.charCodeAt(l++),r+=rs.charAt(i>>2),r+=rs.charAt((i&3)<<4|a>>4),isNaN(a)?r+="==":(r+=rs.charAt((a&15)<<2|s>>6),r+=isNaN(s)?"=":rs.charAt(s&63)),e&&r.length>e&&(n+=r.substr(0,e)+`\r
`,r=r.substr(e));return n+=r,n};K.decode64=function(t){t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var e="",r,n,i,a,s=0;s<t.length;)r=ns[t.charCodeAt(s++)-43],n=ns[t.charCodeAt(s++)-43],i=ns[t.charCodeAt(s++)-43],a=ns[t.charCodeAt(s++)-43],e+=String.fromCharCode(r<<2|n>>4),i!==64&&(e+=String.fromCharCode((n&15)<<4|i>>2),a!==64&&(e+=String.fromCharCode((i&3)<<6|a)));return e};K.encodeUtf8=function(t){return unescape(encodeURIComponent(t))};K.decodeUtf8=function(t){return decodeURIComponent(escape(t))};K.binary={raw:{},hex:{},base64:{},base58:{},baseN:{encode:IE.encode,decode:IE.decode}};K.binary.raw.encode=function(t){return String.fromCharCode.apply(null,t)};K.binary.raw.decode=function(t,e,r){var n=e;n||(n=new Uint8Array(t.length)),r=r||0;for(var i=r,a=0;a<t.length;++a)n[i++]=t.charCodeAt(a);return e?i-r:n};K.binary.hex.encode=K.bytesToHex;K.binary.hex.decode=function(t,e,r){var n=e;n||(n=new Uint8Array(Math.ceil(t.length/2))),r=r||0;var i=0,a=r;for(t.length&1&&(i=1,n[a++]=parseInt(t[0],16));i<t.length;i+=2)n[a++]=parseInt(t.substr(i,2),16);return e?a-r:n};K.binary.base64.encode=function(t,e){for(var r="",n="",i,a,s,l=0;l<t.byteLength;)i=t[l++],a=t[l++],s=t[l++],r+=rs.charAt(i>>2),r+=rs.charAt((i&3)<<4|a>>4),isNaN(a)?r+="==":(r+=rs.charAt((a&15)<<2|s>>6),r+=isNaN(s)?"=":rs.charAt(s&63)),e&&r.length>e&&(n+=r.substr(0,e)+`\r
`,r=r.substr(e));return n+=r,n};K.binary.base64.decode=function(t,e,r){var n=e;n||(n=new Uint8Array(Math.ceil(t.length/4)*3)),t=t.replace(/[^A-Za-z0-9\+\/\=]/g,""),r=r||0;for(var i,a,s,l,u=0,f=r;u<t.length;)i=ns[t.charCodeAt(u++)-43],a=ns[t.charCodeAt(u++)-43],s=ns[t.charCodeAt(u++)-43],l=ns[t.charCodeAt(u++)-43],n[f++]=i<<2|a>>4,s!==64&&(n[f++]=(a&15)<<4|s>>2,l!==64&&(n[f++]=(s&3)<<6|l));return e?f-r:n.subarray(0,f)};K.binary.base58.encode=function(t,e){return K.binary.baseN.encode(t,RE,e)};K.binary.base58.decode=function(t,e){return K.binary.baseN.decode(t,RE,e)};K.text={utf8:{},utf16:{}};K.text.utf8.encode=function(t,e,r){t=K.encodeUtf8(t);var n=e;n||(n=new Uint8Array(t.length)),r=r||0;for(var i=r,a=0;a<t.length;++a)n[i++]=t.charCodeAt(a);return e?i-r:n};K.text.utf8.decode=function(t){return K.decodeUtf8(String.fromCharCode.apply(null,t))};K.text.utf16.encode=function(t,e,r){var n=e;n||(n=new Uint8Array(t.length*2));var i=new Uint16Array(n.buffer);r=r||0;for(var a=r,s=r,l=0;l<t.length;++l)i[s++]=t.charCodeAt(l),a+=2;return e?a-r:n};K.text.utf16.decode=function(t){return String.fromCharCode.apply(null,new Uint16Array(t.buffer))};K.deflate=function(t,e,r){if(e=K.decode64(t.deflate(K.encode64(e)).rval),r){var n=2,i=e.charCodeAt(1);i&32&&(n=6),e=e.substring(n,e.length-4)}return e};K.inflate=function(t,e,r){var n=t.inflate(K.encode64(e)).rval;return n===null?null:K.decode64(n)};var $0=function(t,e,r){if(!t)throw new Error("WebStorage not available.");var n;if(r===null?n=t.removeItem(e):(r=K.encode64(JSON.stringify(r)),n=t.setItem(e,r)),typeof n!="undefined"&&n.rval!==!0){var i=new Error(n.error.message);throw i.id=n.error.id,i.name=n.error.name,i}},eg=function(t,e){if(!t)throw new Error("WebStorage not available.");var r=t.getItem(e);if(t.init)if(r.rval===null){if(r.error){var n=new Error(r.error.message);throw n.id=r.error.id,n.name=r.error.name,n}r=null}else r=r.rval;return r!==null&&(r=JSON.parse(K.decode64(r))),r},s6=function(t,e,r,n){var i=eg(t,e);i===null&&(i={}),i[r]=n,$0(t,e,i)},o6=function(t,e,r){var n=eg(t,e);return n!==null&&(n=r in n?n[r]:null),n},l6=function(t,e,r){var n=eg(t,e);if(n!==null&&r in n){delete n[r];var i=!0;for(var a in n){i=!1;break}i&&(n=null),$0(t,e,n)}},u6=function(t,e){$0(t,e,null)},od=function(t,e,r){var n=null;typeof r=="undefined"&&(r=["web","flash"]);var i,a=!1,s=null;for(var l in r){i=r[l];try{if(i==="flash"||i==="both"){if(e[0]===null)throw new Error("Flash local storage not available.");n=t.apply(this,e),a=i==="flash"}(i==="web"||i==="both")&&(e[0]=localStorage,n=t.apply(this,e),a=!0)}catch(u){s=u}if(a)break}if(!a)throw s;return n};K.setItem=function(t,e,r,n,i){od(s6,arguments,i)};K.getItem=function(t,e,r,n){return od(o6,arguments,n)};K.removeItem=function(t,e,r,n){od(l6,arguments,n)};K.clearItems=function(t,e,r){od(u6,arguments,r)};K.isEmpty=function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0};K.format=function(t){for(var e=/%./g,r,n,i=0,a=[],s=0;r=e.exec(t);){n=t.substring(s,e.lastIndex-2),n.length>0&&a.push(n),s=e.lastIndex;var l=r[0][1];switch(l){case"s":case"o":i<arguments.length?a.push(arguments[i+++1]):a.push("<?>");break;case"%":a.push("%");break;default:a.push("<%"+l+"?>")}}return a.push(t.substring(s)),a.join("")};K.formatNumber=function(t,e,r,n){var i=t,a=isNaN(e=Math.abs(e))?2:e,s=r===void 0?",":r,l=n===void 0?".":n,u=i<0?"-":"",f=parseInt(i=Math.abs(+i||0).toFixed(a),10)+"",d=f.length>3?f.length%3:0;return u+(d?f.substr(0,d)+l:"")+f.substr(d).replace(/(\d{3})(?=\d)/g,"$1"+l)+(a?s+Math.abs(i-f).toFixed(a).slice(2):"")};K.formatSize=function(t){return t>=1073741824?t=K.formatNumber(t/1073741824,2,".","")+" GiB":t>=1048576?t=K.formatNumber(t/1048576,2,".","")+" MiB":t>=1024?t=K.formatNumber(t/1024,0)+" KiB":t=K.formatNumber(t,0)+" bytes",t};K.bytesFromIP=function(t){return t.indexOf(".")!==-1?K.bytesFromIPv4(t):t.indexOf(":")!==-1?K.bytesFromIPv6(t):null};K.bytesFromIPv4=function(t){if(t=t.split("."),t.length!==4)return null;for(var e=K.createBuffer(),r=0;r<t.length;++r){var n=parseInt(t[r],10);if(isNaN(n))return null;e.putByte(n)}return e.getBytes()};K.bytesFromIPv6=function(t){var e=0;t=t.split(":").filter(function(s){return s.length===0&&++e,!0});for(var r=(8-t.length+e)*2,n=K.createBuffer(),i=0;i<8;++i){if(!t[i]||t[i].length===0){n.fillWithByte(0,r),r=0;continue}var a=K.hexToBytes(t[i]);a.length<2&&n.putByte(0),n.putBytes(a)}return n.getBytes()};K.bytesToIP=function(t){return t.length===4?K.bytesToIPv4(t):t.length===16?K.bytesToIPv6(t):null};K.bytesToIPv4=function(t){if(t.length!==4)return null;for(var e=[],r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e.join(".")};K.bytesToIPv6=function(t){if(t.length!==16)return null;for(var e=[],r=[],n=0,i=0;i<t.length;i+=2){for(var a=K.bytesToHex(t[i]+t[i+1]);a[0]==="0"&&a!=="0";)a=a.substr(1);if(a==="0"){var s=r[r.length-1],l=e.length;!s||l!==s.end+1?r.push({start:l,end:l}):(s.end=l,s.end-s.start>r[n].end-r[n].start&&(n=r.length-1))}e.push(a)}if(r.length>0){var u=r[n];u.end-u.start>0&&(e.splice(u.start,u.end-u.start+1,""),u.start===0&&e.unshift(""),u.end===7&&e.push(""))}return e.join(":")};K.estimateCores=function(t,e){if(typeof t=="function"&&(e=t,t={}),t=t||{},"cores"in K&&!t.update)return e(null,K.cores);if(typeof navigator!="undefined"&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return K.cores=navigator.hardwareConcurrency,e(null,K.cores);if(typeof Worker=="undefined")return K.cores=1,e(null,K.cores);if(typeof Blob=="undefined")return K.cores=2,e(null,K.cores);var r=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",function(s){for(var l=Date.now(),u=l+4;Date.now()<u;);self.postMessage({st:l,et:u})})}.toString(),")()"],{type:"application/javascript"}));n([],5,16);function n(s,l,u){if(l===0){var f=Math.floor(s.reduce(function(d,h){return d+h},0)/s.length);return K.cores=Math.max(1,f),URL.revokeObjectURL(r),e(null,K.cores)}i(u,function(d,h){s.push(a(u,h)),n(s,l-1,u)})}function i(s,l){for(var u=[],f=[],d=0;d<s;++d){var h=new Worker(r);h.addEventListener("message",function(g){if(f.push(g.data),f.length===s){for(var y=0;y<s;++y)u[y].terminate();l(null,f)}}),u.push(h)}for(var d=0;d<s;++d)u[d].postMessage(d)}function a(s,l){for(var u=[],f=0;f<s;++f)for(var d=l[f],h=u[f]=[],g=0;g<s;++g)if(f!==g){var y=l[g];(d.st>y.st&&d.st<y.et||y.st>d.st&&y.st<d.et)&&h.push(g)}return u.reduce(function(m,_){return Math.max(m,_.length)},0)}}});var ld=de((pj,BE)=>{var Gr=mt();Ft();BE.exports=Gr.cipher=Gr.cipher||{};Gr.cipher.algorithms=Gr.cipher.algorithms||{};Gr.cipher.createCipher=function(t,e){var r=t;if(typeof r=="string"&&(r=Gr.cipher.getAlgorithm(r),r&&(r=r())),!r)throw new Error("Unsupported algorithm: "+t);return new Gr.cipher.BlockCipher({algorithm:r,key:e,decrypt:!1})};Gr.cipher.createDecipher=function(t,e){var r=t;if(typeof r=="string"&&(r=Gr.cipher.getAlgorithm(r),r&&(r=r())),!r)throw new Error("Unsupported algorithm: "+t);return new Gr.cipher.BlockCipher({algorithm:r,key:e,decrypt:!0})};Gr.cipher.registerAlgorithm=function(t,e){t=t.toUpperCase(),Gr.cipher.algorithms[t]=e};Gr.cipher.getAlgorithm=function(t){return t=t.toUpperCase(),t in Gr.cipher.algorithms?Gr.cipher.algorithms[t]:null};var tg=Gr.cipher.BlockCipher=function(t){this.algorithm=t.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=t.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=t.decrypt,this.algorithm.initialize(t)};tg.prototype.start=function(t){t=t||{};var e={};for(var r in t)e[r]=t[r];e.decrypt=this._decrypt,this._finish=!1,this._input=Gr.util.createBuffer(),this.output=t.output||Gr.util.createBuffer(),this.mode.start(e)};tg.prototype.update=function(t){for(t&&this._input.putBuffer(t);!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish;);this._input.compact()};tg.prototype.finish=function(t){t&&(this.mode.name==="ECB"||this.mode.name==="CBC")&&(this.mode.pad=function(r){return t(this.blockSize,r,!1)},this.mode.unpad=function(r){return t(this.blockSize,r,!0)});var e={};return e.decrypt=this._decrypt,e.overflow=this._input.length()%this.blockSize,!(!this._decrypt&&this.mode.pad&&!this.mode.pad(this._input,e)||(this._finish=!0,this.update(),this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,e))||this.mode.afterFinish&&!this.mode.afterFinish(this.output,e))}});var ng=de((gj,DE)=>{var Vr=mt();Ft();Vr.cipher=Vr.cipher||{};var xt=DE.exports=Vr.cipher.modes=Vr.cipher.modes||{};xt.ecb=function(t){t=t||{},this.name="ECB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};xt.ecb.prototype.start=function(t){};xt.ecb.prototype.encrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._outBlock[n])};xt.ecb.prototype.decrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._outBlock[n])};xt.ecb.prototype.pad=function(t,e){var r=t.length()===this.blockSize?this.blockSize:this.blockSize-t.length();return t.fillWithByte(r,r),!0};xt.ecb.prototype.unpad=function(t,e){if(e.overflow>0)return!1;var r=t.length(),n=t.at(r-1);return n>this.blockSize<<2?!1:(t.truncate(n),!0)};xt.cbc=function(t){t=t||{},this.name="CBC",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};xt.cbc.prototype.start=function(t){if(t.iv===null){if(!this._prev)throw new Error("Invalid IV parameter.");this._iv=this._prev.slice(0)}else if("iv"in t)this._iv=ud(t.iv,this.blockSize),this._prev=this._iv.slice(0);else throw new Error("Invalid IV parameter.")};xt.cbc.prototype.encrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=this._prev[n]^t.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._outBlock[n]);this._prev=this._outBlock};xt.cbc.prototype.decrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._prev[n]^this._outBlock[n]);this._prev=this._inBlock.slice(0)};xt.cbc.prototype.pad=function(t,e){var r=t.length()===this.blockSize?this.blockSize:this.blockSize-t.length();return t.fillWithByte(r,r),!0};xt.cbc.prototype.unpad=function(t,e){if(e.overflow>0)return!1;var r=t.length(),n=t.at(r-1);return n>this.blockSize<<2?!1:(t.truncate(n),!0)};xt.cfb=function(t){t=t||{},this.name="CFB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialBlock=new Array(this._ints),this._partialOutput=Vr.util.createBuffer(),this._partialBytes=0};xt.cfb.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=ud(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};xt.cfb.prototype.encrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)this._inBlock[i]=t.getInt32()^this._outBlock[i],e.putInt32(this._inBlock[i]);return}var a=(this.blockSize-n)%this.blockSize;a>0&&(a=this.blockSize-a),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialBlock[i]=t.getInt32()^this._outBlock[i],this._partialOutput.putInt32(this._partialBlock[i]);if(a>0)t.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),a>0&&!r)return e.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=a,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};xt.cfb.prototype.decrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)this._inBlock[i]=t.getInt32(),e.putInt32(this._inBlock[i]^this._outBlock[i]);return}var a=(this.blockSize-n)%this.blockSize;a>0&&(a=this.blockSize-a),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialBlock[i]=t.getInt32(),this._partialOutput.putInt32(this._partialBlock[i]^this._outBlock[i]);if(a>0)t.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),a>0&&!r)return e.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=a,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};xt.ofb=function(t){t=t||{},this.name="OFB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=Vr.util.createBuffer(),this._partialBytes=0};xt.ofb.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=ud(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};xt.ofb.prototype.encrypt=function(t,e,r){var n=t.length();if(t.length()===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)e.putInt32(t.getInt32()^this._outBlock[i]),this._inBlock[i]=this._outBlock[i];return}var a=(this.blockSize-n)%this.blockSize;a>0&&(a=this.blockSize-a),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(t.getInt32()^this._outBlock[i]);if(a>0)t.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._outBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),a>0&&!r)return e.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=a,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};xt.ofb.prototype.decrypt=xt.ofb.prototype.encrypt;xt.ctr=function(t){t=t||{},this.name="CTR",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=Vr.util.createBuffer(),this._partialBytes=0};xt.ctr.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=ud(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};xt.ctr.prototype.encrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize)for(var i=0;i<this._ints;++i)e.putInt32(t.getInt32()^this._outBlock[i]);else{var a=(this.blockSize-n)%this.blockSize;a>0&&(a=this.blockSize-a),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(t.getInt32()^this._outBlock[i]);if(a>0&&(t.read-=this.blockSize),this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),a>0&&!r)return e.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=a,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}cd(this._inBlock)};xt.ctr.prototype.decrypt=xt.ctr.prototype.encrypt;xt.gcm=function(t){t=t||{},this.name="GCM",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints),this._partialOutput=Vr.util.createBuffer(),this._partialBytes=0,this._R=3774873600};xt.gcm.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");var e=Vr.util.createBuffer(t.iv);this._cipherLength=0;var r;if("additionalData"in t?r=Vr.util.createBuffer(t.additionalData):r=Vr.util.createBuffer(),"tagLength"in t?this._tagLength=t.tagLength:this._tagLength=128,this._tag=null,t.decrypt&&(this._tag=Vr.util.createBuffer(t.tag).getBytes(),this._tag.length!==this._tagLength/8))throw new Error("Authentication tag does not match tag length.");this._hashBlock=new Array(this._ints),this.tag=null,this._hashSubkey=new Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var n=e.length();if(n===12)this._j0=[e.getInt32(),e.getInt32(),e.getInt32(),1];else{for(this._j0=[0,0,0,0];e.length()>0;)this._j0=this.ghash(this._hashSubkey,this._j0,[e.getInt32(),e.getInt32(),e.getInt32(),e.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(rg(n*8)))}this._inBlock=this._j0.slice(0),cd(this._inBlock),this._partialBytes=0,r=Vr.util.createBuffer(r),this._aDataLength=rg(r.length()*8);var i=r.length()%this.blockSize;for(i&&r.fillWithByte(0,this.blockSize-i),this._s=[0,0,0,0];r.length()>0;)this._s=this.ghash(this._hashSubkey,this._s,[r.getInt32(),r.getInt32(),r.getInt32(),r.getInt32()])};xt.gcm.prototype.encrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)e.putInt32(this._outBlock[i]^=t.getInt32());this._cipherLength+=this.blockSize}else{var a=(this.blockSize-n)%this.blockSize;a>0&&(a=this.blockSize-a),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(t.getInt32()^this._outBlock[i]);if(a<=0||r){if(r){var s=n%this.blockSize;this._cipherLength+=s,this._partialOutput.truncate(this.blockSize-s)}else this._cipherLength+=this.blockSize;for(var i=0;i<this._ints;++i)this._outBlock[i]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),a>0&&!r)return t.read-=this.blockSize,e.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=a,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),cd(this._inBlock)};xt.gcm.prototype.decrypt=function(t,e,r){var n=t.length();if(n<this.blockSize&&!(r&&n>0))return!0;this.cipher.encrypt(this._inBlock,this._outBlock),cd(this._inBlock),this._hashBlock[0]=t.getInt32(),this._hashBlock[1]=t.getInt32(),this._hashBlock[2]=t.getInt32(),this._hashBlock[3]=t.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var i=0;i<this._ints;++i)e.putInt32(this._outBlock[i]^this._hashBlock[i]);n<this.blockSize?this._cipherLength+=n%this.blockSize:this._cipherLength+=this.blockSize};xt.gcm.prototype.afterFinish=function(t,e){var r=!0;e.decrypt&&e.overflow&&t.truncate(this.blockSize-e.overflow),this.tag=Vr.util.createBuffer();var n=this._aDataLength.concat(rg(this._cipherLength*8));this._s=this.ghash(this._hashSubkey,this._s,n);var i=[];this.cipher.encrypt(this._j0,i);for(var a=0;a<this._ints;++a)this.tag.putInt32(this._s[a]^i[a]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),e.decrypt&&this.tag.bytes()!==this._tag&&(r=!1),r};xt.gcm.prototype.multiply=function(t,e){for(var r=[0,0,0,0],n=e.slice(0),i=0;i<128;++i){var a=t[i/32|0]&1<<31-i%32;a&&(r[0]^=n[0],r[1]^=n[1],r[2]^=n[2],r[3]^=n[3]),this.pow(n,n)}return r};xt.gcm.prototype.pow=function(t,e){for(var r=t[3]&1,n=3;n>0;--n)e[n]=t[n]>>>1|(t[n-1]&1)<<31;e[0]=t[0]>>>1,r&&(e[0]^=this._R)};xt.gcm.prototype.tableMultiply=function(t){for(var e=[0,0,0,0],r=0;r<32;++r){var n=r/8|0,i=t[n]>>>(7-r%8)*4&15,a=this._m[r][i];e[0]^=a[0],e[1]^=a[1],e[2]^=a[2],e[3]^=a[3]}return e};xt.gcm.prototype.ghash=function(t,e,r){return e[0]^=r[0],e[1]^=r[1],e[2]^=r[2],e[3]^=r[3],this.tableMultiply(e)};xt.gcm.prototype.generateHashTable=function(t,e){for(var r=8/e,n=4*r,i=16*r,a=new Array(i),s=0;s<i;++s){var l=[0,0,0,0],u=s/n|0,f=(n-1-s%n)*e;l[u]=1<<e-1<<f,a[s]=this.generateSubHashTable(this.multiply(l,t),e)}return a};xt.gcm.prototype.generateSubHashTable=function(t,e){var r=1<<e,n=r>>>1,i=new Array(r);i[n]=t.slice(0);for(var a=n>>>1;a>0;)this.pow(i[2*a],i[a]=[]),a>>=1;for(a=2;a<n;){for(var s=1;s<a;++s){var l=i[a],u=i[s];i[a+s]=[l[0]^u[0],l[1]^u[1],l[2]^u[2],l[3]^u[3]]}a*=2}for(i[0]=[0,0,0,0],a=n+1;a<r;++a){var f=i[a^n];i[a]=[t[0]^f[0],t[1]^f[1],t[2]^f[2],t[3]^f[3]]}return i};function ud(t,e){if(typeof t=="string"&&(t=Vr.util.createBuffer(t)),Vr.util.isArray(t)&&t.length>4){var r=t;t=Vr.util.createBuffer();for(var n=0;n<r.length;++n)t.putByte(r[n])}if(t.length()<e)throw new Error("Invalid IV length; got "+t.length()+" bytes and expected "+e+" bytes.");if(!Vr.util.isArray(t)){for(var i=[],a=e/4,n=0;n<a;++n)i.push(t.getInt32());t=i}return t}function cd(t){t[t.length-1]=t[t.length-1]+1&4294967295}function rg(t){return[t/4294967296|0,t&4294967295]}});var is=de((mj,ME)=>{var nr=mt();ld();ng();Ft();ME.exports=nr.aes=nr.aes||{};nr.aes.startEncrypting=function(t,e,r,n){var i=fd({key:t,output:r,decrypt:!1,mode:n});return i.start(e),i};nr.aes.createEncryptionCipher=function(t,e){return fd({key:t,output:null,decrypt:!1,mode:e})};nr.aes.startDecrypting=function(t,e,r,n){var i=fd({key:t,output:r,decrypt:!0,mode:n});return i.start(e),i};nr.aes.createDecryptionCipher=function(t,e){return fd({key:t,output:null,decrypt:!0,mode:e})};nr.aes.Algorithm=function(t,e){ig||LE();var r=this;r.name=t,r.mode=new e({blockSize:16,cipher:{encrypt:function(n,i){return sg(r._w,n,i,!1)},decrypt:function(n,i){return sg(r._w,n,i,!0)}}}),r._init=!1};nr.aes.Algorithm.prototype.initialize=function(t){if(!this._init){var e=t.key,r;if(typeof e=="string"&&(e.length===16||e.length===24||e.length===32))e=nr.util.createBuffer(e);else if(nr.util.isArray(e)&&(e.length===16||e.length===24||e.length===32)){r=e,e=nr.util.createBuffer();for(var n=0;n<r.length;++n)e.putByte(r[n])}if(!nr.util.isArray(e)){r=e,e=[];var i=r.length();if(i===16||i===24||i===32){i=i>>>2;for(var n=0;n<i;++n)e.push(r.getInt32())}}if(!nr.util.isArray(e)||!(e.length===4||e.length===6||e.length===8))throw new Error("Invalid key parameter.");var a=this.mode.name,s=["CFB","OFB","CTR","GCM"].indexOf(a)!==-1;this._w=PE(e,t.decrypt&&!s),this._init=!0}};nr.aes._expandKey=function(t,e){return ig||LE(),PE(t,e)};nr.aes._updateBlock=sg;tl("AES-ECB",nr.cipher.modes.ecb);tl("AES-CBC",nr.cipher.modes.cbc);tl("AES-CFB",nr.cipher.modes.cfb);tl("AES-OFB",nr.cipher.modes.ofb);tl("AES-CTR",nr.cipher.modes.ctr);tl("AES-GCM",nr.cipher.modes.gcm);function tl(t,e){var r=function(){return new nr.aes.Algorithm(t,e)};nr.cipher.registerAlgorithm(t,r)}var ig=!1,rl=4,mn,ag,OE,qs,bi;function LE(){ig=!0,OE=[0,1,2,4,8,16,32,64,128,27,54];for(var t=new Array(256),e=0;e<128;++e)t[e]=e<<1,t[e+128]=e+128<<1^283;mn=new Array(256),ag=new Array(256),qs=new Array(4),bi=new Array(4);for(var e=0;e<4;++e)qs[e]=new Array(256),bi[e]=new Array(256);for(var r=0,n=0,i,a,s,l,u,f,d,e=0;e<256;++e){l=n^n<<1^n<<2^n<<3^n<<4,l=l>>8^l&255^99,mn[r]=l,ag[l]=r,u=t[l],i=t[r],a=t[i],s=t[a],f=u<<24^l<<16^l<<8^(l^u),d=(i^a^s)<<24^(r^s)<<16^(r^a^s)<<8^(r^i^s);for(var h=0;h<4;++h)qs[h][r]=f,bi[h][l]=d,f=f<<24|f>>>8,d=d<<24|d>>>8;r===0?r=n=1:(r=i^t[t[t[i^s]]],n^=t[t[n]])}}function PE(t,e){for(var r=t.slice(0),n,i=1,a=r.length,s=a+6+1,l=rl*s,u=a;u<l;++u)n=r[u-1],u%a==0?(n=mn[n>>>16&255]<<24^mn[n>>>8&255]<<16^mn[n&255]<<8^mn[n>>>24]^OE[i]<<24,i++):a>6&&u%a==4&&(n=mn[n>>>24]<<24^mn[n>>>16&255]<<16^mn[n>>>8&255]<<8^mn[n&255]),r[u]=r[u-a]^n;if(e){var f,d=bi[0],h=bi[1],g=bi[2],y=bi[3],m=r.slice(0);l=r.length;for(var u=0,_=l-rl;u<l;u+=rl,_-=rl)if(u===0||u===l-rl)m[u]=r[_],m[u+1]=r[_+3],m[u+2]=r[_+2],m[u+3]=r[_+1];else for(var E=0;E<rl;++E)f=r[_+E],m[u+(3&-E)]=d[mn[f>>>24]]^h[mn[f>>>16&255]]^g[mn[f>>>8&255]]^y[mn[f&255]];r=m}return r}function sg(t,e,r,n){var i=t.length/4-1,a,s,l,u,f;n?(a=bi[0],s=bi[1],l=bi[2],u=bi[3],f=ag):(a=qs[0],s=qs[1],l=qs[2],u=qs[3],f=mn);var d,h,g,y,m,_,E;d=e[0]^t[0],h=e[n?3:1]^t[1],g=e[2]^t[2],y=e[n?1:3]^t[3];for(var w=3,b=1;b<i;++b)m=a[d>>>24]^s[h>>>16&255]^l[g>>>8&255]^u[y&255]^t[++w],_=a[h>>>24]^s[g>>>16&255]^l[y>>>8&255]^u[d&255]^t[++w],E=a[g>>>24]^s[y>>>16&255]^l[d>>>8&255]^u[h&255]^t[++w],y=a[y>>>24]^s[d>>>16&255]^l[h>>>8&255]^u[g&255]^t[++w],d=m,h=_,g=E;r[0]=f[d>>>24]<<24^f[h>>>16&255]<<16^f[g>>>8&255]<<8^f[y&255]^t[++w],r[n?3:1]=f[h>>>24]<<24^f[g>>>16&255]<<16^f[y>>>8&255]<<8^f[d&255]^t[++w],r[2]=f[g>>>24]<<24^f[y>>>16&255]<<16^f[d>>>8&255]<<8^f[h&255]^t[++w],r[n?1:3]=f[y>>>24]<<24^f[d>>>16&255]<<16^f[h>>>8&255]<<8^f[g&255]^t[++w]}function fd(t){t=t||{};var e=(t.mode||"CBC").toUpperCase(),r="AES-"+e,n;t.decrypt?n=nr.cipher.createDecipher(r,t.key):n=nr.cipher.createCipher(r,t.key);var i=n.start;return n.start=function(a,s){var l=null;s instanceof nr.util.ByteBuffer&&(l=s,s={}),s=s||{},s.output=l,s.iv=a,i.call(n,s)},n}});var as=de((yj,UE)=>{var xu=mt();xu.pki=xu.pki||{};var og=UE.exports=xu.pki.oids=xu.oids=xu.oids||{};function we(t,e){og[t]=e,og[e]=t}function Kt(t,e){og[t]=e}we("1.2.840.113549.1.1.1","rsaEncryption");we("1.2.840.113549.1.1.4","md5WithRSAEncryption");we("1.2.840.113549.1.1.5","sha1WithRSAEncryption");we("1.2.840.113549.1.1.7","RSAES-OAEP");we("1.2.840.113549.1.1.8","mgf1");we("1.2.840.113549.1.1.9","pSpecified");we("1.2.840.113549.1.1.10","RSASSA-PSS");we("1.2.840.113549.1.1.11","sha256WithRSAEncryption");we("1.2.840.113549.1.1.12","sha384WithRSAEncryption");we("1.2.840.113549.1.1.13","sha512WithRSAEncryption");we("1.3.101.112","EdDSA25519");we("1.2.840.10040.4.3","dsa-with-sha1");we("1.3.14.3.2.7","desCBC");we("1.3.14.3.2.26","sha1");we("1.3.14.3.2.29","sha1WithRSASignature");we("2.16.840.1.101.3.4.2.1","sha256");we("2.16.840.1.101.3.4.2.2","sha384");we("2.16.840.1.101.3.4.2.3","sha512");we("2.16.840.1.101.3.4.2.4","sha224");we("2.16.840.1.101.3.4.2.5","sha512-224");we("2.16.840.1.101.3.4.2.6","sha512-256");we("1.2.840.113549.2.2","md2");we("1.2.840.113549.2.5","md5");we("1.2.840.113549.1.7.1","data");we("1.2.840.113549.1.7.2","signedData");we("1.2.840.113549.1.7.3","envelopedData");we("1.2.840.113549.1.7.4","signedAndEnvelopedData");we("1.2.840.113549.1.7.5","digestedData");we("1.2.840.113549.1.7.6","encryptedData");we("1.2.840.113549.1.9.1","emailAddress");we("1.2.840.113549.1.9.2","unstructuredName");we("1.2.840.113549.1.9.3","contentType");we("1.2.840.113549.1.9.4","messageDigest");we("1.2.840.113549.1.9.5","signingTime");we("1.2.840.113549.1.9.6","counterSignature");we("1.2.840.113549.1.9.7","challengePassword");we("1.2.840.113549.1.9.8","unstructuredAddress");we("1.2.840.113549.1.9.14","extensionRequest");we("1.2.840.113549.1.9.20","friendlyName");we("1.2.840.113549.1.9.21","localKeyId");we("1.2.840.113549.1.9.22.1","x509Certificate");we("1.2.840.113549.1.12.10.1.1","keyBag");we("1.2.840.113549.1.12.10.1.2","pkcs8ShroudedKeyBag");we("1.2.840.113549.1.12.10.1.3","certBag");we("1.2.840.113549.1.12.10.1.4","crlBag");we("1.2.840.113549.1.12.10.1.5","secretBag");we("1.2.840.113549.1.12.10.1.6","safeContentsBag");we("1.2.840.113549.1.5.13","pkcs5PBES2");we("1.2.840.113549.1.5.12","pkcs5PBKDF2");we("1.2.840.113549.1.12.1.1","pbeWithSHAAnd128BitRC4");we("1.2.840.113549.1.12.1.2","pbeWithSHAAnd40BitRC4");we("1.2.840.113549.1.12.1.3","pbeWithSHAAnd3-KeyTripleDES-CBC");we("1.2.840.113549.1.12.1.4","pbeWithSHAAnd2-KeyTripleDES-CBC");we("1.2.840.113549.1.12.1.5","pbeWithSHAAnd128BitRC2-CBC");we("1.2.840.113549.1.12.1.6","pbewithSHAAnd40BitRC2-CBC");we("1.2.840.113549.2.7","hmacWithSHA1");we("1.2.840.113549.2.8","hmacWithSHA224");we("1.2.840.113549.2.9","hmacWithSHA256");we("1.2.840.113549.2.10","hmacWithSHA384");we("1.2.840.113549.2.11","hmacWithSHA512");we("1.2.840.113549.3.7","des-EDE3-CBC");we("2.16.840.1.101.3.4.1.2","aes128-CBC");we("2.16.840.1.101.3.4.1.22","aes192-CBC");we("2.16.840.1.101.3.4.1.42","aes256-CBC");we("2.5.4.3","commonName");we("2.5.4.4","surname");we("2.5.4.5","serialNumber");we("2.5.4.6","countryName");we("2.5.4.7","localityName");we("2.5.4.8","stateOrProvinceName");we("2.5.4.9","streetAddress");we("2.5.4.10","organizationName");we("2.5.4.11","organizationalUnitName");we("2.5.4.12","title");we("2.5.4.13","description");we("2.5.4.15","businessCategory");we("2.5.4.17","postalCode");we("2.5.4.42","givenName");we("1.3.6.1.4.1.311.60.2.1.2","jurisdictionOfIncorporationStateOrProvinceName");we("1.3.6.1.4.1.311.60.2.1.3","jurisdictionOfIncorporationCountryName");we("2.16.840.1.113730.1.1","nsCertType");we("2.16.840.1.113730.1.13","nsComment");Kt("2.5.29.1","authorityKeyIdentifier");Kt("2.5.29.2","keyAttributes");Kt("2.5.29.3","certificatePolicies");Kt("2.5.29.4","keyUsageRestriction");Kt("2.5.29.5","policyMapping");Kt("2.5.29.6","subtreesConstraint");Kt("2.5.29.7","subjectAltName");Kt("2.5.29.8","issuerAltName");Kt("2.5.29.9","subjectDirectoryAttributes");Kt("2.5.29.10","basicConstraints");Kt("2.5.29.11","nameConstraints");Kt("2.5.29.12","policyConstraints");Kt("2.5.29.13","basicConstraints");we("2.5.29.14","subjectKeyIdentifier");we("2.5.29.15","keyUsage");Kt("2.5.29.16","privateKeyUsagePeriod");we("2.5.29.17","subjectAltName");we("2.5.29.18","issuerAltName");we("2.5.29.19","basicConstraints");Kt("2.5.29.20","cRLNumber");Kt("2.5.29.21","cRLReason");Kt("2.5.29.22","expirationDate");Kt("2.5.29.23","instructionCode");Kt("2.5.29.24","invalidityDate");Kt("2.5.29.25","cRLDistributionPoints");Kt("2.5.29.26","issuingDistributionPoint");Kt("2.5.29.27","deltaCRLIndicator");Kt("2.5.29.28","issuingDistributionPoint");Kt("2.5.29.29","certificateIssuer");Kt("2.5.29.30","nameConstraints");we("2.5.29.31","cRLDistributionPoints");we("2.5.29.32","certificatePolicies");Kt("2.5.29.33","policyMappings");Kt("2.5.29.34","policyConstraints");we("2.5.29.35","authorityKeyIdentifier");Kt("2.5.29.36","policyConstraints");we("2.5.29.37","extKeyUsage");Kt("2.5.29.46","freshestCRL");Kt("2.5.29.54","inhibitAnyPolicy");we("1.3.6.1.4.1.11129.2.4.2","timestampList");we("1.3.6.1.5.5.7.1.1","authorityInfoAccess");we("1.3.6.1.5.5.7.3.1","serverAuth");we("1.3.6.1.5.5.7.3.2","clientAuth");we("1.3.6.1.5.5.7.3.3","codeSigning");we("1.3.6.1.5.5.7.3.4","emailProtection");we("1.3.6.1.5.5.7.3.8","timeStamping")});var xi=de((vj,qE)=>{var or=mt();Ft();as();var Ae=qE.exports=or.asn1=or.asn1||{};Ae.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192};Ae.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30};Ae.create=function(t,e,r,n,i){if(or.util.isArray(n)){for(var a=[],s=0;s<n.length;++s)n[s]!==void 0&&a.push(n[s]);n=a}var l={tagClass:t,type:e,constructed:r,composed:r||or.util.isArray(n),value:n};return i&&"bitStringContents"in i&&(l.bitStringContents=i.bitStringContents,l.original=Ae.copy(l)),l};Ae.copy=function(t,e){var r;if(or.util.isArray(t)){r=[];for(var n=0;n<t.length;++n)r.push(Ae.copy(t[n],e));return r}return typeof t=="string"?t:(r={tagClass:t.tagClass,type:t.type,constructed:t.constructed,composed:t.composed,value:Ae.copy(t.value,e)},e&&!e.excludeBitStringContents&&(r.bitStringContents=t.bitStringContents),r)};Ae.equals=function(t,e,r){if(or.util.isArray(t)){if(!or.util.isArray(e)||t.length!==e.length)return!1;for(var n=0;n<t.length;++n)if(!Ae.equals(t[n],e[n]))return!1;return!0}if(typeof t!=typeof e)return!1;if(typeof t=="string")return t===e;var i=t.tagClass===e.tagClass&&t.type===e.type&&t.constructed===e.constructed&&t.composed===e.composed&&Ae.equals(t.value,e.value);return r&&r.includeBitStringContents&&(i=i&&t.bitStringContents===e.bitStringContents),i};Ae.getBerValueLength=function(t){var e=t.getByte();if(e!==128){var r,n=e&128;return n?r=t.getInt((e&127)<<3):r=e,r}};function Su(t,e,r){if(r>e){var n=new Error("Too few bytes to parse DER.");throw n.available=t.length(),n.remaining=e,n.requested=r,n}}var c6=function(t,e){var r=t.getByte();if(e--,r!==128){var n,i=r&128;if(!i)n=r;else{var a=r&127;Su(t,e,a),n=t.getInt(a<<3)}if(n<0)throw new Error("Negative length: "+n);return n}};Ae.fromDer=function(t,e){e===void 0&&(e={strict:!0,parseAllBytes:!0,decodeBitStrings:!0}),typeof e=="boolean"&&(e={strict:e,parseAllBytes:!0,decodeBitStrings:!0}),"strict"in e||(e.strict=!0),"parseAllBytes"in e||(e.parseAllBytes=!0),"decodeBitStrings"in e||(e.decodeBitStrings=!0),typeof t=="string"&&(t=or.util.createBuffer(t));var r=t.length(),n=dd(t,t.length(),0,e);if(e.parseAllBytes&&t.length()!==0){var i=new Error("Unparsed DER bytes remain after ASN.1 parsing.");throw i.byteCount=r,i.remaining=t.length(),i}return n};function dd(t,e,r,n){var i;Su(t,e,2);var a=t.getByte();e--;var s=a&192,l=a&31;i=t.length();var u=c6(t,e);if(e-=i-t.length(),u!==void 0&&u>e){if(n.strict){var f=new Error("Too few bytes to read ASN.1 value.");throw f.available=t.length(),f.remaining=e,f.requested=u,f}u=e}var d,h,g=(a&32)==32;if(g)if(d=[],u===void 0)for(;;){if(Su(t,e,2),t.bytes(2)===String.fromCharCode(0,0)){t.getBytes(2),e-=2;break}i=t.length(),d.push(dd(t,e,r+1,n)),e-=i-t.length()}else for(;u>0;)i=t.length(),d.push(dd(t,u,r+1,n)),e-=i-t.length(),u-=i-t.length();if(d===void 0&&s===Ae.Class.UNIVERSAL&&l===Ae.Type.BITSTRING&&(h=t.bytes(u)),d===void 0&&n.decodeBitStrings&&s===Ae.Class.UNIVERSAL&&l===Ae.Type.BITSTRING&&u>1){var y=t.read,m=e,_=0;if(l===Ae.Type.BITSTRING&&(Su(t,e,1),_=t.getByte(),e--),_===0)try{i=t.length();var E={strict:!0,decodeBitStrings:!0},w=dd(t,e,r+1,E),b=i-t.length();e-=b,l==Ae.Type.BITSTRING&&b++;var k=w.tagClass;b===u&&(k===Ae.Class.UNIVERSAL||k===Ae.Class.CONTEXT_SPECIFIC)&&(d=[w])}catch(D){}d===void 0&&(t.read=y,e=m)}if(d===void 0){if(u===void 0){if(n.strict)throw new Error("Non-constructed ASN.1 object of indefinite length.");u=e}if(l===Ae.Type.BMPSTRING)for(d="";u>0;u-=2)Su(t,e,2),d+=String.fromCharCode(t.getInt16()),e-=2;else d=t.getBytes(u),e-=u}var N=h===void 0?null:{bitStringContents:h};return Ae.create(s,l,g,d,N)}Ae.toDer=function(t){var e=or.util.createBuffer(),r=t.tagClass|t.type,n=or.util.createBuffer(),i=!1;if("bitStringContents"in t&&(i=!0,t.original&&(i=Ae.equals(t,t.original))),i)n.putBytes(t.bitStringContents);else if(t.composed){t.constructed?r|=32:n.putByte(0);for(var a=0;a<t.value.length;++a)t.value[a]!==void 0&&n.putBuffer(Ae.toDer(t.value[a]))}else if(t.type===Ae.Type.BMPSTRING)for(var a=0;a<t.value.length;++a)n.putInt16(t.value.charCodeAt(a));else t.type===Ae.Type.INTEGER&&t.value.length>1&&(t.value.charCodeAt(0)===0&&(t.value.charCodeAt(1)&128)==0||t.value.charCodeAt(0)===255&&(t.value.charCodeAt(1)&128)==128)?n.putBytes(t.value.substr(1)):n.putBytes(t.value);if(e.putByte(r),n.length()<=127)e.putByte(n.length()&127);else{var s=n.length(),l="";do l+=String.fromCharCode(s&255),s=s>>>8;while(s>0);e.putByte(l.length|128);for(var a=l.length-1;a>=0;--a)e.putByte(l.charCodeAt(a))}return e.putBuffer(n),e};Ae.oidToDer=function(t){var e=t.split("."),r=or.util.createBuffer();r.putByte(40*parseInt(e[0],10)+parseInt(e[1],10));for(var n,i,a,s,l=2;l<e.length;++l){n=!0,i=[],a=parseInt(e[l],10);do s=a&127,a=a>>>7,n||(s|=128),i.push(s),n=!1;while(a>0);for(var u=i.length-1;u>=0;--u)r.putByte(i[u])}return r};Ae.derToOid=function(t){var e;typeof t=="string"&&(t=or.util.createBuffer(t));var r=t.getByte();e=Math.floor(r/40)+"."+r%40;for(var n=0;t.length()>0;)r=t.getByte(),n=n<<7,r&128?n+=r&127:(e+="."+(n+r),n=0);return e};Ae.utcTimeToDate=function(t){var e=new Date,r=parseInt(t.substr(0,2),10);r=r>=50?1900+r:2e3+r;var n=parseInt(t.substr(2,2),10)-1,i=parseInt(t.substr(4,2),10),a=parseInt(t.substr(6,2),10),s=parseInt(t.substr(8,2),10),l=0;if(t.length>11){var u=t.charAt(10),f=10;u!=="+"&&u!=="-"&&(l=parseInt(t.substr(10,2),10),f+=2)}if(e.setUTCFullYear(r,n,i),e.setUTCHours(a,s,l,0),f&&(u=t.charAt(f),u==="+"||u==="-")){var d=parseInt(t.substr(f+1,2),10),h=parseInt(t.substr(f+4,2),10),g=d*60+h;g*=6e4,u==="+"?e.setTime(+e-g):e.setTime(+e+g)}return e};Ae.generalizedTimeToDate=function(t){var e=new Date,r=parseInt(t.substr(0,4),10),n=parseInt(t.substr(4,2),10)-1,i=parseInt(t.substr(6,2),10),a=parseInt(t.substr(8,2),10),s=parseInt(t.substr(10,2),10),l=parseInt(t.substr(12,2),10),u=0,f=0,d=!1;t.charAt(t.length-1)==="Z"&&(d=!0);var h=t.length-5,g=t.charAt(h);if(g==="+"||g==="-"){var y=parseInt(t.substr(h+1,2),10),m=parseInt(t.substr(h+4,2),10);f=y*60+m,f*=6e4,g==="+"&&(f*=-1),d=!0}return t.charAt(14)==="."&&(u=parseFloat(t.substr(14),10)*1e3),d?(e.setUTCFullYear(r,n,i),e.setUTCHours(a,s,l,u),e.setTime(+e+f)):(e.setFullYear(r,n,i),e.setHours(a,s,l,u)),e};Ae.dateToUtcTime=function(t){if(typeof t=="string")return t;var e="",r=[];r.push((""+t.getUTCFullYear()).substr(2)),r.push(""+(t.getUTCMonth()+1)),r.push(""+t.getUTCDate()),r.push(""+t.getUTCHours()),r.push(""+t.getUTCMinutes()),r.push(""+t.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(e+="0"),e+=r[n];return e+="Z",e};Ae.dateToGeneralizedTime=function(t){if(typeof t=="string")return t;var e="",r=[];r.push(""+t.getUTCFullYear()),r.push(""+(t.getUTCMonth()+1)),r.push(""+t.getUTCDate()),r.push(""+t.getUTCHours()),r.push(""+t.getUTCMinutes()),r.push(""+t.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(e+="0"),e+=r[n];return e+="Z",e};Ae.integerToDer=function(t){var e=or.util.createBuffer();if(t>=-128&&t<128)return e.putSignedInt(t,8);if(t>=-32768&&t<32768)return e.putSignedInt(t,16);if(t>=-8388608&&t<8388608)return e.putSignedInt(t,24);if(t>=-2147483648&&t<2147483648)return e.putSignedInt(t,32);var r=new Error("Integer too large; max is 32-bits.");throw r.integer=t,r};Ae.derToInteger=function(t){typeof t=="string"&&(t=or.util.createBuffer(t));var e=t.length()*8;if(e>32)throw new Error("Integer too large; max is 32-bits.");return t.getSignedInt(e)};Ae.validate=function(t,e,r,n){var i=!1;if((t.tagClass===e.tagClass||typeof e.tagClass=="undefined")&&(t.type===e.type||typeof e.type=="undefined"))if(t.constructed===e.constructed||typeof e.constructed=="undefined"){if(i=!0,e.value&&or.util.isArray(e.value))for(var a=0,s=0;i&&s<e.value.length;++s)i=e.value[s].optional||!1,t.value[a]&&(i=Ae.validate(t.value[a],e.value[s],r,n),i?++a:e.value[s].optional&&(i=!0)),!i&&n&&n.push("["+e.name+'] Tag class "'+e.tagClass+'", type "'+e.type+'" expected value length "'+e.value.length+'", got "'+t.value.length+'"');if(i&&r&&(e.capture&&(r[e.capture]=t.value),e.captureAsn1&&(r[e.captureAsn1]=t),e.captureBitStringContents&&"bitStringContents"in t&&(r[e.captureBitStringContents]=t.bitStringContents),e.captureBitStringValue&&"bitStringContents"in t)){var l;if(t.bitStringContents.length<2)r[e.captureBitStringValue]="";else{var u=t.bitStringContents.charCodeAt(0);if(u!==0)throw new Error("captureBitStringValue only supported for zero unused bits");r[e.captureBitStringValue]=t.bitStringContents.slice(1)}}}else n&&n.push("["+e.name+'] Expected constructed "'+e.constructed+'", got "'+t.constructed+'"');else n&&(t.tagClass!==e.tagClass&&n.push("["+e.name+'] Expected tag class "'+e.tagClass+'", got "'+t.tagClass+'"'),t.type!==e.type&&n.push("["+e.name+'] Expected type "'+e.type+'", got "'+t.type+'"'));return i};var FE=/[^\\u0000-\\u00ff]/;Ae.prettyPrint=function(t,e,r){var n="";e=e||0,r=r||2,e>0&&(n+=`
`);for(var i="",a=0;a<e*r;++a)i+=" ";switch(n+=i+"Tag: ",t.tagClass){case Ae.Class.UNIVERSAL:n+="Universal:";break;case Ae.Class.APPLICATION:n+="Application:";break;case Ae.Class.CONTEXT_SPECIFIC:n+="Context-Specific:";break;case Ae.Class.PRIVATE:n+="Private:";break}if(t.tagClass===Ae.Class.UNIVERSAL)switch(n+=t.type,t.type){case Ae.Type.NONE:n+=" (None)";break;case Ae.Type.BOOLEAN:n+=" (Boolean)";break;case Ae.Type.INTEGER:n+=" (Integer)";break;case Ae.Type.BITSTRING:n+=" (Bit string)";break;case Ae.Type.OCTETSTRING:n+=" (Octet string)";break;case Ae.Type.NULL:n+=" (Null)";break;case Ae.Type.OID:n+=" (Object Identifier)";break;case Ae.Type.ODESC:n+=" (Object Descriptor)";break;case Ae.Type.EXTERNAL:n+=" (External or Instance of)";break;case Ae.Type.REAL:n+=" (Real)";break;case Ae.Type.ENUMERATED:n+=" (Enumerated)";break;case Ae.Type.EMBEDDED:n+=" (Embedded PDV)";break;case Ae.Type.UTF8:n+=" (UTF8)";break;case Ae.Type.ROID:n+=" (Relative Object Identifier)";break;case Ae.Type.SEQUENCE:n+=" (Sequence)";break;case Ae.Type.SET:n+=" (Set)";break;case Ae.Type.PRINTABLESTRING:n+=" (Printable String)";break;case Ae.Type.IA5String:n+=" (IA5String (ASCII))";break;case Ae.Type.UTCTIME:n+=" (UTC time)";break;case Ae.Type.GENERALIZEDTIME:n+=" (Generalized time)";break;case Ae.Type.BMPSTRING:n+=" (BMP String)";break}else n+=t.type;if(n+=`
`,n+=i+"Constructed: "+t.constructed+`
`,t.composed){for(var s=0,l="",a=0;a<t.value.length;++a)t.value[a]!==void 0&&(s+=1,l+=Ae.prettyPrint(t.value[a],e+1,r),a+1<t.value.length&&(l+=","));n+=i+"Sub values: "+s+l}else{if(n+=i+"Value: ",t.type===Ae.Type.OID){var u=Ae.derToOid(t.value);n+=u,or.pki&&or.pki.oids&&u in or.pki.oids&&(n+=" ("+or.pki.oids[u]+") ")}if(t.type===Ae.Type.INTEGER)try{n+=Ae.derToInteger(t.value)}catch(d){n+="0x"+or.util.bytesToHex(t.value)}else if(t.type===Ae.Type.BITSTRING){if(t.value.length>1?n+="0x"+or.util.bytesToHex(t.value.slice(1)):n+="(none)",t.value.length>0){var f=t.value.charCodeAt(0);f==1?n+=" (1 unused bit shown)":f>1&&(n+=" ("+f+" unused bits shown)")}}else if(t.type===Ae.Type.OCTETSTRING)FE.test(t.value)||(n+="("+t.value+") "),n+="0x"+or.util.bytesToHex(t.value);else if(t.type===Ae.Type.UTF8)try{n+=or.util.decodeUtf8(t.value)}catch(d){if(d.message==="URI malformed")n+="0x"+or.util.bytesToHex(t.value)+" (malformed UTF8)";else throw d}else t.type===Ae.Type.PRINTABLESTRING||t.type===Ae.Type.IA5String?n+=t.value:FE.test(t.value)?n+="0x"+or.util.bytesToHex(t.value):t.value.length===0?n+="[null]":n+=t.value}return n}});var zi=de((_j,GE)=>{var hd=mt();GE.exports=hd.md=hd.md||{};hd.md.algorithms=hd.md.algorithms||{}});var nl=de((wj,VE)=>{var ba=mt();zi();Ft();var f6=VE.exports=ba.hmac=ba.hmac||{};f6.create=function(){var t=null,e=null,r=null,n=null,i={};return i.start=function(a,s){if(a!==null)if(typeof a=="string")if(a=a.toLowerCase(),a in ba.md.algorithms)e=ba.md.algorithms[a].create();else throw new Error('Unknown hash algorithm "'+a+'"');else e=a;if(s===null)s=t;else{if(typeof s=="string")s=ba.util.createBuffer(s);else if(ba.util.isArray(s)){var l=s;s=ba.util.createBuffer();for(var u=0;u<l.length;++u)s.putByte(l[u])}var f=s.length();f>e.blockLength&&(e.start(),e.update(s.bytes()),s=e.digest()),r=ba.util.createBuffer(),n=ba.util.createBuffer(),f=s.length();for(var u=0;u<f;++u){var l=s.at(u);r.putByte(54^l),n.putByte(92^l)}if(f<e.blockLength)for(var l=e.blockLength-f,u=0;u<l;++u)r.putByte(54),n.putByte(92);t=s,r=r.bytes(),n=n.bytes()}e.start(),e.update(r)},i.update=function(a){e.update(a)},i.getMac=function(){var a=e.digest().bytes();return e.start(),e.update(n),e.update(a),e.digest()},i.digest=i.getMac,i}});var gd=de((Ej,YE)=>{var Qi=mt();zi();Ft();var jE=YE.exports=Qi.md5=Qi.md5||{};Qi.md.md5=Qi.md.algorithms.md5=jE;jE.create=function(){KE||d6();var t=null,e=Qi.util.createBuffer(),r=new Array(16),n={algorithm:"md5",blockLength:64,digestLength:16,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,a=0;a<i;++a)n.fullMessageLength.push(0);return e=Qi.util.createBuffer(),t={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878},n},n.start(),n.update=function(i,a){a==="utf8"&&(i=Qi.util.encodeUtf8(i));var s=i.length;n.messageLength+=s,s=[s/4294967296>>>0,s>>>0];for(var l=n.fullMessageLength.length-1;l>=0;--l)n.fullMessageLength[l]+=s[1],s[1]=s[0]+(n.fullMessageLength[l]/4294967296>>>0),n.fullMessageLength[l]=n.fullMessageLength[l]>>>0,s[0]=s[1]/4294967296>>>0;return e.putBytes(i),HE(t,r,e),(e.read>2048||e.length()===0)&&e.compact(),n},n.digest=function(){var i=Qi.util.createBuffer();i.putBytes(e.bytes());var a=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,s=a&n.blockLength-1;i.putBytes(lg.substr(0,n.blockLength-s));for(var l,u=0,f=n.fullMessageLength.length-1;f>=0;--f)l=n.fullMessageLength[f]*8+u,u=l/4294967296>>>0,i.putInt32Le(l>>>0);var d={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3};HE(d,r,i);var h=Qi.util.createBuffer();return h.putInt32Le(d.h0),h.putInt32Le(d.h1),h.putInt32Le(d.h2),h.putInt32Le(d.h3),h},n};var lg=null,pd=null,Tu=null,il=null,KE=!1;function d6(){lg=String.fromCharCode(128),lg+=Qi.util.fillString(String.fromCharCode(0),64),pd=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,1,6,11,0,5,10,15,4,9,14,3,8,13,2,7,12,5,8,11,14,1,4,7,10,13,0,3,6,9,12,15,2,0,7,14,5,12,3,10,1,8,15,6,13,4,11,2,9],Tu=[7,12,17,22,7,12,17,22,7,12,17,22,7,12,17,22,5,9,14,20,5,9,14,20,5,9,14,20,5,9,14,20,4,11,16,23,4,11,16,23,4,11,16,23,4,11,16,23,6,10,15,21,6,10,15,21,6,10,15,21,6,10,15,21],il=new Array(64);for(var t=0;t<64;++t)il[t]=Math.floor(Math.abs(Math.sin(t+1))*4294967296);KE=!0}function HE(t,e,r){for(var n,i,a,s,l,u,f,d,h=r.length();h>=64;){for(i=t.h0,a=t.h1,s=t.h2,l=t.h3,d=0;d<16;++d)e[d]=r.getInt32Le(),u=l^a&(s^l),n=i+u+il[d]+e[d],f=Tu[d],i=l,l=s,s=a,a+=n<<f|n>>>32-f;for(;d<32;++d)u=s^l&(a^s),n=i+u+il[d]+e[pd[d]],f=Tu[d],i=l,l=s,s=a,a+=n<<f|n>>>32-f;for(;d<48;++d)u=a^s^l,n=i+u+il[d]+e[pd[d]],f=Tu[d],i=l,l=s,s=a,a+=n<<f|n>>>32-f;for(;d<64;++d)u=s^(a|~l),n=i+u+il[d]+e[pd[d]],f=Tu[d],i=l,l=s,s=a,a+=n<<f|n>>>32-f;t.h0=t.h0+i|0,t.h1=t.h1+a|0,t.h2=t.h2+s|0,t.h3=t.h3+l|0,h-=64}}});var Gs=de((Cj,zE)=>{var md=mt();Ft();var WE=zE.exports=md.pem=md.pem||{};WE.encode=function(t,e){e=e||{};var r="-----BEGIN "+t.type+`-----\r
`,n;if(t.procType&&(n={name:"Proc-Type",values:[String(t.procType.version),t.procType.type]},r+=yd(n)),t.contentDomain&&(n={name:"Content-Domain",values:[t.contentDomain]},r+=yd(n)),t.dekInfo&&(n={name:"DEK-Info",values:[t.dekInfo.algorithm]},t.dekInfo.parameters&&n.values.push(t.dekInfo.parameters),r+=yd(n)),t.headers)for(var i=0;i<t.headers.length;++i)r+=yd(t.headers[i]);return t.procType&&(r+=`\r
`),r+=md.util.encode64(t.body,e.maxline||64)+`\r
`,r+="-----END "+t.type+`-----\r
`,r};WE.decode=function(t){for(var e=[],r=/\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g,n=/([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/,i=/\r?\n/,a;a=r.exec(t),!!a;){var s=a[1];s==="NEW CERTIFICATE REQUEST"&&(s="CERTIFICATE REQUEST");var l={type:s,procType:null,contentDomain:null,dekInfo:null,headers:[],body:md.util.decode64(a[3])};if(e.push(l),!!a[2]){for(var u=a[2].split(i),f=0;a&&f<u.length;){for(var d=u[f].replace(/\s+$/,""),h=f+1;h<u.length;++h){var g=u[h];if(!/\s/.test(g[0]))break;d+=g,f=h}if(a=d.match(n),a){for(var y={name:a[1],values:[]},m=a[2].split(","),_=0;_<m.length;++_)y.values.push(h6(m[_]));if(l.procType)if(!l.contentDomain&&y.name==="Content-Domain")l.contentDomain=m[0]||"";else if(!l.dekInfo&&y.name==="DEK-Info"){if(y.values.length===0)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.');l.dekInfo={algorithm:m[0],parameters:m[1]||null}}else l.headers.push(y);else{if(y.name!=="Proc-Type")throw new Error('Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".');if(y.values.length!==2)throw new Error('Invalid PEM formatted message. The "Proc-Type" header must have two subfields.');l.procType={version:m[0],type:m[1]}}}++f}if(l.procType==="ENCRYPTED"&&!l.dekInfo)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".')}}if(e.length===0)throw new Error("Invalid PEM formatted message.");return e};function yd(t){for(var e=t.name+": ",r=[],n=function(u,f){return" "+f},i=0;i<t.values.length;++i)r.push(t.values[i].replace(/^(\S+\r\n)/,n));e+=r.join(",")+`\r
`;for(var a=0,s=-1,i=0;i<e.length;++i,++a)if(a>65&&s!==-1){var l=e[s];l===","?(++s,e=e.substr(0,s)+`\r
 `+e.substr(s)):e=e.substr(0,s)+`\r
`+l+e.substr(s+1),a=i-s-1,s=-1,++i}else(e[i]===" "||e[i]==="	"||e[i]===",")&&(s=i);return e}function h6(t){return t.replace(/^\s+/,"")}});var Au=de((bj,XE)=>{var fr=mt();ld();ng();Ft();XE.exports=fr.des=fr.des||{};fr.des.startEncrypting=function(t,e,r,n){var i=vd({key:t,output:r,decrypt:!1,mode:n||(e===null?"ECB":"CBC")});return i.start(e),i};fr.des.createEncryptionCipher=function(t,e){return vd({key:t,output:null,decrypt:!1,mode:e})};fr.des.startDecrypting=function(t,e,r,n){var i=vd({key:t,output:r,decrypt:!0,mode:n||(e===null?"ECB":"CBC")});return i.start(e),i};fr.des.createDecryptionCipher=function(t,e){return vd({key:t,output:null,decrypt:!0,mode:e})};fr.des.Algorithm=function(t,e){var r=this;r.name=t,r.mode=new e({blockSize:8,cipher:{encrypt:function(n,i){return QE(r._keys,n,i,!1)},decrypt:function(n,i){return QE(r._keys,n,i,!0)}}}),r._init=!1};fr.des.Algorithm.prototype.initialize=function(t){if(!this._init){var e=fr.util.createBuffer(t.key);if(this.name.indexOf("3DES")===0&&e.length()!==24)throw new Error("Invalid Triple-DES key size: "+e.length()*8);this._keys=C6(e),this._init=!0}};Xi("DES-ECB",fr.cipher.modes.ecb);Xi("DES-CBC",fr.cipher.modes.cbc);Xi("DES-CFB",fr.cipher.modes.cfb);Xi("DES-OFB",fr.cipher.modes.ofb);Xi("DES-CTR",fr.cipher.modes.ctr);Xi("3DES-ECB",fr.cipher.modes.ecb);Xi("3DES-CBC",fr.cipher.modes.cbc);Xi("3DES-CFB",fr.cipher.modes.cfb);Xi("3DES-OFB",fr.cipher.modes.ofb);Xi("3DES-CTR",fr.cipher.modes.ctr);function Xi(t,e){var r=function(){return new fr.des.Algorithm(t,e)};fr.cipher.registerAlgorithm(t,r)}var p6=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],g6=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],m6=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],y6=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],v6=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],_6=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],w6=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],E6=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696];function C6(t){for(var e=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],r=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],n=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],i=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],a=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],s=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],l=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],u=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],f=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],d=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],h=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],g=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],y=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],m=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],_=t.length()>8?3:1,E=[],w=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],b=0,k,N=0;N<_;N++){var D=t.getInt32(),B=t.getInt32();k=(D>>>4^B)&252645135,B^=k,D^=k<<4,k=(B>>>-16^D)&65535,D^=k,B^=k<<-16,k=(D>>>2^B)&858993459,B^=k,D^=k<<2,k=(B>>>-16^D)&65535,D^=k,B^=k<<-16,k=(D>>>1^B)&1431655765,B^=k,D^=k<<1,k=(B>>>8^D)&16711935,D^=k,B^=k<<8,k=(D>>>1^B)&1431655765,B^=k,D^=k<<1,k=D<<8|B>>>20&240,D=B<<24|B<<8&16711680|B>>>8&65280|B>>>24&240,B=k;for(var ee=0;ee<w.length;++ee){w[ee]?(D=D<<2|D>>>26,B=B<<2|B>>>26):(D=D<<1|D>>>27,B=B<<1|B>>>27),D&=-15,B&=-15;var q=e[D>>>28]|r[D>>>24&15]|n[D>>>20&15]|i[D>>>16&15]|a[D>>>12&15]|s[D>>>8&15]|l[D>>>4&15],U=u[B>>>28]|f[B>>>24&15]|d[B>>>20&15]|h[B>>>16&15]|g[B>>>12&15]|y[B>>>8&15]|m[B>>>4&15];k=(U>>>16^q)&65535,E[b++]=q^k,E[b++]=U^k<<16}}return E}function QE(t,e,r,n){var i=t.length===32?3:9,a;i===3?a=n?[30,-2,-2]:[0,32,2]:a=n?[94,62,-2,32,64,2,30,-2,-2]:[0,32,2,62,30,-2,64,96,2];var s,l=e[0],u=e[1];s=(l>>>4^u)&252645135,u^=s,l^=s<<4,s=(l>>>16^u)&65535,u^=s,l^=s<<16,s=(u>>>2^l)&858993459,l^=s,u^=s<<2,s=(u>>>8^l)&16711935,l^=s,u^=s<<8,s=(l>>>1^u)&1431655765,u^=s,l^=s<<1,l=l<<1|l>>>31,u=u<<1|u>>>31;for(var f=0;f<i;f+=3){for(var d=a[f+1],h=a[f+2],g=a[f];g!=d;g+=h){var y=u^t[g],m=(u>>>4|u<<28)^t[g+1];s=l,l=u,u=s^(g6[y>>>24&63]|y6[y>>>16&63]|_6[y>>>8&63]|E6[y&63]|p6[m>>>24&63]|m6[m>>>16&63]|v6[m>>>8&63]|w6[m&63])}s=l,l=u,u=s}l=l>>>1|l<<31,u=u>>>1|u<<31,s=(l>>>1^u)&1431655765,u^=s,l^=s<<1,s=(u>>>8^l)&16711935,l^=s,u^=s<<8,s=(u>>>2^l)&858993459,l^=s,u^=s<<2,s=(l>>>16^u)&65535,u^=s,l^=s<<16,s=(l>>>4^u)&252645135,u^=s,l^=s<<4,r[0]=l,r[1]=u}function vd(t){t=t||{};var e=(t.mode||"CBC").toUpperCase(),r="DES-"+e,n;t.decrypt?n=fr.cipher.createDecipher(r,t.key):n=fr.cipher.createCipher(r,t.key);var i=n.start;return n.start=function(a,s){var l=null;s instanceof fr.util.ByteBuffer&&(l=s,s={}),s=s||{},s.output=l,s.iv=a,i.call(n,s)},n}});var _d=de((xj,JE)=>{var yn=mt();nl();zi();Ft();var b6=yn.pkcs5=yn.pkcs5||{},xa;yn.util.isNodejs&&!yn.options.usePureJavaScript&&(xa=require("crypto"));JE.exports=yn.pbkdf2=b6.pbkdf2=function(t,e,r,n,i,a){if(typeof i=="function"&&(a=i,i=null),yn.util.isNodejs&&!yn.options.usePureJavaScript&&xa.pbkdf2&&(i===null||typeof i!="object")&&(xa.pbkdf2Sync.length>4||!i||i==="sha1"))return typeof i!="string"&&(i="sha1"),t=Buffer.from(t,"binary"),e=Buffer.from(e,"binary"),a?xa.pbkdf2Sync.length===4?xa.pbkdf2(t,e,r,n,function(k,N){if(k)return a(k);a(null,N.toString("binary"))}):xa.pbkdf2(t,e,r,n,i,function(k,N){if(k)return a(k);a(null,N.toString("binary"))}):xa.pbkdf2Sync.length===4?xa.pbkdf2Sync(t,e,r,n).toString("binary"):xa.pbkdf2Sync(t,e,r,n,i).toString("binary");if((typeof i=="undefined"||i===null)&&(i="sha1"),typeof i=="string"){if(!(i in yn.md.algorithms))throw new Error("Unknown hash algorithm: "+i);i=yn.md[i].create()}var s=i.digestLength;if(n>4294967295*s){var l=new Error("Derived key is too long.");if(a)return a(l);throw l}var u=Math.ceil(n/s),f=n-(u-1)*s,d=yn.hmac.create();d.start(i,t);var h="",g,y,m;if(!a){for(var _=1;_<=u;++_){d.start(null,null),d.update(e),d.update(yn.util.int32ToBytes(_)),g=m=d.digest().getBytes();for(var E=2;E<=r;++E)d.start(null,null),d.update(m),y=d.digest().getBytes(),g=yn.util.xorBytes(g,y,s),m=y;h+=_<u?g:g.substr(0,f)}return h}var _=1,E;function w(){if(_>u)return a(null,h);d.start(null,null),d.update(e),d.update(yn.util.int32ToBytes(_)),g=m=d.digest().getBytes(),E=2,b()}function b(){if(E<=r)return d.start(null,null),d.update(m),y=d.digest().getBytes(),g=yn.util.xorBytes(g,y,s),m=y,++E,yn.util.setImmediate(b);h+=_<u?g:g.substr(0,f),++_,w()}w()}});var cg=de((Sj,rC)=>{var Ji=mt();zi();Ft();var ZE=rC.exports=Ji.sha256=Ji.sha256||{};Ji.md.sha256=Ji.md.algorithms.sha256=ZE;ZE.create=function(){$E||x6();var t=null,e=Ji.util.createBuffer(),r=new Array(64),n={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,a=0;a<i;++a)n.fullMessageLength.push(0);return e=Ji.util.createBuffer(),t={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},n},n.start(),n.update=function(i,a){a==="utf8"&&(i=Ji.util.encodeUtf8(i));var s=i.length;n.messageLength+=s,s=[s/4294967296>>>0,s>>>0];for(var l=n.fullMessageLength.length-1;l>=0;--l)n.fullMessageLength[l]+=s[1],s[1]=s[0]+(n.fullMessageLength[l]/4294967296>>>0),n.fullMessageLength[l]=n.fullMessageLength[l]>>>0,s[0]=s[1]/4294967296>>>0;return e.putBytes(i),tC(t,r,e),(e.read>2048||e.length()===0)&&e.compact(),n},n.digest=function(){var i=Ji.util.createBuffer();i.putBytes(e.bytes());var a=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,s=a&n.blockLength-1;i.putBytes(ug.substr(0,n.blockLength-s));for(var l,u,f=n.fullMessageLength[0]*8,d=0;d<n.fullMessageLength.length-1;++d)l=n.fullMessageLength[d+1]*8,u=l/4294967296>>>0,f+=u,i.putInt32(f>>>0),f=l>>>0;i.putInt32(f);var h={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3,h4:t.h4,h5:t.h5,h6:t.h6,h7:t.h7};tC(h,r,i);var g=Ji.util.createBuffer();return g.putInt32(h.h0),g.putInt32(h.h1),g.putInt32(h.h2),g.putInt32(h.h3),g.putInt32(h.h4),g.putInt32(h.h5),g.putInt32(h.h6),g.putInt32(h.h7),g},n};var ug=null,$E=!1,eC=null;function x6(){ug=String.fromCharCode(128),ug+=Ji.util.fillString(String.fromCharCode(0),64),eC=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],$E=!0}function tC(t,e,r){for(var n,i,a,s,l,u,f,d,h,g,y,m,_,E,w,b=r.length();b>=64;){for(f=0;f<16;++f)e[f]=r.getInt32();for(;f<64;++f)n=e[f-2],n=(n>>>17|n<<15)^(n>>>19|n<<13)^n>>>10,i=e[f-15],i=(i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3,e[f]=n+e[f-7]+i+e[f-16]|0;for(d=t.h0,h=t.h1,g=t.h2,y=t.h3,m=t.h4,_=t.h5,E=t.h6,w=t.h7,f=0;f<64;++f)s=(m>>>6|m<<26)^(m>>>11|m<<21)^(m>>>25|m<<7),l=E^m&(_^E),a=(d>>>2|d<<30)^(d>>>13|d<<19)^(d>>>22|d<<10),u=d&h|g&(d^h),n=w+s+l+eC[f]+e[f],i=a+u,w=E,E=_,_=m,m=y+n>>>0,y=g,g=h,h=d,d=n+i>>>0;t.h0=t.h0+d|0,t.h1=t.h1+h|0,t.h2=t.h2+g|0,t.h3=t.h3+y|0,t.h4=t.h4+m|0,t.h5=t.h5+_|0,t.h6=t.h6+E|0,t.h7=t.h7+w|0,b-=64}}});var fg=de((Tj,nC)=>{var Zi=mt();Ft();var wd=null;Zi.util.isNodejs&&!Zi.options.usePureJavaScript&&!process.versions["node-webkit"]&&(wd=require("crypto"));var S6=nC.exports=Zi.prng=Zi.prng||{};S6.create=function(t){for(var e={plugin:t,key:null,seed:null,time:null,reseeds:0,generated:0,keyBytes:""},r=t.md,n=new Array(32),i=0;i<32;++i)n[i]=r.create();e.pools=n,e.pool=0,e.generate=function(f,d){if(!d)return e.generateSync(f);var h=e.plugin.cipher,g=e.plugin.increment,y=e.plugin.formatKey,m=e.plugin.formatSeed,_=Zi.util.createBuffer();e.key=null,E();function E(w){if(w)return d(w);if(_.length()>=f)return d(null,_.getBytes(f));if(e.generated>1048575&&(e.key=null),e.key===null)return Zi.util.nextTick(function(){a(E)});var b=h(e.key,e.seed);e.generated+=b.length,_.putBytes(b),e.key=y(h(e.key,g(e.seed))),e.seed=m(h(e.key,e.seed)),Zi.util.setImmediate(E)}},e.generateSync=function(f){var d=e.plugin.cipher,h=e.plugin.increment,g=e.plugin.formatKey,y=e.plugin.formatSeed;e.key=null;for(var m=Zi.util.createBuffer();m.length()<f;){e.generated>1048575&&(e.key=null),e.key===null&&s();var _=d(e.key,e.seed);e.generated+=_.length,m.putBytes(_),e.key=g(d(e.key,h(e.seed))),e.seed=y(d(e.key,e.seed))}return m.getBytes(f)};function a(f){if(e.pools[0].messageLength>=32)return l(),f();var d=32-e.pools[0].messageLength<<5;e.seedFile(d,function(h,g){if(h)return f(h);e.collect(g),l(),f()})}function s(){if(e.pools[0].messageLength>=32)return l();var f=32-e.pools[0].messageLength<<5;e.collect(e.seedFileSync(f)),l()}function l(){e.reseeds=e.reseeds===4294967295?0:e.reseeds+1;var f=e.plugin.md.create();f.update(e.keyBytes);for(var d=1,h=0;h<32;++h)e.reseeds%d==0&&(f.update(e.pools[h].digest().getBytes()),e.pools[h].start()),d=d<<1;e.keyBytes=f.digest().getBytes(),f.start(),f.update(e.keyBytes);var g=f.digest().getBytes();e.key=e.plugin.formatKey(e.keyBytes),e.seed=e.plugin.formatSeed(g),e.generated=0}function u(f){var d=null,h=Zi.util.globalScope,g=h.crypto||h.msCrypto;g&&g.getRandomValues&&(d=function(D){return g.getRandomValues(D)});var y=Zi.util.createBuffer();if(d)for(;y.length()<f;){var m=Math.max(1,Math.min(f-y.length(),65536)/4),_=new Uint32Array(Math.floor(m));try{d(_);for(var E=0;E<_.length;++E)y.putInt32(_[E])}catch(D){if(!(typeof QuotaExceededError!="undefined"&&D instanceof QuotaExceededError))throw D}}if(y.length()<f)for(var w,b,k,N=Math.floor(Math.random()*65536);y.length()<f;){b=16807*(N&65535),w=16807*(N>>16),b+=(w&32767)<<16,b+=w>>15,b=(b&2147483647)+(b>>31),N=b&4294967295;for(var E=0;E<3;++E)k=N>>>(E<<3),k^=Math.floor(Math.random()*256),y.putByte(k&255)}return y.getBytes(f)}return wd?(e.seedFile=function(f,d){wd.randomBytes(f,function(h,g){if(h)return d(h);d(null,g.toString())})},e.seedFileSync=function(f){return wd.randomBytes(f).toString()}):(e.seedFile=function(f,d){try{d(null,u(f))}catch(h){d(h)}},e.seedFileSync=u),e.collect=function(f){for(var d=f.length,h=0;h<d;++h)e.pools[e.pool].update(f.substr(h,1)),e.pool=e.pool===31?0:e.pool+1},e.collectInt=function(f,d){for(var h="",g=0;g<d;g+=8)h+=String.fromCharCode(f>>g&255);e.collect(h)},e.registerWorker=function(f){if(f===self)e.seedFile=function(h,g){function y(m){var _=m.data;_.forge&&_.forge.prng&&(self.removeEventListener("message",y),g(_.forge.prng.err,_.forge.prng.bytes))}self.addEventListener("message",y),self.postMessage({forge:{prng:{needed:h}}})};else{var d=function(h){var g=h.data;g.forge&&g.forge.prng&&e.seedFile(g.forge.prng.needed,function(y,m){f.postMessage({forge:{prng:{err:y,bytes:m}}})})};f.addEventListener("message",d)}},e}});var ri=de((Aj,dg)=>{var jr=mt();is();cg();fg();Ft();(function(){if(jr.random&&jr.random.getBytes){dg.exports=jr.random;return}(function(t){var e={},r=new Array(4),n=jr.util.createBuffer();e.formatKey=function(h){var g=jr.util.createBuffer(h);return h=new Array(4),h[0]=g.getInt32(),h[1]=g.getInt32(),h[2]=g.getInt32(),h[3]=g.getInt32(),jr.aes._expandKey(h,!1)},e.formatSeed=function(h){var g=jr.util.createBuffer(h);return h=new Array(4),h[0]=g.getInt32(),h[1]=g.getInt32(),h[2]=g.getInt32(),h[3]=g.getInt32(),h},e.cipher=function(h,g){return jr.aes._updateBlock(h,g,r,!1),n.putInt32(r[0]),n.putInt32(r[1]),n.putInt32(r[2]),n.putInt32(r[3]),n.getBytes()},e.increment=function(h){return++h[3],h},e.md=jr.md.sha256;function i(){var h=jr.prng.create(e);return h.getBytes=function(g,y){return h.generate(g,y)},h.getBytesSync=function(g){return h.generate(g)},h}var a=i(),s=null,l=jr.util.globalScope,u=l.crypto||l.msCrypto;if(u&&u.getRandomValues&&(s=function(h){return u.getRandomValues(h)}),jr.options.usePureJavaScript||!jr.util.isNodejs&&!s){if(typeof window=="undefined"||window.document===void 0,a.collectInt(+new Date,32),typeof navigator!="undefined"){var f="";for(var d in navigator)try{typeof navigator[d]=="string"&&(f+=navigator[d])}catch(h){}a.collect(f),f=null}t&&(t().mousemove(function(h){a.collectInt(h.clientX,16),a.collectInt(h.clientY,16)}),t().keypress(function(h){a.collectInt(h.charCode,8)}))}if(!jr.random)jr.random=a;else for(var d in a)jr.random[d]=a[d];jr.random.createInstance=i,dg.exports=jr.random})(typeof jQuery!="undefined"?jQuery:null)})()});var pg=de((kj,sC)=>{var In=mt();Ft();var hg=[217,120,249,196,25,221,181,237,40,233,253,121,74,160,216,157,198,126,55,131,43,118,83,142,98,76,100,136,68,139,251,162,23,154,89,245,135,179,79,19,97,69,109,141,9,129,125,50,189,143,64,235,134,183,123,11,240,149,33,34,92,107,78,130,84,214,101,147,206,96,178,28,115,86,192,20,167,140,241,220,18,117,202,31,59,190,228,209,66,61,212,48,163,60,182,38,111,191,14,218,70,105,7,87,39,242,29,155,188,148,67,3,248,17,199,246,144,239,62,231,6,195,213,47,200,102,30,215,8,232,234,222,128,82,238,247,132,170,114,172,53,77,106,42,150,26,210,113,90,21,73,116,75,159,208,94,4,24,164,236,194,224,65,110,15,81,203,204,36,145,175,80,161,244,112,57,153,124,58,133,35,184,180,122,252,2,54,91,37,85,151,49,45,93,250,152,227,138,146,174,5,223,41,16,103,108,186,201,211,0,230,207,225,158,168,44,99,22,1,63,88,226,137,169,13,56,52,27,171,51,255,176,187,72,12,95,185,177,205,46,197,243,219,71,229,165,156,119,10,166,32,104,254,127,193,173],iC=[1,2,3,5],T6=function(t,e){return t<<e&65535|(t&65535)>>16-e},A6=function(t,e){return(t&65535)>>e|t<<16-e&65535};sC.exports=In.rc2=In.rc2||{};In.rc2.expandKey=function(t,e){typeof t=="string"&&(t=In.util.createBuffer(t)),e=e||128;var r=t,n=t.length(),i=e,a=Math.ceil(i/8),s=255>>(i&7),l;for(l=n;l<128;l++)r.putByte(hg[r.at(l-1)+r.at(l-n)&255]);for(r.setAt(128-a,hg[r.at(128-a)&s]),l=127-a;l>=0;l--)r.setAt(l,hg[r.at(l+1)^r.at(l+a)]);return r};var aC=function(t,e,r){var n=!1,i=null,a=null,s=null,l,u,f,d,h=[];for(t=In.rc2.expandKey(t,e),f=0;f<64;f++)h.push(t.getInt16Le());r?(l=function(m){for(f=0;f<4;f++)m[f]+=h[d]+(m[(f+3)%4]&m[(f+2)%4])+(~m[(f+3)%4]&m[(f+1)%4]),m[f]=T6(m[f],iC[f]),d++},u=function(m){for(f=0;f<4;f++)m[f]+=h[m[(f+3)%4]&63]}):(l=function(m){for(f=3;f>=0;f--)m[f]=A6(m[f],iC[f]),m[f]-=h[d]+(m[(f+3)%4]&m[(f+2)%4])+(~m[(f+3)%4]&m[(f+1)%4]),d--},u=function(m){for(f=3;f>=0;f--)m[f]-=h[m[(f+3)%4]&63]});var g=function(m){var _=[];for(f=0;f<4;f++){var E=i.getInt16Le();s!==null&&(r?E^=s.getInt16Le():s.putInt16Le(E)),_.push(E&65535)}d=r?0:63;for(var w=0;w<m.length;w++)for(var b=0;b<m[w][0];b++)m[w][1](_);for(f=0;f<4;f++)s!==null&&(r?s.putInt16Le(_[f]):_[f]^=s.getInt16Le()),a.putInt16Le(_[f])},y=null;return y={start:function(m,_){m&&typeof m=="string"&&(m=In.util.createBuffer(m)),n=!1,i=In.util.createBuffer(),a=_||new In.util.createBuffer,s=m,y.output=a},update:function(m){for(n||i.putBuffer(m);i.length()>=8;)g([[5,l],[1,u],[6,l],[1,u],[5,l]])},finish:function(m){var _=!0;if(r)if(m)_=m(8,i,!r);else{var E=i.length()===8?8:8-i.length();i.fillWithByte(E,E)}if(_&&(n=!0,y.update()),!r&&(_=i.length()===0,_))if(m)_=m(8,a,!r);else{var w=a.length(),b=a.at(w-1);b>w?_=!1:a.truncate(b)}return _}},y};In.rc2.startEncrypting=function(t,e,r){var n=In.rc2.createEncryptionCipher(t,128);return n.start(e,r),n};In.rc2.createEncryptionCipher=function(t,e){return aC(t,e,!0)};In.rc2.startDecrypting=function(t,e,r){var n=In.rc2.createDecryptionCipher(t,128);return n.start(e,r),n};In.rc2.createDecryptionCipher=function(t,e){return aC(t,e,!1)}});var Iu=de((Ij,pC)=>{var gg=mt();pC.exports=gg.jsbn=gg.jsbn||{};var Sa,k6=244837814094590,oC=(k6&16777215)==15715070;function ye(t,e,r){this.data=[],t!=null&&(typeof t=="number"?this.fromNumber(t,e,r):e==null&&typeof t!="string"?this.fromString(t,256):this.fromString(t,e))}gg.jsbn.BigInteger=ye;function qt(){return new ye(null)}function I6(t,e,r,n,i,a){for(;--a>=0;){var s=e*this.data[t++]+r.data[n]+i;i=Math.floor(s/67108864),r.data[n++]=s&67108863}return i}function R6(t,e,r,n,i,a){for(var s=e&32767,l=e>>15;--a>=0;){var u=this.data[t]&32767,f=this.data[t++]>>15,d=l*u+f*s;u=s*u+((d&32767)<<15)+r.data[n]+(i&1073741823),i=(u>>>30)+(d>>>15)+l*f+(i>>>30),r.data[n++]=u&1073741823}return i}function lC(t,e,r,n,i,a){for(var s=e&16383,l=e>>14;--a>=0;){var u=this.data[t]&16383,f=this.data[t++]>>14,d=l*u+f*s;u=s*u+((d&16383)<<14)+r.data[n]+i,i=(u>>28)+(d>>14)+l*f,r.data[n++]=u&268435455}return i}typeof navigator=="undefined"?(ye.prototype.am=lC,Sa=28):oC&&navigator.appName=="Microsoft Internet Explorer"?(ye.prototype.am=R6,Sa=30):oC&&navigator.appName!="Netscape"?(ye.prototype.am=I6,Sa=26):(ye.prototype.am=lC,Sa=28);ye.prototype.DB=Sa;ye.prototype.DM=(1<<Sa)-1;ye.prototype.DV=1<<Sa;var mg=52;ye.prototype.FV=Math.pow(2,mg);ye.prototype.F1=mg-Sa;ye.prototype.F2=2*Sa-mg;var N6="0123456789abcdefghijklmnopqrstuvwxyz",Ed=new Array,al,ni;al="0".charCodeAt(0);for(ni=0;ni<=9;++ni)Ed[al++]=ni;al="a".charCodeAt(0);for(ni=10;ni<36;++ni)Ed[al++]=ni;al="A".charCodeAt(0);for(ni=10;ni<36;++ni)Ed[al++]=ni;function uC(t){return N6.charAt(t)}function cC(t,e){var r=Ed[t.charCodeAt(e)];return r==null?-1:r}function B6(t){for(var e=this.t-1;e>=0;--e)t.data[e]=this.data[e];t.t=this.t,t.s=this.s}function D6(t){this.t=1,this.s=t<0?-1:0,t>0?this.data[0]=t:t<-1?this.data[0]=t+this.DV:this.t=0}function ss(t){var e=qt();return e.fromInt(t),e}function O6(t,e){var r;if(e==16)r=4;else if(e==8)r=3;else if(e==256)r=8;else if(e==2)r=1;else if(e==32)r=5;else if(e==4)r=2;else{this.fromRadix(t,e);return}this.t=0,this.s=0;for(var n=t.length,i=!1,a=0;--n>=0;){var s=r==8?t[n]&255:cC(t,n);if(s<0){t.charAt(n)=="-"&&(i=!0);continue}i=!1,a==0?this.data[this.t++]=s:a+r>this.DB?(this.data[this.t-1]|=(s&(1<<this.DB-a)-1)<<a,this.data[this.t++]=s>>this.DB-a):this.data[this.t-1]|=s<<a,a+=r,a>=this.DB&&(a-=this.DB)}r==8&&(t[0]&128)!=0&&(this.s=-1,a>0&&(this.data[this.t-1]|=(1<<this.DB-a)-1<<a)),this.clamp(),i&&ye.ZERO.subTo(this,this)}function L6(){for(var t=this.s&this.DM;this.t>0&&this.data[this.t-1]==t;)--this.t}function P6(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(t==16)e=4;else if(t==8)e=3;else if(t==2)e=1;else if(t==32)e=5;else if(t==4)e=2;else return this.toRadix(t);var r=(1<<e)-1,n,i=!1,a="",s=this.t,l=this.DB-s*this.DB%e;if(s-- >0)for(l<this.DB&&(n=this.data[s]>>l)>0&&(i=!0,a=uC(n));s>=0;)l<e?(n=(this.data[s]&(1<<l)-1)<<e-l,n|=this.data[--s]>>(l+=this.DB-e)):(n=this.data[s]>>(l-=e)&r,l<=0&&(l+=this.DB,--s)),n>0&&(i=!0),i&&(a+=uC(n));return i?a:"0"}function M6(){var t=qt();return ye.ZERO.subTo(this,t),t}function U6(){return this.s<0?this.negate():this}function F6(t){var e=this.s-t.s;if(e!=0)return e;var r=this.t;if(e=r-t.t,e!=0)return this.s<0?-e:e;for(;--r>=0;)if((e=this.data[r]-t.data[r])!=0)return e;return 0}function Cd(t){var e=1,r;return(r=t>>>16)!=0&&(t=r,e+=16),(r=t>>8)!=0&&(t=r,e+=8),(r=t>>4)!=0&&(t=r,e+=4),(r=t>>2)!=0&&(t=r,e+=2),(r=t>>1)!=0&&(t=r,e+=1),e}function q6(){return this.t<=0?0:this.DB*(this.t-1)+Cd(this.data[this.t-1]^this.s&this.DM)}function G6(t,e){var r;for(r=this.t-1;r>=0;--r)e.data[r+t]=this.data[r];for(r=t-1;r>=0;--r)e.data[r]=0;e.t=this.t+t,e.s=this.s}function V6(t,e){for(var r=t;r<this.t;++r)e.data[r-t]=this.data[r];e.t=Math.max(this.t-t,0),e.s=this.s}function j6(t,e){var r=t%this.DB,n=this.DB-r,i=(1<<n)-1,a=Math.floor(t/this.DB),s=this.s<<r&this.DM,l;for(l=this.t-1;l>=0;--l)e.data[l+a+1]=this.data[l]>>n|s,s=(this.data[l]&i)<<r;for(l=a-1;l>=0;--l)e.data[l]=0;e.data[a]=s,e.t=this.t+a+1,e.s=this.s,e.clamp()}function K6(t,e){e.s=this.s;var r=Math.floor(t/this.DB);if(r>=this.t){e.t=0;return}var n=t%this.DB,i=this.DB-n,a=(1<<n)-1;e.data[0]=this.data[r]>>n;for(var s=r+1;s<this.t;++s)e.data[s-r-1]|=(this.data[s]&a)<<i,e.data[s-r]=this.data[s]>>n;n>0&&(e.data[this.t-r-1]|=(this.s&a)<<i),e.t=this.t-r,e.clamp()}function H6(t,e){for(var r=0,n=0,i=Math.min(t.t,this.t);r<i;)n+=this.data[r]-t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n-=t.s;r<this.t;)n+=this.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<t.t;)n-=t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n-=t.s}e.s=n<0?-1:0,n<-1?e.data[r++]=this.DV+n:n>0&&(e.data[r++]=n),e.t=r,e.clamp()}function Y6(t,e){var r=this.abs(),n=t.abs(),i=r.t;for(e.t=i+n.t;--i>=0;)e.data[i]=0;for(i=0;i<n.t;++i)e.data[i+r.t]=r.am(0,n.data[i],e,i,0,r.t);e.s=0,e.clamp(),this.s!=t.s&&ye.ZERO.subTo(e,e)}function W6(t){for(var e=this.abs(),r=t.t=2*e.t;--r>=0;)t.data[r]=0;for(r=0;r<e.t-1;++r){var n=e.am(r,e.data[r],t,2*r,0,1);(t.data[r+e.t]+=e.am(r+1,2*e.data[r],t,2*r+1,n,e.t-r-1))>=e.DV&&(t.data[r+e.t]-=e.DV,t.data[r+e.t+1]=1)}t.t>0&&(t.data[t.t-1]+=e.am(r,e.data[r],t,2*r,0,1)),t.s=0,t.clamp()}function z6(t,e,r){var n=t.abs();if(!(n.t<=0)){var i=this.abs();if(i.t<n.t){e!=null&&e.fromInt(0),r!=null&&this.copyTo(r);return}r==null&&(r=qt());var a=qt(),s=this.s,l=t.s,u=this.DB-Cd(n.data[n.t-1]);u>0?(n.lShiftTo(u,a),i.lShiftTo(u,r)):(n.copyTo(a),i.copyTo(r));var f=a.t,d=a.data[f-1];if(d!=0){var h=d*(1<<this.F1)+(f>1?a.data[f-2]>>this.F2:0),g=this.FV/h,y=(1<<this.F1)/h,m=1<<this.F2,_=r.t,E=_-f,w=e==null?qt():e;for(a.dlShiftTo(E,w),r.compareTo(w)>=0&&(r.data[r.t++]=1,r.subTo(w,r)),ye.ONE.dlShiftTo(f,w),w.subTo(a,a);a.t<f;)a.data[a.t++]=0;for(;--E>=0;){var b=r.data[--_]==d?this.DM:Math.floor(r.data[_]*g+(r.data[_-1]+m)*y);if((r.data[_]+=a.am(0,b,r,E,0,f))<b)for(a.dlShiftTo(E,w),r.subTo(w,r);r.data[_]<--b;)r.subTo(w,r)}e!=null&&(r.drShiftTo(f,e),s!=l&&ye.ZERO.subTo(e,e)),r.t=f,r.clamp(),u>0&&r.rShiftTo(u,r),s<0&&ye.ZERO.subTo(r,r)}}}function Q6(t){var e=qt();return this.abs().divRemTo(t,null,e),this.s<0&&e.compareTo(ye.ZERO)>0&&t.subTo(e,e),e}function Vs(t){this.m=t}function X6(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t}function J6(t){return t}function Z6(t){t.divRemTo(this.m,null,t)}function $6(t,e,r){t.multiplyTo(e,r),this.reduce(r)}function e5(t,e){t.squareTo(e),this.reduce(e)}Vs.prototype.convert=X6;Vs.prototype.revert=J6;Vs.prototype.reduce=Z6;Vs.prototype.mulTo=$6;Vs.prototype.sqrTo=e5;function t5(){if(this.t<1)return 0;var t=this.data[0];if((t&1)==0)return 0;var e=t&3;return e=e*(2-(t&15)*e)&15,e=e*(2-(t&255)*e)&255,e=e*(2-((t&65535)*e&65535))&65535,e=e*(2-t*e%this.DV)%this.DV,e>0?this.DV-e:-e}function js(t){this.m=t,this.mp=t.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function r5(t){var e=qt();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo(ye.ZERO)>0&&this.m.subTo(e,e),e}function n5(t){var e=qt();return t.copyTo(e),this.reduce(e),e}function i5(t){for(;t.t<=this.mt2;)t.data[t.t++]=0;for(var e=0;e<this.m.t;++e){var r=t.data[e]&32767,n=r*this.mpl+((r*this.mph+(t.data[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(r=e+this.m.t,t.data[r]+=this.m.am(0,n,t,e,0,this.m.t);t.data[r]>=t.DV;)t.data[r]-=t.DV,t.data[++r]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)}function a5(t,e){t.squareTo(e),this.reduce(e)}function s5(t,e,r){t.multiplyTo(e,r),this.reduce(r)}js.prototype.convert=r5;js.prototype.revert=n5;js.prototype.reduce=i5;js.prototype.mulTo=s5;js.prototype.sqrTo=a5;function o5(){return(this.t>0?this.data[0]&1:this.s)==0}function l5(t,e){if(t>4294967295||t<1)return ye.ONE;var r=qt(),n=qt(),i=e.convert(this),a=Cd(t)-1;for(i.copyTo(r);--a>=0;)if(e.sqrTo(r,n),(t&1<<a)>0)e.mulTo(n,i,r);else{var s=r;r=n,n=s}return e.revert(r)}function u5(t,e){var r;return t<256||e.isEven()?r=new Vs(e):r=new js(e),this.exp(t,r)}ye.prototype.copyTo=B6;ye.prototype.fromInt=D6;ye.prototype.fromString=O6;ye.prototype.clamp=L6;ye.prototype.dlShiftTo=G6;ye.prototype.drShiftTo=V6;ye.prototype.lShiftTo=j6;ye.prototype.rShiftTo=K6;ye.prototype.subTo=H6;ye.prototype.multiplyTo=Y6;ye.prototype.squareTo=W6;ye.prototype.divRemTo=z6;ye.prototype.invDigit=t5;ye.prototype.isEven=o5;ye.prototype.exp=l5;ye.prototype.toString=P6;ye.prototype.negate=M6;ye.prototype.abs=U6;ye.prototype.compareTo=F6;ye.prototype.bitLength=q6;ye.prototype.mod=Q6;ye.prototype.modPowInt=u5;ye.ZERO=ss(0);ye.ONE=ss(1);function c5(){var t=qt();return this.copyTo(t),t}function f5(){if(this.s<0){if(this.t==1)return this.data[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this.data[0];if(this.t==0)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]}function d5(){return this.t==0?this.s:this.data[0]<<24>>24}function h5(){return this.t==0?this.s:this.data[0]<<16>>16}function p5(t){return Math.floor(Math.LN2*this.DB/Math.log(t))}function g5(){return this.s<0?-1:this.t<=0||this.t==1&&this.data[0]<=0?0:1}function m5(t){if(t==null&&(t=10),this.signum()==0||t<2||t>36)return"0";var e=this.chunkSize(t),r=Math.pow(t,e),n=ss(r),i=qt(),a=qt(),s="";for(this.divRemTo(n,i,a);i.signum()>0;)s=(r+a.intValue()).toString(t).substr(1)+s,i.divRemTo(n,i,a);return a.intValue().toString(t)+s}function y5(t,e){this.fromInt(0),e==null&&(e=10);for(var r=this.chunkSize(e),n=Math.pow(e,r),i=!1,a=0,s=0,l=0;l<t.length;++l){var u=cC(t,l);if(u<0){t.charAt(l)=="-"&&this.signum()==0&&(i=!0);continue}s=e*s+u,++a>=r&&(this.dMultiply(n),this.dAddOffset(s,0),a=0,s=0)}a>0&&(this.dMultiply(Math.pow(e,a)),this.dAddOffset(s,0)),i&&ye.ZERO.subTo(this,this)}function v5(t,e,r){if(typeof e=="number")if(t<2)this.fromInt(1);else for(this.fromNumber(t,r),this.testBit(t-1)||this.bitwiseTo(ye.ONE.shiftLeft(t-1),yg,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(e);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(ye.ONE.shiftLeft(t-1),this);else{var n=new Array,i=t&7;n.length=(t>>3)+1,e.nextBytes(n),i>0?n[0]&=(1<<i)-1:n[0]=0,this.fromString(n,256)}}function _5(){var t=this.t,e=new Array;e[0]=this.s;var r=this.DB-t*this.DB%8,n,i=0;if(t-- >0)for(r<this.DB&&(n=this.data[t]>>r)!=(this.s&this.DM)>>r&&(e[i++]=n|this.s<<this.DB-r);t>=0;)r<8?(n=(this.data[t]&(1<<r)-1)<<8-r,n|=this.data[--t]>>(r+=this.DB-8)):(n=this.data[t]>>(r-=8)&255,r<=0&&(r+=this.DB,--t)),(n&128)!=0&&(n|=-256),i==0&&(this.s&128)!=(n&128)&&++i,(i>0||n!=this.s)&&(e[i++]=n);return e}function w5(t){return this.compareTo(t)==0}function E5(t){return this.compareTo(t)<0?this:t}function C5(t){return this.compareTo(t)>0?this:t}function b5(t,e,r){var n,i,a=Math.min(t.t,this.t);for(n=0;n<a;++n)r.data[n]=e(this.data[n],t.data[n]);if(t.t<this.t){for(i=t.s&this.DM,n=a;n<this.t;++n)r.data[n]=e(this.data[n],i);r.t=this.t}else{for(i=this.s&this.DM,n=a;n<t.t;++n)r.data[n]=e(i,t.data[n]);r.t=t.t}r.s=e(this.s,t.s),r.clamp()}function x5(t,e){return t&e}function S5(t){var e=qt();return this.bitwiseTo(t,x5,e),e}function yg(t,e){return t|e}function T5(t){var e=qt();return this.bitwiseTo(t,yg,e),e}function fC(t,e){return t^e}function A5(t){var e=qt();return this.bitwiseTo(t,fC,e),e}function dC(t,e){return t&~e}function k5(t){var e=qt();return this.bitwiseTo(t,dC,e),e}function I5(){for(var t=qt(),e=0;e<this.t;++e)t.data[e]=this.DM&~this.data[e];return t.t=this.t,t.s=~this.s,t}function R5(t){var e=qt();return t<0?this.rShiftTo(-t,e):this.lShiftTo(t,e),e}function N5(t){var e=qt();return t<0?this.lShiftTo(-t,e):this.rShiftTo(t,e),e}function B5(t){if(t==0)return-1;var e=0;return(t&65535)==0&&(t>>=16,e+=16),(t&255)==0&&(t>>=8,e+=8),(t&15)==0&&(t>>=4,e+=4),(t&3)==0&&(t>>=2,e+=2),(t&1)==0&&++e,e}function D5(){for(var t=0;t<this.t;++t)if(this.data[t]!=0)return t*this.DB+B5(this.data[t]);return this.s<0?this.t*this.DB:-1}function O5(t){for(var e=0;t!=0;)t&=t-1,++e;return e}function L5(){for(var t=0,e=this.s&this.DM,r=0;r<this.t;++r)t+=O5(this.data[r]^e);return t}function P5(t){var e=Math.floor(t/this.DB);return e>=this.t?this.s!=0:(this.data[e]&1<<t%this.DB)!=0}function M5(t,e){var r=ye.ONE.shiftLeft(t);return this.bitwiseTo(r,e,r),r}function U5(t){return this.changeBit(t,yg)}function F5(t){return this.changeBit(t,dC)}function q5(t){return this.changeBit(t,fC)}function G5(t,e){for(var r=0,n=0,i=Math.min(t.t,this.t);r<i;)n+=this.data[r]+t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n+=t.s;r<this.t;)n+=this.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<t.t;)n+=t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n+=t.s}e.s=n<0?-1:0,n>0?e.data[r++]=n:n<-1&&(e.data[r++]=this.DV+n),e.t=r,e.clamp()}function V5(t){var e=qt();return this.addTo(t,e),e}function j5(t){var e=qt();return this.subTo(t,e),e}function K5(t){var e=qt();return this.multiplyTo(t,e),e}function H5(t){var e=qt();return this.divRemTo(t,e,null),e}function Y5(t){var e=qt();return this.divRemTo(t,null,e),e}function W5(t){var e=qt(),r=qt();return this.divRemTo(t,e,r),new Array(e,r)}function z5(t){this.data[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()}function Q5(t,e){if(t!=0){for(;this.t<=e;)this.data[this.t++]=0;for(this.data[e]+=t;this.data[e]>=this.DV;)this.data[e]-=this.DV,++e>=this.t&&(this.data[this.t++]=0),++this.data[e]}}function ku(){}function hC(t){return t}function X5(t,e,r){t.multiplyTo(e,r)}function J5(t,e){t.squareTo(e)}ku.prototype.convert=hC;ku.prototype.revert=hC;ku.prototype.mulTo=X5;ku.prototype.sqrTo=J5;function Z5(t){return this.exp(t,new ku)}function $5(t,e,r){var n=Math.min(this.t+t.t,e);for(r.s=0,r.t=n;n>0;)r.data[--n]=0;var i;for(i=r.t-this.t;n<i;++n)r.data[n+this.t]=this.am(0,t.data[n],r,n,0,this.t);for(i=Math.min(t.t,e);n<i;++n)this.am(0,t.data[n],r,n,0,e-n);r.clamp()}function e8(t,e,r){--e;var n=r.t=this.t+t.t-e;for(r.s=0;--n>=0;)r.data[n]=0;for(n=Math.max(e-this.t,0);n<t.t;++n)r.data[this.t+n-e]=this.am(e-n,t.data[n],r,0,0,this.t+n-e);r.clamp(),r.drShiftTo(1,r)}function sl(t){this.r2=qt(),this.q3=qt(),ye.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}function t8(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=qt();return t.copyTo(e),this.reduce(e),e}function r8(t){return t}function n8(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);t.compareTo(this.m)>=0;)t.subTo(this.m,t)}function i8(t,e){t.squareTo(e),this.reduce(e)}function a8(t,e,r){t.multiplyTo(e,r),this.reduce(r)}sl.prototype.convert=t8;sl.prototype.revert=r8;sl.prototype.reduce=n8;sl.prototype.mulTo=a8;sl.prototype.sqrTo=i8;function s8(t,e){var r=t.bitLength(),n,i=ss(1),a;if(r<=0)return i;r<18?n=1:r<48?n=3:r<144?n=4:r<768?n=5:n=6,r<8?a=new Vs(e):e.isEven()?a=new sl(e):a=new js(e);var s=new Array,l=3,u=n-1,f=(1<<n)-1;if(s[1]=a.convert(this),n>1){var d=qt();for(a.sqrTo(s[1],d);l<=f;)s[l]=qt(),a.mulTo(d,s[l-2],s[l]),l+=2}var h=t.t-1,g,y=!0,m=qt(),_;for(r=Cd(t.data[h])-1;h>=0;){for(r>=u?g=t.data[h]>>r-u&f:(g=(t.data[h]&(1<<r+1)-1)<<u-r,h>0&&(g|=t.data[h-1]>>this.DB+r-u)),l=n;(g&1)==0;)g>>=1,--l;if((r-=l)<0&&(r+=this.DB,--h),y)s[g].copyTo(i),y=!1;else{for(;l>1;)a.sqrTo(i,m),a.sqrTo(m,i),l-=2;l>0?a.sqrTo(i,m):(_=i,i=m,m=_),a.mulTo(m,s[g],i)}for(;h>=0&&(t.data[h]&1<<r)==0;)a.sqrTo(i,m),_=i,i=m,m=_,--r<0&&(r=this.DB-1,--h)}return a.revert(i)}function o8(t){var e=this.s<0?this.negate():this.clone(),r=t.s<0?t.negate():t.clone();if(e.compareTo(r)<0){var n=e;e=r,r=n}var i=e.getLowestSetBit(),a=r.getLowestSetBit();if(a<0)return e;for(i<a&&(a=i),a>0&&(e.rShiftTo(a,e),r.rShiftTo(a,r));e.signum()>0;)(i=e.getLowestSetBit())>0&&e.rShiftTo(i,e),(i=r.getLowestSetBit())>0&&r.rShiftTo(i,r),e.compareTo(r)>=0?(e.subTo(r,e),e.rShiftTo(1,e)):(r.subTo(e,r),r.rShiftTo(1,r));return a>0&&r.lShiftTo(a,r),r}function l8(t){if(t<=0)return 0;var e=this.DV%t,r=this.s<0?t-1:0;if(this.t>0)if(e==0)r=this.data[0]%t;else for(var n=this.t-1;n>=0;--n)r=(e*r+this.data[n])%t;return r}function u8(t){var e=t.isEven();if(this.isEven()&&e||t.signum()==0)return ye.ZERO;for(var r=t.clone(),n=this.clone(),i=ss(1),a=ss(0),s=ss(0),l=ss(1);r.signum()!=0;){for(;r.isEven();)r.rShiftTo(1,r),e?((!i.isEven()||!a.isEven())&&(i.addTo(this,i),a.subTo(t,a)),i.rShiftTo(1,i)):a.isEven()||a.subTo(t,a),a.rShiftTo(1,a);for(;n.isEven();)n.rShiftTo(1,n),e?((!s.isEven()||!l.isEven())&&(s.addTo(this,s),l.subTo(t,l)),s.rShiftTo(1,s)):l.isEven()||l.subTo(t,l),l.rShiftTo(1,l);r.compareTo(n)>=0?(r.subTo(n,r),e&&i.subTo(s,i),a.subTo(l,a)):(n.subTo(r,n),e&&s.subTo(i,s),l.subTo(a,l))}if(n.compareTo(ye.ONE)!=0)return ye.ZERO;if(l.compareTo(t)>=0)return l.subtract(t);if(l.signum()<0)l.addTo(t,l);else return l;return l.signum()<0?l.add(t):l}var Si=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],c8=(1<<26)/Si[Si.length-1];function f8(t){var e,r=this.abs();if(r.t==1&&r.data[0]<=Si[Si.length-1]){for(e=0;e<Si.length;++e)if(r.data[0]==Si[e])return!0;return!1}if(r.isEven())return!1;for(e=1;e<Si.length;){for(var n=Si[e],i=e+1;i<Si.length&&n<c8;)n*=Si[i++];for(n=r.modInt(n);e<i;)if(n%Si[e++]==0)return!1}return r.millerRabin(t)}function d8(t){var e=this.subtract(ye.ONE),r=e.getLowestSetBit();if(r<=0)return!1;for(var n=e.shiftRight(r),i=h8(),a,s=0;s<t;++s){do a=new ye(this.bitLength(),i);while(a.compareTo(ye.ONE)<=0||a.compareTo(e)>=0);var l=a.modPow(n,this);if(l.compareTo(ye.ONE)!=0&&l.compareTo(e)!=0){for(var u=1;u++<r&&l.compareTo(e)!=0;)if(l=l.modPowInt(2,this),l.compareTo(ye.ONE)==0)return!1;if(l.compareTo(e)!=0)return!1}}return!0}function h8(){return{nextBytes:function(t){for(var e=0;e<t.length;++e)t[e]=Math.floor(Math.random()*256)}}}ye.prototype.chunkSize=p5;ye.prototype.toRadix=m5;ye.prototype.fromRadix=y5;ye.prototype.fromNumber=v5;ye.prototype.bitwiseTo=b5;ye.prototype.changeBit=M5;ye.prototype.addTo=G5;ye.prototype.dMultiply=z5;ye.prototype.dAddOffset=Q5;ye.prototype.multiplyLowerTo=$5;ye.prototype.multiplyUpperTo=e8;ye.prototype.modInt=l8;ye.prototype.millerRabin=d8;ye.prototype.clone=c5;ye.prototype.intValue=f5;ye.prototype.byteValue=d5;ye.prototype.shortValue=h5;ye.prototype.signum=g5;ye.prototype.toByteArray=_5;ye.prototype.equals=w5;ye.prototype.min=E5;ye.prototype.max=C5;ye.prototype.and=S5;ye.prototype.or=T5;ye.prototype.xor=A5;ye.prototype.andNot=k5;ye.prototype.not=I5;ye.prototype.shiftLeft=R5;ye.prototype.shiftRight=N5;ye.prototype.getLowestSetBit=D5;ye.prototype.bitCount=L5;ye.prototype.testBit=P5;ye.prototype.setBit=U5;ye.prototype.clearBit=F5;ye.prototype.flipBit=q5;ye.prototype.add=V5;ye.prototype.subtract=j5;ye.prototype.multiply=K5;ye.prototype.divide=H5;ye.prototype.remainder=Y5;ye.prototype.divideAndRemainder=W5;ye.prototype.modPow=s8;ye.prototype.modInverse=u8;ye.prototype.pow=Z5;ye.prototype.gcd=o8;ye.prototype.isProbablePrime=f8});var ol=de((Rj,vC)=>{var $i=mt();zi();Ft();var gC=vC.exports=$i.sha1=$i.sha1||{};$i.md.sha1=$i.md.algorithms.sha1=gC;gC.create=function(){mC||p8();var t=null,e=$i.util.createBuffer(),r=new Array(80),n={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,a=0;a<i;++a)n.fullMessageLength.push(0);return e=$i.util.createBuffer(),t={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},n},n.start(),n.update=function(i,a){a==="utf8"&&(i=$i.util.encodeUtf8(i));var s=i.length;n.messageLength+=s,s=[s/4294967296>>>0,s>>>0];for(var l=n.fullMessageLength.length-1;l>=0;--l)n.fullMessageLength[l]+=s[1],s[1]=s[0]+(n.fullMessageLength[l]/4294967296>>>0),n.fullMessageLength[l]=n.fullMessageLength[l]>>>0,s[0]=s[1]/4294967296>>>0;return e.putBytes(i),yC(t,r,e),(e.read>2048||e.length()===0)&&e.compact(),n},n.digest=function(){var i=$i.util.createBuffer();i.putBytes(e.bytes());var a=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,s=a&n.blockLength-1;i.putBytes(vg.substr(0,n.blockLength-s));for(var l,u,f=n.fullMessageLength[0]*8,d=0;d<n.fullMessageLength.length-1;++d)l=n.fullMessageLength[d+1]*8,u=l/4294967296>>>0,f+=u,i.putInt32(f>>>0),f=l>>>0;i.putInt32(f);var h={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3,h4:t.h4};yC(h,r,i);var g=$i.util.createBuffer();return g.putInt32(h.h0),g.putInt32(h.h1),g.putInt32(h.h2),g.putInt32(h.h3),g.putInt32(h.h4),g},n};var vg=null,mC=!1;function p8(){vg=String.fromCharCode(128),vg+=$i.util.fillString(String.fromCharCode(0),64),mC=!0}function yC(t,e,r){for(var n,i,a,s,l,u,f,d,h=r.length();h>=64;){for(i=t.h0,a=t.h1,s=t.h2,l=t.h3,u=t.h4,d=0;d<16;++d)n=r.getInt32(),e[d]=n,f=l^a&(s^l),n=(i<<5|i>>>27)+f+u+1518500249+n,u=l,l=s,s=(a<<30|a>>>2)>>>0,a=i,i=n;for(;d<20;++d)n=e[d-3]^e[d-8]^e[d-14]^e[d-16],n=n<<1|n>>>31,e[d]=n,f=l^a&(s^l),n=(i<<5|i>>>27)+f+u+1518500249+n,u=l,l=s,s=(a<<30|a>>>2)>>>0,a=i,i=n;for(;d<32;++d)n=e[d-3]^e[d-8]^e[d-14]^e[d-16],n=n<<1|n>>>31,e[d]=n,f=a^s^l,n=(i<<5|i>>>27)+f+u+1859775393+n,u=l,l=s,s=(a<<30|a>>>2)>>>0,a=i,i=n;for(;d<40;++d)n=e[d-6]^e[d-16]^e[d-28]^e[d-32],n=n<<2|n>>>30,e[d]=n,f=a^s^l,n=(i<<5|i>>>27)+f+u+1859775393+n,u=l,l=s,s=(a<<30|a>>>2)>>>0,a=i,i=n;for(;d<60;++d)n=e[d-6]^e[d-16]^e[d-28]^e[d-32],n=n<<2|n>>>30,e[d]=n,f=a&s|l&(a^s),n=(i<<5|i>>>27)+f+u+2400959708+n,u=l,l=s,s=(a<<30|a>>>2)>>>0,a=i,i=n;for(;d<80;++d)n=e[d-6]^e[d-16]^e[d-28]^e[d-32],n=n<<2|n>>>30,e[d]=n,f=a^s^l,n=(i<<5|i>>>27)+f+u+3395469782+n,u=l,l=s,s=(a<<30|a>>>2)>>>0,a=i,i=n;t.h0=t.h0+i|0,t.h1=t.h1+a|0,t.h2=t.h2+s|0,t.h3=t.h3+l|0,t.h4=t.h4+u|0,h-=64}}});var _g=de((Nj,wC)=>{var ea=mt();Ft();ri();ol();var _C=wC.exports=ea.pkcs1=ea.pkcs1||{};_C.encode_rsa_oaep=function(t,e,r){var n,i,a,s;typeof r=="string"?(n=r,i=arguments[3]||void 0,a=arguments[4]||void 0):r&&(n=r.label||void 0,i=r.seed||void 0,a=r.md||void 0,r.mgf1&&r.mgf1.md&&(s=r.mgf1.md)),a?a.start():a=ea.md.sha1.create(),s||(s=a);var l=Math.ceil(t.n.bitLength()/8),u=l-2*a.digestLength-2;if(e.length>u){var f=new Error("RSAES-OAEP input message length is too long.");throw f.length=e.length,f.maxLength=u,f}n||(n=""),a.update(n,"raw");for(var d=a.digest(),h="",g=u-e.length,y=0;y<g;y++)h+="\0";var m=d.getBytes()+h+""+e;if(!i)i=ea.random.getBytes(a.digestLength);else if(i.length!==a.digestLength){var f=new Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.");throw f.seedLength=i.length,f.digestLength=a.digestLength,f}var _=bd(i,l-a.digestLength-1,s),E=ea.util.xorBytes(m,_,m.length),w=bd(E,a.digestLength,s),b=ea.util.xorBytes(i,w,i.length);return"\0"+b+E};_C.decode_rsa_oaep=function(t,e,r){var n,i,a;typeof r=="string"?(n=r,i=arguments[3]||void 0):r&&(n=r.label||void 0,i=r.md||void 0,r.mgf1&&r.mgf1.md&&(a=r.mgf1.md));var s=Math.ceil(t.n.bitLength()/8);if(e.length!==s){var E=new Error("RSAES-OAEP encoded message length is invalid.");throw E.length=e.length,E.expectedLength=s,E}if(i===void 0?i=ea.md.sha1.create():i.start(),a||(a=i),s<2*i.digestLength+2)throw new Error("RSAES-OAEP key is too short for the hash function.");n||(n=""),i.update(n,"raw");for(var l=i.digest().getBytes(),u=e.charAt(0),f=e.substring(1,i.digestLength+1),d=e.substring(1+i.digestLength),h=bd(d,i.digestLength,a),g=ea.util.xorBytes(f,h,f.length),y=bd(g,s-i.digestLength-1,a),m=ea.util.xorBytes(d,y,d.length),_=m.substring(0,i.digestLength),E=u!=="\0",w=0;w<i.digestLength;++w)E|=l.charAt(w)!==_.charAt(w);for(var b=1,k=i.digestLength,N=i.digestLength;N<m.length;N++){var D=m.charCodeAt(N),B=D&1^1,ee=b?65534:0;E|=D&ee,b=b&B,k+=b}if(E||m.charCodeAt(k)!==1)throw new Error("Invalid RSAES-OAEP padding.");return m.substring(k+1)};function bd(t,e,r){r||(r=ea.md.sha1.create());for(var n="",i=Math.ceil(e/r.digestLength),a=0;a<i;++a){var s=String.fromCharCode(a>>24&255,a>>16&255,a>>8&255,a&255);r.start(),r.update(t+s),n+=r.digest().getBytes()}return n.substring(0,e)}});var Eg=de((Bj,wg)=>{var os=mt();Ft();Iu();ri();(function(){if(os.prime){wg.exports=os.prime;return}var t=wg.exports=os.prime=os.prime||{},e=os.jsbn.BigInteger,r=[6,4,2,4,2,4,6,2],n=new e(null);n.fromInt(30);var i=function(h,g){return h|g};t.generateProbablePrime=function(h,g,y){typeof g=="function"&&(y=g,g={}),g=g||{};var m=g.algorithm||"PRIMEINC";typeof m=="string"&&(m={name:m}),m.options=m.options||{};var _=g.prng||os.random,E={nextBytes:function(w){for(var b=_.getBytesSync(w.length),k=0;k<w.length;++k)w[k]=b.charCodeAt(k)}};if(m.name==="PRIMEINC")return a(h,E,m.options,y);throw new Error("Invalid prime generation algorithm: "+m.name)};function a(h,g,y,m){return"workers"in y?u(h,g,y,m):s(h,g,y,m)}function s(h,g,y,m){var _=f(h,g),E=0,w=d(_.bitLength());"millerRabinTests"in y&&(w=y.millerRabinTests);var b=10;"maxBlockTime"in y&&(b=y.maxBlockTime),l(_,h,g,E,w,b,m)}function l(h,g,y,m,_,E,w){var b=+new Date;do{if(h.bitLength()>g&&(h=f(g,y)),h.isProbablePrime(_))return w(null,h);h.dAddOffset(r[m++%8],0)}while(E<0||+new Date-b<E);os.util.setImmediate(function(){l(h,g,y,m,_,E,w)})}function u(h,g,y,m){if(typeof Worker=="undefined")return s(h,g,y,m);var _=f(h,g),E=y.workers,w=y.workLoad||100,b=w*30/8,k=y.workerScript||"forge/prime.worker.js";if(E===-1)return os.util.estimateCores(function(D,B){D&&(B=2),E=B-1,N()});N();function N(){E=Math.max(1,E);for(var D=[],B=0;B<E;++B)D[B]=new Worker(k);for(var ee=E,B=0;B<E;++B)D[B].addEventListener("message",U);var q=!1;function U(oe){if(!q){--ee;var ae=oe.data;if(ae.found){for(var Ee=0;Ee<D.length;++Ee)D[Ee].terminate();return q=!0,m(null,new e(ae.prime,16))}_.bitLength()>h&&(_=f(h,g));var Ie=_.toString(16);oe.target.postMessage({hex:Ie,workLoad:w}),_.dAddOffset(b,0)}}}}function f(h,g){var y=new e(h,g),m=h-1;return y.testBit(m)||y.bitwiseTo(e.ONE.shiftLeft(m),i,y),y.dAddOffset(31-y.mod(n).byteValue(),0),y}function d(h){return h<=100?27:h<=150?18:h<=200?15:h<=250?12:h<=300?9:h<=350?8:h<=400?7:h<=500?6:h<=600?5:h<=800?4:h<=1250?3:2}})()});var Ru=de((Dj,AC)=>{var Fe=mt();xi();Iu();as();_g();Eg();ri();Ft();typeof Pt=="undefined"&&(Pt=Fe.jsbn.BigInteger);var Pt,Cg=Fe.util.isNodejs?require("crypto"):null,$=Fe.asn1,ii=Fe.util;Fe.pki=Fe.pki||{};AC.exports=Fe.pki.rsa=Fe.rsa=Fe.rsa||{};var it=Fe.pki,g8=[6,4,2,4,2,4,6,2],m8={name:"PrivateKeyInfo",tagClass:$.Class.UNIVERSAL,type:$.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:$.Class.UNIVERSAL,type:$.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:$.Class.UNIVERSAL,type:$.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:$.Class.UNIVERSAL,type:$.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:$.Class.UNIVERSAL,type:$.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},y8={name:"RSAPrivateKey",tagClass:$.Class.UNIVERSAL,type:$.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:$.Class.UNIVERSAL,type:$.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",tagClass:$.Class.UNIVERSAL,type:$.Type.INTEGER,constructed:!1,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",tagClass:$.Class.UNIVERSAL,type:$.Type.INTEGER,constructed:!1,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",tagClass:$.Class.UNIVERSAL,type:$.Type.INTEGER,constructed:!1,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",tagClass:$.Class.UNIVERSAL,type:$.Type.INTEGER,constructed:!1,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",tagClass:$.Class.UNIVERSAL,type:$.Type.INTEGER,constructed:!1,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",tagClass:$.Class.UNIVERSAL,type:$.Type.INTEGER,constructed:!1,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",tagClass:$.Class.UNIVERSAL,type:$.Type.INTEGER,constructed:!1,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",tagClass:$.Class.UNIVERSAL,type:$.Type.INTEGER,constructed:!1,capture:"privateKeyCoefficient"}]},v8={name:"RSAPublicKey",tagClass:$.Class.UNIVERSAL,type:$.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:$.Class.UNIVERSAL,type:$.Type.INTEGER,constructed:!1,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",tagClass:$.Class.UNIVERSAL,type:$.Type.INTEGER,constructed:!1,capture:"publicKeyExponent"}]},_8=Fe.pki.rsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:$.Class.UNIVERSAL,type:$.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:$.Class.UNIVERSAL,type:$.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:$.Class.UNIVERSAL,type:$.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:$.Class.UNIVERSAL,type:$.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",tagClass:$.Class.UNIVERSAL,type:$.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"rsaPublicKey"}]}]},w8={name:"DigestInfo",tagClass:$.Class.UNIVERSAL,type:$.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm",tagClass:$.Class.UNIVERSAL,type:$.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm.algorithmIdentifier",tagClass:$.Class.UNIVERSAL,type:$.Type.OID,constructed:!1,capture:"algorithmIdentifier"},{name:"DigestInfo.DigestAlgorithm.parameters",tagClass:$.Class.UNIVERSAL,type:$.Type.NULL,capture:"parameters",optional:!0,constructed:!1}]},{name:"DigestInfo.digest",tagClass:$.Class.UNIVERSAL,type:$.Type.OCTETSTRING,constructed:!1,capture:"digest"}]},E8=function(t){var e;if(t.algorithm in it.oids)e=it.oids[t.algorithm];else{var r=new Error("Unknown message digest algorithm.");throw r.algorithm=t.algorithm,r}var n=$.oidToDer(e).getBytes(),i=$.create($.Class.UNIVERSAL,$.Type.SEQUENCE,!0,[]),a=$.create($.Class.UNIVERSAL,$.Type.SEQUENCE,!0,[]);a.value.push($.create($.Class.UNIVERSAL,$.Type.OID,!1,n)),a.value.push($.create($.Class.UNIVERSAL,$.Type.NULL,!1,""));var s=$.create($.Class.UNIVERSAL,$.Type.OCTETSTRING,!1,t.digest().getBytes());return i.value.push(a),i.value.push(s),$.toDer(i).getBytes()},EC=function(t,e,r){if(r)return t.modPow(e.e,e.n);if(!e.p||!e.q)return t.modPow(e.d,e.n);e.dP||(e.dP=e.d.mod(e.p.subtract(Pt.ONE))),e.dQ||(e.dQ=e.d.mod(e.q.subtract(Pt.ONE))),e.qInv||(e.qInv=e.q.modInverse(e.p));var n;do n=new Pt(Fe.util.bytesToHex(Fe.random.getBytes(e.n.bitLength()/8)),16);while(n.compareTo(e.n)>=0||!n.gcd(e.n).equals(Pt.ONE));t=t.multiply(n.modPow(e.e,e.n)).mod(e.n);for(var i=t.mod(e.p).modPow(e.dP,e.p),a=t.mod(e.q).modPow(e.dQ,e.q);i.compareTo(a)<0;)i=i.add(e.p);var s=i.subtract(a).multiply(e.qInv).mod(e.p).multiply(e.q).add(a);return s=s.multiply(n.modInverse(e.n)).mod(e.n),s};it.rsa.encrypt=function(t,e,r){var n=r,i,a=Math.ceil(e.n.bitLength()/8);r!==!1&&r!==!0?(n=r===2,i=CC(t,e,r)):(i=Fe.util.createBuffer(),i.putBytes(t));for(var s=new Pt(i.toHex(),16),l=EC(s,e,n),u=l.toString(16),f=Fe.util.createBuffer(),d=a-Math.ceil(u.length/2);d>0;)f.putByte(0),--d;return f.putBytes(Fe.util.hexToBytes(u)),f.getBytes()};it.rsa.decrypt=function(t,e,r,n){var i=Math.ceil(e.n.bitLength()/8);if(t.length!==i){var a=new Error("Encrypted message length is invalid.");throw a.length=t.length,a.expected=i,a}var s=new Pt(Fe.util.createBuffer(t).toHex(),16);if(s.compareTo(e.n)>=0)throw new Error("Encrypted message is invalid.");for(var l=EC(s,e,r),u=l.toString(16),f=Fe.util.createBuffer(),d=i-Math.ceil(u.length/2);d>0;)f.putByte(0),--d;return f.putBytes(Fe.util.hexToBytes(u)),n!==!1?xd(f.getBytes(),e,r):f.getBytes()};it.rsa.createKeyPairGenerationState=function(t,e,r){typeof t=="string"&&(t=parseInt(t,10)),t=t||2048,r=r||{};var n=r.prng||Fe.random,i={nextBytes:function(l){for(var u=n.getBytesSync(l.length),f=0;f<l.length;++f)l[f]=u.charCodeAt(f)}},a=r.algorithm||"PRIMEINC",s;if(a==="PRIMEINC")s={algorithm:a,state:0,bits:t,rng:i,eInt:e||65537,e:new Pt(null),p:null,q:null,qBits:t>>1,pBits:t-(t>>1),pqState:0,num:null,keys:null},s.e.fromInt(s.eInt);else throw new Error("Invalid key generation algorithm: "+a);return s};it.rsa.stepKeyPairGenerationState=function(t,e){"algorithm"in t||(t.algorithm="PRIMEINC");var r=new Pt(null);r.fromInt(30);for(var n=0,i=function(h,g){return h|g},a=+new Date,s,l=0;t.keys===null&&(e<=0||l<e);){if(t.state===0){var u=t.p===null?t.pBits:t.qBits,f=u-1;t.pqState===0?(t.num=new Pt(u,t.rng),t.num.testBit(f)||t.num.bitwiseTo(Pt.ONE.shiftLeft(f),i,t.num),t.num.dAddOffset(31-t.num.mod(r).byteValue(),0),n=0,++t.pqState):t.pqState===1?t.num.bitLength()>u?t.pqState=0:t.num.isProbablePrime(b8(t.num.bitLength()))?++t.pqState:t.num.dAddOffset(g8[n++%8],0):t.pqState===2?t.pqState=t.num.subtract(Pt.ONE).gcd(t.e).compareTo(Pt.ONE)===0?3:0:t.pqState===3&&(t.pqState=0,t.p===null?t.p=t.num:t.q=t.num,t.p!==null&&t.q!==null&&++t.state,t.num=null)}else if(t.state===1)t.p.compareTo(t.q)<0&&(t.num=t.p,t.p=t.q,t.q=t.num),++t.state;else if(t.state===2)t.p1=t.p.subtract(Pt.ONE),t.q1=t.q.subtract(Pt.ONE),t.phi=t.p1.multiply(t.q1),++t.state;else if(t.state===3)t.phi.gcd(t.e).compareTo(Pt.ONE)===0?++t.state:(t.p=null,t.q=null,t.state=0);else if(t.state===4)t.n=t.p.multiply(t.q),t.n.bitLength()===t.bits?++t.state:(t.q=null,t.state=0);else if(t.state===5){var d=t.e.modInverse(t.phi);t.keys={privateKey:it.rsa.setPrivateKey(t.n,t.e,d,t.p,t.q,d.mod(t.p1),d.mod(t.q1),t.q.modInverse(t.p)),publicKey:it.rsa.setPublicKey(t.n,t.e)}}s=+new Date,l+=s-a,a=s}return t.keys!==null};it.rsa.generateKeyPair=function(t,e,r,n){if(arguments.length===1?typeof t=="object"?(r=t,t=void 0):typeof t=="function"&&(n=t,t=void 0):arguments.length===2?typeof t=="number"?typeof e=="function"?(n=e,e=void 0):typeof e!="number"&&(r=e,e=void 0):(r=t,n=e,t=void 0,e=void 0):arguments.length===3&&(typeof e=="number"?typeof r=="function"&&(n=r,r=void 0):(n=r,r=e,e=void 0)),r=r||{},t===void 0&&(t=r.bits||2048),e===void 0&&(e=r.e||65537),!Fe.options.usePureJavaScript&&!r.prng&&t>=256&&t<=16384&&(e===65537||e===3)){if(n){if(bC("generateKeyPair"))return Cg.generateKeyPair("rsa",{modulusLength:t,publicExponent:e,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}},function(l,u,f){if(l)return n(l);n(null,{privateKey:it.privateKeyFromPem(f),publicKey:it.publicKeyFromPem(u)})});if(xC("generateKey")&&xC("exportKey"))return ii.globalScope.crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:TC(e),hash:{name:"SHA-256"}},!0,["sign","verify"]).then(function(l){return ii.globalScope.crypto.subtle.exportKey("pkcs8",l.privateKey)}).then(void 0,function(l){n(l)}).then(function(l){if(l){var u=it.privateKeyFromAsn1($.fromDer(Fe.util.createBuffer(l)));n(null,{privateKey:u,publicKey:it.setRsaPublicKey(u.n,u.e)})}});if(SC("generateKey")&&SC("exportKey")){var i=ii.globalScope.msCrypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:TC(e),hash:{name:"SHA-256"}},!0,["sign","verify"]);i.oncomplete=function(l){var u=l.target.result,f=ii.globalScope.msCrypto.subtle.exportKey("pkcs8",u.privateKey);f.oncomplete=function(d){var h=d.target.result,g=it.privateKeyFromAsn1($.fromDer(Fe.util.createBuffer(h)));n(null,{privateKey:g,publicKey:it.setRsaPublicKey(g.n,g.e)})},f.onerror=function(d){n(d)}},i.onerror=function(l){n(l)};return}}else if(bC("generateKeyPairSync")){var a=Cg.generateKeyPairSync("rsa",{modulusLength:t,publicExponent:e,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}});return{privateKey:it.privateKeyFromPem(a.privateKey),publicKey:it.publicKeyFromPem(a.publicKey)}}}var s=it.rsa.createKeyPairGenerationState(t,e,r);if(!n)return it.rsa.stepKeyPairGenerationState(s,0),s.keys;C8(s,r,n)};it.setRsaPublicKey=it.rsa.setPublicKey=function(t,e){var r={n:t,e};return r.encrypt=function(n,i,a){if(typeof i=="string"?i=i.toUpperCase():i===void 0&&(i="RSAES-PKCS1-V1_5"),i==="RSAES-PKCS1-V1_5")i={encode:function(l,u,f){return CC(l,u,2).getBytes()}};else if(i==="RSA-OAEP"||i==="RSAES-OAEP")i={encode:function(l,u){return Fe.pkcs1.encode_rsa_oaep(u,l,a)}};else if(["RAW","NONE","NULL",null].indexOf(i)!==-1)i={encode:function(l){return l}};else if(typeof i=="string")throw new Error('Unsupported encryption scheme: "'+i+'".');var s=i.encode(n,r,!0);return it.rsa.encrypt(s,r,!0)},r.verify=function(n,i,a,s){typeof a=="string"?a=a.toUpperCase():a===void 0&&(a="RSASSA-PKCS1-V1_5"),s===void 0&&(s={_parseAllDigestBytes:!0}),"_parseAllDigestBytes"in s||(s._parseAllDigestBytes=!0),a==="RSASSA-PKCS1-V1_5"?a={verify:function(u,f){f=xd(f,r,!0);var d=$.fromDer(f,{parseAllBytes:s._parseAllDigestBytes}),h={},g=[];if(!$.validate(d,w8,h,g)){var y=new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value.");throw y.errors=g,y}var m=$.derToOid(h.algorithmIdentifier);if(!(m===Fe.oids.md2||m===Fe.oids.md5||m===Fe.oids.sha1||m===Fe.oids.sha224||m===Fe.oids.sha256||m===Fe.oids.sha384||m===Fe.oids.sha512||m===Fe.oids["sha512-224"]||m===Fe.oids["sha512-256"])){var y=new Error("Unknown RSASSA-PKCS1-v1_5 DigestAlgorithm identifier.");throw y.oid=m,y}if((m===Fe.oids.md2||m===Fe.oids.md5)&&!("parameters"in h))throw new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value. Missing algorithm identifer NULL parameters.");return u===h.digest}}:(a==="NONE"||a==="NULL"||a===null)&&(a={verify:function(u,f){return f=xd(f,r,!0),u===f}});var l=it.rsa.decrypt(i,r,!0,!1);return a.verify(n,l,r.n.bitLength())},r};it.setRsaPrivateKey=it.rsa.setPrivateKey=function(t,e,r,n,i,a,s,l){var u={n:t,e,d:r,p:n,q:i,dP:a,dQ:s,qInv:l};return u.decrypt=function(f,d,h){typeof d=="string"?d=d.toUpperCase():d===void 0&&(d="RSAES-PKCS1-V1_5");var g=it.rsa.decrypt(f,u,!1,!1);if(d==="RSAES-PKCS1-V1_5")d={decode:xd};else if(d==="RSA-OAEP"||d==="RSAES-OAEP")d={decode:function(y,m){return Fe.pkcs1.decode_rsa_oaep(m,y,h)}};else if(["RAW","NONE","NULL",null].indexOf(d)!==-1)d={decode:function(y){return y}};else throw new Error('Unsupported encryption scheme: "'+d+'".');return d.decode(g,u,!1)},u.sign=function(f,d){var h=!1;typeof d=="string"&&(d=d.toUpperCase()),d===void 0||d==="RSASSA-PKCS1-V1_5"?(d={encode:E8},h=1):(d==="NONE"||d==="NULL"||d===null)&&(d={encode:function(){return f}},h=1);var g=d.encode(f,u.n.bitLength());return it.rsa.encrypt(g,u,h)},u};it.wrapRsaPrivateKey=function(t){return $.create($.Class.UNIVERSAL,$.Type.SEQUENCE,!0,[$.create($.Class.UNIVERSAL,$.Type.INTEGER,!1,$.integerToDer(0).getBytes()),$.create($.Class.UNIVERSAL,$.Type.SEQUENCE,!0,[$.create($.Class.UNIVERSAL,$.Type.OID,!1,$.oidToDer(it.oids.rsaEncryption).getBytes()),$.create($.Class.UNIVERSAL,$.Type.NULL,!1,"")]),$.create($.Class.UNIVERSAL,$.Type.OCTETSTRING,!1,$.toDer(t).getBytes())])};it.privateKeyFromAsn1=function(t){var e={},r=[];if($.validate(t,m8,e,r)&&(t=$.fromDer(Fe.util.createBuffer(e.privateKey))),e={},r=[],!$.validate(t,y8,e,r)){var n=new Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");throw n.errors=r,n}var i,a,s,l,u,f,d,h;return i=Fe.util.createBuffer(e.privateKeyModulus).toHex(),a=Fe.util.createBuffer(e.privateKeyPublicExponent).toHex(),s=Fe.util.createBuffer(e.privateKeyPrivateExponent).toHex(),l=Fe.util.createBuffer(e.privateKeyPrime1).toHex(),u=Fe.util.createBuffer(e.privateKeyPrime2).toHex(),f=Fe.util.createBuffer(e.privateKeyExponent1).toHex(),d=Fe.util.createBuffer(e.privateKeyExponent2).toHex(),h=Fe.util.createBuffer(e.privateKeyCoefficient).toHex(),it.setRsaPrivateKey(new Pt(i,16),new Pt(a,16),new Pt(s,16),new Pt(l,16),new Pt(u,16),new Pt(f,16),new Pt(d,16),new Pt(h,16))};it.privateKeyToAsn1=it.privateKeyToRSAPrivateKey=function(t){return $.create($.Class.UNIVERSAL,$.Type.SEQUENCE,!0,[$.create($.Class.UNIVERSAL,$.Type.INTEGER,!1,$.integerToDer(0).getBytes()),$.create($.Class.UNIVERSAL,$.Type.INTEGER,!1,ta(t.n)),$.create($.Class.UNIVERSAL,$.Type.INTEGER,!1,ta(t.e)),$.create($.Class.UNIVERSAL,$.Type.INTEGER,!1,ta(t.d)),$.create($.Class.UNIVERSAL,$.Type.INTEGER,!1,ta(t.p)),$.create($.Class.UNIVERSAL,$.Type.INTEGER,!1,ta(t.q)),$.create($.Class.UNIVERSAL,$.Type.INTEGER,!1,ta(t.dP)),$.create($.Class.UNIVERSAL,$.Type.INTEGER,!1,ta(t.dQ)),$.create($.Class.UNIVERSAL,$.Type.INTEGER,!1,ta(t.qInv))])};it.publicKeyFromAsn1=function(t){var e={},r=[];if($.validate(t,_8,e,r)){var n=$.derToOid(e.publicKeyOid);if(n!==it.oids.rsaEncryption){var i=new Error("Cannot read public key. Unknown OID.");throw i.oid=n,i}t=e.rsaPublicKey}if(r=[],!$.validate(t,v8,e,r)){var i=new Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.");throw i.errors=r,i}var a=Fe.util.createBuffer(e.publicKeyModulus).toHex(),s=Fe.util.createBuffer(e.publicKeyExponent).toHex();return it.setRsaPublicKey(new Pt(a,16),new Pt(s,16))};it.publicKeyToAsn1=it.publicKeyToSubjectPublicKeyInfo=function(t){return $.create($.Class.UNIVERSAL,$.Type.SEQUENCE,!0,[$.create($.Class.UNIVERSAL,$.Type.SEQUENCE,!0,[$.create($.Class.UNIVERSAL,$.Type.OID,!1,$.oidToDer(it.oids.rsaEncryption).getBytes()),$.create($.Class.UNIVERSAL,$.Type.NULL,!1,"")]),$.create($.Class.UNIVERSAL,$.Type.BITSTRING,!1,[it.publicKeyToRSAPublicKey(t)])])};it.publicKeyToRSAPublicKey=function(t){return $.create($.Class.UNIVERSAL,$.Type.SEQUENCE,!0,[$.create($.Class.UNIVERSAL,$.Type.INTEGER,!1,ta(t.n)),$.create($.Class.UNIVERSAL,$.Type.INTEGER,!1,ta(t.e))])};function CC(t,e,r){var n=Fe.util.createBuffer(),i=Math.ceil(e.n.bitLength()/8);if(t.length>i-11){var a=new Error("Message is too long for PKCS#1 v1.5 padding.");throw a.length=t.length,a.max=i-11,a}n.putByte(0),n.putByte(r);var s=i-3-t.length,l;if(r===0||r===1){l=r===0?0:255;for(var u=0;u<s;++u)n.putByte(l)}else for(;s>0;){for(var f=0,d=Fe.random.getBytes(s),u=0;u<s;++u)l=d.charCodeAt(u),l===0?++f:n.putByte(l);s=f}return n.putByte(0),n.putBytes(t),n}function xd(t,e,r,n){var i=Math.ceil(e.n.bitLength()/8),a=Fe.util.createBuffer(t),s=a.getByte(),l=a.getByte();if(s!==0||r&&l!==0&&l!==1||!r&&l!=2||r&&l===0&&typeof n=="undefined")throw new Error("Encryption block is invalid.");var u=0;if(l===0){u=i-3-n;for(var f=0;f<u;++f)if(a.getByte()!==0)throw new Error("Encryption block is invalid.")}else if(l===1)for(u=0;a.length()>1;){if(a.getByte()!==255){--a.read;break}++u}else if(l===2)for(u=0;a.length()>1;){if(a.getByte()===0){--a.read;break}++u}var d=a.getByte();if(d!==0||u!==i-3-a.length())throw new Error("Encryption block is invalid.");return a.getBytes()}function C8(t,e,r){typeof e=="function"&&(r=e,e={}),e=e||{};var n={algorithm:{name:e.algorithm||"PRIMEINC",options:{workers:e.workers||2,workLoad:e.workLoad||100,workerScript:e.workerScript}}};"prng"in e&&(n.prng=e.prng),i();function i(){a(t.pBits,function(l,u){if(l)return r(l);if(t.p=u,t.q!==null)return s(l,t.q);a(t.qBits,s)})}function a(l,u){Fe.prime.generateProbablePrime(l,n,u)}function s(l,u){if(l)return r(l);if(t.q=u,t.p.compareTo(t.q)<0){var f=t.p;t.p=t.q,t.q=f}if(t.p.subtract(Pt.ONE).gcd(t.e).compareTo(Pt.ONE)!==0){t.p=null,i();return}if(t.q.subtract(Pt.ONE).gcd(t.e).compareTo(Pt.ONE)!==0){t.q=null,a(t.qBits,s);return}if(t.p1=t.p.subtract(Pt.ONE),t.q1=t.q.subtract(Pt.ONE),t.phi=t.p1.multiply(t.q1),t.phi.gcd(t.e).compareTo(Pt.ONE)!==0){t.p=t.q=null,i();return}if(t.n=t.p.multiply(t.q),t.n.bitLength()!==t.bits){t.q=null,a(t.qBits,s);return}var d=t.e.modInverse(t.phi);t.keys={privateKey:it.rsa.setPrivateKey(t.n,t.e,d,t.p,t.q,d.mod(t.p1),d.mod(t.q1),t.q.modInverse(t.p)),publicKey:it.rsa.setPublicKey(t.n,t.e)},r(null,t.keys)}}function ta(t){var e=t.toString(16);e[0]>="8"&&(e="00"+e);var r=Fe.util.hexToBytes(e);return r.length>1&&(r.charCodeAt(0)===0&&(r.charCodeAt(1)&128)==0||r.charCodeAt(0)===255&&(r.charCodeAt(1)&128)==128)?r.substr(1):r}function b8(t){return t<=100?27:t<=150?18:t<=200?15:t<=250?12:t<=300?9:t<=350?8:t<=400?7:t<=500?6:t<=600?5:t<=800?4:t<=1250?3:2}function bC(t){return Fe.util.isNodejs&&typeof Cg[t]=="function"}function xC(t){return typeof ii.globalScope!="undefined"&&typeof ii.globalScope.crypto=="object"&&typeof ii.globalScope.crypto.subtle=="object"&&typeof ii.globalScope.crypto.subtle[t]=="function"}function SC(t){return typeof ii.globalScope!="undefined"&&typeof ii.globalScope.msCrypto=="object"&&typeof ii.globalScope.msCrypto.subtle=="object"&&typeof ii.globalScope.msCrypto.subtle[t]=="function"}function TC(t){for(var e=Fe.util.hexToBytes(t.toString(16)),r=new Uint8Array(e.length),n=0;n<e.length;++n)r[n]=e.charCodeAt(n);return r}});var bg=de((Oj,BC)=>{var Re=mt();is();xi();Au();zi();as();_d();Gs();ri();pg();Ru();Ft();typeof kC=="undefined"&&(kC=Re.jsbn.BigInteger);var kC,ue=Re.asn1,pt=Re.pki=Re.pki||{};BC.exports=pt.pbe=Re.pbe=Re.pbe||{};var Ks=pt.oids,x8={name:"EncryptedPrivateKeyInfo",tagClass:ue.Class.UNIVERSAL,type:ue.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedPrivateKeyInfo.encryptionAlgorithm",tagClass:ue.Class.UNIVERSAL,type:ue.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:ue.Class.UNIVERSAL,type:ue.Type.OID,constructed:!1,capture:"encryptionOid"},{name:"AlgorithmIdentifier.parameters",tagClass:ue.Class.UNIVERSAL,type:ue.Type.SEQUENCE,constructed:!0,captureAsn1:"encryptionParams"}]},{name:"EncryptedPrivateKeyInfo.encryptedData",tagClass:ue.Class.UNIVERSAL,type:ue.Type.OCTETSTRING,constructed:!1,capture:"encryptedData"}]},S8={name:"PBES2Algorithms",tagClass:ue.Class.UNIVERSAL,type:ue.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc",tagClass:ue.Class.UNIVERSAL,type:ue.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc.oid",tagClass:ue.Class.UNIVERSAL,type:ue.Type.OID,constructed:!1,capture:"kdfOid"},{name:"PBES2Algorithms.params",tagClass:ue.Class.UNIVERSAL,type:ue.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.params.salt",tagClass:ue.Class.UNIVERSAL,type:ue.Type.OCTETSTRING,constructed:!1,capture:"kdfSalt"},{name:"PBES2Algorithms.params.iterationCount",tagClass:ue.Class.UNIVERSAL,type:ue.Type.INTEGER,constructed:!1,capture:"kdfIterationCount"},{name:"PBES2Algorithms.params.keyLength",tagClass:ue.Class.UNIVERSAL,type:ue.Type.INTEGER,constructed:!1,optional:!0,capture:"keyLength"},{name:"PBES2Algorithms.params.prf",tagClass:ue.Class.UNIVERSAL,type:ue.Type.SEQUENCE,constructed:!0,optional:!0,value:[{name:"PBES2Algorithms.params.prf.algorithm",tagClass:ue.Class.UNIVERSAL,type:ue.Type.OID,constructed:!1,capture:"prfOid"}]}]}]},{name:"PBES2Algorithms.encryptionScheme",tagClass:ue.Class.UNIVERSAL,type:ue.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.encryptionScheme.oid",tagClass:ue.Class.UNIVERSAL,type:ue.Type.OID,constructed:!1,capture:"encOid"},{name:"PBES2Algorithms.encryptionScheme.iv",tagClass:ue.Class.UNIVERSAL,type:ue.Type.OCTETSTRING,constructed:!1,capture:"encIv"}]}]},T8={name:"pkcs-12PbeParams",tagClass:ue.Class.UNIVERSAL,type:ue.Type.SEQUENCE,constructed:!0,value:[{name:"pkcs-12PbeParams.salt",tagClass:ue.Class.UNIVERSAL,type:ue.Type.OCTETSTRING,constructed:!1,capture:"salt"},{name:"pkcs-12PbeParams.iterations",tagClass:ue.Class.UNIVERSAL,type:ue.Type.INTEGER,constructed:!1,capture:"iterations"}]};pt.encryptPrivateKeyInfo=function(t,e,r){r=r||{},r.saltSize=r.saltSize||8,r.count=r.count||2048,r.algorithm=r.algorithm||"aes128",r.prfAlgorithm=r.prfAlgorithm||"sha1";var n=Re.random.getBytesSync(r.saltSize),i=r.count,a=ue.integerToDer(i),s,l,u;if(r.algorithm.indexOf("aes")===0||r.algorithm==="des"){var f,d,h;switch(r.algorithm){case"aes128":s=16,f=16,d=Ks["aes128-CBC"],h=Re.aes.createEncryptionCipher;break;case"aes192":s=24,f=16,d=Ks["aes192-CBC"],h=Re.aes.createEncryptionCipher;break;case"aes256":s=32,f=16,d=Ks["aes256-CBC"],h=Re.aes.createEncryptionCipher;break;case"des":s=8,f=8,d=Ks.desCBC,h=Re.des.createEncryptionCipher;break;default:var g=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw g.algorithm=r.algorithm,g}var y="hmacWith"+r.prfAlgorithm.toUpperCase(),m=NC(y),_=Re.pkcs5.pbkdf2(e,n,i,s,m),E=Re.random.getBytesSync(f),w=h(_);w.start(E),w.update(ue.toDer(t)),w.finish(),u=w.output.getBytes();var b=A8(n,a,s,y);l=ue.create(ue.Class.UNIVERSAL,ue.Type.SEQUENCE,!0,[ue.create(ue.Class.UNIVERSAL,ue.Type.OID,!1,ue.oidToDer(Ks.pkcs5PBES2).getBytes()),ue.create(ue.Class.UNIVERSAL,ue.Type.SEQUENCE,!0,[ue.create(ue.Class.UNIVERSAL,ue.Type.SEQUENCE,!0,[ue.create(ue.Class.UNIVERSAL,ue.Type.OID,!1,ue.oidToDer(Ks.pkcs5PBKDF2).getBytes()),b]),ue.create(ue.Class.UNIVERSAL,ue.Type.SEQUENCE,!0,[ue.create(ue.Class.UNIVERSAL,ue.Type.OID,!1,ue.oidToDer(d).getBytes()),ue.create(ue.Class.UNIVERSAL,ue.Type.OCTETSTRING,!1,E)])])])}else if(r.algorithm==="3des"){s=24;var k=new Re.util.ByteBuffer(n),_=pt.pbe.generatePkcs12Key(e,k,1,i,s),E=pt.pbe.generatePkcs12Key(e,k,2,i,s),w=Re.des.createEncryptionCipher(_);w.start(E),w.update(ue.toDer(t)),w.finish(),u=w.output.getBytes(),l=ue.create(ue.Class.UNIVERSAL,ue.Type.SEQUENCE,!0,[ue.create(ue.Class.UNIVERSAL,ue.Type.OID,!1,ue.oidToDer(Ks["pbeWithSHAAnd3-KeyTripleDES-CBC"]).getBytes()),ue.create(ue.Class.UNIVERSAL,ue.Type.SEQUENCE,!0,[ue.create(ue.Class.UNIVERSAL,ue.Type.OCTETSTRING,!1,n),ue.create(ue.Class.UNIVERSAL,ue.Type.INTEGER,!1,a.getBytes())])])}else{var g=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw g.algorithm=r.algorithm,g}var N=ue.create(ue.Class.UNIVERSAL,ue.Type.SEQUENCE,!0,[l,ue.create(ue.Class.UNIVERSAL,ue.Type.OCTETSTRING,!1,u)]);return N};pt.decryptPrivateKeyInfo=function(t,e){var r=null,n={},i=[];if(!ue.validate(t,x8,n,i)){var a=new Error("Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw a.errors=i,a}var s=ue.derToOid(n.encryptionOid),l=pt.pbe.getCipher(s,n.encryptionParams,e),u=Re.util.createBuffer(n.encryptedData);return l.update(u),l.finish()&&(r=ue.fromDer(l.output)),r};pt.encryptedPrivateKeyToPem=function(t,e){var r={type:"ENCRYPTED PRIVATE KEY",body:ue.toDer(t).getBytes()};return Re.pem.encode(r,{maxline:e})};pt.encryptedPrivateKeyFromPem=function(t){var e=Re.pem.decode(t)[0];if(e.type!=="ENCRYPTED PRIVATE KEY"){var r=new Error('Could not convert encrypted private key from PEM; PEM header type is "ENCRYPTED PRIVATE KEY".');throw r.headerType=e.type,r}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert encrypted private key from PEM; PEM is encrypted.");return ue.fromDer(e.body)};pt.encryptRsaPrivateKey=function(t,e,r){if(r=r||{},!r.legacy){var n=pt.wrapRsaPrivateKey(pt.privateKeyToAsn1(t));return n=pt.encryptPrivateKeyInfo(n,e,r),pt.encryptedPrivateKeyToPem(n)}var i,a,s,l;switch(r.algorithm){case"aes128":i="AES-128-CBC",s=16,a=Re.random.getBytesSync(16),l=Re.aes.createEncryptionCipher;break;case"aes192":i="AES-192-CBC",s=24,a=Re.random.getBytesSync(16),l=Re.aes.createEncryptionCipher;break;case"aes256":i="AES-256-CBC",s=32,a=Re.random.getBytesSync(16),l=Re.aes.createEncryptionCipher;break;case"3des":i="DES-EDE3-CBC",s=24,a=Re.random.getBytesSync(8),l=Re.des.createEncryptionCipher;break;case"des":i="DES-CBC",s=8,a=Re.random.getBytesSync(8),l=Re.des.createEncryptionCipher;break;default:var u=new Error('Could not encrypt RSA private key; unsupported encryption algorithm "'+r.algorithm+'".');throw u.algorithm=r.algorithm,u}var f=Re.pbe.opensslDeriveBytes(e,a.substr(0,8),s),d=l(f);d.start(a),d.update(ue.toDer(pt.privateKeyToAsn1(t))),d.finish();var h={type:"RSA PRIVATE KEY",procType:{version:"4",type:"ENCRYPTED"},dekInfo:{algorithm:i,parameters:Re.util.bytesToHex(a).toUpperCase()},body:d.output.getBytes()};return Re.pem.encode(h)};pt.decryptRsaPrivateKey=function(t,e){var r=null,n=Re.pem.decode(t)[0];if(n.type!=="ENCRYPTED PRIVATE KEY"&&n.type!=="PRIVATE KEY"&&n.type!=="RSA PRIVATE KEY"){var i=new Error('Could not convert private key from PEM; PEM header type is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".');throw i.headerType=i,i}if(n.procType&&n.procType.type==="ENCRYPTED"){var a,s;switch(n.dekInfo.algorithm){case"DES-CBC":a=8,s=Re.des.createDecryptionCipher;break;case"DES-EDE3-CBC":a=24,s=Re.des.createDecryptionCipher;break;case"AES-128-CBC":a=16,s=Re.aes.createDecryptionCipher;break;case"AES-192-CBC":a=24,s=Re.aes.createDecryptionCipher;break;case"AES-256-CBC":a=32,s=Re.aes.createDecryptionCipher;break;case"RC2-40-CBC":a=5,s=function(h){return Re.rc2.createDecryptionCipher(h,40)};break;case"RC2-64-CBC":a=8,s=function(h){return Re.rc2.createDecryptionCipher(h,64)};break;case"RC2-128-CBC":a=16,s=function(h){return Re.rc2.createDecryptionCipher(h,128)};break;default:var i=new Error('Could not decrypt private key; unsupported encryption algorithm "'+n.dekInfo.algorithm+'".');throw i.algorithm=n.dekInfo.algorithm,i}var l=Re.util.hexToBytes(n.dekInfo.parameters),u=Re.pbe.opensslDeriveBytes(e,l.substr(0,8),a),f=s(u);if(f.start(l),f.update(Re.util.createBuffer(n.body)),f.finish())r=f.output.getBytes();else return r}else r=n.body;return n.type==="ENCRYPTED PRIVATE KEY"?r=pt.decryptPrivateKeyInfo(ue.fromDer(r),e):r=ue.fromDer(r),r!==null&&(r=pt.privateKeyFromAsn1(r)),r};pt.pbe.generatePkcs12Key=function(t,e,r,n,i,a){var s,l;if(typeof a=="undefined"||a===null){if(!("sha1"in Re.md))throw new Error('"sha1" hash algorithm unavailable.');a=Re.md.sha1.create()}var u=a.digestLength,f=a.blockLength,d=new Re.util.ByteBuffer,h=new Re.util.ByteBuffer;if(t!=null){for(l=0;l<t.length;l++)h.putInt16(t.charCodeAt(l));h.putInt16(0)}var g=h.length(),y=e.length(),m=new Re.util.ByteBuffer;m.fillWithByte(r,f);var _=f*Math.ceil(y/f),E=new Re.util.ByteBuffer;for(l=0;l<_;l++)E.putByte(e.at(l%y));var w=f*Math.ceil(g/f),b=new Re.util.ByteBuffer;for(l=0;l<w;l++)b.putByte(h.at(l%g));var k=E;k.putBuffer(b);for(var N=Math.ceil(i/u),D=1;D<=N;D++){var B=new Re.util.ByteBuffer;B.putBytes(m.bytes()),B.putBytes(k.bytes());for(var ee=0;ee<n;ee++)a.start(),a.update(B.getBytes()),B=a.digest();var q=new Re.util.ByteBuffer;for(l=0;l<f;l++)q.putByte(B.at(l%u));var U=Math.ceil(y/f)+Math.ceil(g/f),oe=new Re.util.ByteBuffer;for(s=0;s<U;s++){var ae=new Re.util.ByteBuffer(k.getBytes(f)),Ee=511;for(l=q.length()-1;l>=0;l--)Ee=Ee>>8,Ee+=q.at(l)+ae.at(l),ae.setAt(l,Ee&255);oe.putBuffer(ae)}k=oe,d.putBuffer(B)}return d.truncate(d.length()-i),d};pt.pbe.getCipher=function(t,e,r){switch(t){case pt.oids.pkcs5PBES2:return pt.pbe.getCipherForPBES2(t,e,r);case pt.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:case pt.oids["pbewithSHAAnd40BitRC2-CBC"]:return pt.pbe.getCipherForPKCS12PBE(t,e,r);default:var n=new Error("Cannot read encrypted PBE data block. Unsupported OID.");throw n.oid=t,n.supportedOids=["pkcs5PBES2","pbeWithSHAAnd3-KeyTripleDES-CBC","pbewithSHAAnd40BitRC2-CBC"],n}};pt.pbe.getCipherForPBES2=function(t,e,r){var n={},i=[];if(!ue.validate(e,S8,n,i)){var a=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw a.errors=i,a}if(t=ue.derToOid(n.kdfOid),t!==pt.oids.pkcs5PBKDF2){var a=new Error("Cannot read encrypted private key. Unsupported key derivation function OID.");throw a.oid=t,a.supportedOids=["pkcs5PBKDF2"],a}if(t=ue.derToOid(n.encOid),t!==pt.oids["aes128-CBC"]&&t!==pt.oids["aes192-CBC"]&&t!==pt.oids["aes256-CBC"]&&t!==pt.oids["des-EDE3-CBC"]&&t!==pt.oids.desCBC){var a=new Error("Cannot read encrypted private key. Unsupported encryption scheme OID.");throw a.oid=t,a.supportedOids=["aes128-CBC","aes192-CBC","aes256-CBC","des-EDE3-CBC","desCBC"],a}var s=n.kdfSalt,l=Re.util.createBuffer(n.kdfIterationCount);l=l.getInt(l.length()<<3);var u,f;switch(pt.oids[t]){case"aes128-CBC":u=16,f=Re.aes.createDecryptionCipher;break;case"aes192-CBC":u=24,f=Re.aes.createDecryptionCipher;break;case"aes256-CBC":u=32,f=Re.aes.createDecryptionCipher;break;case"des-EDE3-CBC":u=24,f=Re.des.createDecryptionCipher;break;case"desCBC":u=8,f=Re.des.createDecryptionCipher;break}var d=RC(n.prfOid),h=Re.pkcs5.pbkdf2(r,s,l,u,d),g=n.encIv,y=f(h);return y.start(g),y};pt.pbe.getCipherForPKCS12PBE=function(t,e,r){var n={},i=[];if(!ue.validate(e,T8,n,i)){var a=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw a.errors=i,a}var s=Re.util.createBuffer(n.salt),l=Re.util.createBuffer(n.iterations);l=l.getInt(l.length()<<3);var u,f,d;switch(t){case pt.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:u=24,f=8,d=Re.des.startDecrypting;break;case pt.oids["pbewithSHAAnd40BitRC2-CBC"]:u=5,f=8,d=function(_,E){var w=Re.rc2.createDecryptionCipher(_,40);return w.start(E,null),w};break;default:var a=new Error("Cannot read PKCS #12 PBE data block. Unsupported OID.");throw a.oid=t,a}var h=RC(n.prfOid),g=pt.pbe.generatePkcs12Key(r,s,1,l,u,h);h.start();var y=pt.pbe.generatePkcs12Key(r,s,2,l,f,h);return d(g,y)};pt.pbe.opensslDeriveBytes=function(t,e,r,n){if(typeof n=="undefined"||n===null){if(!("md5"in Re.md))throw new Error('"md5" hash algorithm unavailable.');n=Re.md.md5.create()}e===null&&(e="");for(var i=[IC(n,t+e)],a=16,s=1;a<r;++s,a+=16)i.push(IC(n,i[s-1]+t+e));return i.join("").substr(0,r)};function IC(t,e){return t.start().update(e).digest().getBytes()}function RC(t){var e;if(!t)e="hmacWithSHA1";else if(e=pt.oids[ue.derToOid(t)],!e){var r=new Error("Unsupported PRF OID.");throw r.oid=t,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}return NC(e)}function NC(t){var e=Re.md;switch(t){case"hmacWithSHA224":e=Re.md.sha512;case"hmacWithSHA1":case"hmacWithSHA256":case"hmacWithSHA384":case"hmacWithSHA512":t=t.substr(8).toLowerCase();break;default:var r=new Error("Unsupported PRF algorithm.");throw r.algorithm=t,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}if(!e||!(t in e))throw new Error("Unknown hash algorithm: "+t);return e[t].create()}function A8(t,e,r,n){var i=ue.create(ue.Class.UNIVERSAL,ue.Type.SEQUENCE,!0,[ue.create(ue.Class.UNIVERSAL,ue.Type.OCTETSTRING,!1,t),ue.create(ue.Class.UNIVERSAL,ue.Type.INTEGER,!1,e.getBytes())]);return n!=="hmacWithSHA1"&&i.value.push(ue.create(ue.Class.UNIVERSAL,ue.Type.INTEGER,!1,Re.util.hexToBytes(r.toString(16))),ue.create(ue.Class.UNIVERSAL,ue.Type.SEQUENCE,!0,[ue.create(ue.Class.UNIVERSAL,ue.Type.OID,!1,ue.oidToDer(pt.oids[n]).getBytes()),ue.create(ue.Class.UNIVERSAL,ue.Type.NULL,!1,"")])),i}});var xg=de((Lj,LC)=>{var ll=mt();xi();Ft();var ke=ll.asn1,ul=LC.exports=ll.pkcs7asn1=ll.pkcs7asn1||{};ll.pkcs7=ll.pkcs7||{};ll.pkcs7.asn1=ul;var DC={name:"ContentInfo",tagClass:ke.Class.UNIVERSAL,type:ke.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.ContentType",tagClass:ke.Class.UNIVERSAL,type:ke.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:ke.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,captureAsn1:"content"}]};ul.contentInfoValidator=DC;var OC={name:"EncryptedContentInfo",tagClass:ke.Class.UNIVERSAL,type:ke.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentType",tagClass:ke.Class.UNIVERSAL,type:ke.Type.OID,constructed:!1,capture:"contentType"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm",tagClass:ke.Class.UNIVERSAL,type:ke.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentEncryptionAlgorithm.algorithm",tagClass:ke.Class.UNIVERSAL,type:ke.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm.parameter",tagClass:ke.Class.UNIVERSAL,captureAsn1:"encParameter"}]},{name:"EncryptedContentInfo.encryptedContent",tagClass:ke.Class.CONTEXT_SPECIFIC,type:0,capture:"encryptedContent",captureAsn1:"encryptedContentAsn1"}]};ul.envelopedDataValidator={name:"EnvelopedData",tagClass:ke.Class.UNIVERSAL,type:ke.Type.SEQUENCE,constructed:!0,value:[{name:"EnvelopedData.Version",tagClass:ke.Class.UNIVERSAL,type:ke.Type.INTEGER,constructed:!1,capture:"version"},{name:"EnvelopedData.RecipientInfos",tagClass:ke.Class.UNIVERSAL,type:ke.Type.SET,constructed:!0,captureAsn1:"recipientInfos"}].concat(OC)};ul.encryptedDataValidator={name:"EncryptedData",tagClass:ke.Class.UNIVERSAL,type:ke.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedData.Version",tagClass:ke.Class.UNIVERSAL,type:ke.Type.INTEGER,constructed:!1,capture:"version"}].concat(OC)};var k8={name:"SignerInfo",tagClass:ke.Class.UNIVERSAL,type:ke.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.version",tagClass:ke.Class.UNIVERSAL,type:ke.Type.INTEGER,constructed:!1},{name:"SignerInfo.issuerAndSerialNumber",tagClass:ke.Class.UNIVERSAL,type:ke.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.issuerAndSerialNumber.issuer",tagClass:ke.Class.UNIVERSAL,type:ke.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"SignerInfo.issuerAndSerialNumber.serialNumber",tagClass:ke.Class.UNIVERSAL,type:ke.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"SignerInfo.digestAlgorithm",tagClass:ke.Class.UNIVERSAL,type:ke.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.digestAlgorithm.algorithm",tagClass:ke.Class.UNIVERSAL,type:ke.Type.OID,constructed:!1,capture:"digestAlgorithm"},{name:"SignerInfo.digestAlgorithm.parameter",tagClass:ke.Class.UNIVERSAL,constructed:!1,captureAsn1:"digestParameter",optional:!0}]},{name:"SignerInfo.authenticatedAttributes",tagClass:ke.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"authenticatedAttributes"},{name:"SignerInfo.digestEncryptionAlgorithm",tagClass:ke.Class.UNIVERSAL,type:ke.Type.SEQUENCE,constructed:!0,capture:"signatureAlgorithm"},{name:"SignerInfo.encryptedDigest",tagClass:ke.Class.UNIVERSAL,type:ke.Type.OCTETSTRING,constructed:!1,capture:"signature"},{name:"SignerInfo.unauthenticatedAttributes",tagClass:ke.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,capture:"unauthenticatedAttributes"}]};ul.signedDataValidator={name:"SignedData",tagClass:ke.Class.UNIVERSAL,type:ke.Type.SEQUENCE,constructed:!0,value:[{name:"SignedData.Version",tagClass:ke.Class.UNIVERSAL,type:ke.Type.INTEGER,constructed:!1,capture:"version"},{name:"SignedData.DigestAlgorithms",tagClass:ke.Class.UNIVERSAL,type:ke.Type.SET,constructed:!0,captureAsn1:"digestAlgorithms"},DC,{name:"SignedData.Certificates",tagClass:ke.Class.CONTEXT_SPECIFIC,type:0,optional:!0,captureAsn1:"certificates"},{name:"SignedData.CertificateRevocationLists",tagClass:ke.Class.CONTEXT_SPECIFIC,type:1,optional:!0,captureAsn1:"crls"},{name:"SignedData.SignerInfos",tagClass:ke.Class.UNIVERSAL,type:ke.Type.SET,capture:"signerInfos",optional:!0,value:[k8]}]};ul.recipientInfoValidator={name:"RecipientInfo",tagClass:ke.Class.UNIVERSAL,type:ke.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.version",tagClass:ke.Class.UNIVERSAL,type:ke.Type.INTEGER,constructed:!1,capture:"version"},{name:"RecipientInfo.issuerAndSerial",tagClass:ke.Class.UNIVERSAL,type:ke.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.issuerAndSerial.issuer",tagClass:ke.Class.UNIVERSAL,type:ke.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"RecipientInfo.issuerAndSerial.serialNumber",tagClass:ke.Class.UNIVERSAL,type:ke.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"RecipientInfo.keyEncryptionAlgorithm",tagClass:ke.Class.UNIVERSAL,type:ke.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.keyEncryptionAlgorithm.algorithm",tagClass:ke.Class.UNIVERSAL,type:ke.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"RecipientInfo.keyEncryptionAlgorithm.parameter",tagClass:ke.Class.UNIVERSAL,constructed:!1,captureAsn1:"encParameter",optional:!0}]},{name:"RecipientInfo.encryptedKey",tagClass:ke.Class.UNIVERSAL,type:ke.Type.OCTETSTRING,constructed:!1,capture:"encKey"}]}});var Sg=de((Pj,PC)=>{var Hs=mt();Ft();Hs.mgf=Hs.mgf||{};var I8=PC.exports=Hs.mgf.mgf1=Hs.mgf1=Hs.mgf1||{};I8.create=function(t){var e={generate:function(r,n){for(var i=new Hs.util.ByteBuffer,a=Math.ceil(n/t.digestLength),s=0;s<a;s++){var l=new Hs.util.ByteBuffer;l.putInt32(s),t.start(),t.update(r+l.getBytes()),i.putBuffer(t.digest())}return i.truncate(i.length()-n),i.getBytes()}};return e}});var UC=de((Mj,MC)=>{var Sd=mt();Sg();MC.exports=Sd.mgf=Sd.mgf||{};Sd.mgf.mgf1=Sd.mgf1});var Td=de((Uj,FC)=>{var Ys=mt();ri();Ft();var R8=FC.exports=Ys.pss=Ys.pss||{};R8.create=function(t){arguments.length===3&&(t={md:arguments[0],mgf:arguments[1],saltLength:arguments[2]});var e=t.md,r=t.mgf,n=e.digestLength,i=t.salt||null;typeof i=="string"&&(i=Ys.util.createBuffer(i));var a;if("saltLength"in t)a=t.saltLength;else if(i!==null)a=i.length();else throw new Error("Salt length not specified or specific salt not given.");if(i!==null&&i.length()!==a)throw new Error("Given salt length does not match length of given salt.");var s=t.prng||Ys.random,l={};return l.encode=function(u,f){var d,h=f-1,g=Math.ceil(h/8),y=u.digest().getBytes();if(g<n+a+2)throw new Error("Message is too long to encrypt.");var m;i===null?m=s.getBytesSync(a):m=i.bytes();var _=new Ys.util.ByteBuffer;_.fillWithByte(0,8),_.putBytes(y),_.putBytes(m),e.start(),e.update(_.getBytes());var E=e.digest().getBytes(),w=new Ys.util.ByteBuffer;w.fillWithByte(0,g-a-n-2),w.putByte(1),w.putBytes(m);var b=w.getBytes(),k=g-n-1,N=r.generate(E,k),D="";for(d=0;d<k;d++)D+=String.fromCharCode(b.charCodeAt(d)^N.charCodeAt(d));var B=65280>>8*g-h&255;return D=String.fromCharCode(D.charCodeAt(0)&~B)+D.substr(1),D+E+String.fromCharCode(188)},l.verify=function(u,f,d){var h,g=d-1,y=Math.ceil(g/8);if(f=f.substr(-y),y<n+a+2)throw new Error("Inconsistent parameters to PSS signature verification.");if(f.charCodeAt(y-1)!==188)throw new Error("Encoded message does not end in 0xBC.");var m=y-n-1,_=f.substr(0,m),E=f.substr(m,n),w=65280>>8*y-g&255;if((_.charCodeAt(0)&w)!=0)throw new Error("Bits beyond keysize not zero as expected.");var b=r.generate(E,m),k="";for(h=0;h<m;h++)k+=String.fromCharCode(_.charCodeAt(h)^b.charCodeAt(h));k=String.fromCharCode(k.charCodeAt(0)&~w)+k.substr(1);var N=y-n-a-2;for(h=0;h<N;h++)if(k.charCodeAt(h)!==0)throw new Error("Leftmost octets not zero as expected");if(k.charCodeAt(N)!==1)throw new Error("Inconsistent PSS signature, 0x01 marker not found");var D=k.substr(-a),B=new Ys.util.ByteBuffer;B.fillWithByte(0,8),B.putBytes(u),B.putBytes(D),e.start(),e.update(B.getBytes());var ee=e.digest().getBytes();return E===ee},l}});var Id=de((Fj,KC)=>{var qe=mt();is();xi();Au();zi();UC();as();Gs();Td();Ru();Ft();var x=qe.asn1,Ce=KC.exports=qe.pki=qe.pki||{},Mt=Ce.oids,_r={};_r.CN=Mt.commonName;_r.commonName="CN";_r.C=Mt.countryName;_r.countryName="C";_r.L=Mt.localityName;_r.localityName="L";_r.ST=Mt.stateOrProvinceName;_r.stateOrProvinceName="ST";_r.O=Mt.organizationName;_r.organizationName="O";_r.OU=Mt.organizationalUnitName;_r.organizationalUnitName="OU";_r.E=Mt.emailAddress;_r.emailAddress="E";var qC=qe.pki.rsa.publicKeyValidator,N8={name:"Certificate",tagClass:x.Class.UNIVERSAL,type:x.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate",tagClass:x.Class.UNIVERSAL,type:x.Type.SEQUENCE,constructed:!0,captureAsn1:"tbsCertificate",value:[{name:"Certificate.TBSCertificate.version",tagClass:x.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.version.integer",tagClass:x.Class.UNIVERSAL,type:x.Type.INTEGER,constructed:!1,capture:"certVersion"}]},{name:"Certificate.TBSCertificate.serialNumber",tagClass:x.Class.UNIVERSAL,type:x.Type.INTEGER,constructed:!1,capture:"certSerialNumber"},{name:"Certificate.TBSCertificate.signature",tagClass:x.Class.UNIVERSAL,type:x.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.signature.algorithm",tagClass:x.Class.UNIVERSAL,type:x.Type.OID,constructed:!1,capture:"certinfoSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:x.Class.UNIVERSAL,optional:!0,captureAsn1:"certinfoSignatureParams"}]},{name:"Certificate.TBSCertificate.issuer",tagClass:x.Class.UNIVERSAL,type:x.Type.SEQUENCE,constructed:!0,captureAsn1:"certIssuer"},{name:"Certificate.TBSCertificate.validity",tagClass:x.Class.UNIVERSAL,type:x.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.validity.notBefore (utc)",tagClass:x.Class.UNIVERSAL,type:x.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity1UTCTime"},{name:"Certificate.TBSCertificate.validity.notBefore (generalized)",tagClass:x.Class.UNIVERSAL,type:x.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity2GeneralizedTime"},{name:"Certificate.TBSCertificate.validity.notAfter (utc)",tagClass:x.Class.UNIVERSAL,type:x.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity3UTCTime"},{name:"Certificate.TBSCertificate.validity.notAfter (generalized)",tagClass:x.Class.UNIVERSAL,type:x.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity4GeneralizedTime"}]},{name:"Certificate.TBSCertificate.subject",tagClass:x.Class.UNIVERSAL,type:x.Type.SEQUENCE,constructed:!0,captureAsn1:"certSubject"},qC,{name:"Certificate.TBSCertificate.issuerUniqueID",tagClass:x.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.issuerUniqueID.id",tagClass:x.Class.UNIVERSAL,type:x.Type.BITSTRING,constructed:!1,captureBitStringValue:"certIssuerUniqueId"}]},{name:"Certificate.TBSCertificate.subjectUniqueID",tagClass:x.Class.CONTEXT_SPECIFIC,type:2,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.subjectUniqueID.id",tagClass:x.Class.UNIVERSAL,type:x.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSubjectUniqueId"}]},{name:"Certificate.TBSCertificate.extensions",tagClass:x.Class.CONTEXT_SPECIFIC,type:3,constructed:!0,captureAsn1:"certExtensions",optional:!0}]},{name:"Certificate.signatureAlgorithm",tagClass:x.Class.UNIVERSAL,type:x.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.signatureAlgorithm.algorithm",tagClass:x.Class.UNIVERSAL,type:x.Type.OID,constructed:!1,capture:"certSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:x.Class.UNIVERSAL,optional:!0,captureAsn1:"certSignatureParams"}]},{name:"Certificate.signatureValue",tagClass:x.Class.UNIVERSAL,type:x.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSignature"}]},B8={name:"rsapss",tagClass:x.Class.UNIVERSAL,type:x.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.hashAlgorithm",tagClass:x.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier",tagClass:x.Class.UNIVERSAL,type:x.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier.algorithm",tagClass:x.Class.UNIVERSAL,type:x.Type.OID,constructed:!1,capture:"hashOid"}]}]},{name:"rsapss.maskGenAlgorithm",tagClass:x.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier",tagClass:x.Class.UNIVERSAL,type:x.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.algorithm",tagClass:x.Class.UNIVERSAL,type:x.Type.OID,constructed:!1,capture:"maskGenOid"},{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params",tagClass:x.Class.UNIVERSAL,type:x.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params.algorithm",tagClass:x.Class.UNIVERSAL,type:x.Type.OID,constructed:!1,capture:"maskGenHashOid"}]}]}]},{name:"rsapss.saltLength",tagClass:x.Class.CONTEXT_SPECIFIC,type:2,optional:!0,value:[{name:"rsapss.saltLength.saltLength",tagClass:x.Class.UNIVERSAL,type:x.Class.INTEGER,constructed:!1,capture:"saltLength"}]},{name:"rsapss.trailerField",tagClass:x.Class.CONTEXT_SPECIFIC,type:3,optional:!0,value:[{name:"rsapss.trailer.trailer",tagClass:x.Class.UNIVERSAL,type:x.Class.INTEGER,constructed:!1,capture:"trailer"}]}]},D8={name:"CertificationRequestInfo",tagClass:x.Class.UNIVERSAL,type:x.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfo",value:[{name:"CertificationRequestInfo.integer",tagClass:x.Class.UNIVERSAL,type:x.Type.INTEGER,constructed:!1,capture:"certificationRequestInfoVersion"},{name:"CertificationRequestInfo.subject",tagClass:x.Class.UNIVERSAL,type:x.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfoSubject"},qC,{name:"CertificationRequestInfo.attributes",tagClass:x.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"certificationRequestInfoAttributes",value:[{name:"CertificationRequestInfo.attributes",tagClass:x.Class.UNIVERSAL,type:x.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequestInfo.attributes.type",tagClass:x.Class.UNIVERSAL,type:x.Type.OID,constructed:!1},{name:"CertificationRequestInfo.attributes.value",tagClass:x.Class.UNIVERSAL,type:x.Type.SET,constructed:!0}]}]}]},O8={name:"CertificationRequest",tagClass:x.Class.UNIVERSAL,type:x.Type.SEQUENCE,constructed:!0,captureAsn1:"csr",value:[D8,{name:"CertificationRequest.signatureAlgorithm",tagClass:x.Class.UNIVERSAL,type:x.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequest.signatureAlgorithm.algorithm",tagClass:x.Class.UNIVERSAL,type:x.Type.OID,constructed:!1,capture:"csrSignatureOid"},{name:"CertificationRequest.signatureAlgorithm.parameters",tagClass:x.Class.UNIVERSAL,optional:!0,captureAsn1:"csrSignatureParams"}]},{name:"CertificationRequest.signature",tagClass:x.Class.UNIVERSAL,type:x.Type.BITSTRING,constructed:!1,captureBitStringValue:"csrSignature"}]};Ce.RDNAttributesAsArray=function(t,e){for(var r=[],n,i,a,s=0;s<t.value.length;++s){n=t.value[s];for(var l=0;l<n.value.length;++l)a={},i=n.value[l],a.type=x.derToOid(i.value[0].value),a.value=i.value[1].value,a.valueTagClass=i.value[1].type,a.type in Mt&&(a.name=Mt[a.type],a.name in _r&&(a.shortName=_r[a.name])),e&&(e.update(a.type),e.update(a.value)),r.push(a)}return r};Ce.CRIAttributesAsArray=function(t){for(var e=[],r=0;r<t.length;++r)for(var n=t[r],i=x.derToOid(n.value[0].value),a=n.value[1].value,s=0;s<a.length;++s){var l={};if(l.type=i,l.value=a[s].value,l.valueTagClass=a[s].type,l.type in Mt&&(l.name=Mt[l.type],l.name in _r&&(l.shortName=_r[l.name])),l.type===Mt.extensionRequest){l.extensions=[];for(var u=0;u<l.value.length;++u)l.extensions.push(Ce.certificateExtensionFromAsn1(l.value[u]))}e.push(l)}return e};function ls(t,e){typeof e=="string"&&(e={shortName:e});for(var r=null,n,i=0;r===null&&i<t.attributes.length;++i)n=t.attributes[i],(e.type&&e.type===n.type||e.name&&e.name===n.name||e.shortName&&e.shortName===n.shortName)&&(r=n);return r}var Ad=function(t,e,r){var n={};if(t!==Mt["RSASSA-PSS"])return n;r&&(n={hash:{algorithmOid:Mt.sha1},mgf:{algorithmOid:Mt.mgf1,hash:{algorithmOid:Mt.sha1}},saltLength:20});var i={},a=[];if(!x.validate(e,B8,i,a)){var s=new Error("Cannot read RSASSA-PSS parameter block.");throw s.errors=a,s}return i.hashOid!==void 0&&(n.hash=n.hash||{},n.hash.algorithmOid=x.derToOid(i.hashOid)),i.maskGenOid!==void 0&&(n.mgf=n.mgf||{},n.mgf.algorithmOid=x.derToOid(i.maskGenOid),n.mgf.hash=n.mgf.hash||{},n.mgf.hash.algorithmOid=x.derToOid(i.maskGenHashOid)),i.saltLength!==void 0&&(n.saltLength=i.saltLength.charCodeAt(0)),n},kd=function(t){switch(Mt[t.signatureOid]){case"sha1WithRSAEncryption":case"sha1WithRSASignature":return qe.md.sha1.create();case"md5WithRSAEncryption":return qe.md.md5.create();case"sha256WithRSAEncryption":return qe.md.sha256.create();case"sha384WithRSAEncryption":return qe.md.sha384.create();case"sha512WithRSAEncryption":return qe.md.sha512.create();case"RSASSA-PSS":return qe.md.sha256.create();default:var e=new Error("Could not compute "+t.type+" digest. Unknown signature OID.");throw e.signatureOid=t.signatureOid,e}},GC=function(t){var e=t.certificate,r;switch(e.signatureOid){case Mt.sha1WithRSAEncryption:case Mt.sha1WithRSASignature:break;case Mt["RSASSA-PSS"]:var n,i;if(n=Mt[e.signatureParameters.mgf.hash.algorithmOid],n===void 0||qe.md[n]===void 0){var a=new Error("Unsupported MGF hash function.");throw a.oid=e.signatureParameters.mgf.hash.algorithmOid,a.name=n,a}if(i=Mt[e.signatureParameters.mgf.algorithmOid],i===void 0||qe.mgf[i]===void 0){var a=new Error("Unsupported MGF function.");throw a.oid=e.signatureParameters.mgf.algorithmOid,a.name=i,a}if(i=qe.mgf[i].create(qe.md[n].create()),n=Mt[e.signatureParameters.hash.algorithmOid],n===void 0||qe.md[n]===void 0){var a=new Error("Unsupported RSASSA-PSS hash function.");throw a.oid=e.signatureParameters.hash.algorithmOid,a.name=n,a}r=qe.pss.create(qe.md[n].create(),i,e.signatureParameters.saltLength);break}return e.publicKey.verify(t.md.digest().getBytes(),t.signature,r)};Ce.certificateFromPem=function(t,e,r){var n=qe.pem.decode(t)[0];if(n.type!=="CERTIFICATE"&&n.type!=="X509 CERTIFICATE"&&n.type!=="TRUSTED CERTIFICATE"){var i=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw i.headerType=n.type,i}if(n.procType&&n.procType.type==="ENCRYPTED")throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var a=x.fromDer(n.body,r);return Ce.certificateFromAsn1(a,e)};Ce.certificateToPem=function(t,e){var r={type:"CERTIFICATE",body:x.toDer(Ce.certificateToAsn1(t)).getBytes()};return qe.pem.encode(r,{maxline:e})};Ce.publicKeyFromPem=function(t){var e=qe.pem.decode(t)[0];if(e.type!=="PUBLIC KEY"&&e.type!=="RSA PUBLIC KEY"){var r=new Error('Could not convert public key from PEM; PEM header type is not "PUBLIC KEY" or "RSA PUBLIC KEY".');throw r.headerType=e.type,r}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert public key from PEM; PEM is encrypted.");var n=x.fromDer(e.body);return Ce.publicKeyFromAsn1(n)};Ce.publicKeyToPem=function(t,e){var r={type:"PUBLIC KEY",body:x.toDer(Ce.publicKeyToAsn1(t)).getBytes()};return qe.pem.encode(r,{maxline:e})};Ce.publicKeyToRSAPublicKeyPem=function(t,e){var r={type:"RSA PUBLIC KEY",body:x.toDer(Ce.publicKeyToRSAPublicKey(t)).getBytes()};return qe.pem.encode(r,{maxline:e})};Ce.getPublicKeyFingerprint=function(t,e){e=e||{};var r=e.md||qe.md.sha1.create(),n=e.type||"RSAPublicKey",i;switch(n){case"RSAPublicKey":i=x.toDer(Ce.publicKeyToRSAPublicKey(t)).getBytes();break;case"SubjectPublicKeyInfo":i=x.toDer(Ce.publicKeyToAsn1(t)).getBytes();break;default:throw new Error('Unknown fingerprint type "'+e.type+'".')}r.start(),r.update(i);var a=r.digest();if(e.encoding==="hex"){var s=a.toHex();return e.delimiter?s.match(/.{2}/g).join(e.delimiter):s}else{if(e.encoding==="binary")return a.getBytes();if(e.encoding)throw new Error('Unknown encoding "'+e.encoding+'".')}return a};Ce.certificationRequestFromPem=function(t,e,r){var n=qe.pem.decode(t)[0];if(n.type!=="CERTIFICATE REQUEST"){var i=new Error('Could not convert certification request from PEM; PEM header type is not "CERTIFICATE REQUEST".');throw i.headerType=n.type,i}if(n.procType&&n.procType.type==="ENCRYPTED")throw new Error("Could not convert certification request from PEM; PEM is encrypted.");var a=x.fromDer(n.body,r);return Ce.certificationRequestFromAsn1(a,e)};Ce.certificationRequestToPem=function(t,e){var r={type:"CERTIFICATE REQUEST",body:x.toDer(Ce.certificationRequestToAsn1(t)).getBytes()};return qe.pem.encode(r,{maxline:e})};Ce.createCertificate=function(){var t={};return t.version=2,t.serialNumber="00",t.signatureOid=null,t.signature=null,t.siginfo={},t.siginfo.algorithmOid=null,t.validity={},t.validity.notBefore=new Date,t.validity.notAfter=new Date,t.issuer={},t.issuer.getField=function(e){return ls(t.issuer,e)},t.issuer.addField=function(e){ai([e]),t.issuer.attributes.push(e)},t.issuer.attributes=[],t.issuer.hash=null,t.subject={},t.subject.getField=function(e){return ls(t.subject,e)},t.subject.addField=function(e){ai([e]),t.subject.attributes.push(e)},t.subject.attributes=[],t.subject.hash=null,t.extensions=[],t.publicKey=null,t.md=null,t.setSubject=function(e,r){ai(e),t.subject.attributes=e,delete t.subject.uniqueId,r&&(t.subject.uniqueId=r),t.subject.hash=null},t.setIssuer=function(e,r){ai(e),t.issuer.attributes=e,delete t.issuer.uniqueId,r&&(t.issuer.uniqueId=r),t.issuer.hash=null},t.setExtensions=function(e){for(var r=0;r<e.length;++r)VC(e[r],{cert:t});t.extensions=e},t.getExtension=function(e){typeof e=="string"&&(e={name:e});for(var r=null,n,i=0;r===null&&i<t.extensions.length;++i)n=t.extensions[i],(e.id&&n.id===e.id||e.name&&n.name===e.name)&&(r=n);return r},t.sign=function(e,r){t.md=r||qe.md.sha1.create();var n=Mt[t.md.algorithm+"WithRSAEncryption"];if(!n){var i=new Error("Could not compute certificate digest. Unknown message digest algorithm OID.");throw i.algorithm=t.md.algorithm,i}t.signatureOid=t.siginfo.algorithmOid=n,t.tbsCertificate=Ce.getTBSCertificate(t);var a=x.toDer(t.tbsCertificate);t.md.update(a.getBytes()),t.signature=e.sign(t.md)},t.verify=function(e){var r=!1;if(!t.issued(e)){var n=e.issuer,i=t.subject,a=new Error("The parent certificate did not issue the given child certificate; the child certificate's issuer does not match the parent's subject.");throw a.expectedIssuer=i.attributes,a.actualIssuer=n.attributes,a}var s=e.md;if(s===null){s=kd({signatureOid:e.signatureOid,type:"certificate"});var l=e.tbsCertificate||Ce.getTBSCertificate(e),u=x.toDer(l);s.update(u.getBytes())}return s!==null&&(r=GC({certificate:t,md:s,signature:e.signature})),r},t.isIssuer=function(e){var r=!1,n=t.issuer,i=e.subject;if(n.hash&&i.hash)r=n.hash===i.hash;else if(n.attributes.length===i.attributes.length){r=!0;for(var a,s,l=0;r&&l<n.attributes.length;++l)a=n.attributes[l],s=i.attributes[l],(a.type!==s.type||a.value!==s.value)&&(r=!1)}return r},t.issued=function(e){return e.isIssuer(t)},t.generateSubjectKeyIdentifier=function(){return Ce.getPublicKeyFingerprint(t.publicKey,{type:"RSAPublicKey"})},t.verifySubjectKeyIdentifier=function(){for(var e=Mt.subjectKeyIdentifier,r=0;r<t.extensions.length;++r){var n=t.extensions[r];if(n.id===e){var i=t.generateSubjectKeyIdentifier().getBytes();return qe.util.hexToBytes(n.subjectKeyIdentifier)===i}}return!1},t};Ce.certificateFromAsn1=function(t,e){var r={},n=[];if(!x.validate(t,N8,r,n)){var i=new Error("Cannot read X.509 certificate. ASN.1 object is not an X509v3 Certificate.");throw i.errors=n,i}var a=x.derToOid(r.publicKeyOid);if(a!==Ce.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var s=Ce.createCertificate();s.version=r.certVersion?r.certVersion.charCodeAt(0):0;var l=qe.util.createBuffer(r.certSerialNumber);s.serialNumber=l.toHex(),s.signatureOid=qe.asn1.derToOid(r.certSignatureOid),s.signatureParameters=Ad(s.signatureOid,r.certSignatureParams,!0),s.siginfo.algorithmOid=qe.asn1.derToOid(r.certinfoSignatureOid),s.siginfo.parameters=Ad(s.siginfo.algorithmOid,r.certinfoSignatureParams,!1),s.signature=r.certSignature;var u=[];if(r.certValidity1UTCTime!==void 0&&u.push(x.utcTimeToDate(r.certValidity1UTCTime)),r.certValidity2GeneralizedTime!==void 0&&u.push(x.generalizedTimeToDate(r.certValidity2GeneralizedTime)),r.certValidity3UTCTime!==void 0&&u.push(x.utcTimeToDate(r.certValidity3UTCTime)),r.certValidity4GeneralizedTime!==void 0&&u.push(x.generalizedTimeToDate(r.certValidity4GeneralizedTime)),u.length>2)throw new Error("Cannot read notBefore/notAfter validity times; more than two times were provided in the certificate.");if(u.length<2)throw new Error("Cannot read notBefore/notAfter validity times; they were not provided as either UTCTime or GeneralizedTime.");if(s.validity.notBefore=u[0],s.validity.notAfter=u[1],s.tbsCertificate=r.tbsCertificate,e){s.md=kd({signatureOid:s.signatureOid,type:"certificate"});var f=x.toDer(s.tbsCertificate);s.md.update(f.getBytes())}var d=qe.md.sha1.create(),h=x.toDer(r.certIssuer);d.update(h.getBytes()),s.issuer.getField=function(m){return ls(s.issuer,m)},s.issuer.addField=function(m){ai([m]),s.issuer.attributes.push(m)},s.issuer.attributes=Ce.RDNAttributesAsArray(r.certIssuer),r.certIssuerUniqueId&&(s.issuer.uniqueId=r.certIssuerUniqueId),s.issuer.hash=d.digest().toHex();var g=qe.md.sha1.create(),y=x.toDer(r.certSubject);return g.update(y.getBytes()),s.subject.getField=function(m){return ls(s.subject,m)},s.subject.addField=function(m){ai([m]),s.subject.attributes.push(m)},s.subject.attributes=Ce.RDNAttributesAsArray(r.certSubject),r.certSubjectUniqueId&&(s.subject.uniqueId=r.certSubjectUniqueId),s.subject.hash=g.digest().toHex(),r.certExtensions?s.extensions=Ce.certificateExtensionsFromAsn1(r.certExtensions):s.extensions=[],s.publicKey=Ce.publicKeyFromAsn1(r.subjectPublicKeyInfo),s};Ce.certificateExtensionsFromAsn1=function(t){for(var e=[],r=0;r<t.value.length;++r)for(var n=t.value[r],i=0;i<n.value.length;++i)e.push(Ce.certificateExtensionFromAsn1(n.value[i]));return e};Ce.certificateExtensionFromAsn1=function(t){var e={};if(e.id=x.derToOid(t.value[0].value),e.critical=!1,t.value[1].type===x.Type.BOOLEAN?(e.critical=t.value[1].value.charCodeAt(0)!==0,e.value=t.value[2].value):e.value=t.value[1].value,e.id in Mt){if(e.name=Mt[e.id],e.name==="keyUsage"){var r=x.fromDer(e.value),n=0,i=0;r.value.length>1&&(n=r.value.charCodeAt(1),i=r.value.length>2?r.value.charCodeAt(2):0),e.digitalSignature=(n&128)==128,e.nonRepudiation=(n&64)==64,e.keyEncipherment=(n&32)==32,e.dataEncipherment=(n&16)==16,e.keyAgreement=(n&8)==8,e.keyCertSign=(n&4)==4,e.cRLSign=(n&2)==2,e.encipherOnly=(n&1)==1,e.decipherOnly=(i&128)==128}else if(e.name==="basicConstraints"){var r=x.fromDer(e.value);r.value.length>0&&r.value[0].type===x.Type.BOOLEAN?e.cA=r.value[0].value.charCodeAt(0)!==0:e.cA=!1;var a=null;r.value.length>0&&r.value[0].type===x.Type.INTEGER?a=r.value[0].value:r.value.length>1&&(a=r.value[1].value),a!==null&&(e.pathLenConstraint=x.derToInteger(a))}else if(e.name==="extKeyUsage")for(var r=x.fromDer(e.value),s=0;s<r.value.length;++s){var l=x.derToOid(r.value[s].value);l in Mt?e[Mt[l]]=!0:e[l]=!0}else if(e.name==="nsCertType"){var r=x.fromDer(e.value),n=0;r.value.length>1&&(n=r.value.charCodeAt(1)),e.client=(n&128)==128,e.server=(n&64)==64,e.email=(n&32)==32,e.objsign=(n&16)==16,e.reserved=(n&8)==8,e.sslCA=(n&4)==4,e.emailCA=(n&2)==2,e.objCA=(n&1)==1}else if(e.name==="subjectAltName"||e.name==="issuerAltName"){e.altNames=[];for(var u,r=x.fromDer(e.value),f=0;f<r.value.length;++f){u=r.value[f];var d={type:u.type,value:u.value};switch(e.altNames.push(d),u.type){case 1:case 2:case 6:break;case 7:d.ip=qe.util.bytesToIP(u.value);break;case 8:d.oid=x.derToOid(u.value);break;default:}}}else if(e.name==="subjectKeyIdentifier"){var r=x.fromDer(e.value);e.subjectKeyIdentifier=qe.util.bytesToHex(r.value)}}return e};Ce.certificationRequestFromAsn1=function(t,e){var r={},n=[];if(!x.validate(t,O8,r,n)){var i=new Error("Cannot read PKCS#10 certificate request. ASN.1 object is not a PKCS#10 CertificationRequest.");throw i.errors=n,i}var a=x.derToOid(r.publicKeyOid);if(a!==Ce.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var s=Ce.createCertificationRequest();if(s.version=r.csrVersion?r.csrVersion.charCodeAt(0):0,s.signatureOid=qe.asn1.derToOid(r.csrSignatureOid),s.signatureParameters=Ad(s.signatureOid,r.csrSignatureParams,!0),s.siginfo.algorithmOid=qe.asn1.derToOid(r.csrSignatureOid),s.siginfo.parameters=Ad(s.siginfo.algorithmOid,r.csrSignatureParams,!1),s.signature=r.csrSignature,s.certificationRequestInfo=r.certificationRequestInfo,e){s.md=kd({signatureOid:s.signatureOid,type:"certification request"});var l=x.toDer(s.certificationRequestInfo);s.md.update(l.getBytes())}var u=qe.md.sha1.create();return s.subject.getField=function(f){return ls(s.subject,f)},s.subject.addField=function(f){ai([f]),s.subject.attributes.push(f)},s.subject.attributes=Ce.RDNAttributesAsArray(r.certificationRequestInfoSubject,u),s.subject.hash=u.digest().toHex(),s.publicKey=Ce.publicKeyFromAsn1(r.subjectPublicKeyInfo),s.getAttribute=function(f){return ls(s,f)},s.addAttribute=function(f){ai([f]),s.attributes.push(f)},s.attributes=Ce.CRIAttributesAsArray(r.certificationRequestInfoAttributes||[]),s};Ce.createCertificationRequest=function(){var t={};return t.version=0,t.signatureOid=null,t.signature=null,t.siginfo={},t.siginfo.algorithmOid=null,t.subject={},t.subject.getField=function(e){return ls(t.subject,e)},t.subject.addField=function(e){ai([e]),t.subject.attributes.push(e)},t.subject.attributes=[],t.subject.hash=null,t.publicKey=null,t.attributes=[],t.getAttribute=function(e){return ls(t,e)},t.addAttribute=function(e){ai([e]),t.attributes.push(e)},t.md=null,t.setSubject=function(e){ai(e),t.subject.attributes=e,t.subject.hash=null},t.setAttributes=function(e){ai(e),t.attributes=e},t.sign=function(e,r){t.md=r||qe.md.sha1.create();var n=Mt[t.md.algorithm+"WithRSAEncryption"];if(!n){var i=new Error("Could not compute certification request digest. Unknown message digest algorithm OID.");throw i.algorithm=t.md.algorithm,i}t.signatureOid=t.siginfo.algorithmOid=n,t.certificationRequestInfo=Ce.getCertificationRequestInfo(t);var a=x.toDer(t.certificationRequestInfo);t.md.update(a.getBytes()),t.signature=e.sign(t.md)},t.verify=function(){var e=!1,r=t.md;if(r===null){r=kd({signatureOid:t.signatureOid,type:"certification request"});var n=t.certificationRequestInfo||Ce.getCertificationRequestInfo(t),i=x.toDer(n);r.update(i.getBytes())}return r!==null&&(e=GC({certificate:t,md:r,signature:t.signature})),e},t};function cl(t){for(var e=x.create(x.Class.UNIVERSAL,x.Type.SEQUENCE,!0,[]),r,n,i=t.attributes,a=0;a<i.length;++a){r=i[a];var s=r.value,l=x.Type.PRINTABLESTRING;"valueTagClass"in r&&(l=r.valueTagClass,l===x.Type.UTF8&&(s=qe.util.encodeUtf8(s))),n=x.create(x.Class.UNIVERSAL,x.Type.SET,!0,[x.create(x.Class.UNIVERSAL,x.Type.SEQUENCE,!0,[x.create(x.Class.UNIVERSAL,x.Type.OID,!1,x.oidToDer(r.type).getBytes()),x.create(x.Class.UNIVERSAL,l,!1,s)])]),e.value.push(n)}return e}function ai(t){for(var e,r=0;r<t.length;++r){if(e=t[r],typeof e.name=="undefined"&&(e.type&&e.type in Ce.oids?e.name=Ce.oids[e.type]:e.shortName&&e.shortName in _r&&(e.name=Ce.oids[_r[e.shortName]])),typeof e.type=="undefined")if(e.name&&e.name in Ce.oids)e.type=Ce.oids[e.name];else{var n=new Error("Attribute type not specified.");throw n.attribute=e,n}if(typeof e.shortName=="undefined"&&e.name&&e.name in _r&&(e.shortName=_r[e.name]),e.type===Mt.extensionRequest&&(e.valueConstructed=!0,e.valueTagClass=x.Type.SEQUENCE,!e.value&&e.extensions)){e.value=[];for(var i=0;i<e.extensions.length;++i)e.value.push(Ce.certificateExtensionToAsn1(VC(e.extensions[i])))}if(typeof e.value=="undefined"){var n=new Error("Attribute value not specified.");throw n.attribute=e,n}}}function VC(t,e){if(e=e||{},typeof t.name=="undefined"&&t.id&&t.id in Ce.oids&&(t.name=Ce.oids[t.id]),typeof t.id=="undefined")if(t.name&&t.name in Ce.oids)t.id=Ce.oids[t.name];else{var r=new Error("Extension ID not specified.");throw r.extension=t,r}if(typeof t.value!="undefined")return t;if(t.name==="keyUsage"){var n=0,i=0,a=0;t.digitalSignature&&(i|=128,n=7),t.nonRepudiation&&(i|=64,n=6),t.keyEncipherment&&(i|=32,n=5),t.dataEncipherment&&(i|=16,n=4),t.keyAgreement&&(i|=8,n=3),t.keyCertSign&&(i|=4,n=2),t.cRLSign&&(i|=2,n=1),t.encipherOnly&&(i|=1,n=0),t.decipherOnly&&(a|=128,n=7);var s=String.fromCharCode(n);a!==0?s+=String.fromCharCode(i)+String.fromCharCode(a):i!==0&&(s+=String.fromCharCode(i)),t.value=x.create(x.Class.UNIVERSAL,x.Type.BITSTRING,!1,s)}else if(t.name==="basicConstraints")t.value=x.create(x.Class.UNIVERSAL,x.Type.SEQUENCE,!0,[]),t.cA&&t.value.value.push(x.create(x.Class.UNIVERSAL,x.Type.BOOLEAN,!1,String.fromCharCode(255))),"pathLenConstraint"in t&&t.value.value.push(x.create(x.Class.UNIVERSAL,x.Type.INTEGER,!1,x.integerToDer(t.pathLenConstraint).getBytes()));else if(t.name==="extKeyUsage"){t.value=x.create(x.Class.UNIVERSAL,x.Type.SEQUENCE,!0,[]);var l=t.value.value;for(var u in t)t[u]===!0&&(u in Mt?l.push(x.create(x.Class.UNIVERSAL,x.Type.OID,!1,x.oidToDer(Mt[u]).getBytes())):u.indexOf(".")!==-1&&l.push(x.create(x.Class.UNIVERSAL,x.Type.OID,!1,x.oidToDer(u).getBytes())))}else if(t.name==="nsCertType"){var n=0,i=0;t.client&&(i|=128,n=7),t.server&&(i|=64,n=6),t.email&&(i|=32,n=5),t.objsign&&(i|=16,n=4),t.reserved&&(i|=8,n=3),t.sslCA&&(i|=4,n=2),t.emailCA&&(i|=2,n=1),t.objCA&&(i|=1,n=0);var s=String.fromCharCode(n);i!==0&&(s+=String.fromCharCode(i)),t.value=x.create(x.Class.UNIVERSAL,x.Type.BITSTRING,!1,s)}else if(t.name==="subjectAltName"||t.name==="issuerAltName"){t.value=x.create(x.Class.UNIVERSAL,x.Type.SEQUENCE,!0,[]);for(var f,d=0;d<t.altNames.length;++d){f=t.altNames[d];var s=f.value;if(f.type===7&&f.ip){if(s=qe.util.bytesFromIP(f.ip),s===null){var r=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw r.extension=t,r}}else f.type===8&&(f.oid?s=x.oidToDer(x.oidToDer(f.oid)):s=x.oidToDer(s));t.value.value.push(x.create(x.Class.CONTEXT_SPECIFIC,f.type,!1,s))}}else if(t.name==="nsComment"&&e.cert){if(!/^[\x00-\x7F]*$/.test(t.comment)||t.comment.length<1||t.comment.length>128)throw new Error('Invalid "nsComment" content.');t.value=x.create(x.Class.UNIVERSAL,x.Type.IA5STRING,!1,t.comment)}else if(t.name==="subjectKeyIdentifier"&&e.cert){var h=e.cert.generateSubjectKeyIdentifier();t.subjectKeyIdentifier=h.toHex(),t.value=x.create(x.Class.UNIVERSAL,x.Type.OCTETSTRING,!1,h.getBytes())}else if(t.name==="authorityKeyIdentifier"&&e.cert){t.value=x.create(x.Class.UNIVERSAL,x.Type.SEQUENCE,!0,[]);var l=t.value.value;if(t.keyIdentifier){var g=t.keyIdentifier===!0?e.cert.generateSubjectKeyIdentifier().getBytes():t.keyIdentifier;l.push(x.create(x.Class.CONTEXT_SPECIFIC,0,!1,g))}if(t.authorityCertIssuer){var y=[x.create(x.Class.CONTEXT_SPECIFIC,4,!0,[cl(t.authorityCertIssuer===!0?e.cert.issuer:t.authorityCertIssuer)])];l.push(x.create(x.Class.CONTEXT_SPECIFIC,1,!0,y))}if(t.serialNumber){var m=qe.util.hexToBytes(t.serialNumber===!0?e.cert.serialNumber:t.serialNumber);l.push(x.create(x.Class.CONTEXT_SPECIFIC,2,!1,m))}}else if(t.name==="cRLDistributionPoints"){t.value=x.create(x.Class.UNIVERSAL,x.Type.SEQUENCE,!0,[]);for(var l=t.value.value,_=x.create(x.Class.UNIVERSAL,x.Type.SEQUENCE,!0,[]),E=x.create(x.Class.CONTEXT_SPECIFIC,0,!0,[]),f,d=0;d<t.altNames.length;++d){f=t.altNames[d];var s=f.value;if(f.type===7&&f.ip){if(s=qe.util.bytesFromIP(f.ip),s===null){var r=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw r.extension=t,r}}else f.type===8&&(f.oid?s=x.oidToDer(x.oidToDer(f.oid)):s=x.oidToDer(s));E.value.push(x.create(x.Class.CONTEXT_SPECIFIC,f.type,!1,s))}_.value.push(x.create(x.Class.CONTEXT_SPECIFIC,0,!0,[E])),l.push(_)}if(typeof t.value=="undefined"){var r=new Error("Extension value not specified.");throw r.extension=t,r}return t}function Tg(t,e){switch(t){case Mt["RSASSA-PSS"]:var r=[];return e.hash.algorithmOid!==void 0&&r.push(x.create(x.Class.CONTEXT_SPECIFIC,0,!0,[x.create(x.Class.UNIVERSAL,x.Type.SEQUENCE,!0,[x.create(x.Class.UNIVERSAL,x.Type.OID,!1,x.oidToDer(e.hash.algorithmOid).getBytes()),x.create(x.Class.UNIVERSAL,x.Type.NULL,!1,"")])])),e.mgf.algorithmOid!==void 0&&r.push(x.create(x.Class.CONTEXT_SPECIFIC,1,!0,[x.create(x.Class.UNIVERSAL,x.Type.SEQUENCE,!0,[x.create(x.Class.UNIVERSAL,x.Type.OID,!1,x.oidToDer(e.mgf.algorithmOid).getBytes()),x.create(x.Class.UNIVERSAL,x.Type.SEQUENCE,!0,[x.create(x.Class.UNIVERSAL,x.Type.OID,!1,x.oidToDer(e.mgf.hash.algorithmOid).getBytes()),x.create(x.Class.UNIVERSAL,x.Type.NULL,!1,"")])])])),e.saltLength!==void 0&&r.push(x.create(x.Class.CONTEXT_SPECIFIC,2,!0,[x.create(x.Class.UNIVERSAL,x.Type.INTEGER,!1,x.integerToDer(e.saltLength).getBytes())])),x.create(x.Class.UNIVERSAL,x.Type.SEQUENCE,!0,r);default:return x.create(x.Class.UNIVERSAL,x.Type.NULL,!1,"")}}function L8(t){var e=x.create(x.Class.CONTEXT_SPECIFIC,0,!0,[]);if(t.attributes.length===0)return e;for(var r=t.attributes,n=0;n<r.length;++n){var i=r[n],a=i.value,s=x.Type.UTF8;"valueTagClass"in i&&(s=i.valueTagClass),s===x.Type.UTF8&&(a=qe.util.encodeUtf8(a));var l=!1;"valueConstructed"in i&&(l=i.valueConstructed);var u=x.create(x.Class.UNIVERSAL,x.Type.SEQUENCE,!0,[x.create(x.Class.UNIVERSAL,x.Type.OID,!1,x.oidToDer(i.type).getBytes()),x.create(x.Class.UNIVERSAL,x.Type.SET,!0,[x.create(x.Class.UNIVERSAL,s,l,a)])]);e.value.push(u)}return e}var P8=new Date("1950-01-01T00:00:00Z"),M8=new Date("2050-01-01T00:00:00Z");function jC(t){return t>=P8&&t<M8?x.create(x.Class.UNIVERSAL,x.Type.UTCTIME,!1,x.dateToUtcTime(t)):x.create(x.Class.UNIVERSAL,x.Type.GENERALIZEDTIME,!1,x.dateToGeneralizedTime(t))}Ce.getTBSCertificate=function(t){var e=jC(t.validity.notBefore),r=jC(t.validity.notAfter),n=x.create(x.Class.UNIVERSAL,x.Type.SEQUENCE,!0,[x.create(x.Class.CONTEXT_SPECIFIC,0,!0,[x.create(x.Class.UNIVERSAL,x.Type.INTEGER,!1,x.integerToDer(t.version).getBytes())]),x.create(x.Class.UNIVERSAL,x.Type.INTEGER,!1,qe.util.hexToBytes(t.serialNumber)),x.create(x.Class.UNIVERSAL,x.Type.SEQUENCE,!0,[x.create(x.Class.UNIVERSAL,x.Type.OID,!1,x.oidToDer(t.siginfo.algorithmOid).getBytes()),Tg(t.siginfo.algorithmOid,t.siginfo.parameters)]),cl(t.issuer),x.create(x.Class.UNIVERSAL,x.Type.SEQUENCE,!0,[e,r]),cl(t.subject),Ce.publicKeyToAsn1(t.publicKey)]);return t.issuer.uniqueId&&n.value.push(x.create(x.Class.CONTEXT_SPECIFIC,1,!0,[x.create(x.Class.UNIVERSAL,x.Type.BITSTRING,!1,String.fromCharCode(0)+t.issuer.uniqueId)])),t.subject.uniqueId&&n.value.push(x.create(x.Class.CONTEXT_SPECIFIC,2,!0,[x.create(x.Class.UNIVERSAL,x.Type.BITSTRING,!1,String.fromCharCode(0)+t.subject.uniqueId)])),t.extensions.length>0&&n.value.push(Ce.certificateExtensionsToAsn1(t.extensions)),n};Ce.getCertificationRequestInfo=function(t){var e=x.create(x.Class.UNIVERSAL,x.Type.SEQUENCE,!0,[x.create(x.Class.UNIVERSAL,x.Type.INTEGER,!1,x.integerToDer(t.version).getBytes()),cl(t.subject),Ce.publicKeyToAsn1(t.publicKey),L8(t)]);return e};Ce.distinguishedNameToAsn1=function(t){return cl(t)};Ce.certificateToAsn1=function(t){var e=t.tbsCertificate||Ce.getTBSCertificate(t);return x.create(x.Class.UNIVERSAL,x.Type.SEQUENCE,!0,[e,x.create(x.Class.UNIVERSAL,x.Type.SEQUENCE,!0,[x.create(x.Class.UNIVERSAL,x.Type.OID,!1,x.oidToDer(t.signatureOid).getBytes()),Tg(t.signatureOid,t.signatureParameters)]),x.create(x.Class.UNIVERSAL,x.Type.BITSTRING,!1,String.fromCharCode(0)+t.signature)])};Ce.certificateExtensionsToAsn1=function(t){var e=x.create(x.Class.CONTEXT_SPECIFIC,3,!0,[]),r=x.create(x.Class.UNIVERSAL,x.Type.SEQUENCE,!0,[]);e.value.push(r);for(var n=0;n<t.length;++n)r.value.push(Ce.certificateExtensionToAsn1(t[n]));return e};Ce.certificateExtensionToAsn1=function(t){var e=x.create(x.Class.UNIVERSAL,x.Type.SEQUENCE,!0,[]);e.value.push(x.create(x.Class.UNIVERSAL,x.Type.OID,!1,x.oidToDer(t.id).getBytes())),t.critical&&e.value.push(x.create(x.Class.UNIVERSAL,x.Type.BOOLEAN,!1,String.fromCharCode(255)));var r=t.value;return typeof t.value!="string"&&(r=x.toDer(r).getBytes()),e.value.push(x.create(x.Class.UNIVERSAL,x.Type.OCTETSTRING,!1,r)),e};Ce.certificationRequestToAsn1=function(t){var e=t.certificationRequestInfo||Ce.getCertificationRequestInfo(t);return x.create(x.Class.UNIVERSAL,x.Type.SEQUENCE,!0,[e,x.create(x.Class.UNIVERSAL,x.Type.SEQUENCE,!0,[x.create(x.Class.UNIVERSAL,x.Type.OID,!1,x.oidToDer(t.signatureOid).getBytes()),Tg(t.signatureOid,t.signatureParameters)]),x.create(x.Class.UNIVERSAL,x.Type.BITSTRING,!1,String.fromCharCode(0)+t.signature)])};Ce.createCaStore=function(t){var e={certs:{}};e.getIssuer=function(s){var l=r(s.issuer);return l},e.addCertificate=function(s){if(typeof s=="string"&&(s=qe.pki.certificateFromPem(s)),n(s.subject),!e.hasCertificate(s))if(s.subject.hash in e.certs){var l=e.certs[s.subject.hash];qe.util.isArray(l)||(l=[l]),l.push(s),e.certs[s.subject.hash]=l}else e.certs[s.subject.hash]=s},e.hasCertificate=function(s){typeof s=="string"&&(s=qe.pki.certificateFromPem(s));var l=r(s.subject);if(!l)return!1;qe.util.isArray(l)||(l=[l]);for(var u=x.toDer(Ce.certificateToAsn1(s)).getBytes(),f=0;f<l.length;++f){var d=x.toDer(Ce.certificateToAsn1(l[f])).getBytes();if(u===d)return!0}return!1},e.listAllCertificates=function(){var s=[];for(var l in e.certs)if(e.certs.hasOwnProperty(l)){var u=e.certs[l];if(!qe.util.isArray(u))s.push(u);else for(var f=0;f<u.length;++f)s.push(u[f])}return s},e.removeCertificate=function(s){var l;if(typeof s=="string"&&(s=qe.pki.certificateFromPem(s)),n(s.subject),!e.hasCertificate(s))return null;var u=r(s.subject);if(!qe.util.isArray(u))return l=e.certs[s.subject.hash],delete e.certs[s.subject.hash],l;for(var f=x.toDer(Ce.certificateToAsn1(s)).getBytes(),d=0;d<u.length;++d){var h=x.toDer(Ce.certificateToAsn1(u[d])).getBytes();f===h&&(l=u[d],u.splice(d,1))}return u.length===0&&delete e.certs[s.subject.hash],l};function r(s){return n(s),e.certs[s.hash]||null}function n(s){if(!s.hash){var l=qe.md.sha1.create();s.attributes=Ce.RDNAttributesAsArray(cl(s),l),s.hash=l.digest().toHex()}}if(t)for(var i=0;i<t.length;++i){var a=t[i];e.addCertificate(a)}return e};Ce.certificateError={bad_certificate:"forge.pki.BadCertificate",unsupported_certificate:"forge.pki.UnsupportedCertificate",certificate_revoked:"forge.pki.CertificateRevoked",certificate_expired:"forge.pki.CertificateExpired",certificate_unknown:"forge.pki.CertificateUnknown",unknown_ca:"forge.pki.UnknownCertificateAuthority"};Ce.verifyCertificateChain=function(t,e,r){typeof r=="function"&&(r={verify:r}),r=r||{},e=e.slice(0);var n=e.slice(0),i=r.validityCheckDate;typeof i=="undefined"&&(i=new Date);var a=!0,s=null,l=0;do{var u=e.shift(),f=null,d=!1;if(i&&(i<u.validity.notBefore||i>u.validity.notAfter)&&(s={message:"Certificate is not valid yet or has expired.",error:Ce.certificateError.certificate_expired,notBefore:u.validity.notBefore,notAfter:u.validity.notAfter,now:i}),s===null){if(f=e[0]||t.getIssuer(u),f===null&&u.isIssuer(u)&&(d=!0,f=u),f){var h=f;qe.util.isArray(h)||(h=[h]);for(var g=!1;!g&&h.length>0;){f=h.shift();try{g=f.verify(u)}catch(D){}}g||(s={message:"Certificate signature is invalid.",error:Ce.certificateError.bad_certificate})}s===null&&(!f||d)&&!t.hasCertificate(u)&&(s={message:"Certificate is not trusted.",error:Ce.certificateError.unknown_ca})}if(s===null&&f&&!u.isIssuer(f)&&(s={message:"Certificate issuer is invalid.",error:Ce.certificateError.bad_certificate}),s===null)for(var y={keyUsage:!0,basicConstraints:!0},m=0;s===null&&m<u.extensions.length;++m){var _=u.extensions[m];_.critical&&!(_.name in y)&&(s={message:"Certificate has an unsupported critical extension.",error:Ce.certificateError.unsupported_certificate})}if(s===null&&(!a||e.length===0&&(!f||d))){var E=u.getExtension("basicConstraints"),w=u.getExtension("keyUsage");if(w!==null&&(!w.keyCertSign||E===null)&&(s={message:"Certificate keyUsage or basicConstraints conflict or indicate that the certificate is not a CA. If the certificate is the only one in the chain or isn't the first then the certificate must be a valid CA.",error:Ce.certificateError.bad_certificate}),s===null&&E!==null&&!E.cA&&(s={message:"Certificate basicConstraints indicates the certificate is not a CA.",error:Ce.certificateError.bad_certificate}),s===null&&w!==null&&"pathLenConstraint"in E){var b=l-1;b>E.pathLenConstraint&&(s={message:"Certificate basicConstraints pathLenConstraint violated.",error:Ce.certificateError.bad_certificate})}}var k=s===null?!0:s.error,N=r.verify?r.verify(k,l,n):k;if(N===!0)s=null;else throw k===!0&&(s={message:"The application rejected the certificate.",error:Ce.certificateError.bad_certificate}),(N||N===0)&&(typeof N=="object"&&!qe.util.isArray(N)?(N.message&&(s.message=N.message),N.error&&(s.error=N.error)):typeof N=="string"&&(s.error=N)),s;a=!1,++l}while(e.length>0);return!0}});var kg=de((qj,YC)=>{var ir=mt();xi();nl();as();xg();bg();ri();Ru();ol();Ft();Id();var F=ir.asn1,St=ir.pki,Nu=YC.exports=ir.pkcs12=ir.pkcs12||{},HC={name:"ContentInfo",tagClass:F.Class.UNIVERSAL,type:F.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.contentType",tagClass:F.Class.UNIVERSAL,type:F.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:F.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"content"}]},U8={name:"PFX",tagClass:F.Class.UNIVERSAL,type:F.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.version",tagClass:F.Class.UNIVERSAL,type:F.Type.INTEGER,constructed:!1,capture:"version"},HC,{name:"PFX.macData",tagClass:F.Class.UNIVERSAL,type:F.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"mac",value:[{name:"PFX.macData.mac",tagClass:F.Class.UNIVERSAL,type:F.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm",tagClass:F.Class.UNIVERSAL,type:F.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm.algorithm",tagClass:F.Class.UNIVERSAL,type:F.Type.OID,constructed:!1,capture:"macAlgorithm"},{name:"PFX.macData.mac.digestAlgorithm.parameters",tagClass:F.Class.UNIVERSAL,captureAsn1:"macAlgorithmParameters"}]},{name:"PFX.macData.mac.digest",tagClass:F.Class.UNIVERSAL,type:F.Type.OCTETSTRING,constructed:!1,capture:"macDigest"}]},{name:"PFX.macData.macSalt",tagClass:F.Class.UNIVERSAL,type:F.Type.OCTETSTRING,constructed:!1,capture:"macSalt"},{name:"PFX.macData.iterations",tagClass:F.Class.UNIVERSAL,type:F.Type.INTEGER,constructed:!1,optional:!0,capture:"macIterations"}]}]},F8={name:"SafeBag",tagClass:F.Class.UNIVERSAL,type:F.Type.SEQUENCE,constructed:!0,value:[{name:"SafeBag.bagId",tagClass:F.Class.UNIVERSAL,type:F.Type.OID,constructed:!1,capture:"bagId"},{name:"SafeBag.bagValue",tagClass:F.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"bagValue"},{name:"SafeBag.bagAttributes",tagClass:F.Class.UNIVERSAL,type:F.Type.SET,constructed:!0,optional:!0,capture:"bagAttributes"}]},q8={name:"Attribute",tagClass:F.Class.UNIVERSAL,type:F.Type.SEQUENCE,constructed:!0,value:[{name:"Attribute.attrId",tagClass:F.Class.UNIVERSAL,type:F.Type.OID,constructed:!1,capture:"oid"},{name:"Attribute.attrValues",tagClass:F.Class.UNIVERSAL,type:F.Type.SET,constructed:!0,capture:"values"}]},G8={name:"CertBag",tagClass:F.Class.UNIVERSAL,type:F.Type.SEQUENCE,constructed:!0,value:[{name:"CertBag.certId",tagClass:F.Class.UNIVERSAL,type:F.Type.OID,constructed:!1,capture:"certId"},{name:"CertBag.certValue",tagClass:F.Class.CONTEXT_SPECIFIC,constructed:!0,value:[{name:"CertBag.certValue[0]",tagClass:F.Class.UNIVERSAL,type:F.Class.OCTETSTRING,constructed:!1,capture:"cert"}]}]};function Bu(t,e,r,n){for(var i=[],a=0;a<t.length;a++)for(var s=0;s<t[a].safeBags.length;s++){var l=t[a].safeBags[s];if(!(n!==void 0&&l.type!==n)){if(e===null){i.push(l);continue}l.attributes[e]!==void 0&&l.attributes[e].indexOf(r)>=0&&i.push(l)}}return i}Nu.pkcs12FromAsn1=function(t,e,r){typeof e=="string"?(r=e,e=!0):e===void 0&&(e=!0);var n={},i=[];if(!F.validate(t,U8,n,i)){var a=new Error("Cannot read PKCS#12 PFX. ASN.1 object is not an PKCS#12 PFX.");throw a.errors=a,a}var s={version:n.version.charCodeAt(0),safeContents:[],getBags:function(E){var w={},b;return"localKeyId"in E?b=E.localKeyId:"localKeyIdHex"in E&&(b=ir.util.hexToBytes(E.localKeyIdHex)),b===void 0&&!("friendlyName"in E)&&"bagType"in E&&(w[E.bagType]=Bu(s.safeContents,null,null,E.bagType)),b!==void 0&&(w.localKeyId=Bu(s.safeContents,"localKeyId",b,E.bagType)),"friendlyName"in E&&(w.friendlyName=Bu(s.safeContents,"friendlyName",E.friendlyName,E.bagType)),w},getBagsByFriendlyName:function(E,w){return Bu(s.safeContents,"friendlyName",E,w)},getBagsByLocalKeyId:function(E,w){return Bu(s.safeContents,"localKeyId",E,w)}};if(n.version.charCodeAt(0)!==3){var a=new Error("PKCS#12 PFX of version other than 3 not supported.");throw a.version=n.version.charCodeAt(0),a}if(F.derToOid(n.contentType)!==St.oids.data){var a=new Error("Only PKCS#12 PFX in password integrity mode supported.");throw a.oid=F.derToOid(n.contentType),a}var l=n.content.value[0];if(l.tagClass!==F.Class.UNIVERSAL||l.type!==F.Type.OCTETSTRING)throw new Error("PKCS#12 authSafe content data is not an OCTET STRING.");if(l=Ag(l),n.mac){var u=null,f=0,d=F.derToOid(n.macAlgorithm);switch(d){case St.oids.sha1:u=ir.md.sha1.create(),f=20;break;case St.oids.sha256:u=ir.md.sha256.create(),f=32;break;case St.oids.sha384:u=ir.md.sha384.create(),f=48;break;case St.oids.sha512:u=ir.md.sha512.create(),f=64;break;case St.oids.md5:u=ir.md.md5.create(),f=16;break}if(u===null)throw new Error("PKCS#12 uses unsupported MAC algorithm: "+d);var h=new ir.util.ByteBuffer(n.macSalt),g="macIterations"in n?parseInt(ir.util.bytesToHex(n.macIterations),16):1,y=Nu.generateKey(r,h,3,g,f,u),m=ir.hmac.create();m.start(u,y),m.update(l.value);var _=m.getMac();if(_.getBytes()!==n.macDigest)throw new Error("PKCS#12 MAC could not be verified. Invalid password?")}return V8(s,l.value,e,r),s};function Ag(t){if(t.composed||t.constructed){for(var e=ir.util.createBuffer(),r=0;r<t.value.length;++r)e.putBytes(t.value[r].value);t.composed=t.constructed=!1,t.value=e.getBytes()}return t}function V8(t,e,r,n){if(e=F.fromDer(e,r),e.tagClass!==F.Class.UNIVERSAL||e.type!==F.Type.SEQUENCE||e.constructed!==!0)throw new Error("PKCS#12 AuthenticatedSafe expected to be a SEQUENCE OF ContentInfo");for(var i=0;i<e.value.length;i++){var a=e.value[i],s={},l=[];if(!F.validate(a,HC,s,l)){var u=new Error("Cannot read ContentInfo.");throw u.errors=l,u}var f={encrypted:!1},d=null,h=s.content.value[0];switch(F.derToOid(s.contentType)){case St.oids.data:if(h.tagClass!==F.Class.UNIVERSAL||h.type!==F.Type.OCTETSTRING)throw new Error("PKCS#12 SafeContents Data is not an OCTET STRING.");d=Ag(h).value;break;case St.oids.encryptedData:d=j8(h,n),f.encrypted=!0;break;default:var u=new Error("Unsupported PKCS#12 contentType.");throw u.contentType=F.derToOid(s.contentType),u}f.safeBags=K8(d,r,n),t.safeContents.push(f)}}function j8(t,e){var r={},n=[];if(!F.validate(t,ir.pkcs7.asn1.encryptedDataValidator,r,n)){var i=new Error("Cannot read EncryptedContentInfo.");throw i.errors=n,i}var a=F.derToOid(r.contentType);if(a!==St.oids.data){var i=new Error("PKCS#12 EncryptedContentInfo ContentType is not Data.");throw i.oid=a,i}a=F.derToOid(r.encAlgorithm);var s=St.pbe.getCipher(a,r.encParameter,e),l=Ag(r.encryptedContentAsn1),u=ir.util.createBuffer(l.value);if(s.update(u),!s.finish())throw new Error("Failed to decrypt PKCS#12 SafeContents.");return s.output.getBytes()}function K8(t,e,r){if(!e&&t.length===0)return[];if(t=F.fromDer(t,e),t.tagClass!==F.Class.UNIVERSAL||t.type!==F.Type.SEQUENCE||t.constructed!==!0)throw new Error("PKCS#12 SafeContents expected to be a SEQUENCE OF SafeBag.");for(var n=[],i=0;i<t.value.length;i++){var a=t.value[i],s={},l=[];if(!F.validate(a,F8,s,l)){var u=new Error("Cannot read SafeBag.");throw u.errors=l,u}var f={type:F.derToOid(s.bagId),attributes:H8(s.bagAttributes)};n.push(f);var d,h,g=s.bagValue.value[0];switch(f.type){case St.oids.pkcs8ShroudedKeyBag:if(g=St.decryptPrivateKeyInfo(g,r),g===null)throw new Error("Unable to decrypt PKCS#8 ShroudedKeyBag, wrong password?");case St.oids.keyBag:try{f.key=St.privateKeyFromAsn1(g)}catch(m){f.key=null,f.asn1=g}continue;case St.oids.certBag:d=G8,h=function(){if(F.derToOid(s.certId)!==St.oids.x509Certificate){var m=new Error("Unsupported certificate type, only X.509 supported.");throw m.oid=F.derToOid(s.certId),m}var _=F.fromDer(s.cert,e);try{f.cert=St.certificateFromAsn1(_,!0)}catch(E){f.cert=null,f.asn1=_}};break;default:var u=new Error("Unsupported PKCS#12 SafeBag type.");throw u.oid=f.type,u}if(d!==void 0&&!F.validate(g,d,s,l)){var u=new Error("Cannot read PKCS#12 "+d.name);throw u.errors=l,u}h()}return n}function H8(t){var e={};if(t!==void 0)for(var r=0;r<t.length;++r){var n={},i=[];if(!F.validate(t[r],q8,n,i)){var a=new Error("Cannot read PKCS#12 BagAttribute.");throw a.errors=i,a}var s=F.derToOid(n.oid);if(St.oids[s]!==void 0){e[St.oids[s]]=[];for(var l=0;l<n.values.length;++l)e[St.oids[s]].push(n.values[l].value)}}return e}Nu.toPkcs12Asn1=function(t,e,r,n){n=n||{},n.saltSize=n.saltSize||8,n.count=n.count||2048,n.algorithm=n.algorithm||n.encAlgorithm||"aes128","useMac"in n||(n.useMac=!0),"localKeyId"in n||(n.localKeyId=null),"generateLocalKeyId"in n||(n.generateLocalKeyId=!0);var i=n.localKeyId,a;if(i!==null)i=ir.util.hexToBytes(i);else if(n.generateLocalKeyId)if(e){var s=ir.util.isArray(e)?e[0]:e;typeof s=="string"&&(s=St.certificateFromPem(s));var l=ir.md.sha1.create();l.update(F.toDer(St.certificateToAsn1(s)).getBytes()),i=l.digest().getBytes()}else i=ir.random.getBytes(20);var u=[];i!==null&&u.push(F.create(F.Class.UNIVERSAL,F.Type.SEQUENCE,!0,[F.create(F.Class.UNIVERSAL,F.Type.OID,!1,F.oidToDer(St.oids.localKeyId).getBytes()),F.create(F.Class.UNIVERSAL,F.Type.SET,!0,[F.create(F.Class.UNIVERSAL,F.Type.OCTETSTRING,!1,i)])])),"friendlyName"in n&&u.push(F.create(F.Class.UNIVERSAL,F.Type.SEQUENCE,!0,[F.create(F.Class.UNIVERSAL,F.Type.OID,!1,F.oidToDer(St.oids.friendlyName).getBytes()),F.create(F.Class.UNIVERSAL,F.Type.SET,!0,[F.create(F.Class.UNIVERSAL,F.Type.BMPSTRING,!1,n.friendlyName)])])),u.length>0&&(a=F.create(F.Class.UNIVERSAL,F.Type.SET,!0,u));var f=[],d=[];e!==null&&(ir.util.isArray(e)?d=e:d=[e]);for(var h=[],g=0;g<d.length;++g){e=d[g],typeof e=="string"&&(e=St.certificateFromPem(e));var y=g===0?a:void 0,m=St.certificateToAsn1(e),_=F.create(F.Class.UNIVERSAL,F.Type.SEQUENCE,!0,[F.create(F.Class.UNIVERSAL,F.Type.OID,!1,F.oidToDer(St.oids.certBag).getBytes()),F.create(F.Class.CONTEXT_SPECIFIC,0,!0,[F.create(F.Class.UNIVERSAL,F.Type.SEQUENCE,!0,[F.create(F.Class.UNIVERSAL,F.Type.OID,!1,F.oidToDer(St.oids.x509Certificate).getBytes()),F.create(F.Class.CONTEXT_SPECIFIC,0,!0,[F.create(F.Class.UNIVERSAL,F.Type.OCTETSTRING,!1,F.toDer(m).getBytes())])])]),y]);h.push(_)}if(h.length>0){var E=F.create(F.Class.UNIVERSAL,F.Type.SEQUENCE,!0,h),w=F.create(F.Class.UNIVERSAL,F.Type.SEQUENCE,!0,[F.create(F.Class.UNIVERSAL,F.Type.OID,!1,F.oidToDer(St.oids.data).getBytes()),F.create(F.Class.CONTEXT_SPECIFIC,0,!0,[F.create(F.Class.UNIVERSAL,F.Type.OCTETSTRING,!1,F.toDer(E).getBytes())])]);f.push(w)}var b=null;if(t!==null){var k=St.wrapRsaPrivateKey(St.privateKeyToAsn1(t));r===null?b=F.create(F.Class.UNIVERSAL,F.Type.SEQUENCE,!0,[F.create(F.Class.UNIVERSAL,F.Type.OID,!1,F.oidToDer(St.oids.keyBag).getBytes()),F.create(F.Class.CONTEXT_SPECIFIC,0,!0,[k]),a]):b=F.create(F.Class.UNIVERSAL,F.Type.SEQUENCE,!0,[F.create(F.Class.UNIVERSAL,F.Type.OID,!1,F.oidToDer(St.oids.pkcs8ShroudedKeyBag).getBytes()),F.create(F.Class.CONTEXT_SPECIFIC,0,!0,[St.encryptPrivateKeyInfo(k,r,n)]),a]);var N=F.create(F.Class.UNIVERSAL,F.Type.SEQUENCE,!0,[b]),D=F.create(F.Class.UNIVERSAL,F.Type.SEQUENCE,!0,[F.create(F.Class.UNIVERSAL,F.Type.OID,!1,F.oidToDer(St.oids.data).getBytes()),F.create(F.Class.CONTEXT_SPECIFIC,0,!0,[F.create(F.Class.UNIVERSAL,F.Type.OCTETSTRING,!1,F.toDer(N).getBytes())])]);f.push(D)}var B=F.create(F.Class.UNIVERSAL,F.Type.SEQUENCE,!0,f),ee;if(n.useMac){var l=ir.md.sha1.create(),q=new ir.util.ByteBuffer(ir.random.getBytes(n.saltSize)),U=n.count,t=Nu.generateKey(r,q,3,U,20),oe=ir.hmac.create();oe.start(l,t),oe.update(F.toDer(B).getBytes());var ae=oe.getMac();ee=F.create(F.Class.UNIVERSAL,F.Type.SEQUENCE,!0,[F.create(F.Class.UNIVERSAL,F.Type.SEQUENCE,!0,[F.create(F.Class.UNIVERSAL,F.Type.SEQUENCE,!0,[F.create(F.Class.UNIVERSAL,F.Type.OID,!1,F.oidToDer(St.oids.sha1).getBytes()),F.create(F.Class.UNIVERSAL,F.Type.NULL,!1,"")]),F.create(F.Class.UNIVERSAL,F.Type.OCTETSTRING,!1,ae.getBytes())]),F.create(F.Class.UNIVERSAL,F.Type.OCTETSTRING,!1,q.getBytes()),F.create(F.Class.UNIVERSAL,F.Type.INTEGER,!1,F.integerToDer(U).getBytes())])}return F.create(F.Class.UNIVERSAL,F.Type.SEQUENCE,!0,[F.create(F.Class.UNIVERSAL,F.Type.INTEGER,!1,F.integerToDer(3).getBytes()),F.create(F.Class.UNIVERSAL,F.Type.SEQUENCE,!0,[F.create(F.Class.UNIVERSAL,F.Type.OID,!1,F.oidToDer(St.oids.data).getBytes()),F.create(F.Class.CONTEXT_SPECIFIC,0,!0,[F.create(F.Class.UNIVERSAL,F.Type.OCTETSTRING,!1,F.toDer(B).getBytes())])]),ee])};Nu.generateKey=ir.pbe.generatePkcs12Key});var Rg=de((Gj,WC)=>{var us=mt();xi();as();bg();Gs();_d();kg();Td();Ru();Ft();Id();var Ig=us.asn1,fl=WC.exports=us.pki=us.pki||{};fl.pemToDer=function(t){var e=us.pem.decode(t)[0];if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert PEM to DER; PEM is encrypted.");return us.util.createBuffer(e.body)};fl.privateKeyFromPem=function(t){var e=us.pem.decode(t)[0];if(e.type!=="PRIVATE KEY"&&e.type!=="RSA PRIVATE KEY"){var r=new Error('Could not convert private key from PEM; PEM header type is not "PRIVATE KEY" or "RSA PRIVATE KEY".');throw r.headerType=e.type,r}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert private key from PEM; PEM is encrypted.");var n=Ig.fromDer(e.body);return fl.privateKeyFromAsn1(n)};fl.privateKeyToPem=function(t,e){var r={type:"RSA PRIVATE KEY",body:Ig.toDer(fl.privateKeyToAsn1(t)).getBytes()};return us.pem.encode(r,{maxline:e})};fl.privateKeyInfoToPem=function(t,e){var r={type:"PRIVATE KEY",body:Ig.toDer(t).getBytes()};return us.pem.encode(r,{maxline:e})}});var Pg=de((Vj,tb)=>{var ve=mt();xi();nl();gd();Gs();Rg();ri();ol();Ft();var Rd=function(t,e,r,n){var i=ve.util.createBuffer(),a=t.length>>1,s=a+(t.length&1),l=t.substr(0,s),u=t.substr(a,s),f=ve.util.createBuffer(),d=ve.hmac.create();r=e+r;var h=Math.ceil(n/16),g=Math.ceil(n/20);d.start("MD5",l);var y=ve.util.createBuffer();f.putBytes(r);for(var m=0;m<h;++m)d.start(null,null),d.update(f.getBytes()),f.putBuffer(d.digest()),d.start(null,null),d.update(f.bytes()+r),y.putBuffer(d.digest());d.start("SHA1",u);var _=ve.util.createBuffer();f.clear(),f.putBytes(r);for(var m=0;m<g;++m)d.start(null,null),d.update(f.getBytes()),f.putBuffer(d.digest()),d.start(null,null),d.update(f.bytes()+r),_.putBuffer(d.digest());return i.putBytes(ve.util.xorBytes(y.getBytes(),_.getBytes(),n)),i},Y8=function(t,e,r){var n=ve.hmac.create();n.start("SHA1",t);var i=ve.util.createBuffer();return i.putInt32(e[0]),i.putInt32(e[1]),i.putByte(r.type),i.putByte(r.version.major),i.putByte(r.version.minor),i.putInt16(r.length),i.putBytes(r.fragment.bytes()),n.update(i.getBytes()),n.digest().getBytes()},W8=function(t,e,r){var n=!1;try{var i=t.deflate(e.fragment.getBytes());e.fragment=ve.util.createBuffer(i),e.length=i.length,n=!0}catch(a){}return n},z8=function(t,e,r){var n=!1;try{var i=t.inflate(e.fragment.getBytes());e.fragment=ve.util.createBuffer(i),e.length=i.length,n=!0}catch(a){}return n},Vn=function(t,e){var r=0;switch(e){case 1:r=t.getByte();break;case 2:r=t.getInt16();break;case 3:r=t.getInt24();break;case 4:r=t.getInt32();break}return ve.util.createBuffer(t.getBytes(r))},si=function(t,e,r){t.putInt(r.length(),e<<3),t.putBuffer(r)},T={};T.Versions={TLS_1_0:{major:3,minor:1},TLS_1_1:{major:3,minor:2},TLS_1_2:{major:3,minor:3}};T.SupportedVersions=[T.Versions.TLS_1_1,T.Versions.TLS_1_0];T.Version=T.SupportedVersions[0];T.MaxFragment=16384-1024;T.ConnectionEnd={server:0,client:1};T.PRFAlgorithm={tls_prf_sha256:0};T.BulkCipherAlgorithm={none:null,rc4:0,des3:1,aes:2};T.CipherType={stream:0,block:1,aead:2};T.MACAlgorithm={none:null,hmac_md5:0,hmac_sha1:1,hmac_sha256:2,hmac_sha384:3,hmac_sha512:4};T.CompressionMethod={none:0,deflate:1};T.ContentType={change_cipher_spec:20,alert:21,handshake:22,application_data:23,heartbeat:24};T.HandshakeType={hello_request:0,client_hello:1,server_hello:2,certificate:11,server_key_exchange:12,certificate_request:13,server_hello_done:14,certificate_verify:15,client_key_exchange:16,finished:20};T.Alert={};T.Alert.Level={warning:1,fatal:2};T.Alert.Description={close_notify:0,unexpected_message:10,bad_record_mac:20,decryption_failed:21,record_overflow:22,decompression_failure:30,handshake_failure:40,bad_certificate:42,unsupported_certificate:43,certificate_revoked:44,certificate_expired:45,certificate_unknown:46,illegal_parameter:47,unknown_ca:48,access_denied:49,decode_error:50,decrypt_error:51,export_restriction:60,protocol_version:70,insufficient_security:71,internal_error:80,user_canceled:90,no_renegotiation:100};T.HeartbeatMessageType={heartbeat_request:1,heartbeat_response:2};T.CipherSuites={};T.getCipherSuite=function(t){var e=null;for(var r in T.CipherSuites){var n=T.CipherSuites[r];if(n.id[0]===t.charCodeAt(0)&&n.id[1]===t.charCodeAt(1)){e=n;break}}return e};T.handleUnexpected=function(t,e){var r=!t.open&&t.entity===T.ConnectionEnd.client;r||t.error(t,{message:"Unexpected message. Received TLS record out of order.",send:!0,alert:{level:T.Alert.Level.fatal,description:T.Alert.Description.unexpected_message}})};T.handleHelloRequest=function(t,e,r){!t.handshaking&&t.handshakes>0&&(T.queue(t,T.createAlert(t,{level:T.Alert.Level.warning,description:T.Alert.Description.no_renegotiation})),T.flush(t)),t.process()};T.parseHelloMessage=function(t,e,r){var n=null,i=t.entity===T.ConnectionEnd.client;if(r<38)t.error(t,{message:i?"Invalid ServerHello message. Message too short.":"Invalid ClientHello message. Message too short.",send:!0,alert:{level:T.Alert.Level.fatal,description:T.Alert.Description.illegal_parameter}});else{var a=e.fragment,s=a.length();if(n={version:{major:a.getByte(),minor:a.getByte()},random:ve.util.createBuffer(a.getBytes(32)),session_id:Vn(a,1),extensions:[]},i?(n.cipher_suite=a.getBytes(2),n.compression_method=a.getByte()):(n.cipher_suites=Vn(a,2),n.compression_methods=Vn(a,1)),s=r-(s-a.length()),s>0){for(var l=Vn(a,2);l.length()>0;)n.extensions.push({type:[l.getByte(),l.getByte()],data:Vn(l,2)});if(!i)for(var u=0;u<n.extensions.length;++u){var f=n.extensions[u];if(f.type[0]===0&&f.type[1]===0)for(var d=Vn(f.data,2);d.length()>0;){var h=d.getByte();if(h!==0)break;t.session.extensions.server_name.serverNameList.push(Vn(d,2).getBytes())}}}if(t.session.version&&(n.version.major!==t.session.version.major||n.version.minor!==t.session.version.minor))return t.error(t,{message:"TLS version change is disallowed during renegotiation.",send:!0,alert:{level:T.Alert.Level.fatal,description:T.Alert.Description.protocol_version}});if(i)t.session.cipherSuite=T.getCipherSuite(n.cipher_suite);else for(var g=ve.util.createBuffer(n.cipher_suites.bytes());g.length()>0&&(t.session.cipherSuite=T.getCipherSuite(g.getBytes(2)),t.session.cipherSuite===null););if(t.session.cipherSuite===null)return t.error(t,{message:"No cipher suites in common.",send:!0,alert:{level:T.Alert.Level.fatal,description:T.Alert.Description.handshake_failure},cipherSuite:ve.util.bytesToHex(n.cipher_suite)});i?t.session.compressionMethod=n.compression_method:t.session.compressionMethod=T.CompressionMethod.none}return n};T.createSecurityParameters=function(t,e){var r=t.entity===T.ConnectionEnd.client,n=e.random.bytes(),i=r?t.session.sp.client_random:n,a=r?n:T.createRandom().getBytes();t.session.sp={entity:t.entity,prf_algorithm:T.PRFAlgorithm.tls_prf_sha256,bulk_cipher_algorithm:null,cipher_type:null,enc_key_length:null,block_length:null,fixed_iv_length:null,record_iv_length:null,mac_algorithm:null,mac_length:null,mac_key_length:null,compression_algorithm:t.session.compressionMethod,pre_master_secret:null,master_secret:null,client_random:i,server_random:a}};T.handleServerHello=function(t,e,r){var n=T.parseHelloMessage(t,e,r);if(!t.fail){if(n.version.minor<=t.version.minor)t.version.minor=n.version.minor;else return t.error(t,{message:"Incompatible TLS version.",send:!0,alert:{level:T.Alert.Level.fatal,description:T.Alert.Description.protocol_version}});t.session.version=t.version;var i=n.session_id.bytes();i.length>0&&i===t.session.id?(t.expect=QC,t.session.resuming=!0,t.session.sp.server_random=n.random.bytes()):(t.expect=X8,t.session.resuming=!1,T.createSecurityParameters(t,n)),t.session.id=i,t.process()}};T.handleClientHello=function(t,e,r){var n=T.parseHelloMessage(t,e,r);if(!t.fail){var i=n.session_id.bytes(),a=null;if(t.sessionCache&&(a=t.sessionCache.getSession(i),a===null?i="":(a.version.major!==n.version.major||a.version.minor>n.version.minor)&&(a=null,i="")),i.length===0&&(i=ve.random.getBytes(32)),t.session.id=i,t.session.clientHelloVersion=n.version,t.session.sp={},a)t.version=t.session.version=a.version,t.session.sp=a.sp;else{for(var s,l=1;l<T.SupportedVersions.length&&(s=T.SupportedVersions[l],!(s.minor<=n.version.minor));++l);t.version={major:s.major,minor:s.minor},t.session.version=t.version}a!==null?(t.expect=Bg,t.session.resuming=!0,t.session.sp.client_random=n.random.bytes()):(t.expect=t.verifyClient!==!1?nM:Ng,t.session.resuming=!1,T.createSecurityParameters(t,n)),t.open=!0,T.queue(t,T.createRecord(t,{type:T.ContentType.handshake,data:T.createServerHello(t)})),t.session.resuming?(T.queue(t,T.createRecord(t,{type:T.ContentType.change_cipher_spec,data:T.createChangeCipherSpec()})),t.state.pending=T.createConnectionState(t),t.state.current.write=t.state.pending.write,T.queue(t,T.createRecord(t,{type:T.ContentType.handshake,data:T.createFinished(t)}))):(T.queue(t,T.createRecord(t,{type:T.ContentType.handshake,data:T.createCertificate(t)})),t.fail||(T.queue(t,T.createRecord(t,{type:T.ContentType.handshake,data:T.createServerKeyExchange(t)})),t.verifyClient!==!1&&T.queue(t,T.createRecord(t,{type:T.ContentType.handshake,data:T.createCertificateRequest(t)})),T.queue(t,T.createRecord(t,{type:T.ContentType.handshake,data:T.createServerHelloDone(t)})))),T.flush(t),t.process()}};T.handleCertificate=function(t,e,r){if(r<3)return t.error(t,{message:"Invalid Certificate message. Message too short.",send:!0,alert:{level:T.Alert.Level.fatal,description:T.Alert.Description.illegal_parameter}});var n=e.fragment,i={certificate_list:Vn(n,3)},a,s,l=[];try{for(;i.certificate_list.length()>0;)a=Vn(i.certificate_list,3),s=ve.asn1.fromDer(a),a=ve.pki.certificateFromAsn1(s,!0),l.push(a)}catch(f){return t.error(t,{message:"Could not parse certificate list.",cause:f,send:!0,alert:{level:T.Alert.Level.fatal,description:T.Alert.Description.bad_certificate}})}var u=t.entity===T.ConnectionEnd.client;(u||t.verifyClient===!0)&&l.length===0?t.error(t,{message:u?"No server certificate provided.":"No client certificate provided.",send:!0,alert:{level:T.Alert.Level.fatal,description:T.Alert.Description.illegal_parameter}}):l.length===0?t.expect=u?zC:Ng:(u?t.session.serverCertificate=l[0]:t.session.clientCertificate=l[0],T.verifyCertificateChain(t,l)&&(t.expect=u?zC:Ng)),t.process()};T.handleServerKeyExchange=function(t,e,r){if(r>0)return t.error(t,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:T.Alert.Level.fatal,description:T.Alert.Description.unsupported_certificate}});t.expect=J8,t.process()};T.handleClientKeyExchange=function(t,e,r){if(r<48)return t.error(t,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:T.Alert.Level.fatal,description:T.Alert.Description.unsupported_certificate}});var n=e.fragment,i={enc_pre_master_secret:Vn(n,2).getBytes()},a=null;if(t.getPrivateKey)try{a=t.getPrivateKey(t,t.session.serverCertificate),a=ve.pki.privateKeyFromPem(a)}catch(u){t.error(t,{message:"Could not get private key.",cause:u,send:!0,alert:{level:T.Alert.Level.fatal,description:T.Alert.Description.internal_error}})}if(a===null)return t.error(t,{message:"No private key set.",send:!0,alert:{level:T.Alert.Level.fatal,description:T.Alert.Description.internal_error}});try{var s=t.session.sp;s.pre_master_secret=a.decrypt(i.enc_pre_master_secret);var l=t.session.clientHelloVersion;if(l.major!==s.pre_master_secret.charCodeAt(0)||l.minor!==s.pre_master_secret.charCodeAt(1))throw new Error("TLS version rollback attack detected.")}catch(u){s.pre_master_secret=ve.random.getBytes(48)}t.expect=Bg,t.session.clientCertificate!==null&&(t.expect=iM),t.process()};T.handleCertificateRequest=function(t,e,r){if(r<3)return t.error(t,{message:"Invalid CertificateRequest. Message too short.",send:!0,alert:{level:T.Alert.Level.fatal,description:T.Alert.Description.illegal_parameter}});var n=e.fragment,i={certificate_types:Vn(n,1),certificate_authorities:Vn(n,2)};t.session.certificateRequest=i,t.expect=Z8,t.process()};T.handleCertificateVerify=function(t,e,r){if(r<2)return t.error(t,{message:"Invalid CertificateVerify. Message too short.",send:!0,alert:{level:T.Alert.Level.fatal,description:T.Alert.Description.illegal_parameter}});var n=e.fragment;n.read-=4;var i=n.bytes();n.read+=4;var a={signature:Vn(n,2).getBytes()},s=ve.util.createBuffer();s.putBuffer(t.session.md5.digest()),s.putBuffer(t.session.sha1.digest()),s=s.getBytes();try{var l=t.session.clientCertificate;if(!l.publicKey.verify(s,a.signature,"NONE"))throw new Error("CertificateVerify signature does not match.");t.session.md5.update(i),t.session.sha1.update(i)}catch(u){return t.error(t,{message:"Bad signature in CertificateVerify.",send:!0,alert:{level:T.Alert.Level.fatal,description:T.Alert.Description.handshake_failure}})}t.expect=Bg,t.process()};T.handleServerHelloDone=function(t,e,r){if(r>0)return t.error(t,{message:"Invalid ServerHelloDone message. Invalid length.",send:!0,alert:{level:T.Alert.Level.fatal,description:T.Alert.Description.record_overflow}});if(t.serverCertificate===null){var n={message:"No server certificate provided. Not enough security.",send:!0,alert:{level:T.Alert.Level.fatal,description:T.Alert.Description.insufficient_security}},i=0,a=t.verify(t,n.alert.description,i,[]);if(a!==!0)return(a||a===0)&&(typeof a=="object"&&!ve.util.isArray(a)?(a.message&&(n.message=a.message),a.alert&&(n.alert.description=a.alert)):typeof a=="number"&&(n.alert.description=a)),t.error(t,n)}t.session.certificateRequest!==null&&(e=T.createRecord(t,{type:T.ContentType.handshake,data:T.createCertificate(t)}),T.queue(t,e)),e=T.createRecord(t,{type:T.ContentType.handshake,data:T.createClientKeyExchange(t)}),T.queue(t,e),t.expect=tM;var s=function(l,u){l.session.certificateRequest!==null&&l.session.clientCertificate!==null&&T.queue(l,T.createRecord(l,{type:T.ContentType.handshake,data:T.createCertificateVerify(l,u)})),T.queue(l,T.createRecord(l,{type:T.ContentType.change_cipher_spec,data:T.createChangeCipherSpec()})),l.state.pending=T.createConnectionState(l),l.state.current.write=l.state.pending.write,T.queue(l,T.createRecord(l,{type:T.ContentType.handshake,data:T.createFinished(l)})),l.expect=QC,T.flush(l),l.process()};if(t.session.certificateRequest===null||t.session.clientCertificate===null)return s(t,null);T.getClientSignature(t,s)};T.handleChangeCipherSpec=function(t,e){if(e.fragment.getByte()!==1)return t.error(t,{message:"Invalid ChangeCipherSpec message received.",send:!0,alert:{level:T.Alert.Level.fatal,description:T.Alert.Description.illegal_parameter}});var r=t.entity===T.ConnectionEnd.client;(t.session.resuming&&r||!t.session.resuming&&!r)&&(t.state.pending=T.createConnectionState(t)),t.state.current.read=t.state.pending.read,(!t.session.resuming&&r||t.session.resuming&&!r)&&(t.state.pending=null),t.expect=r?$8:aM,t.process()};T.handleFinished=function(t,e,r){var n=e.fragment;n.read-=4;var i=n.bytes();n.read+=4;var a=e.fragment.getBytes();n=ve.util.createBuffer(),n.putBuffer(t.session.md5.digest()),n.putBuffer(t.session.sha1.digest());var s=t.entity===T.ConnectionEnd.client,l=s?"server finished":"client finished",u=t.session.sp,f=12,d=Rd;if(n=d(u.master_secret,l,n.getBytes(),f),n.getBytes()!==a)return t.error(t,{message:"Invalid verify_data in Finished message.",send:!0,alert:{level:T.Alert.Level.fatal,description:T.Alert.Description.decrypt_error}});t.session.md5.update(i),t.session.sha1.update(i),(t.session.resuming&&s||!t.session.resuming&&!s)&&(T.queue(t,T.createRecord(t,{type:T.ContentType.change_cipher_spec,data:T.createChangeCipherSpec()})),t.state.current.write=t.state.pending.write,t.state.pending=null,T.queue(t,T.createRecord(t,{type:T.ContentType.handshake,data:T.createFinished(t)}))),t.expect=s?eM:sM,t.handshaking=!1,++t.handshakes,t.peerCertificate=s?t.session.serverCertificate:t.session.clientCertificate,T.flush(t),t.isConnected=!0,t.connected(t),t.process()};T.handleAlert=function(t,e){var r=e.fragment,n={level:r.getByte(),description:r.getByte()},i;switch(n.description){case T.Alert.Description.close_notify:i="Connection closed.";break;case T.Alert.Description.unexpected_message:i="Unexpected message.";break;case T.Alert.Description.bad_record_mac:i="Bad record MAC.";break;case T.Alert.Description.decryption_failed:i="Decryption failed.";break;case T.Alert.Description.record_overflow:i="Record overflow.";break;case T.Alert.Description.decompression_failure:i="Decompression failed.";break;case T.Alert.Description.handshake_failure:i="Handshake failure.";break;case T.Alert.Description.bad_certificate:i="Bad certificate.";break;case T.Alert.Description.unsupported_certificate:i="Unsupported certificate.";break;case T.Alert.Description.certificate_revoked:i="Certificate revoked.";break;case T.Alert.Description.certificate_expired:i="Certificate expired.";break;case T.Alert.Description.certificate_unknown:i="Certificate unknown.";break;case T.Alert.Description.illegal_parameter:i="Illegal parameter.";break;case T.Alert.Description.unknown_ca:i="Unknown certificate authority.";break;case T.Alert.Description.access_denied:i="Access denied.";break;case T.Alert.Description.decode_error:i="Decode error.";break;case T.Alert.Description.decrypt_error:i="Decrypt error.";break;case T.Alert.Description.export_restriction:i="Export restriction.";break;case T.Alert.Description.protocol_version:i="Unsupported protocol version.";break;case T.Alert.Description.insufficient_security:i="Insufficient security.";break;case T.Alert.Description.internal_error:i="Internal error.";break;case T.Alert.Description.user_canceled:i="User canceled.";break;case T.Alert.Description.no_renegotiation:i="Renegotiation not supported.";break;default:i="Unknown error.";break}if(n.description===T.Alert.Description.close_notify)return t.close();t.error(t,{message:i,send:!1,origin:t.entity===T.ConnectionEnd.client?"server":"client",alert:n}),t.process()};T.handleHandshake=function(t,e){var r=e.fragment,n=r.getByte(),i=r.getInt24();if(i>r.length())return t.fragmented=e,e.fragment=ve.util.createBuffer(),r.read-=4,t.process();t.fragmented=null,r.read-=4;var a=r.bytes(i+4);r.read+=4,n in Bd[t.entity][t.expect]?(t.entity===T.ConnectionEnd.server&&!t.open&&!t.fail&&(t.handshaking=!0,t.session={version:null,extensions:{server_name:{serverNameList:[]}},cipherSuite:null,compressionMethod:null,serverCertificate:null,clientCertificate:null,md5:ve.md.md5.create(),sha1:ve.md.sha1.create()}),n!==T.HandshakeType.hello_request&&n!==T.HandshakeType.certificate_verify&&n!==T.HandshakeType.finished&&(t.session.md5.update(a),t.session.sha1.update(a)),Bd[t.entity][t.expect][n](t,e,i)):T.handleUnexpected(t,e)};T.handleApplicationData=function(t,e){t.data.putBuffer(e.fragment),t.dataReady(t),t.process()};T.handleHeartbeat=function(t,e){var r=e.fragment,n=r.getByte(),i=r.getInt16(),a=r.getBytes(i);if(n===T.HeartbeatMessageType.heartbeat_request){if(t.handshaking||i>a.length)return t.process();T.queue(t,T.createRecord(t,{type:T.ContentType.heartbeat,data:T.createHeartbeat(T.HeartbeatMessageType.heartbeat_response,a)})),T.flush(t)}else if(n===T.HeartbeatMessageType.heartbeat_response){if(a!==t.expectedHeartbeatPayload)return t.process();t.heartbeatReceived&&t.heartbeatReceived(t,ve.util.createBuffer(a))}t.process()};var Q8=0,X8=1,zC=2,J8=3,Z8=4,QC=5,$8=6,eM=7,tM=8,rM=0,nM=1,Ng=2,iM=3,Bg=4,aM=5,sM=6,S=T.handleUnexpected,XC=T.handleChangeCipherSpec,Zr=T.handleAlert,vn=T.handleHandshake,JC=T.handleApplicationData,$r=T.handleHeartbeat,Dg=[];Dg[T.ConnectionEnd.client]=[[S,Zr,vn,S,$r],[S,Zr,vn,S,$r],[S,Zr,vn,S,$r],[S,Zr,vn,S,$r],[S,Zr,vn,S,$r],[XC,Zr,S,S,$r],[S,Zr,vn,S,$r],[S,Zr,vn,JC,$r],[S,Zr,vn,S,$r]];Dg[T.ConnectionEnd.server]=[[S,Zr,vn,S,$r],[S,Zr,vn,S,$r],[S,Zr,vn,S,$r],[S,Zr,vn,S,$r],[XC,Zr,S,S,$r],[S,Zr,vn,S,$r],[S,Zr,vn,JC,$r],[S,Zr,vn,S,$r]];var cs=T.handleHelloRequest,oM=T.handleServerHello,ZC=T.handleCertificate,$C=T.handleServerKeyExchange,Og=T.handleCertificateRequest,Nd=T.handleServerHelloDone,eb=T.handleFinished,Bd=[];Bd[T.ConnectionEnd.client]=[[S,S,oM,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S],[cs,S,S,S,S,S,S,S,S,S,S,ZC,$C,Og,Nd,S,S,S,S,S,S],[cs,S,S,S,S,S,S,S,S,S,S,S,$C,Og,Nd,S,S,S,S,S,S],[cs,S,S,S,S,S,S,S,S,S,S,S,S,Og,Nd,S,S,S,S,S,S],[cs,S,S,S,S,S,S,S,S,S,S,S,S,S,Nd,S,S,S,S,S,S],[cs,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S],[cs,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,eb],[cs,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S],[cs,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S]];var lM=T.handleClientHello,uM=T.handleClientKeyExchange,cM=T.handleCertificateVerify;Bd[T.ConnectionEnd.server]=[[S,lM,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S],[S,S,S,S,S,S,S,S,S,S,S,ZC,S,S,S,S,S,S,S,S,S],[S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,uM,S,S,S,S],[S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,cM,S,S,S,S,S],[S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S],[S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,eb],[S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S],[S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S]];T.generateKeys=function(t,e){var r=Rd,n=e.client_random+e.server_random;t.session.resuming||(e.master_secret=r(e.pre_master_secret,"master secret",n,48).bytes(),e.pre_master_secret=null),n=e.server_random+e.client_random;var i=2*e.mac_key_length+2*e.enc_key_length,a=t.version.major===T.Versions.TLS_1_0.major&&t.version.minor===T.Versions.TLS_1_0.minor;a&&(i+=2*e.fixed_iv_length);var s=r(e.master_secret,"key expansion",n,i),l={client_write_MAC_key:s.getBytes(e.mac_key_length),server_write_MAC_key:s.getBytes(e.mac_key_length),client_write_key:s.getBytes(e.enc_key_length),server_write_key:s.getBytes(e.enc_key_length)};return a&&(l.client_write_IV=s.getBytes(e.fixed_iv_length),l.server_write_IV=s.getBytes(e.fixed_iv_length)),l};T.createConnectionState=function(t){var e=t.entity===T.ConnectionEnd.client,r=function(){var a={sequenceNumber:[0,0],macKey:null,macLength:0,macFunction:null,cipherState:null,cipherFunction:function(s){return!0},compressionState:null,compressFunction:function(s){return!0},updateSequenceNumber:function(){a.sequenceNumber[1]===4294967295?(a.sequenceNumber[1]=0,++a.sequenceNumber[0]):++a.sequenceNumber[1]}};return a},n={read:r(),write:r()};if(n.read.update=function(a,s){return n.read.cipherFunction(s,n.read)?n.read.compressFunction(a,s,n.read)||a.error(a,{message:"Could not decompress record.",send:!0,alert:{level:T.Alert.Level.fatal,description:T.Alert.Description.decompression_failure}}):a.error(a,{message:"Could not decrypt record or bad MAC.",send:!0,alert:{level:T.Alert.Level.fatal,description:T.Alert.Description.bad_record_mac}}),!a.fail},n.write.update=function(a,s){return n.write.compressFunction(a,s,n.write)?n.write.cipherFunction(s,n.write)||a.error(a,{message:"Could not encrypt record.",send:!1,alert:{level:T.Alert.Level.fatal,description:T.Alert.Description.internal_error}}):a.error(a,{message:"Could not compress record.",send:!1,alert:{level:T.Alert.Level.fatal,description:T.Alert.Description.internal_error}}),!a.fail},t.session){var i=t.session.sp;switch(t.session.cipherSuite.initSecurityParameters(i),i.keys=T.generateKeys(t,i),n.read.macKey=e?i.keys.server_write_MAC_key:i.keys.client_write_MAC_key,n.write.macKey=e?i.keys.client_write_MAC_key:i.keys.server_write_MAC_key,t.session.cipherSuite.initConnectionState(n,t,i),i.compression_algorithm){case T.CompressionMethod.none:break;case T.CompressionMethod.deflate:n.read.compressFunction=z8,n.write.compressFunction=W8;break;default:throw new Error("Unsupported compression algorithm.")}}return n};T.createRandom=function(){var t=new Date,e=+t+t.getTimezoneOffset()*6e4,r=ve.util.createBuffer();return r.putInt32(e),r.putBytes(ve.random.getBytes(28)),r};T.createRecord=function(t,e){if(!e.data)return null;var r={type:e.type,version:{major:t.version.major,minor:t.version.minor},length:e.data.length(),fragment:e.data};return r};T.createAlert=function(t,e){var r=ve.util.createBuffer();return r.putByte(e.level),r.putByte(e.description),T.createRecord(t,{type:T.ContentType.alert,data:r})};T.createClientHello=function(t){t.session.clientHelloVersion={major:t.version.major,minor:t.version.minor};for(var e=ve.util.createBuffer(),r=0;r<t.cipherSuites.length;++r){var n=t.cipherSuites[r];e.putByte(n.id[0]),e.putByte(n.id[1])}var i=e.length(),a=ve.util.createBuffer();a.putByte(T.CompressionMethod.none);var s=a.length(),l=ve.util.createBuffer();if(t.virtualHost){var u=ve.util.createBuffer();u.putByte(0),u.putByte(0);var f=ve.util.createBuffer();f.putByte(0),si(f,2,ve.util.createBuffer(t.virtualHost));var d=ve.util.createBuffer();si(d,2,f),si(u,2,d),l.putBuffer(u)}var h=l.length();h>0&&(h+=2);var g=t.session.id,y=g.length+1+2+4+28+2+i+1+s+h,m=ve.util.createBuffer();return m.putByte(T.HandshakeType.client_hello),m.putInt24(y),m.putByte(t.version.major),m.putByte(t.version.minor),m.putBytes(t.session.sp.client_random),si(m,1,ve.util.createBuffer(g)),si(m,2,e),si(m,1,a),h>0&&si(m,2,l),m};T.createServerHello=function(t){var e=t.session.id,r=e.length+1+2+4+28+2+1,n=ve.util.createBuffer();return n.putByte(T.HandshakeType.server_hello),n.putInt24(r),n.putByte(t.version.major),n.putByte(t.version.minor),n.putBytes(t.session.sp.server_random),si(n,1,ve.util.createBuffer(e)),n.putByte(t.session.cipherSuite.id[0]),n.putByte(t.session.cipherSuite.id[1]),n.putByte(t.session.compressionMethod),n};T.createCertificate=function(t){var e=t.entity===T.ConnectionEnd.client,r=null;if(t.getCertificate){var n;e?n=t.session.certificateRequest:n=t.session.extensions.server_name.serverNameList,r=t.getCertificate(t,n)}var i=ve.util.createBuffer();if(r!==null)try{ve.util.isArray(r)||(r=[r]);for(var a=null,s=0;s<r.length;++s){var l=ve.pem.decode(r[s])[0];if(l.type!=="CERTIFICATE"&&l.type!=="X509 CERTIFICATE"&&l.type!=="TRUSTED CERTIFICATE"){var u=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw u.headerType=l.type,u}if(l.procType&&l.procType.type==="ENCRYPTED")throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var f=ve.util.createBuffer(l.body);a===null&&(a=ve.asn1.fromDer(f.bytes(),!1));var d=ve.util.createBuffer();si(d,3,f),i.putBuffer(d)}r=ve.pki.certificateFromAsn1(a),e?t.session.clientCertificate=r:t.session.serverCertificate=r}catch(y){return t.error(t,{message:"Could not send certificate list.",cause:y,send:!0,alert:{level:T.Alert.Level.fatal,description:T.Alert.Description.bad_certificate}})}var h=3+i.length(),g=ve.util.createBuffer();return g.putByte(T.HandshakeType.certificate),g.putInt24(h),si(g,3,i),g};T.createClientKeyExchange=function(t){var e=ve.util.createBuffer();e.putByte(t.session.clientHelloVersion.major),e.putByte(t.session.clientHelloVersion.minor),e.putBytes(ve.random.getBytes(46));var r=t.session.sp;r.pre_master_secret=e.getBytes();var n=t.session.serverCertificate.publicKey;e=n.encrypt(r.pre_master_secret);var i=e.length+2,a=ve.util.createBuffer();return a.putByte(T.HandshakeType.client_key_exchange),a.putInt24(i),a.putInt16(e.length),a.putBytes(e),a};T.createServerKeyExchange=function(t){var e=0,r=ve.util.createBuffer();return e>0&&(r.putByte(T.HandshakeType.server_key_exchange),r.putInt24(e)),r};T.getClientSignature=function(t,e){var r=ve.util.createBuffer();r.putBuffer(t.session.md5.digest()),r.putBuffer(t.session.sha1.digest()),r=r.getBytes(),t.getSignature=t.getSignature||function(n,i,a){var s=null;if(n.getPrivateKey)try{s=n.getPrivateKey(n,n.session.clientCertificate),s=ve.pki.privateKeyFromPem(s)}catch(l){n.error(n,{message:"Could not get private key.",cause:l,send:!0,alert:{level:T.Alert.Level.fatal,description:T.Alert.Description.internal_error}})}s===null?n.error(n,{message:"No private key set.",send:!0,alert:{level:T.Alert.Level.fatal,description:T.Alert.Description.internal_error}}):i=s.sign(i,null),a(n,i)},t.getSignature(t,r,e)};T.createCertificateVerify=function(t,e){var r=e.length+2,n=ve.util.createBuffer();return n.putByte(T.HandshakeType.certificate_verify),n.putInt24(r),n.putInt16(e.length),n.putBytes(e),n};T.createCertificateRequest=function(t){var e=ve.util.createBuffer();e.putByte(1);var r=ve.util.createBuffer();for(var n in t.caStore.certs){var i=t.caStore.certs[n],a=ve.pki.distinguishedNameToAsn1(i.subject),s=ve.asn1.toDer(a);r.putInt16(s.length()),r.putBuffer(s)}var l=1+e.length()+2+r.length(),u=ve.util.createBuffer();return u.putByte(T.HandshakeType.certificate_request),u.putInt24(l),si(u,1,e),si(u,2,r),u};T.createServerHelloDone=function(t){var e=ve.util.createBuffer();return e.putByte(T.HandshakeType.server_hello_done),e.putInt24(0),e};T.createChangeCipherSpec=function(){var t=ve.util.createBuffer();return t.putByte(1),t};T.createFinished=function(t){var e=ve.util.createBuffer();e.putBuffer(t.session.md5.digest()),e.putBuffer(t.session.sha1.digest());var r=t.entity===T.ConnectionEnd.client,n=t.session.sp,i=12,a=Rd,s=r?"client finished":"server finished";e=a(n.master_secret,s,e.getBytes(),i);var l=ve.util.createBuffer();return l.putByte(T.HandshakeType.finished),l.putInt24(e.length()),l.putBuffer(e),l};T.createHeartbeat=function(t,e,r){typeof r=="undefined"&&(r=e.length);var n=ve.util.createBuffer();n.putByte(t),n.putInt16(r),n.putBytes(e);var i=n.length(),a=Math.max(16,i-r-3);return n.putBytes(ve.random.getBytes(a)),n};T.queue=function(t,e){if(!!e&&!(e.fragment.length()===0&&(e.type===T.ContentType.handshake||e.type===T.ContentType.alert||e.type===T.ContentType.change_cipher_spec))){if(e.type===T.ContentType.handshake){var r=e.fragment.bytes();t.session.md5.update(r),t.session.sha1.update(r),r=null}var n;if(e.fragment.length()<=T.MaxFragment)n=[e];else{n=[];for(var i=e.fragment.bytes();i.length>T.MaxFragment;)n.push(T.createRecord(t,{type:e.type,data:ve.util.createBuffer(i.slice(0,T.MaxFragment))})),i=i.slice(T.MaxFragment);i.length>0&&n.push(T.createRecord(t,{type:e.type,data:ve.util.createBuffer(i)}))}for(var a=0;a<n.length&&!t.fail;++a){var s=n[a],l=t.state.current.write;l.update(t,s)&&t.records.push(s)}}};T.flush=function(t){for(var e=0;e<t.records.length;++e){var r=t.records[e];t.tlsData.putByte(r.type),t.tlsData.putByte(r.version.major),t.tlsData.putByte(r.version.minor),t.tlsData.putInt16(r.fragment.length()),t.tlsData.putBuffer(t.records[e].fragment)}return t.records=[],t.tlsDataReady(t)};var Lg=function(t){switch(t){case!0:return!0;case ve.pki.certificateError.bad_certificate:return T.Alert.Description.bad_certificate;case ve.pki.certificateError.unsupported_certificate:return T.Alert.Description.unsupported_certificate;case ve.pki.certificateError.certificate_revoked:return T.Alert.Description.certificate_revoked;case ve.pki.certificateError.certificate_expired:return T.Alert.Description.certificate_expired;case ve.pki.certificateError.certificate_unknown:return T.Alert.Description.certificate_unknown;case ve.pki.certificateError.unknown_ca:return T.Alert.Description.unknown_ca;default:return T.Alert.Description.bad_certificate}},fM=function(t){switch(t){case!0:return!0;case T.Alert.Description.bad_certificate:return ve.pki.certificateError.bad_certificate;case T.Alert.Description.unsupported_certificate:return ve.pki.certificateError.unsupported_certificate;case T.Alert.Description.certificate_revoked:return ve.pki.certificateError.certificate_revoked;case T.Alert.Description.certificate_expired:return ve.pki.certificateError.certificate_expired;case T.Alert.Description.certificate_unknown:return ve.pki.certificateError.certificate_unknown;case T.Alert.Description.unknown_ca:return ve.pki.certificateError.unknown_ca;default:return ve.pki.certificateError.bad_certificate}};T.verifyCertificateChain=function(t,e){try{var r={};for(var n in t.verifyOptions)r[n]=t.verifyOptions[n];r.verify=function(a,s,l){var u=Lg(a),f=t.verify(t,a,s,l);if(f!==!0){if(typeof f=="object"&&!ve.util.isArray(f)){var d=new Error("The application rejected the certificate.");throw d.send=!0,d.alert={level:T.Alert.Level.fatal,description:T.Alert.Description.bad_certificate},f.message&&(d.message=f.message),f.alert&&(d.alert.description=f.alert),d}f!==a&&(f=fM(f))}return f},ve.pki.verifyCertificateChain(t.caStore,e,r)}catch(a){var i=a;(typeof i!="object"||ve.util.isArray(i))&&(i={send:!0,alert:{level:T.Alert.Level.fatal,description:Lg(a)}}),"send"in i||(i.send=!0),"alert"in i||(i.alert={level:T.Alert.Level.fatal,description:Lg(i.error)}),t.error(t,i)}return!t.fail};T.createSessionCache=function(t,e){var r=null;if(t&&t.getSession&&t.setSession&&t.order)r=t;else{r={},r.cache=t||{},r.capacity=Math.max(e||100,1),r.order=[];for(var n in t)r.order.length<=e?r.order.push(n):delete t[n];r.getSession=function(i){var a=null,s=null;if(i?s=ve.util.bytesToHex(i):r.order.length>0&&(s=r.order[0]),s!==null&&s in r.cache){a=r.cache[s],delete r.cache[s];for(var l in r.order)if(r.order[l]===s){r.order.splice(l,1);break}}return a},r.setSession=function(i,a){if(r.order.length===r.capacity){var s=r.order.shift();delete r.cache[s]}var s=ve.util.bytesToHex(i);r.order.push(s),r.cache[s]=a}}return r};T.createConnection=function(t){var e=null;t.caStore?ve.util.isArray(t.caStore)?e=ve.pki.createCaStore(t.caStore):e=t.caStore:e=ve.pki.createCaStore();var r=t.cipherSuites||null;if(r===null){r=[];for(var n in T.CipherSuites)r.push(T.CipherSuites[n])}var i=t.server?T.ConnectionEnd.server:T.ConnectionEnd.client,a=t.sessionCache?T.createSessionCache(t.sessionCache):null,s={version:{major:T.Version.major,minor:T.Version.minor},entity:i,sessionId:t.sessionId,caStore:e,sessionCache:a,cipherSuites:r,connected:t.connected,virtualHost:t.virtualHost||null,verifyClient:t.verifyClient||!1,verify:t.verify||function(d,h,g,y){return h},verifyOptions:t.verifyOptions||{},getCertificate:t.getCertificate||null,getPrivateKey:t.getPrivateKey||null,getSignature:t.getSignature||null,input:ve.util.createBuffer(),tlsData:ve.util.createBuffer(),data:ve.util.createBuffer(),tlsDataReady:t.tlsDataReady,dataReady:t.dataReady,heartbeatReceived:t.heartbeatReceived,closed:t.closed,error:function(d,h){h.origin=h.origin||(d.entity===T.ConnectionEnd.client?"client":"server"),h.send&&(T.queue(d,T.createAlert(d,h.alert)),T.flush(d));var g=h.fatal!==!1;g&&(d.fail=!0),t.error(d,h),g&&d.close(!1)},deflate:t.deflate||null,inflate:t.inflate||null};s.reset=function(d){s.version={major:T.Version.major,minor:T.Version.minor},s.record=null,s.session=null,s.peerCertificate=null,s.state={pending:null,current:null},s.expect=s.entity===T.ConnectionEnd.client?Q8:rM,s.fragmented=null,s.records=[],s.open=!1,s.handshakes=0,s.handshaking=!1,s.isConnected=!1,s.fail=!(d||typeof d=="undefined"),s.input.clear(),s.tlsData.clear(),s.data.clear(),s.state.current=T.createConnectionState(s)},s.reset();var l=function(d,h){var g=h.type-T.ContentType.change_cipher_spec,y=Dg[d.entity][d.expect];g in y?y[g](d,h):T.handleUnexpected(d,h)},u=function(d){var h=0,g=d.input,y=g.length();if(y<5)h=5-y;else{d.record={type:g.getByte(),version:{major:g.getByte(),minor:g.getByte()},length:g.getInt16(),fragment:ve.util.createBuffer(),ready:!1};var m=d.record.version.major===d.version.major;m&&d.session&&d.session.version&&(m=d.record.version.minor===d.version.minor),m||d.error(d,{message:"Incompatible TLS version.",send:!0,alert:{level:T.Alert.Level.fatal,description:T.Alert.Description.protocol_version}})}return h},f=function(d){var h=0,g=d.input,y=g.length();if(y<d.record.length)h=d.record.length-y;else{d.record.fragment.putBytes(g.getBytes(d.record.length)),g.compact();var m=d.state.current.read;m.update(d,d.record)&&(d.fragmented!==null&&(d.fragmented.type===d.record.type?(d.fragmented.fragment.putBuffer(d.record.fragment),d.record=d.fragmented):d.error(d,{message:"Invalid fragmented record.",send:!0,alert:{level:T.Alert.Level.fatal,description:T.Alert.Description.unexpected_message}})),d.record.ready=!0)}return h};return s.handshake=function(d){if(s.entity!==T.ConnectionEnd.client)s.error(s,{message:"Cannot initiate handshake as a server.",fatal:!1});else if(s.handshaking)s.error(s,{message:"Handshake already in progress.",fatal:!1});else{s.fail&&!s.open&&s.handshakes===0&&(s.fail=!1),s.handshaking=!0,d=d||"";var h=null;d.length>0&&(s.sessionCache&&(h=s.sessionCache.getSession(d)),h===null&&(d="")),d.length===0&&s.sessionCache&&(h=s.sessionCache.getSession(),h!==null&&(d=h.id)),s.session={id:d,version:null,cipherSuite:null,compressionMethod:null,serverCertificate:null,certificateRequest:null,clientCertificate:null,sp:{},md5:ve.md.md5.create(),sha1:ve.md.sha1.create()},h&&(s.version=h.version,s.session.sp=h.sp),s.session.sp.client_random=T.createRandom().getBytes(),s.open=!0,T.queue(s,T.createRecord(s,{type:T.ContentType.handshake,data:T.createClientHello(s)})),T.flush(s)}},s.process=function(d){var h=0;return d&&s.input.putBytes(d),s.fail||(s.record!==null&&s.record.ready&&s.record.fragment.isEmpty()&&(s.record=null),s.record===null&&(h=u(s)),!s.fail&&s.record!==null&&!s.record.ready&&(h=f(s)),!s.fail&&s.record!==null&&s.record.ready&&l(s,s.record)),h},s.prepare=function(d){return T.queue(s,T.createRecord(s,{type:T.ContentType.application_data,data:ve.util.createBuffer(d)})),T.flush(s)},s.prepareHeartbeatRequest=function(d,h){return d instanceof ve.util.ByteBuffer&&(d=d.bytes()),typeof h=="undefined"&&(h=d.length),s.expectedHeartbeatPayload=d,T.queue(s,T.createRecord(s,{type:T.ContentType.heartbeat,data:T.createHeartbeat(T.HeartbeatMessageType.heartbeat_request,d,h)})),T.flush(s)},s.close=function(d){if(!s.fail&&s.sessionCache&&s.session){var h={id:s.session.id,version:s.session.version,sp:s.session.sp};h.sp.keys=null,s.sessionCache.setSession(h.id,h)}s.open&&(s.open=!1,s.input.clear(),(s.isConnected||s.handshaking)&&(s.isConnected=s.handshaking=!1,T.queue(s,T.createAlert(s,{level:T.Alert.Level.warning,description:T.Alert.Description.close_notify})),T.flush(s)),s.closed(s)),s.reset(d)},s};tb.exports=ve.tls=ve.tls||{};for(Dd in T)typeof T[Dd]!="function"&&(ve.tls[Dd]=T[Dd]);var Dd;ve.tls.prf_tls1=Rd;ve.tls.hmac_sha1=Y8;ve.tls.createSessionCache=T.createSessionCache;ve.tls.createConnection=T.createConnection});var ib=de((jj,nb)=>{var fs=mt();is();Pg();var oi=nb.exports=fs.tls;oi.CipherSuites.TLS_RSA_WITH_AES_128_CBC_SHA={id:[0,47],name:"TLS_RSA_WITH_AES_128_CBC_SHA",initSecurityParameters:function(t){t.bulk_cipher_algorithm=oi.BulkCipherAlgorithm.aes,t.cipher_type=oi.CipherType.block,t.enc_key_length=16,t.block_length=16,t.fixed_iv_length=16,t.record_iv_length=16,t.mac_algorithm=oi.MACAlgorithm.hmac_sha1,t.mac_length=20,t.mac_key_length=20},initConnectionState:rb};oi.CipherSuites.TLS_RSA_WITH_AES_256_CBC_SHA={id:[0,53],name:"TLS_RSA_WITH_AES_256_CBC_SHA",initSecurityParameters:function(t){t.bulk_cipher_algorithm=oi.BulkCipherAlgorithm.aes,t.cipher_type=oi.CipherType.block,t.enc_key_length=32,t.block_length=16,t.fixed_iv_length=16,t.record_iv_length=16,t.mac_algorithm=oi.MACAlgorithm.hmac_sha1,t.mac_length=20,t.mac_key_length=20},initConnectionState:rb};function rb(t,e,r){var n=e.entity===fs.tls.ConnectionEnd.client;t.read.cipherState={init:!1,cipher:fs.cipher.createDecipher("AES-CBC",n?r.keys.server_write_key:r.keys.client_write_key),iv:n?r.keys.server_write_IV:r.keys.client_write_IV},t.write.cipherState={init:!1,cipher:fs.cipher.createCipher("AES-CBC",n?r.keys.client_write_key:r.keys.server_write_key),iv:n?r.keys.client_write_IV:r.keys.server_write_IV},t.read.cipherFunction=gM,t.write.cipherFunction=dM,t.read.macLength=t.write.macLength=r.mac_length,t.read.macFunction=t.write.macFunction=oi.hmac_sha1}function dM(t,e){var r=!1,n=e.macFunction(e.macKey,e.sequenceNumber,t);t.fragment.putBytes(n),e.updateSequenceNumber();var i;t.version.minor===oi.Versions.TLS_1_0.minor?i=e.cipherState.init?null:e.cipherState.iv:i=fs.random.getBytesSync(16),e.cipherState.init=!0;var a=e.cipherState.cipher;return a.start({iv:i}),t.version.minor>=oi.Versions.TLS_1_1.minor&&a.output.putBytes(i),a.update(t.fragment),a.finish(hM)&&(t.fragment=a.output,t.length=t.fragment.length(),r=!0),r}function hM(t,e,r){if(!r){var n=t-e.length()%t;e.fillWithByte(n-1,n)}return!0}function pM(t,e,r){var n=!0;if(r){for(var i=e.length(),a=e.last(),s=i-1-a;s<i-1;++s)n=n&&e.at(s)==a;n&&e.truncate(a+1)}return n}function gM(t,e){var r=!1,n;t.version.minor===oi.Versions.TLS_1_0.minor?n=e.cipherState.init?null:e.cipherState.iv:n=t.fragment.getBytes(16),e.cipherState.init=!0;var i=e.cipherState.cipher;i.start({iv:n}),i.update(t.fragment),r=i.finish(pM);var a=e.macLength,s=fs.random.getBytesSync(a),l=i.output.length();l>=a?(t.fragment=i.output.getBytes(l-a),s=i.output.getBytes(a)):t.fragment=i.output.getBytes(),t.fragment=fs.util.createBuffer(t.fragment),t.length=t.fragment.length();var u=e.macFunction(e.macKey,e.sequenceNumber,t);return e.updateSequenceNumber(),r=mM(e.macKey,s,u)&&r,r}function mM(t,e,r){var n=fs.hmac.create();return n.start("SHA1",t),n.update(e),e=n.digest().getBytes(),n.start(null,null),n.update(r),r=n.digest().getBytes(),e===r}});var Fg=de((Kj,lb)=>{var lr=mt();zi();Ft();var Du=lb.exports=lr.sha512=lr.sha512||{};lr.md.sha512=lr.md.algorithms.sha512=Du;var ab=lr.sha384=lr.sha512.sha384=lr.sha512.sha384||{};ab.create=function(){return Du.create("SHA-384")};lr.md.sha384=lr.md.algorithms.sha384=ab;lr.sha512.sha256=lr.sha512.sha256||{create:function(){return Du.create("SHA-512/256")}};lr.md["sha512/256"]=lr.md.algorithms["sha512/256"]=lr.sha512.sha256;lr.sha512.sha224=lr.sha512.sha224||{create:function(){return Du.create("SHA-512/224")}};lr.md["sha512/224"]=lr.md.algorithms["sha512/224"]=lr.sha512.sha224;Du.create=function(t){if(sb||yM(),typeof t=="undefined"&&(t="SHA-512"),!(t in Ws))throw new Error("Invalid SHA-512 algorithm: "+t);for(var e=Ws[t],r=null,n=lr.util.createBuffer(),i=new Array(80),a=0;a<80;++a)i[a]=new Array(2);var s=64;switch(t){case"SHA-384":s=48;break;case"SHA-512/256":s=32;break;case"SHA-512/224":s=28;break}var l={algorithm:t.replace("-","").toLowerCase(),blockLength:128,digestLength:s,messageLength:0,fullMessageLength:null,messageLengthSize:16};return l.start=function(){l.messageLength=0,l.fullMessageLength=l.messageLength128=[];for(var u=l.messageLengthSize/4,f=0;f<u;++f)l.fullMessageLength.push(0);n=lr.util.createBuffer(),r=new Array(e.length);for(var f=0;f<e.length;++f)r[f]=e[f].slice(0);return l},l.start(),l.update=function(u,f){f==="utf8"&&(u=lr.util.encodeUtf8(u));var d=u.length;l.messageLength+=d,d=[d/4294967296>>>0,d>>>0];for(var h=l.fullMessageLength.length-1;h>=0;--h)l.fullMessageLength[h]+=d[1],d[1]=d[0]+(l.fullMessageLength[h]/4294967296>>>0),l.fullMessageLength[h]=l.fullMessageLength[h]>>>0,d[0]=d[1]/4294967296>>>0;return n.putBytes(u),ob(r,i,n),(n.read>2048||n.length()===0)&&n.compact(),l},l.digest=function(){var u=lr.util.createBuffer();u.putBytes(n.bytes());var f=l.fullMessageLength[l.fullMessageLength.length-1]+l.messageLengthSize,d=f&l.blockLength-1;u.putBytes(Mg.substr(0,l.blockLength-d));for(var h,g,y=l.fullMessageLength[0]*8,m=0;m<l.fullMessageLength.length-1;++m)h=l.fullMessageLength[m+1]*8,g=h/4294967296>>>0,y+=g,u.putInt32(y>>>0),y=h>>>0;u.putInt32(y);for(var _=new Array(r.length),m=0;m<r.length;++m)_[m]=r[m].slice(0);ob(_,i,u);var E=lr.util.createBuffer(),w;t==="SHA-512"?w=_.length:t==="SHA-384"?w=_.length-2:w=_.length-4;for(var m=0;m<w;++m)E.putInt32(_[m][0]),(m!==w-1||t!=="SHA-512/224")&&E.putInt32(_[m][1]);return E},l};var Mg=null,sb=!1,Ug=null,Ws=null;function yM(){Mg=String.fromCharCode(128),Mg+=lr.util.fillString(String.fromCharCode(0),128),Ug=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],Ws={},Ws["SHA-512"]=[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],Ws["SHA-384"]=[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],Ws["SHA-512/256"]=[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],Ws["SHA-512/224"]=[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]],sb=!0}function ob(t,e,r){for(var n,i,a,s,l,u,f,d,h,g,y,m,_,E,w,b,k,N,D,B,ee,q,U,oe,ae,Ee,Ie,Qe,Ne,me,ne,Ge,Je,ut,Xe,ct=r.length();ct>=128;){for(Ne=0;Ne<16;++Ne)e[Ne][0]=r.getInt32()>>>0,e[Ne][1]=r.getInt32()>>>0;for(;Ne<80;++Ne)Ge=e[Ne-2],me=Ge[0],ne=Ge[1],n=((me>>>19|ne<<13)^(ne>>>29|me<<3)^me>>>6)>>>0,i=((me<<13|ne>>>19)^(ne<<3|me>>>29)^(me<<26|ne>>>6))>>>0,ut=e[Ne-15],me=ut[0],ne=ut[1],a=((me>>>1|ne<<31)^(me>>>8|ne<<24)^me>>>7)>>>0,s=((me<<31|ne>>>1)^(me<<24|ne>>>8)^(me<<25|ne>>>7))>>>0,Je=e[Ne-7],Xe=e[Ne-16],ne=i+Je[1]+s+Xe[1],e[Ne][0]=n+Je[0]+a+Xe[0]+(ne/4294967296>>>0)>>>0,e[Ne][1]=ne>>>0;for(_=t[0][0],E=t[0][1],w=t[1][0],b=t[1][1],k=t[2][0],N=t[2][1],D=t[3][0],B=t[3][1],ee=t[4][0],q=t[4][1],U=t[5][0],oe=t[5][1],ae=t[6][0],Ee=t[6][1],Ie=t[7][0],Qe=t[7][1],Ne=0;Ne<80;++Ne)f=((ee>>>14|q<<18)^(ee>>>18|q<<14)^(q>>>9|ee<<23))>>>0,d=((ee<<18|q>>>14)^(ee<<14|q>>>18)^(q<<23|ee>>>9))>>>0,h=(ae^ee&(U^ae))>>>0,g=(Ee^q&(oe^Ee))>>>0,l=((_>>>28|E<<4)^(E>>>2|_<<30)^(E>>>7|_<<25))>>>0,u=((_<<4|E>>>28)^(E<<30|_>>>2)^(E<<25|_>>>7))>>>0,y=(_&w|k&(_^w))>>>0,m=(E&b|N&(E^b))>>>0,ne=Qe+d+g+Ug[Ne][1]+e[Ne][1],n=Ie+f+h+Ug[Ne][0]+e[Ne][0]+(ne/4294967296>>>0)>>>0,i=ne>>>0,ne=u+m,a=l+y+(ne/4294967296>>>0)>>>0,s=ne>>>0,Ie=ae,Qe=Ee,ae=U,Ee=oe,U=ee,oe=q,ne=B+i,ee=D+n+(ne/4294967296>>>0)>>>0,q=ne>>>0,D=k,B=N,k=w,N=b,w=_,b=E,ne=i+s,_=n+a+(ne/4294967296>>>0)>>>0,E=ne>>>0;ne=t[0][1]+E,t[0][0]=t[0][0]+_+(ne/4294967296>>>0)>>>0,t[0][1]=ne>>>0,ne=t[1][1]+b,t[1][0]=t[1][0]+w+(ne/4294967296>>>0)>>>0,t[1][1]=ne>>>0,ne=t[2][1]+N,t[2][0]=t[2][0]+k+(ne/4294967296>>>0)>>>0,t[2][1]=ne>>>0,ne=t[3][1]+B,t[3][0]=t[3][0]+D+(ne/4294967296>>>0)>>>0,t[3][1]=ne>>>0,ne=t[4][1]+q,t[4][0]=t[4][0]+ee+(ne/4294967296>>>0)>>>0,t[4][1]=ne>>>0,ne=t[5][1]+oe,t[5][0]=t[5][0]+U+(ne/4294967296>>>0)>>>0,t[5][1]=ne>>>0,ne=t[6][1]+Ee,t[6][0]=t[6][0]+ae+(ne/4294967296>>>0)>>>0,t[6][1]=ne>>>0,ne=t[7][1]+Qe,t[7][0]=t[7][0]+Ie+(ne/4294967296>>>0)>>>0,t[7][1]=ne>>>0,ct-=128}}});var ub=de(qg=>{var vM=mt();xi();var Kr=vM.asn1;qg.privateKeyValidator={name:"PrivateKeyInfo",tagClass:Kr.Class.UNIVERSAL,type:Kr.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:Kr.Class.UNIVERSAL,type:Kr.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:Kr.Class.UNIVERSAL,type:Kr.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:Kr.Class.UNIVERSAL,type:Kr.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:Kr.Class.UNIVERSAL,type:Kr.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]};qg.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:Kr.Class.UNIVERSAL,type:Kr.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:Kr.Class.UNIVERSAL,type:Kr.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:Kr.Class.UNIVERSAL,type:Kr.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{tagClass:Kr.Class.UNIVERSAL,type:Kr.Type.BITSTRING,constructed:!1,composed:!0,captureBitStringValue:"ed25519PublicKey"}]}});var Cb=de((Yj,Eb)=>{var en=mt();Iu();ri();Fg();Ft();var cb=ub(),_M=cb.publicKeyValidator,wM=cb.privateKeyValidator;typeof fb=="undefined"&&(fb=en.jsbn.BigInteger);var fb,Gg=en.util.ByteBuffer,Rn=typeof Buffer=="undefined"?Uint8Array:Buffer;en.pki=en.pki||{};Eb.exports=en.pki.ed25519=en.ed25519=en.ed25519||{};var Tt=en.ed25519;Tt.constants={};Tt.constants.PUBLIC_KEY_BYTE_LENGTH=32;Tt.constants.PRIVATE_KEY_BYTE_LENGTH=64;Tt.constants.SEED_BYTE_LENGTH=32;Tt.constants.SIGN_BYTE_LENGTH=64;Tt.constants.HASH_BYTE_LENGTH=64;Tt.generateKeyPair=function(t){t=t||{};var e=t.seed;if(e===void 0)e=en.random.getBytesSync(Tt.constants.SEED_BYTE_LENGTH);else if(typeof e=="string"){if(e.length!==Tt.constants.SEED_BYTE_LENGTH)throw new TypeError('"seed" must be '+Tt.constants.SEED_BYTE_LENGTH+" bytes in length.")}else if(!(e instanceof Uint8Array))throw new TypeError('"seed" must be a node.js Buffer, Uint8Array, or a binary string.');e=Ta({message:e,encoding:"binary"});for(var r=new Rn(Tt.constants.PUBLIC_KEY_BYTE_LENGTH),n=new Rn(Tt.constants.PRIVATE_KEY_BYTE_LENGTH),i=0;i<32;++i)n[i]=e[i];return xM(r,n),{publicKey:r,privateKey:n}};Tt.privateKeyFromAsn1=function(t){var e={},r=[],n=en.asn1.validate(t,wM,e,r);if(!n){var i=new Error("Invalid Key.");throw i.errors=r,i}var a=en.asn1.derToOid(e.privateKeyOid),s=en.oids.EdDSA25519;if(a!==s)throw new Error('Invalid OID "'+a+'"; OID must be "'+s+'".');var l=e.privateKey,u=Ta({message:en.asn1.fromDer(l).value,encoding:"binary"});return{privateKeyBytes:u}};Tt.publicKeyFromAsn1=function(t){var e={},r=[],n=en.asn1.validate(t,_M,e,r);if(!n){var i=new Error("Invalid Key.");throw i.errors=r,i}var a=en.asn1.derToOid(e.publicKeyOid),s=en.oids.EdDSA25519;if(a!==s)throw new Error('Invalid OID "'+a+'"; OID must be "'+s+'".');var l=e.ed25519PublicKey;if(l.length!==Tt.constants.PUBLIC_KEY_BYTE_LENGTH)throw new Error("Key length is invalid.");return Ta({message:l,encoding:"binary"})};Tt.publicKeyFromPrivateKey=function(t){t=t||{};var e=Ta({message:t.privateKey,encoding:"binary"});if(e.length!==Tt.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+Tt.constants.PRIVATE_KEY_BYTE_LENGTH);for(var r=new Rn(Tt.constants.PUBLIC_KEY_BYTE_LENGTH),n=0;n<r.length;++n)r[n]=e[32+n];return r};Tt.sign=function(t){t=t||{};var e=Ta(t),r=Ta({message:t.privateKey,encoding:"binary"});if(r.length===Tt.constants.SEED_BYTE_LENGTH){var n=Tt.generateKeyPair({seed:r});r=n.privateKey}else if(r.length!==Tt.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+Tt.constants.SEED_BYTE_LENGTH+" or "+Tt.constants.PRIVATE_KEY_BYTE_LENGTH);var i=new Rn(Tt.constants.SIGN_BYTE_LENGTH+e.length);SM(i,e,e.length,r);for(var a=new Rn(Tt.constants.SIGN_BYTE_LENGTH),s=0;s<a.length;++s)a[s]=i[s];return a};Tt.verify=function(t){t=t||{};var e=Ta(t);if(t.signature===void 0)throw new TypeError('"options.signature" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a binary string.');var r=Ta({message:t.signature,encoding:"binary"});if(r.length!==Tt.constants.SIGN_BYTE_LENGTH)throw new TypeError('"options.signature" must have a byte length of '+Tt.constants.SIGN_BYTE_LENGTH);var n=Ta({message:t.publicKey,encoding:"binary"});if(n.length!==Tt.constants.PUBLIC_KEY_BYTE_LENGTH)throw new TypeError('"options.publicKey" must have a byte length of '+Tt.constants.PUBLIC_KEY_BYTE_LENGTH);var i=new Rn(Tt.constants.SIGN_BYTE_LENGTH+e.length),a=new Rn(Tt.constants.SIGN_BYTE_LENGTH+e.length),s;for(s=0;s<Tt.constants.SIGN_BYTE_LENGTH;++s)i[s]=r[s];for(s=0;s<e.length;++s)i[s+Tt.constants.SIGN_BYTE_LENGTH]=e[s];return TM(a,i,i.length,n)>=0};function Ta(t){var e=t.message;if(e instanceof Uint8Array||e instanceof Rn)return e;var r=t.encoding;if(e===void 0)if(t.md)e=t.md.digest().getBytes(),r="binary";else throw new TypeError('"options.message" or "options.md" not specified.');if(typeof e=="string"&&!r)throw new TypeError('"options.encoding" must be "binary" or "utf8".');if(typeof e=="string"){if(typeof Buffer!="undefined")return Buffer.from(e,r);e=new Gg(e,r)}else if(!(e instanceof Gg))throw new TypeError('"options.message" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a string with "options.encoding" specifying its encoding.');for(var n=new Rn(e.length()),i=0;i<n.length;++i)n[i]=e.at(i);return n}var Vg=We(),Od=We([1]),EM=We([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),CM=We([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),db=We([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),hb=We([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),jg=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]),bM=We([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function Ou(t,e){var r=en.md.sha512.create(),n=new Gg(t);r.update(n.getBytes(e),"binary");var i=r.digest().getBytes();if(typeof Buffer!="undefined")return Buffer.from(i,"binary");for(var a=new Rn(Tt.constants.HASH_BYTE_LENGTH),s=0;s<64;++s)a[s]=i.charCodeAt(s);return a}function xM(t,e){var r=[We(),We(),We(),We()],n,i=Ou(e,32);for(i[0]&=248,i[31]&=127,i[31]|=64,Wg(r,i),Yg(t,r),n=0;n<32;++n)e[n+32]=t[n];return 0}function SM(t,e,r,n){var i,a,s=new Float64Array(64),l=[We(),We(),We(),We()],u=Ou(n,32);u[0]&=248,u[31]&=127,u[31]|=64;var f=r+64;for(i=0;i<r;++i)t[64+i]=e[i];for(i=0;i<32;++i)t[32+i]=u[32+i];var d=Ou(t.subarray(32),r+32);for(Kg(d),Wg(l,d),Yg(t,l),i=32;i<64;++i)t[i]=n[i];var h=Ou(t,r+64);for(Kg(h),i=32;i<64;++i)s[i]=0;for(i=0;i<32;++i)s[i]=d[i];for(i=0;i<32;++i)for(a=0;a<32;a++)s[i+a]+=h[i]*u[a];return pb(t.subarray(32),s),f}function TM(t,e,r,n){var i,a,s=new Rn(32),l=[We(),We(),We(),We()],u=[We(),We(),We(),We()];if(a=-1,r<64||AM(u,n))return-1;for(i=0;i<r;++i)t[i]=e[i];for(i=0;i<32;++i)t[i+32]=n[i];var f=Ou(t,r);if(Kg(f),_b(l,u,f),Wg(u,e.subarray(32)),Hg(l,u),Yg(s,l),r-=64,yb(e,0,s,0)){for(i=0;i<r;++i)t[i]=0;return-1}for(i=0;i<r;++i)t[i]=e[i+64];return a=r,a}function pb(t,e){var r,n,i,a;for(n=63;n>=32;--n){for(r=0,i=n-32,a=n-12;i<a;++i)e[i]+=r-16*e[n]*jg[i-(n-32)],r=e[i]+128>>8,e[i]-=r*256;e[i]+=r,e[n]=0}for(r=0,i=0;i<32;++i)e[i]+=r-(e[31]>>4)*jg[i],r=e[i]>>8,e[i]&=255;for(i=0;i<32;++i)e[i]-=r*jg[i];for(n=0;n<32;++n)e[n+1]+=e[n]>>8,t[n]=e[n]&255}function Kg(t){for(var e=new Float64Array(64),r=0;r<64;++r)e[r]=t[r],t[r]=0;pb(t,e)}function Hg(t,e){var r=We(),n=We(),i=We(),a=We(),s=We(),l=We(),u=We(),f=We(),d=We();hl(r,t[1],t[0]),hl(d,e[1],e[0]),$t(r,r,d),dl(n,t[0],t[1]),dl(d,e[0],e[1]),$t(n,n,d),$t(i,t[3],e[3]),$t(i,i,CM),$t(a,t[2],e[2]),dl(a,a,a),hl(s,n,r),hl(l,a,i),dl(u,a,i),dl(f,n,r),$t(t[0],s,l),$t(t[1],f,u),$t(t[2],u,l),$t(t[3],s,f)}function gb(t,e,r){for(var n=0;n<4;++n)wb(t[n],e[n],r)}function Yg(t,e){var r=We(),n=We(),i=We();NM(i,e[2]),$t(r,e[0],i),$t(n,e[1],i),Ld(t,n),t[31]^=vb(r)<<7}function Ld(t,e){var r,n,i,a=We(),s=We();for(r=0;r<16;++r)s[r]=e[r];for(zg(s),zg(s),zg(s),n=0;n<2;++n){for(a[0]=s[0]-65517,r=1;r<15;++r)a[r]=s[r]-65535-(a[r-1]>>16&1),a[r-1]&=65535;a[15]=s[15]-32767-(a[14]>>16&1),i=a[15]>>16&1,a[14]&=65535,wb(s,a,1-i)}for(r=0;r<16;r++)t[2*r]=s[r]&255,t[2*r+1]=s[r]>>8}function AM(t,e){var r=We(),n=We(),i=We(),a=We(),s=We(),l=We(),u=We();return ds(t[2],Od),kM(t[1],e),zs(i,t[1]),$t(a,i,EM),hl(i,i,t[2]),dl(a,t[2],a),zs(s,a),zs(l,s),$t(u,l,s),$t(r,u,i),$t(r,r,a),IM(r,r),$t(r,r,i),$t(r,r,a),$t(r,r,a),$t(t[0],r,a),zs(n,t[0]),$t(n,n,a),mb(n,i)&&$t(t[0],t[0],bM),zs(n,t[0]),$t(n,n,a),mb(n,i)?-1:(vb(t[0])===e[31]>>7&&hl(t[0],Vg,t[0]),$t(t[3],t[0],t[1]),0)}function kM(t,e){var r;for(r=0;r<16;++r)t[r]=e[2*r]+(e[2*r+1]<<8);t[15]&=32767}function IM(t,e){var r=We(),n;for(n=0;n<16;++n)r[n]=e[n];for(n=250;n>=0;--n)zs(r,r),n!==1&&$t(r,r,e);for(n=0;n<16;++n)t[n]=r[n]}function mb(t,e){var r=new Rn(32),n=new Rn(32);return Ld(r,t),Ld(n,e),yb(r,0,n,0)}function yb(t,e,r,n){return RM(t,e,r,n,32)}function RM(t,e,r,n,i){var a,s=0;for(a=0;a<i;++a)s|=t[e+a]^r[n+a];return(1&s-1>>>8)-1}function vb(t){var e=new Rn(32);return Ld(e,t),e[0]&1}function _b(t,e,r){var n,i;for(ds(t[0],Vg),ds(t[1],Od),ds(t[2],Od),ds(t[3],Vg),i=255;i>=0;--i)n=r[i/8|0]>>(i&7)&1,gb(t,e,n),Hg(e,t),Hg(t,t),gb(t,e,n)}function Wg(t,e){var r=[We(),We(),We(),We()];ds(r[0],db),ds(r[1],hb),ds(r[2],Od),$t(r[3],db,hb),_b(t,r,e)}function ds(t,e){var r;for(r=0;r<16;r++)t[r]=e[r]|0}function NM(t,e){var r=We(),n;for(n=0;n<16;++n)r[n]=e[n];for(n=253;n>=0;--n)zs(r,r),n!==2&&n!==4&&$t(r,r,e);for(n=0;n<16;++n)t[n]=r[n]}function zg(t){var e,r,n=1;for(e=0;e<16;++e)r=t[e]+n+65535,n=Math.floor(r/65536),t[e]=r-n*65536;t[0]+=n-1+37*(n-1)}function wb(t,e,r){for(var n,i=~(r-1),a=0;a<16;++a)n=i&(t[a]^e[a]),t[a]^=n,e[a]^=n}function We(t){var e,r=new Float64Array(16);if(t)for(e=0;e<t.length;++e)r[e]=t[e];return r}function dl(t,e,r){for(var n=0;n<16;++n)t[n]=e[n]+r[n]}function hl(t,e,r){for(var n=0;n<16;++n)t[n]=e[n]-r[n]}function zs(t,e){$t(t,e,e)}function $t(t,e,r){var n,i,a=0,s=0,l=0,u=0,f=0,d=0,h=0,g=0,y=0,m=0,_=0,E=0,w=0,b=0,k=0,N=0,D=0,B=0,ee=0,q=0,U=0,oe=0,ae=0,Ee=0,Ie=0,Qe=0,Ne=0,me=0,ne=0,Ge=0,Je=0,ut=r[0],Xe=r[1],ct=r[2],le=r[3],Nt=r[4],Bt=r[5],et=r[6],tt=r[7],ft=r[8],I=r[9],O=r[10],L=r[11],H=r[12],j=r[13],Q=r[14],J=r[15];n=e[0],a+=n*ut,s+=n*Xe,l+=n*ct,u+=n*le,f+=n*Nt,d+=n*Bt,h+=n*et,g+=n*tt,y+=n*ft,m+=n*I,_+=n*O,E+=n*L,w+=n*H,b+=n*j,k+=n*Q,N+=n*J,n=e[1],s+=n*ut,l+=n*Xe,u+=n*ct,f+=n*le,d+=n*Nt,h+=n*Bt,g+=n*et,y+=n*tt,m+=n*ft,_+=n*I,E+=n*O,w+=n*L,b+=n*H,k+=n*j,N+=n*Q,D+=n*J,n=e[2],l+=n*ut,u+=n*Xe,f+=n*ct,d+=n*le,h+=n*Nt,g+=n*Bt,y+=n*et,m+=n*tt,_+=n*ft,E+=n*I,w+=n*O,b+=n*L,k+=n*H,N+=n*j,D+=n*Q,B+=n*J,n=e[3],u+=n*ut,f+=n*Xe,d+=n*ct,h+=n*le,g+=n*Nt,y+=n*Bt,m+=n*et,_+=n*tt,E+=n*ft,w+=n*I,b+=n*O,k+=n*L,N+=n*H,D+=n*j,B+=n*Q,ee+=n*J,n=e[4],f+=n*ut,d+=n*Xe,h+=n*ct,g+=n*le,y+=n*Nt,m+=n*Bt,_+=n*et,E+=n*tt,w+=n*ft,b+=n*I,k+=n*O,N+=n*L,D+=n*H,B+=n*j,ee+=n*Q,q+=n*J,n=e[5],d+=n*ut,h+=n*Xe,g+=n*ct,y+=n*le,m+=n*Nt,_+=n*Bt,E+=n*et,w+=n*tt,b+=n*ft,k+=n*I,N+=n*O,D+=n*L,B+=n*H,ee+=n*j,q+=n*Q,U+=n*J,n=e[6],h+=n*ut,g+=n*Xe,y+=n*ct,m+=n*le,_+=n*Nt,E+=n*Bt,w+=n*et,b+=n*tt,k+=n*ft,N+=n*I,D+=n*O,B+=n*L,ee+=n*H,q+=n*j,U+=n*Q,oe+=n*J,n=e[7],g+=n*ut,y+=n*Xe,m+=n*ct,_+=n*le,E+=n*Nt,w+=n*Bt,b+=n*et,k+=n*tt,N+=n*ft,D+=n*I,B+=n*O,ee+=n*L,q+=n*H,U+=n*j,oe+=n*Q,ae+=n*J,n=e[8],y+=n*ut,m+=n*Xe,_+=n*ct,E+=n*le,w+=n*Nt,b+=n*Bt,k+=n*et,N+=n*tt,D+=n*ft,B+=n*I,ee+=n*O,q+=n*L,U+=n*H,oe+=n*j,ae+=n*Q,Ee+=n*J,n=e[9],m+=n*ut,_+=n*Xe,E+=n*ct,w+=n*le,b+=n*Nt,k+=n*Bt,N+=n*et,D+=n*tt,B+=n*ft,ee+=n*I,q+=n*O,U+=n*L,oe+=n*H,ae+=n*j,Ee+=n*Q,Ie+=n*J,n=e[10],_+=n*ut,E+=n*Xe,w+=n*ct,b+=n*le,k+=n*Nt,N+=n*Bt,D+=n*et,B+=n*tt,ee+=n*ft,q+=n*I,U+=n*O,oe+=n*L,ae+=n*H,Ee+=n*j,Ie+=n*Q,Qe+=n*J,n=e[11],E+=n*ut,w+=n*Xe,b+=n*ct,k+=n*le,N+=n*Nt,D+=n*Bt,B+=n*et,ee+=n*tt,q+=n*ft,U+=n*I,oe+=n*O,ae+=n*L,Ee+=n*H,Ie+=n*j,Qe+=n*Q,Ne+=n*J,n=e[12],w+=n*ut,b+=n*Xe,k+=n*ct,N+=n*le,D+=n*Nt,B+=n*Bt,ee+=n*et,q+=n*tt,U+=n*ft,oe+=n*I,ae+=n*O,Ee+=n*L,Ie+=n*H,Qe+=n*j,Ne+=n*Q,me+=n*J,n=e[13],b+=n*ut,k+=n*Xe,N+=n*ct,D+=n*le,B+=n*Nt,ee+=n*Bt,q+=n*et,U+=n*tt,oe+=n*ft,ae+=n*I,Ee+=n*O,Ie+=n*L,Qe+=n*H,Ne+=n*j,me+=n*Q,ne+=n*J,n=e[14],k+=n*ut,N+=n*Xe,D+=n*ct,B+=n*le,ee+=n*Nt,q+=n*Bt,U+=n*et,oe+=n*tt,ae+=n*ft,Ee+=n*I,Ie+=n*O,Qe+=n*L,Ne+=n*H,me+=n*j,ne+=n*Q,Ge+=n*J,n=e[15],N+=n*ut,D+=n*Xe,B+=n*ct,ee+=n*le,q+=n*Nt,U+=n*Bt,oe+=n*et,ae+=n*tt,Ee+=n*ft,Ie+=n*I,Qe+=n*O,Ne+=n*L,me+=n*H,ne+=n*j,Ge+=n*Q,Je+=n*J,a+=38*D,s+=38*B,l+=38*ee,u+=38*q,f+=38*U,d+=38*oe,h+=38*ae,g+=38*Ee,y+=38*Ie,m+=38*Qe,_+=38*Ne,E+=38*me,w+=38*ne,b+=38*Ge,k+=38*Je,i=1,n=a+i+65535,i=Math.floor(n/65536),a=n-i*65536,n=s+i+65535,i=Math.floor(n/65536),s=n-i*65536,n=l+i+65535,i=Math.floor(n/65536),l=n-i*65536,n=u+i+65535,i=Math.floor(n/65536),u=n-i*65536,n=f+i+65535,i=Math.floor(n/65536),f=n-i*65536,n=d+i+65535,i=Math.floor(n/65536),d=n-i*65536,n=h+i+65535,i=Math.floor(n/65536),h=n-i*65536,n=g+i+65535,i=Math.floor(n/65536),g=n-i*65536,n=y+i+65535,i=Math.floor(n/65536),y=n-i*65536,n=m+i+65535,i=Math.floor(n/65536),m=n-i*65536,n=_+i+65535,i=Math.floor(n/65536),_=n-i*65536,n=E+i+65535,i=Math.floor(n/65536),E=n-i*65536,n=w+i+65535,i=Math.floor(n/65536),w=n-i*65536,n=b+i+65535,i=Math.floor(n/65536),b=n-i*65536,n=k+i+65535,i=Math.floor(n/65536),k=n-i*65536,n=N+i+65535,i=Math.floor(n/65536),N=n-i*65536,a+=i-1+37*(i-1),i=1,n=a+i+65535,i=Math.floor(n/65536),a=n-i*65536,n=s+i+65535,i=Math.floor(n/65536),s=n-i*65536,n=l+i+65535,i=Math.floor(n/65536),l=n-i*65536,n=u+i+65535,i=Math.floor(n/65536),u=n-i*65536,n=f+i+65535,i=Math.floor(n/65536),f=n-i*65536,n=d+i+65535,i=Math.floor(n/65536),d=n-i*65536,n=h+i+65535,i=Math.floor(n/65536),h=n-i*65536,n=g+i+65535,i=Math.floor(n/65536),g=n-i*65536,n=y+i+65535,i=Math.floor(n/65536),y=n-i*65536,n=m+i+65535,i=Math.floor(n/65536),m=n-i*65536,n=_+i+65535,i=Math.floor(n/65536),_=n-i*65536,n=E+i+65535,i=Math.floor(n/65536),E=n-i*65536,n=w+i+65535,i=Math.floor(n/65536),w=n-i*65536,n=b+i+65535,i=Math.floor(n/65536),b=n-i*65536,n=k+i+65535,i=Math.floor(n/65536),k=n-i*65536,n=N+i+65535,i=Math.floor(n/65536),N=n-i*65536,a+=i-1+37*(i-1),t[0]=a,t[1]=s,t[2]=l,t[3]=u,t[4]=f,t[5]=d,t[6]=h,t[7]=g,t[8]=y,t[9]=m,t[10]=_,t[11]=E,t[12]=w,t[13]=b,t[14]=k,t[15]=N}});var Tb=de((Wj,Sb)=>{var jn=mt();Ft();ri();Iu();Sb.exports=jn.kem=jn.kem||{};var bb=jn.jsbn.BigInteger;jn.kem.rsa={};jn.kem.rsa.create=function(t,e){e=e||{};var r=e.prng||jn.random,n={};return n.encrypt=function(i,a){var s=Math.ceil(i.n.bitLength()/8),l;do l=new bb(jn.util.bytesToHex(r.getBytesSync(s)),16).mod(i.n);while(l.compareTo(bb.ONE)<=0);l=jn.util.hexToBytes(l.toString(16));var u=s-l.length;u>0&&(l=jn.util.fillString(String.fromCharCode(0),u)+l);var f=i.encrypt(l,"NONE"),d=t.generate(l,a);return{encapsulation:f,key:d}},n.decrypt=function(i,a,s){var l=i.decrypt(a,"NONE");return t.generate(l,s)},n};jn.kem.kdf1=function(t,e){xb(this,t,0,e||t.digestLength)};jn.kem.kdf2=function(t,e){xb(this,t,1,e||t.digestLength)};function xb(t,e,r,n){t.generate=function(i,a){for(var s=new jn.util.ByteBuffer,l=Math.ceil(a/n)+r,u=new jn.util.ByteBuffer,f=r;f<l;++f){u.putInt32(f),e.start(),e.update(i+u.getBytes());var d=e.digest();s.putBytes(d.getBytes(n))}return s.truncate(s.length()-a),s.getBytes()}}});var Rb=de((zj,Ib)=>{var It=mt();Ft();Ib.exports=It.log=It.log||{};It.log.levels=["none","error","warning","info","debug","verbose","max"];var Pd={},Qg=[],Lu=null;It.log.LEVEL_LOCKED=1<<1;It.log.NO_LEVEL_CHECK=1<<2;It.log.INTERPOLATE=1<<3;for(ra=0;ra<It.log.levels.length;++ra)Xg=It.log.levels[ra],Pd[Xg]={index:ra,name:Xg.toUpperCase()};var Xg,ra;It.log.logMessage=function(t){for(var e=Pd[t.level].index,r=0;r<Qg.length;++r){var n=Qg[r];if(n.flags&It.log.NO_LEVEL_CHECK)n.f(t);else{var i=Pd[n.level].index;e<=i&&n.f(n,t)}}};It.log.prepareStandard=function(t){"standard"in t||(t.standard=Pd[t.level].name+" ["+t.category+"] "+t.message)};It.log.prepareFull=function(t){if(!("full"in t)){var e=[t.message];e=e.concat([]),t.full=It.util.format.apply(this,e)}};It.log.prepareStandardFull=function(t){"standardFull"in t||(It.log.prepareStandard(t),t.standardFull=t.standard)};for(Jg=["error","warning","info","debug","verbose"],ra=0;ra<Jg.length;++ra)(function(e){It.log[e]=function(r,n){var i=Array.prototype.slice.call(arguments).slice(2),a={timestamp:new Date,level:e,category:r,message:n,arguments:i};It.log.logMessage(a)}})(Jg[ra]);var Jg,ra;It.log.makeLogger=function(t){var e={flags:0,f:t};return It.log.setLevel(e,"none"),e};It.log.setLevel=function(t,e){var r=!1;if(t&&!(t.flags&It.log.LEVEL_LOCKED))for(var n=0;n<It.log.levels.length;++n){var i=It.log.levels[n];if(e==i){t.level=e,r=!0;break}}return r};It.log.lock=function(t,e){typeof e=="undefined"||e?t.flags|=It.log.LEVEL_LOCKED:t.flags&=~It.log.LEVEL_LOCKED};It.log.addLogger=function(t){Qg.push(t)};typeof console!="undefined"&&"log"in console?(console.error&&console.warn&&console.info&&console.debug?(Ab={error:console.error,warning:console.warn,info:console.info,debug:console.debug,verbose:console.debug},Pu=function(t,e){It.log.prepareStandard(e);var r=Ab[e.level],n=[e.standard];n=n.concat(e.arguments.slice()),r.apply(console,n)},pl=It.log.makeLogger(Pu)):(Pu=function(e,r){It.log.prepareStandardFull(r),console.log(r.standardFull)},pl=It.log.makeLogger(Pu)),It.log.setLevel(pl,"debug"),It.log.addLogger(pl),Lu=pl):console={log:function(){}};var pl,Ab,Pu;Lu!==null&&typeof window!="undefined"&&window.location&&(Mu=new URL(window.location.href).searchParams,Mu.has("console.level")&&It.log.setLevel(Lu,Mu.get("console.level").slice(-1)[0]),Mu.has("console.lock")&&(kb=Mu.get("console.lock").slice(-1)[0],kb=="true"&&It.log.lock(Lu)));var Mu,kb;It.log.consoleLogger=Lu});var Bb=de((Qj,Nb)=>{Nb.exports=zi();gd();ol();cg();Fg()});var Lb=de((Xj,Ob)=>{var be=mt();is();xi();Au();as();Gs();xg();ri();Ft();Id();var V=be.asn1,_n=Ob.exports=be.pkcs7=be.pkcs7||{};_n.messageFromPem=function(t){var e=be.pem.decode(t)[0];if(e.type!=="PKCS7"){var r=new Error('Could not convert PKCS#7 message from PEM; PEM header type is not "PKCS#7".');throw r.headerType=e.type,r}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert PKCS#7 message from PEM; PEM is encrypted.");var n=V.fromDer(e.body);return _n.messageFromAsn1(n)};_n.messageToPem=function(t,e){var r={type:"PKCS7",body:V.toDer(t.toAsn1()).getBytes()};return be.pem.encode(r,{maxline:e})};_n.messageFromAsn1=function(t){var e={},r=[];if(!V.validate(t,_n.asn1.contentInfoValidator,e,r)){var n=new Error("Cannot read PKCS#7 message. ASN.1 object is not an PKCS#7 ContentInfo.");throw n.errors=r,n}var i=V.derToOid(e.contentType),a;switch(i){case be.pki.oids.envelopedData:a=_n.createEnvelopedData();break;case be.pki.oids.encryptedData:a=_n.createEncryptedData();break;case be.pki.oids.signedData:a=_n.createSignedData();break;default:throw new Error("Cannot read PKCS#7 message. ContentType with OID "+i+" is not (yet) supported.")}return a.fromAsn1(e.content.value[0]),a};_n.createSignedData=function(){var t=null;return t={type:be.pki.oids.signedData,version:1,certificates:[],crls:[],signers:[],digestAlgorithmIdentifiers:[],contentInfo:null,signerInfos:[],fromAsn1:function(n){if($g(t,n,_n.asn1.signedDataValidator),t.certificates=[],t.crls=[],t.digestAlgorithmIdentifiers=[],t.contentInfo=null,t.signerInfos=[],t.rawCapture.certificates)for(var i=t.rawCapture.certificates.value,a=0;a<i.length;++a)t.certificates.push(be.pki.certificateFromAsn1(i[a]))},toAsn1:function(){t.contentInfo||t.sign();for(var n=[],i=0;i<t.certificates.length;++i)n.push(be.pki.certificateToAsn1(t.certificates[i]));var a=[],s=V.create(V.Class.CONTEXT_SPECIFIC,0,!0,[V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[V.create(V.Class.UNIVERSAL,V.Type.INTEGER,!1,V.integerToDer(t.version).getBytes()),V.create(V.Class.UNIVERSAL,V.Type.SET,!0,t.digestAlgorithmIdentifiers),t.contentInfo])]);return n.length>0&&s.value[0].value.push(V.create(V.Class.CONTEXT_SPECIFIC,0,!0,n)),a.length>0&&s.value[0].value.push(V.create(V.Class.CONTEXT_SPECIFIC,1,!0,a)),s.value[0].value.push(V.create(V.Class.UNIVERSAL,V.Type.SET,!0,t.signerInfos)),V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[V.create(V.Class.UNIVERSAL,V.Type.OID,!1,V.oidToDer(t.type).getBytes()),s])},addSigner:function(n){var i=n.issuer,a=n.serialNumber;if(n.certificate){var s=n.certificate;typeof s=="string"&&(s=be.pki.certificateFromPem(s)),i=s.issuer.attributes,a=s.serialNumber}var l=n.key;if(!l)throw new Error("Could not add PKCS#7 signer; no private key specified.");typeof l=="string"&&(l=be.pki.privateKeyFromPem(l));var u=n.digestAlgorithm||be.pki.oids.sha1;switch(u){case be.pki.oids.sha1:case be.pki.oids.sha256:case be.pki.oids.sha384:case be.pki.oids.sha512:case be.pki.oids.md5:break;default:throw new Error("Could not add PKCS#7 signer; unknown message digest algorithm: "+u)}var f=n.authenticatedAttributes||[];if(f.length>0){for(var d=!1,h=!1,g=0;g<f.length;++g){var y=f[g];if(!d&&y.type===be.pki.oids.contentType){if(d=!0,h)break;continue}if(!h&&y.type===be.pki.oids.messageDigest){if(h=!0,d)break;continue}}if(!d||!h)throw new Error("Invalid signer.authenticatedAttributes. If signer.authenticatedAttributes is specified, then it must contain at least two attributes, PKCS #9 content-type and PKCS #9 message-digest.")}t.signers.push({key:l,version:1,issuer:i,serialNumber:a,digestAlgorithm:u,signatureAlgorithm:be.pki.oids.rsaEncryption,signature:null,authenticatedAttributes:f,unauthenticatedAttributes:[]})},sign:function(n){if(n=n||{},(typeof t.content!="object"||t.contentInfo===null)&&(t.contentInfo=V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[V.create(V.Class.UNIVERSAL,V.Type.OID,!1,V.oidToDer(be.pki.oids.data).getBytes())]),"content"in t)){var i;t.content instanceof be.util.ByteBuffer?i=t.content.bytes():typeof t.content=="string"&&(i=be.util.encodeUtf8(t.content)),n.detached?t.detachedContent=V.create(V.Class.UNIVERSAL,V.Type.OCTETSTRING,!1,i):t.contentInfo.value.push(V.create(V.Class.CONTEXT_SPECIFIC,0,!0,[V.create(V.Class.UNIVERSAL,V.Type.OCTETSTRING,!1,i)]))}if(t.signers.length!==0){var a=e();r(a)}},verify:function(){throw new Error("PKCS#7 signature verification not yet implemented.")},addCertificate:function(n){typeof n=="string"&&(n=be.pki.certificateFromPem(n)),t.certificates.push(n)},addCertificateRevokationList:function(n){throw new Error("PKCS#7 CRL support not yet implemented.")}},t;function e(){for(var n={},i=0;i<t.signers.length;++i){var a=t.signers[i],s=a.digestAlgorithm;s in n||(n[s]=be.md[be.pki.oids[s]].create()),a.authenticatedAttributes.length===0?a.md=n[s]:a.md=be.md[be.pki.oids[s]].create()}t.digestAlgorithmIdentifiers=[];for(var s in n)t.digestAlgorithmIdentifiers.push(V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[V.create(V.Class.UNIVERSAL,V.Type.OID,!1,V.oidToDer(s).getBytes()),V.create(V.Class.UNIVERSAL,V.Type.NULL,!1,"")]));return n}function r(n){var i;if(t.detachedContent?i=t.detachedContent:(i=t.contentInfo.value[1],i=i.value[0]),!i)throw new Error("Could not sign PKCS#7 message; there is no content to sign.");var a=V.derToOid(t.contentInfo.value[0].value),s=V.toDer(i);s.getByte(),V.getBerValueLength(s),s=s.getBytes();for(var l in n)n[l].start().update(s);for(var u=new Date,f=0;f<t.signers.length;++f){var d=t.signers[f];if(d.authenticatedAttributes.length===0){if(a!==be.pki.oids.data)throw new Error("Invalid signer; authenticatedAttributes must be present when the ContentInfo content type is not PKCS#7 Data.")}else{d.authenticatedAttributesAsn1=V.create(V.Class.CONTEXT_SPECIFIC,0,!0,[]);for(var h=V.create(V.Class.UNIVERSAL,V.Type.SET,!0,[]),g=0;g<d.authenticatedAttributes.length;++g){var y=d.authenticatedAttributes[g];y.type===be.pki.oids.messageDigest?y.value=n[d.digestAlgorithm].digest():y.type===be.pki.oids.signingTime&&(y.value||(y.value=u)),h.value.push(Zg(y)),d.authenticatedAttributesAsn1.value.push(Zg(y))}s=V.toDer(h).getBytes(),d.md.start().update(s)}d.signature=d.key.sign(d.md,"RSASSA-PKCS1-V1_5")}t.signerInfos=MM(t.signers)}};_n.createEncryptedData=function(){var t=null;return t={type:be.pki.oids.encryptedData,version:0,encryptedContent:{algorithm:be.pki.oids["aes256-CBC"]},fromAsn1:function(e){$g(t,e,_n.asn1.encryptedDataValidator)},decrypt:function(e){e!==void 0&&(t.encryptedContent.key=e),Db(t)}},t};_n.createEnvelopedData=function(){var t=null;return t={type:be.pki.oids.envelopedData,version:0,recipients:[],encryptedContent:{algorithm:be.pki.oids["aes256-CBC"]},fromAsn1:function(e){var r=$g(t,e,_n.asn1.envelopedDataValidator);t.recipients=OM(r.recipientInfos.value)},toAsn1:function(){return V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[V.create(V.Class.UNIVERSAL,V.Type.OID,!1,V.oidToDer(t.type).getBytes()),V.create(V.Class.CONTEXT_SPECIFIC,0,!0,[V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[V.create(V.Class.UNIVERSAL,V.Type.INTEGER,!1,V.integerToDer(t.version).getBytes()),V.create(V.Class.UNIVERSAL,V.Type.SET,!0,LM(t.recipients)),V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,UM(t.encryptedContent))])])])},findRecipient:function(e){for(var r=e.issuer.attributes,n=0;n<t.recipients.length;++n){var i=t.recipients[n],a=i.issuer;if(i.serialNumber===e.serialNumber&&a.length===r.length){for(var s=!0,l=0;l<r.length;++l)if(a[l].type!==r[l].type||a[l].value!==r[l].value){s=!1;break}if(s)return i}}return null},decrypt:function(e,r){if(t.encryptedContent.key===void 0&&e!==void 0&&r!==void 0)switch(e.encryptedContent.algorithm){case be.pki.oids.rsaEncryption:case be.pki.oids.desCBC:var n=r.decrypt(e.encryptedContent.content);t.encryptedContent.key=be.util.createBuffer(n);break;default:throw new Error("Unsupported asymmetric cipher, OID "+e.encryptedContent.algorithm)}Db(t)},addRecipient:function(e){t.recipients.push({version:0,issuer:e.issuer.attributes,serialNumber:e.serialNumber,encryptedContent:{algorithm:be.pki.oids.rsaEncryption,key:e.publicKey}})},encrypt:function(e,r){if(t.encryptedContent.content===void 0){r=r||t.encryptedContent.algorithm,e=e||t.encryptedContent.key;var n,i,a;switch(r){case be.pki.oids["aes128-CBC"]:n=16,i=16,a=be.aes.createEncryptionCipher;break;case be.pki.oids["aes192-CBC"]:n=24,i=16,a=be.aes.createEncryptionCipher;break;case be.pki.oids["aes256-CBC"]:n=32,i=16,a=be.aes.createEncryptionCipher;break;case be.pki.oids["des-EDE3-CBC"]:n=24,i=8,a=be.des.createEncryptionCipher;break;default:throw new Error("Unsupported symmetric cipher, OID "+r)}if(e===void 0)e=be.util.createBuffer(be.random.getBytes(n));else if(e.length()!=n)throw new Error("Symmetric key has wrong length; got "+e.length()+" bytes, expected "+n+".");t.encryptedContent.algorithm=r,t.encryptedContent.key=e,t.encryptedContent.parameter=be.util.createBuffer(be.random.getBytes(i));var s=a(e);if(s.start(t.encryptedContent.parameter.copy()),s.update(t.content),!s.finish())throw new Error("Symmetric encryption failed.");t.encryptedContent.content=s.output}for(var l=0;l<t.recipients.length;++l){var u=t.recipients[l];if(u.encryptedContent.content===void 0)switch(u.encryptedContent.algorithm){case be.pki.oids.rsaEncryption:u.encryptedContent.content=u.encryptedContent.key.encrypt(t.encryptedContent.key.data);break;default:throw new Error("Unsupported asymmetric cipher, OID "+u.encryptedContent.algorithm)}}}},t};function BM(t){var e={},r=[];if(!V.validate(t,_n.asn1.recipientInfoValidator,e,r)){var n=new Error("Cannot read PKCS#7 RecipientInfo. ASN.1 object is not an PKCS#7 RecipientInfo.");throw n.errors=r,n}return{version:e.version.charCodeAt(0),issuer:be.pki.RDNAttributesAsArray(e.issuer),serialNumber:be.util.createBuffer(e.serial).toHex(),encryptedContent:{algorithm:V.derToOid(e.encAlgorithm),parameter:e.encParameter?e.encParameter.value:void 0,content:e.encKey}}}function DM(t){return V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[V.create(V.Class.UNIVERSAL,V.Type.INTEGER,!1,V.integerToDer(t.version).getBytes()),V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[be.pki.distinguishedNameToAsn1({attributes:t.issuer}),V.create(V.Class.UNIVERSAL,V.Type.INTEGER,!1,be.util.hexToBytes(t.serialNumber))]),V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[V.create(V.Class.UNIVERSAL,V.Type.OID,!1,V.oidToDer(t.encryptedContent.algorithm).getBytes()),V.create(V.Class.UNIVERSAL,V.Type.NULL,!1,"")]),V.create(V.Class.UNIVERSAL,V.Type.OCTETSTRING,!1,t.encryptedContent.content)])}function OM(t){for(var e=[],r=0;r<t.length;++r)e.push(BM(t[r]));return e}function LM(t){for(var e=[],r=0;r<t.length;++r)e.push(DM(t[r]));return e}function PM(t){var e=V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[V.create(V.Class.UNIVERSAL,V.Type.INTEGER,!1,V.integerToDer(t.version).getBytes()),V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[be.pki.distinguishedNameToAsn1({attributes:t.issuer}),V.create(V.Class.UNIVERSAL,V.Type.INTEGER,!1,be.util.hexToBytes(t.serialNumber))]),V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[V.create(V.Class.UNIVERSAL,V.Type.OID,!1,V.oidToDer(t.digestAlgorithm).getBytes()),V.create(V.Class.UNIVERSAL,V.Type.NULL,!1,"")])]);if(t.authenticatedAttributesAsn1&&e.value.push(t.authenticatedAttributesAsn1),e.value.push(V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[V.create(V.Class.UNIVERSAL,V.Type.OID,!1,V.oidToDer(t.signatureAlgorithm).getBytes()),V.create(V.Class.UNIVERSAL,V.Type.NULL,!1,"")])),e.value.push(V.create(V.Class.UNIVERSAL,V.Type.OCTETSTRING,!1,t.signature)),t.unauthenticatedAttributes.length>0){for(var r=V.create(V.Class.CONTEXT_SPECIFIC,1,!0,[]),n=0;n<t.unauthenticatedAttributes.length;++n){var i=t.unauthenticatedAttributes[n];r.values.push(Zg(i))}e.value.push(r)}return e}function MM(t){for(var e=[],r=0;r<t.length;++r)e.push(PM(t[r]));return e}function Zg(t){var e;if(t.type===be.pki.oids.contentType)e=V.create(V.Class.UNIVERSAL,V.Type.OID,!1,V.oidToDer(t.value).getBytes());else if(t.type===be.pki.oids.messageDigest)e=V.create(V.Class.UNIVERSAL,V.Type.OCTETSTRING,!1,t.value.bytes());else if(t.type===be.pki.oids.signingTime){var r=new Date("1950-01-01T00:00:00Z"),n=new Date("2050-01-01T00:00:00Z"),i=t.value;if(typeof i=="string"){var a=Date.parse(i);isNaN(a)?i.length===13?i=V.utcTimeToDate(i):i=V.generalizedTimeToDate(i):i=new Date(a)}i>=r&&i<n?e=V.create(V.Class.UNIVERSAL,V.Type.UTCTIME,!1,V.dateToUtcTime(i)):e=V.create(V.Class.UNIVERSAL,V.Type.GENERALIZEDTIME,!1,V.dateToGeneralizedTime(i))}return V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[V.create(V.Class.UNIVERSAL,V.Type.OID,!1,V.oidToDer(t.type).getBytes()),V.create(V.Class.UNIVERSAL,V.Type.SET,!0,[e])])}function UM(t){return[V.create(V.Class.UNIVERSAL,V.Type.OID,!1,V.oidToDer(be.pki.oids.data).getBytes()),V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[V.create(V.Class.UNIVERSAL,V.Type.OID,!1,V.oidToDer(t.algorithm).getBytes()),t.parameter?V.create(V.Class.UNIVERSAL,V.Type.OCTETSTRING,!1,t.parameter.getBytes()):void 0]),V.create(V.Class.CONTEXT_SPECIFIC,0,!0,[V.create(V.Class.UNIVERSAL,V.Type.OCTETSTRING,!1,t.content.getBytes())])]}function $g(t,e,r){var n={},i=[];if(!V.validate(e,r,n,i)){var a=new Error("Cannot read PKCS#7 message. ASN.1 object is not a supported PKCS#7 message.");throw a.errors=a,a}var s=V.derToOid(n.contentType);if(s!==be.pki.oids.data)throw new Error("Unsupported PKCS#7 message. Only wrapped ContentType Data supported.");if(n.encryptedContent){var l="";if(be.util.isArray(n.encryptedContent))for(var u=0;u<n.encryptedContent.length;++u){if(n.encryptedContent[u].type!==V.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting encrypted content constructed of only OCTET STRING objects.");l+=n.encryptedContent[u].value}else l=n.encryptedContent;t.encryptedContent={algorithm:V.derToOid(n.encAlgorithm),parameter:be.util.createBuffer(n.encParameter.value),content:be.util.createBuffer(l)}}if(n.content){var l="";if(be.util.isArray(n.content))for(var u=0;u<n.content.length;++u){if(n.content[u].type!==V.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting content constructed of only OCTET STRING objects.");l+=n.content[u].value}else l=n.content;t.content=be.util.createBuffer(l)}return t.version=n.version.charCodeAt(0),t.rawCapture=n,n}function Db(t){if(t.encryptedContent.key===void 0)throw new Error("Symmetric key not available.");if(t.content===void 0){var e;switch(t.encryptedContent.algorithm){case be.pki.oids["aes128-CBC"]:case be.pki.oids["aes192-CBC"]:case be.pki.oids["aes256-CBC"]:e=be.aes.createDecryptionCipher(t.encryptedContent.key);break;case be.pki.oids.desCBC:case be.pki.oids["des-EDE3-CBC"]:e=be.des.createDecryptionCipher(t.encryptedContent.key);break;default:throw new Error("Unsupported symmetric cipher, OID "+t.encryptedContent.algorithm)}if(e.start(t.encryptedContent.parameter),e.update(t.encryptedContent.content),!e.finish())throw new Error("Symmetric decryption failed.");t.content=e.output}}});var Mb=de((Jj,Pb)=>{var kr=mt();is();nl();gd();ol();Ft();var Md=Pb.exports=kr.ssh=kr.ssh||{};Md.privateKeyToPutty=function(t,e,r){r=r||"",e=e||"";var n="ssh-rsa",i=e===""?"none":"aes256-cbc",a="PuTTY-User-Key-File-2: "+n+`\r
`;a+="Encryption: "+i+`\r
`,a+="Comment: "+r+`\r
`;var s=kr.util.createBuffer();gl(s,n),na(s,t.e),na(s,t.n);var l=kr.util.encode64(s.bytes(),64),u=Math.floor(l.length/66)+1;a+="Public-Lines: "+u+`\r
`,a+=l;var f=kr.util.createBuffer();na(f,t.d),na(f,t.p),na(f,t.q),na(f,t.qInv);var d;if(!e)d=kr.util.encode64(f.bytes(),64);else{var h=f.length()+16-1;h-=h%16;var g=Ud(f.bytes());g.truncate(g.length()-h+f.length()),f.putBuffer(g);var y=kr.util.createBuffer();y.putBuffer(Ud("\0\0\0\0",e)),y.putBuffer(Ud("\0\0\0",e));var m=kr.aes.createEncryptionCipher(y.truncate(8),"CBC");m.start(kr.util.createBuffer().fillWithByte(0,16)),m.update(f.copy()),m.finish();var _=m.output;_.truncate(16),d=kr.util.encode64(_.bytes(),64)}u=Math.floor(d.length/66)+1,a+=`\r
Private-Lines: `+u+`\r
`,a+=d;var E=Ud("putty-private-key-file-mac-key",e),w=kr.util.createBuffer();gl(w,n),gl(w,i),gl(w,r),w.putInt32(s.length()),w.putBuffer(s),w.putInt32(f.length()),w.putBuffer(f);var b=kr.hmac.create();return b.start("sha1",E),b.update(w.bytes()),a+=`\r
Private-MAC: `+b.digest().toHex()+`\r
`,a};Md.publicKeyToOpenSSH=function(t,e){var r="ssh-rsa";e=e||"";var n=kr.util.createBuffer();return gl(n,r),na(n,t.e),na(n,t.n),r+" "+kr.util.encode64(n.bytes())+" "+e};Md.privateKeyToOpenSSH=function(t,e){return e?kr.pki.encryptRsaPrivateKey(t,e,{legacy:!0,algorithm:"aes128"}):kr.pki.privateKeyToPem(t)};Md.getPublicKeyFingerprint=function(t,e){e=e||{};var r=e.md||kr.md.md5.create(),n="ssh-rsa",i=kr.util.createBuffer();gl(i,n),na(i,t.e),na(i,t.n),r.start(),r.update(i.getBytes());var a=r.digest();if(e.encoding==="hex"){var s=a.toHex();return e.delimiter?s.match(/.{2}/g).join(e.delimiter):s}else{if(e.encoding==="binary")return a.getBytes();if(e.encoding)throw new Error('Unknown encoding "'+e.encoding+'".')}return a};function na(t,e){var r=e.toString(16);r[0]>="8"&&(r="00"+r);var n=kr.util.hexToBytes(r);t.putInt32(n.length),t.putBytes(n)}function gl(t,e){t.putInt32(e.length),t.putString(e)}function Ud(){for(var t=kr.md.sha1.create(),e=arguments.length,r=0;r<e;++r)t.update(arguments[r]);return t.digest()}});var Fb=de((Zj,Ub)=>{Ub.exports=mt();is();ib();xi();ld();Au();Cb();nl();Tb();Rb();Bb();Sg();_d();Gs();_g();kg();Lb();Rg();Eg();fg();Td();ri();pg();Mb();Pg();Ft()});var Gb=de(qd=>{"use strict";Object.defineProperty(qd,"__esModule",{value:!0});qd.getPem=void 0;var FM=require("fs"),Fd=Fb(),qM=require("util"),GM=qM.promisify(FM.readFile);function VM(t,e){if(e)qb(t).then(r=>e(null,r)).catch(r=>e(r,null));else return qb(t)}qd.getPem=VM;function qb(t){return GM(t,{encoding:"base64"}).then(e=>jM(e))}function jM(t){let e=Fd.util.decode64(t),r=Fd.asn1.fromDer(e),i=Fd.pkcs12.pkcs12FromAsn1(r,"notasecret").getBags({friendlyName:"privatekey"});if(i.friendlyName){let a=i.friendlyName[0].key;return Fd.pki.privateKeyToPem(a).replace(/\r\n/g,`
`)}else throw new Error("Unable to get friendly name.")}});var Wb=de(Fu=>{"use strict";Object.defineProperty(Fu,"__esModule",{value:!0});Fu.GoogleToken=void 0;var Vb=require("fs"),jb=Ww(),KM=X0(),HM=require("path"),YM=require("util"),Kb=Vb.readFile?YM.promisify(Vb.readFile):()=>M(Fu,null,function*(){throw new Uu("use key rather than keyFile.","MISSING_CREDENTIALS")}),Hb="https://www.googleapis.com/oauth2/v4/token",WM="https://accounts.google.com/o/oauth2/revoke?token=",Uu=class extends Error{constructor(e,r){super(e);this.code=r}},em,Yb=class{constructor(e){this.configure(e)}get accessToken(){return this.rawToken?this.rawToken.access_token:void 0}get idToken(){return this.rawToken?this.rawToken.id_token:void 0}get tokenType(){return this.rawToken?this.rawToken.token_type:void 0}get refreshToken(){return this.rawToken?this.rawToken.refresh_token:void 0}hasExpired(){let e=new Date().getTime();return this.rawToken&&this.expiresAt?e>=this.expiresAt:!0}isTokenExpiring(){var e;let r=new Date().getTime(),n=(e=this.eagerRefreshThresholdMillis)!==null&&e!==void 0?e:0;return this.rawToken&&this.expiresAt?this.expiresAt<=r+n:!0}getToken(e,r={}){if(typeof e=="object"&&(r=e,e=void 0),r=Object.assign({forceRefresh:!1},r),e){let n=e;this.getTokenAsync(r).then(i=>n(null,i),e);return}return this.getTokenAsync(r)}getCredentials(e){return M(this,null,function*(){switch(HM.extname(e)){case".json":{let n=yield Kb(e,"utf8"),i=JSON.parse(n),a=i.private_key,s=i.client_email;if(!a||!s)throw new Uu("private_key and client_email are required.","MISSING_CREDENTIALS");return{privateKey:a,clientEmail:s}}case".der":case".crt":case".pem":return{privateKey:yield Kb(e,"utf8")};case".p12":case".pfx":return em||(em=(yield Promise.resolve().then(()=>Gb())).getPem),{privateKey:yield em(e)};default:throw new Uu("Unknown certificate type. Type is determined based on file extension. Current supported extensions are *.json, *.pem, and *.p12.","UNKNOWN_CERTIFICATE_TYPE")}})}getTokenAsync(e){return M(this,null,function*(){if(this.inFlightRequest&&!e.forceRefresh)return this.inFlightRequest;try{return yield this.inFlightRequest=this.getTokenAsyncInner(e)}finally{this.inFlightRequest=void 0}})}getTokenAsyncInner(e){return M(this,null,function*(){if(this.isTokenExpiring()===!1&&e.forceRefresh===!1)return Promise.resolve(this.rawToken);if(!this.key&&!this.keyFile)throw new Error("No key or keyFile set.");if(!this.key&&this.keyFile){let r=yield this.getCredentials(this.keyFile);this.key=r.privateKey,this.iss=r.clientEmail||this.iss,r.clientEmail||this.ensureEmail()}return this.requestToken()})}ensureEmail(){if(!this.iss)throw new Uu("email is required.","MISSING_CREDENTIALS")}revokeToken(e){if(e){this.revokeTokenAsync().then(()=>e(),e);return}return this.revokeTokenAsync()}revokeTokenAsync(){return M(this,null,function*(){if(!this.accessToken)throw new Error("No token to revoke.");let e=WM+this.accessToken;yield jb.request({url:e}),this.configure({email:this.iss,sub:this.sub,key:this.key,keyFile:this.keyFile,scope:this.scope,additionalClaims:this.additionalClaims})})}configure(e={}){this.keyFile=e.keyFile,this.key=e.key,this.rawToken=void 0,this.iss=e.email||e.iss,this.sub=e.sub,this.additionalClaims=e.additionalClaims,typeof e.scope=="object"?this.scope=e.scope.join(" "):this.scope=e.scope,this.eagerRefreshThresholdMillis=e.eagerRefreshThresholdMillis}requestToken(){return M(this,null,function*(){let e=Math.floor(new Date().getTime()/1e3),r=this.additionalClaims||{},n=Object.assign({iss:this.iss,scope:this.scope,aud:Hb,exp:e+3600,iat:e,sub:this.sub},r),i=KM.sign({header:{alg:"RS256"},payload:n,secret:this.key});try{let a=yield jb.request({method:"POST",url:Hb,data:{grant_type:"urn:ietf:params:oauth:grant-type:jwt-bearer",assertion:i},headers:{"Content-Type":"application/x-www-form-urlencoded"},responseType:"json"});return this.rawToken=a.data,this.expiresAt=a.data.expires_in===null||a.data.expires_in===void 0?void 0:(e+a.data.expires_in)*1e3,this.rawToken}catch(a){this.rawToken=void 0,this.tokenExpires=void 0;let s=a.response&&a.response.data?a.response.data:{};if(s.error){let l=s.error_description?`: ${s.error_description}`:"";a.message=`${s.error}${l}`}throw a}})}};Fu.GoogleToken=Yb});var Qb=de((t7,zb)=>{"use strict";zb.exports=function(t){t.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}});var Jb=de((r7,Xb)=>{"use strict";Xb.exports=Gt;Gt.Node=Qs;Gt.create=Gt;function Gt(t){var e=this;if(e instanceof Gt||(e=new Gt),e.tail=null,e.head=null,e.length=0,t&&typeof t.forEach=="function")t.forEach(function(i){e.push(i)});else if(arguments.length>0)for(var r=0,n=arguments.length;r<n;r++)e.push(arguments[r]);return e}Gt.prototype.removeNode=function(t){if(t.list!==this)throw new Error("removing node which does not belong to this list");var e=t.next,r=t.prev;return e&&(e.prev=r),r&&(r.next=e),t===this.head&&(this.head=e),t===this.tail&&(this.tail=r),t.list.length--,t.next=null,t.prev=null,t.list=null,e};Gt.prototype.unshiftNode=function(t){if(t!==this.head){t.list&&t.list.removeNode(t);var e=this.head;t.list=this,t.next=e,e&&(e.prev=t),this.head=t,this.tail||(this.tail=t),this.length++}};Gt.prototype.pushNode=function(t){if(t!==this.tail){t.list&&t.list.removeNode(t);var e=this.tail;t.list=this,t.prev=e,e&&(e.next=t),this.tail=t,this.head||(this.head=t),this.length++}};Gt.prototype.push=function(){for(var t=0,e=arguments.length;t<e;t++)QM(this,arguments[t]);return this.length};Gt.prototype.unshift=function(){for(var t=0,e=arguments.length;t<e;t++)XM(this,arguments[t]);return this.length};Gt.prototype.pop=function(){if(!!this.tail){var t=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,t}};Gt.prototype.shift=function(){if(!!this.head){var t=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,t}};Gt.prototype.forEach=function(t,e){e=e||this;for(var r=this.head,n=0;r!==null;n++)t.call(e,r.value,n,this),r=r.next};Gt.prototype.forEachReverse=function(t,e){e=e||this;for(var r=this.tail,n=this.length-1;r!==null;n--)t.call(e,r.value,n,this),r=r.prev};Gt.prototype.get=function(t){for(var e=0,r=this.head;r!==null&&e<t;e++)r=r.next;if(e===t&&r!==null)return r.value};Gt.prototype.getReverse=function(t){for(var e=0,r=this.tail;r!==null&&e<t;e++)r=r.prev;if(e===t&&r!==null)return r.value};Gt.prototype.map=function(t,e){e=e||this;for(var r=new Gt,n=this.head;n!==null;)r.push(t.call(e,n.value,this)),n=n.next;return r};Gt.prototype.mapReverse=function(t,e){e=e||this;for(var r=new Gt,n=this.tail;n!==null;)r.push(t.call(e,n.value,this)),n=n.prev;return r};Gt.prototype.reduce=function(t,e){var r,n=this.head;if(arguments.length>1)r=e;else if(this.head)n=this.head.next,r=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=0;n!==null;i++)r=t(r,n.value,i),n=n.next;return r};Gt.prototype.reduceReverse=function(t,e){var r,n=this.tail;if(arguments.length>1)r=e;else if(this.tail)n=this.tail.prev,r=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=this.length-1;n!==null;i--)r=t(r,n.value,i),n=n.prev;return r};Gt.prototype.toArray=function(){for(var t=new Array(this.length),e=0,r=this.head;r!==null;e++)t[e]=r.value,r=r.next;return t};Gt.prototype.toArrayReverse=function(){for(var t=new Array(this.length),e=0,r=this.tail;r!==null;e++)t[e]=r.value,r=r.prev;return t};Gt.prototype.slice=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var r=new Gt;if(e<t||e<0)return r;t<0&&(t=0),e>this.length&&(e=this.length);for(var n=0,i=this.head;i!==null&&n<t;n++)i=i.next;for(;i!==null&&n<e;n++,i=i.next)r.push(i.value);return r};Gt.prototype.sliceReverse=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var r=new Gt;if(e<t||e<0)return r;t<0&&(t=0),e>this.length&&(e=this.length);for(var n=this.length,i=this.tail;i!==null&&n>e;n--)i=i.prev;for(;i!==null&&n>t;n--,i=i.prev)r.push(i.value);return r};Gt.prototype.splice=function(t,e,...r){t>this.length&&(t=this.length-1),t<0&&(t=this.length+t);for(var n=0,i=this.head;i!==null&&n<t;n++)i=i.next;for(var a=[],n=0;i&&n<e;n++)a.push(i.value),i=this.removeNode(i);i===null&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(var n=0;n<r.length;n++)i=zM(this,i,r[n]);return a};Gt.prototype.reverse=function(){for(var t=this.head,e=this.tail,r=t;r!==null;r=r.prev){var n=r.prev;r.prev=r.next,r.next=n}return this.head=e,this.tail=t,this};function zM(t,e,r){var n=e===t.head?new Qs(r,null,e,t):new Qs(r,e,e.next,t);return n.next===null&&(t.tail=n),n.prev===null&&(t.head=n),t.length++,n}function QM(t,e){t.tail=new Qs(e,t.tail,null,t),t.head||(t.head=t.tail),t.length++}function XM(t,e){t.head=new Qs(e,null,t.head,t),t.tail||(t.tail=t.head),t.length++}function Qs(t,e,r,n){if(!(this instanceof Qs))return new Qs(t,e,r,n);this.list=n,this.value=t,e?(e.next=this,this.prev=e):this.prev=null,r?(r.prev=this,this.next=r):this.next=null}try{Qb()(Gt)}catch(t){}});var ix=de((n7,nx)=>{"use strict";var JM=Jb(),Xs=Symbol("max"),Aa=Symbol("length"),ml=Symbol("lengthCalculator"),qu=Symbol("allowStale"),Js=Symbol("maxAge"),ka=Symbol("dispose"),Zb=Symbol("noDisposeOnSet"),Hr=Symbol("lruList"),Ti=Symbol("cache"),$b=Symbol("updateAgeOnGet"),tm=()=>1,ex=class{constructor(e){if(typeof e=="number"&&(e={max:e}),e||(e={}),e.max&&(typeof e.max!="number"||e.max<0))throw new TypeError("max must be a non-negative number");let r=this[Xs]=e.max||1/0,n=e.length||tm;if(this[ml]=typeof n!="function"?tm:n,this[qu]=e.stale||!1,e.maxAge&&typeof e.maxAge!="number")throw new TypeError("maxAge must be a number");this[Js]=e.maxAge||0,this[ka]=e.dispose,this[Zb]=e.noDisposeOnSet||!1,this[$b]=e.updateAgeOnGet||!1,this.reset()}set max(e){if(typeof e!="number"||e<0)throw new TypeError("max must be a non-negative number");this[Xs]=e||1/0,Gu(this)}get max(){return this[Xs]}set allowStale(e){this[qu]=!!e}get allowStale(){return this[qu]}set maxAge(e){if(typeof e!="number")throw new TypeError("maxAge must be a non-negative number");this[Js]=e,Gu(this)}get maxAge(){return this[Js]}set lengthCalculator(e){typeof e!="function"&&(e=tm),e!==this[ml]&&(this[ml]=e,this[Aa]=0,this[Hr].forEach(r=>{r.length=this[ml](r.value,r.key),this[Aa]+=r.length})),Gu(this)}get lengthCalculator(){return this[ml]}get length(){return this[Aa]}get itemCount(){return this[Hr].length}rforEach(e,r){r=r||this;for(let n=this[Hr].tail;n!==null;){let i=n.prev;rx(this,e,n,r),n=i}}forEach(e,r){r=r||this;for(let n=this[Hr].head;n!==null;){let i=n.next;rx(this,e,n,r),n=i}}keys(){return this[Hr].toArray().map(e=>e.key)}values(){return this[Hr].toArray().map(e=>e.value)}reset(){this[ka]&&this[Hr]&&this[Hr].length&&this[Hr].forEach(e=>this[ka](e.key,e.value)),this[Ti]=new Map,this[Hr]=new JM,this[Aa]=0}dump(){return this[Hr].map(e=>Gd(this,e)?!1:{k:e.key,v:e.value,e:e.now+(e.maxAge||0)}).toArray().filter(e=>e)}dumpLru(){return this[Hr]}set(e,r,n){if(n=n||this[Js],n&&typeof n!="number")throw new TypeError("maxAge must be a number");let i=n?Date.now():0,a=this[ml](r,e);if(this[Ti].has(e)){if(a>this[Xs])return yl(this,this[Ti].get(e)),!1;let u=this[Ti].get(e).value;return this[ka]&&(this[Zb]||this[ka](e,u.value)),u.now=i,u.maxAge=n,u.value=r,this[Aa]+=a-u.length,u.length=a,this.get(e),Gu(this),!0}let s=new tx(e,r,a,i,n);return s.length>this[Xs]?(this[ka]&&this[ka](e,r),!1):(this[Aa]+=s.length,this[Hr].unshift(s),this[Ti].set(e,this[Hr].head),Gu(this),!0)}has(e){if(!this[Ti].has(e))return!1;let r=this[Ti].get(e).value;return!Gd(this,r)}get(e){return rm(this,e,!0)}peek(e){return rm(this,e,!1)}pop(){let e=this[Hr].tail;return e?(yl(this,e),e.value):null}del(e){yl(this,this[Ti].get(e))}load(e){this.reset();let r=Date.now();for(let n=e.length-1;n>=0;n--){let i=e[n],a=i.e||0;if(a===0)this.set(i.k,i.v);else{let s=a-r;s>0&&this.set(i.k,i.v,s)}}}prune(){this[Ti].forEach((e,r)=>rm(this,r,!1))}},rm=(t,e,r)=>{let n=t[Ti].get(e);if(n){let i=n.value;if(Gd(t,i)){if(yl(t,n),!t[qu])return}else r&&(t[$b]&&(n.value.now=Date.now()),t[Hr].unshiftNode(n));return i.value}},Gd=(t,e)=>{if(!e||!e.maxAge&&!t[Js])return!1;let r=Date.now()-e.now;return e.maxAge?r>e.maxAge:t[Js]&&r>t[Js]},Gu=t=>{if(t[Aa]>t[Xs])for(let e=t[Hr].tail;t[Aa]>t[Xs]&&e!==null;){let r=e.prev;yl(t,e),e=r}},yl=(t,e)=>{if(e){let r=e.value;t[ka]&&t[ka](r.key,r.value),t[Aa]-=r.length,t[Ti].delete(r.key),t[Hr].removeNode(e)}},tx=class{constructor(e,r,n,i,a){this.key=e,this.value=r,this.length=n,this.now=i,this.maxAge=a||0}},rx=(t,e,r,n)=>{let i=r.value;Gd(t,i)&&(yl(t,r),t[qu]||(i=void 0)),i&&e.call(n,i.value,i.key,t)};nx.exports=ex});var nm=de(jd=>{"use strict";Object.defineProperty(jd,"__esModule",{value:!0});jd.JWTAccess=void 0;var ZM=X0(),$M=ix(),ax={alg:"RS256",typ:"JWT"},Vd=class{constructor(e,r,n,i){this.cache=new $M({max:500,maxAge:60*60*1e3}),this.email=e,this.key=r,this.keyId=n,this.eagerRefreshThresholdMillis=i!=null?i:5*60*1e3}getCachedKey(e,r){let n=e;if(r&&Array.isArray(r)&&r.length?n=e?`${e}_${r.join("_")}`:`${r.join("_")}`:typeof r=="string"&&(n=e?`${e}_${r}`:r),!n)throw Error("Scopes or url must be provided");return n}getRequestHeaders(e,r,n){let i=this.getCachedKey(e,n),a=this.cache.get(i),s=Date.now();if(a&&a.expiration-s>this.eagerRefreshThresholdMillis)return a.headers;let l=Math.floor(Date.now()/1e3),u=Vd.getExpirationTime(l),f;if(Array.isArray(n)&&(n=n.join(" ")),n?f={iss:this.email,sub:this.email,scope:n,exp:u,iat:l}:f={iss:this.email,sub:this.email,aud:e,exp:u,iat:l},r){for(let m in f)if(r[m])throw new Error(`The '${m}' property is not allowed when passing additionalClaims. This claim is included in the JWT by default.`)}let d=this.keyId?gn(qr({},ax),{kid:this.keyId}):ax,h=Object.assign(f,r),y={Authorization:`Bearer ${ZM.sign({header:d,payload:h,secret:this.key})}`};return this.cache.set(i,{expiration:u*1e3,headers:y}),y}static getExpirationTime(e){return e+3600}fromJSON(e){if(!e)throw new Error("Must pass in a JSON object containing the service account auth settings.");if(!e.client_email)throw new Error("The incoming JSON object does not contain a client_email field");if(!e.private_key)throw new Error("The incoming JSON object does not contain a private_key field");this.email=e.client_email,this.key=e.private_key,this.keyId=e.private_key_id,this.projectId=e.project_id}fromStream(e,r){if(r)this.fromStreamAsync(e).then(()=>r(),r);else return this.fromStreamAsync(e)}fromStreamAsync(e){return new Promise((r,n)=>{e||n(new Error("Must pass in a stream containing the service account auth settings."));let i="";e.setEncoding("utf8").on("data",a=>i+=a).on("error",n).on("end",()=>{try{let a=JSON.parse(i);this.fromJSON(a),r()}catch(a){n(a)}})})}};jd.JWTAccess=Vd});var im=de(Hd=>{"use strict";Object.defineProperty(Hd,"__esModule",{value:!0});Hd.JWT=void 0;var sx=Wb(),eU=nm(),tU=Fs(),Kd=class extends tU.OAuth2Client{constructor(e,r,n,i,a,s){let l=e&&typeof e=="object"?e:{email:e,keyFile:r,key:n,keyId:s,scopes:i,subject:a};super({eagerRefreshThresholdMillis:l.eagerRefreshThresholdMillis,forceRefreshOnFailure:l.forceRefreshOnFailure});this.email=l.email,this.keyFile=l.keyFile,this.key=l.key,this.keyId=l.keyId,this.scopes=l.scopes,this.subject=l.subject,this.additionalClaims=l.additionalClaims,this.credentials={refresh_token:"jwt-placeholder",expiry_date:1}}createScoped(e){return new Kd({email:this.email,keyFile:this.keyFile,key:this.key,keyId:this.keyId,scopes:e,subject:this.subject,additionalClaims:this.additionalClaims})}getRequestMetadataAsync(e){var r=n=>super[n];return M(this,null,function*(){e=this.defaultServicePath?`https://${this.defaultServicePath}/`:e;let i=!this.hasUserScopes()&&e||this.useJWTAccessWithScope&&this.hasAnyScopes();if(!this.apiKey&&i)if(this.additionalClaims&&this.additionalClaims.target_audience){let{tokens:a}=yield this.refreshToken();return{headers:this.addSharedMetadataHeaders({Authorization:`Bearer ${a.id_token}`})}}else{this.access||(this.access=new eU.JWTAccess(this.email,this.key,this.keyId,this.eagerRefreshThresholdMillis));let a;this.hasUserScopes()?a=this.scopes:e||(a=this.defaultScopes);let s=yield this.access.getRequestHeaders(e!=null?e:void 0,this.additionalClaims,this.useJWTAccessWithScope?a:void 0);return{headers:this.addSharedMetadataHeaders(s)}}else return this.hasAnyScopes()||this.apiKey?r("getRequestMetadataAsync").call(this,e):{headers:{}}})}fetchIdToken(e){return M(this,null,function*(){let r=new sx.GoogleToken({iss:this.email,sub:this.subject,scope:this.scopes||this.defaultScopes,keyFile:this.keyFile,key:this.key,additionalClaims:{target_audience:e}});if(yield r.getToken({forceRefresh:!0}),!r.idToken)throw new Error("Unknown error: Failed to fetch ID token");return r.idToken})}hasUserScopes(){return this.scopes?this.scopes.length>0:!1}hasAnyScopes(){return!!(this.scopes&&this.scopes.length>0||this.defaultScopes&&this.defaultScopes.length>0)}authorize(e){if(e)this.authorizeAsync().then(r=>e(null,r),e);else return this.authorizeAsync()}authorizeAsync(){return M(this,null,function*(){let e=yield this.refreshToken();if(!e)throw new Error("No result returned");return this.credentials=e.tokens,this.credentials.refresh_token="jwt-placeholder",this.key=this.gtoken.key,this.email=this.gtoken.iss,e.tokens})}refreshTokenNoCache(e){return M(this,null,function*(){let r=this.createGToken(),i={access_token:(yield r.getToken({forceRefresh:this.isTokenExpiring()})).access_token,token_type:"Bearer",expiry_date:r.expiresAt,id_token:r.idToken};return this.emit("tokens",i),{res:null,tokens:i}})}createGToken(){return this.gtoken||(this.gtoken=new sx.GoogleToken({iss:this.email,sub:this.subject,scope:this.scopes||this.defaultScopes,keyFile:this.keyFile,key:this.key,additionalClaims:this.additionalClaims})),this.gtoken}fromJSON(e){if(!e)throw new Error("Must pass in a JSON object containing the service account auth settings.");if(!e.client_email)throw new Error("The incoming JSON object does not contain a client_email field");if(!e.private_key)throw new Error("The incoming JSON object does not contain a private_key field");this.email=e.client_email,this.key=e.private_key,this.keyId=e.private_key_id,this.projectId=e.project_id,this.quotaProjectId=e.quota_project_id}fromStream(e,r){if(r)this.fromStreamAsync(e).then(()=>r(),r);else return this.fromStreamAsync(e)}fromStreamAsync(e){return new Promise((r,n)=>{if(!e)throw new Error("Must pass in a stream containing the service account auth settings.");let i="";e.setEncoding("utf8").on("error",n).on("data",a=>i+=a).on("end",()=>{try{let a=JSON.parse(i);this.fromJSON(a),r()}catch(a){n(a)}})})}fromAPIKey(e){if(typeof e!="string")throw new Error("Must provide an API Key string.");this.apiKey=e}getCredentials(){return M(this,null,function*(){if(this.key)return{private_key:this.key,client_email:this.email};if(this.keyFile){let r=yield this.createGToken().getCredentials(this.keyFile);return{private_key:r.privateKey,client_email:r.clientEmail}}throw new Error("A key or a keyFile must be provided to getCredentials.")})}};Hd.JWT=Kd});var am=de(Yd=>{"use strict";Object.defineProperty(Yd,"__esModule",{value:!0});Yd.UserRefreshClient=void 0;var rU=Fs(),ox=class extends rU.OAuth2Client{constructor(e,r,n,i,a){let s=e&&typeof e=="object"?e:{clientId:e,clientSecret:r,refreshToken:n,eagerRefreshThresholdMillis:i,forceRefreshOnFailure:a};super({clientId:s.clientId,clientSecret:s.clientSecret,eagerRefreshThresholdMillis:s.eagerRefreshThresholdMillis,forceRefreshOnFailure:s.forceRefreshOnFailure});this._refreshToken=s.refreshToken,this.credentials.refresh_token=s.refreshToken}refreshTokenNoCache(e){var r=n=>super[n];return M(this,null,function*(){return r("refreshTokenNoCache").call(this,this._refreshToken)})}fromJSON(e){if(!e)throw new Error("Must pass in a JSON object containing the user refresh token");if(e.type!=="authorized_user")throw new Error('The incoming JSON object does not have the "authorized_user" type');if(!e.client_id)throw new Error("The incoming JSON object does not contain a client_id field");if(!e.client_secret)throw new Error("The incoming JSON object does not contain a client_secret field");if(!e.refresh_token)throw new Error("The incoming JSON object does not contain a refresh_token field");this._clientId=e.client_id,this._clientSecret=e.client_secret,this._refreshToken=e.refresh_token,this.credentials.refresh_token=e.refresh_token,this.quotaProjectId=e.quota_project_id}fromStream(e,r){if(r)this.fromStreamAsync(e).then(()=>r(),r);else return this.fromStreamAsync(e)}fromStreamAsync(e){return M(this,null,function*(){return new Promise((r,n)=>{if(!e)return n(new Error("Must pass in a stream containing the user refresh token."));let i="";e.setEncoding("utf8").on("error",n).on("data",a=>i+=a).on("end",()=>{try{let a=JSON.parse(i);return this.fromJSON(a),r()}catch(a){return n(a)}})})})}};Yd.UserRefreshClient=ox});var cx=de(vl=>{"use strict";Object.defineProperty(vl,"__esModule",{value:!0});vl.getErrorFromOAuthErrorResponse=vl.OAuthClientAuthHandler=void 0;var lx=require("querystring"),nU=Wo(),iU=["PUT","POST","PATCH"],ux=class{constructor(e){this.clientAuthentication=e,this.crypto=(0,nU.createCrypto)()}applyClientAuthenticationOptions(e,r){this.injectAuthenticatedHeaders(e,r),r||this.injectAuthenticatedRequestBody(e)}injectAuthenticatedHeaders(e,r){var n;if(r)e.headers=e.headers||{},Object.assign(e.headers,{Authorization:`Bearer ${r}}`});else if(((n=this.clientAuthentication)===null||n===void 0?void 0:n.confidentialClientType)==="basic"){e.headers=e.headers||{};let i=this.clientAuthentication.clientId,a=this.clientAuthentication.clientSecret||"",s=this.crypto.encodeBase64StringUtf8(`${i}:${a}`);Object.assign(e.headers,{Authorization:`Basic ${s}`})}}injectAuthenticatedRequestBody(e){var r;if(((r=this.clientAuthentication)===null||r===void 0?void 0:r.confidentialClientType)==="request-body"){let n=(e.method||"GET").toUpperCase();if(iU.indexOf(n)!==-1){let i,a=e.headers||{};for(let s in a)if(s.toLowerCase()==="content-type"&&a[s]){i=a[s].toLowerCase();break}if(i==="application/x-www-form-urlencoded"){e.data=e.data||"";let s=lx.parse(e.data);Object.assign(s,{client_id:this.clientAuthentication.clientId,client_secret:this.clientAuthentication.clientSecret||""}),e.data=lx.stringify(s)}else if(i==="application/json")e.data=e.data||{},Object.assign(e.data,{client_id:this.clientAuthentication.clientId,client_secret:this.clientAuthentication.clientSecret||""});else throw new Error(`${i} content-types are not supported with ${this.clientAuthentication.confidentialClientType} client authentication`)}else throw new Error(`${n} HTTP method does not support ${this.clientAuthentication.confidentialClientType} client authentication`)}}};vl.OAuthClientAuthHandler=ux;function aU(t,e){let r=t.error,n=t.error_description,i=t.error_uri,a=`Error code ${r}`;typeof n!="undefined"&&(a+=`: ${n}`),typeof i!="undefined"&&(a+=` - ${i}`);let s=new Error(a);if(e){let l=Object.keys(e);e.stack&&l.push("stack"),l.forEach(u=>{u!=="message"&&Object.defineProperty(s,u,{value:e[u],writable:!1,enumerable:!0})})}return s}vl.getErrorFromOAuthErrorResponse=aU});var sm=de(Wd=>{"use strict";Object.defineProperty(Wd,"__esModule",{value:!0});Wd.StsCredentials=void 0;var sU=Ho(),oU=require("querystring"),lU=yu(),fx=cx(),dx=class extends fx.OAuthClientAuthHandler{constructor(e,r){super(r);this.tokenExchangeEndpoint=e,this.transporter=new lU.DefaultTransporter}exchangeToken(e,r,n){return M(this,null,function*(){var i,a,s;let l={grant_type:e.grantType,resource:e.resource,audience:e.audience,scope:(i=e.scope)===null||i===void 0?void 0:i.join(" "),requested_token_type:e.requestedTokenType,subject_token:e.subjectToken,subject_token_type:e.subjectTokenType,actor_token:(a=e.actingParty)===null||a===void 0?void 0:a.actorToken,actor_token_type:(s=e.actingParty)===null||s===void 0?void 0:s.actorTokenType,options:n&&JSON.stringify(n)};Object.keys(l).forEach(d=>{typeof l[d]=="undefined"&&delete l[d]});let u={"Content-Type":"application/x-www-form-urlencoded"};Object.assign(u,r||{});let f={url:this.tokenExchangeEndpoint,method:"POST",headers:u,data:oU.stringify(l),responseType:"json"};this.applyClientAuthenticationOptions(f);try{let d=yield this.transporter.request(f),h=d.data;return h.res=d,h}catch(d){throw d instanceof sU.GaxiosError&&d.response?(0,fx.getErrorFromOAuthErrorResponse)(d.response.data,d):d}})}};Wd.StsCredentials=dx});var _l=de(Nn=>{"use strict";Object.defineProperty(Nn,"__esModule",{value:!0});Nn.BaseExternalAccountClient=Nn.CLOUD_RESOURCE_MANAGER=Nn.EXTERNAL_ACCOUNT_TYPE=Nn.EXPIRATION_TIME_OFFSET=void 0;var uU=require("stream"),cU=vu(),fU=sm(),dU="urn:ietf:params:oauth:grant-type:token-exchange",hU="urn:ietf:params:oauth:token-type:access_token",om="https://www.googleapis.com/auth/cloud-platform",zd="\\.googleapis\\.com$",lm="[^\\.\\s\\/\\\\]+";Nn.EXPIRATION_TIME_OFFSET=5*60*1e3;Nn.EXTERNAL_ACCOUNT_TYPE="external_account";Nn.CLOUD_RESOURCE_MANAGER="https://cloudresourcemanager.googleapis.com/v1/projects/";var pU="//iam.googleapis.com/locations/[^/]+/workforcePools/[^/]+/providers/.+",hx=class extends cU.AuthClient{constructor(e,r){super();if(e.type!==Nn.EXTERNAL_ACCOUNT_TYPE)throw new Error(`Expected "${Nn.EXTERNAL_ACCOUNT_TYPE}" type but received "${e.type}"`);if(this.clientAuth=e.client_id?{confidentialClientType:"basic",clientId:e.client_id,clientSecret:e.client_secret}:void 0,!this.validateGoogleAPIsUrl("sts",e.token_url))throw new Error(`"${e.token_url}" is not a valid token url.`);this.stsCredential=new fU.StsCredentials(e.token_url,this.clientAuth),this.scopes=[om],this.cachedAccessToken=null,this.audience=e.audience,this.subjectTokenType=e.subject_token_type,this.quotaProjectId=e.quota_project_id,this.workforcePoolUserProject=e.workforce_pool_user_project;let n=new RegExp(pU);if(this.workforcePoolUserProject&&!this.audience.match(n))throw new Error("workforcePoolUserProject should not be set for non-workforce pool credentials.");if(typeof e.service_account_impersonation_url!="undefined"&&!this.validateGoogleAPIsUrl("iamcredentials",e.service_account_impersonation_url))throw new Error(`"${e.service_account_impersonation_url}" is not a valid service account impersonation url.`);this.serviceAccountImpersonationUrl=e.service_account_impersonation_url,typeof(r==null?void 0:r.eagerRefreshThresholdMillis)!="number"?this.eagerRefreshThresholdMillis=Nn.EXPIRATION_TIME_OFFSET:this.eagerRefreshThresholdMillis=r.eagerRefreshThresholdMillis,this.forceRefreshOnFailure=!!(r==null?void 0:r.forceRefreshOnFailure),this.projectId=null,this.projectNumber=this.getProjectNumber(this.audience)}getServiceAccountEmail(){var e;if(this.serviceAccountImpersonationUrl){let n=/serviceAccounts\/(?<email>[^:]+):generateAccessToken$/.exec(this.serviceAccountImpersonationUrl);return((e=n==null?void 0:n.groups)===null||e===void 0?void 0:e.email)||null}return null}setCredentials(e){super.setCredentials(e),this.cachedAccessToken=e}getAccessToken(){return M(this,null,function*(){return(!this.cachedAccessToken||this.isExpired(this.cachedAccessToken))&&(yield this.refreshAccessTokenAsync()),{token:this.cachedAccessToken.access_token,res:this.cachedAccessToken.res}})}getRequestHeaders(){return M(this,null,function*(){let r={Authorization:`Bearer ${(yield this.getAccessToken()).token}`};return this.addSharedMetadataHeaders(r)})}request(e,r){if(r)this.requestAsync(e).then(n=>r(null,n),n=>r(n,n.response));else return this.requestAsync(e)}getProjectId(){return M(this,null,function*(){let e=this.projectNumber||this.workforcePoolUserProject;if(this.projectId)return this.projectId;if(e){let r=yield this.getRequestHeaders(),n=yield this.transporter.request({headers:r,url:`${Nn.CLOUD_RESOURCE_MANAGER}${e}`,responseType:"json"});return this.projectId=n.data.projectId,this.projectId}return null})}requestAsync(e,r=!1){return M(this,null,function*(){let n;try{let i=yield this.getRequestHeaders();e.headers=e.headers||{},i&&i["x-goog-user-project"]&&(e.headers["x-goog-user-project"]=i["x-goog-user-project"]),i&&i.Authorization&&(e.headers.Authorization=i.Authorization),n=yield this.transporter.request(e)}catch(i){let a=i.response;if(a){let s=a.status,l=a.config.data instanceof uU.Readable;if(!r&&(s===401||s===403)&&!l&&this.forceRefreshOnFailure)return yield this.refreshAccessTokenAsync(),yield this.requestAsync(e,!0)}throw i}return n})}refreshAccessTokenAsync(){return M(this,null,function*(){let e=yield this.retrieveSubjectToken(),r={grantType:dU,audience:this.audience,requestedTokenType:hU,subjectToken:e,subjectTokenType:this.subjectTokenType,scope:this.serviceAccountImpersonationUrl?[om]:this.getScopesArray()},n=!this.clientAuth&&this.workforcePoolUserProject?{userProject:this.workforcePoolUserProject}:void 0,i=yield this.stsCredential.exchangeToken(r,void 0,n);return this.serviceAccountImpersonationUrl?this.cachedAccessToken=yield this.getImpersonatedAccessToken(i.access_token):i.expires_in?this.cachedAccessToken={access_token:i.access_token,expiry_date:new Date().getTime()+i.expires_in*1e3,res:i.res}:this.cachedAccessToken={access_token:i.access_token,res:i.res},this.credentials={},Object.assign(this.credentials,this.cachedAccessToken),delete this.credentials.res,this.emit("tokens",{refresh_token:null,expiry_date:this.cachedAccessToken.expiry_date,access_token:this.cachedAccessToken.access_token,token_type:"Bearer",id_token:null}),this.cachedAccessToken})}getProjectNumber(e){let r=e.match(/\/projects\/([^/]+)/);return r?r[1]:null}getImpersonatedAccessToken(e){return M(this,null,function*(){let r={url:this.serviceAccountImpersonationUrl,method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},data:{scope:this.getScopesArray()},responseType:"json"},n=yield this.transporter.request(r),i=n.data;return{access_token:i.accessToken,expiry_date:new Date(i.expireTime).getTime(),res:n}})}isExpired(e){let r=new Date().getTime();return e.expiry_date?r>=e.expiry_date-this.eagerRefreshThresholdMillis:!1}getScopesArray(){return typeof this.scopes=="string"?[this.scopes]:typeof this.scopes=="undefined"?[om]:this.scopes}validateGoogleAPIsUrl(e,r){let n;try{n=new URL(r)}catch(s){return!1}let i=n.hostname;if(n.protocol!=="https:")return!1;let a=[new RegExp("^"+lm+"\\."+e+zd),new RegExp("^"+e+zd),new RegExp("^"+e+"\\."+lm+zd),new RegExp("^"+lm+"\\-"+e+zd)];for(let s of a)if(i.match(s))return!0;return!1}};Nn.BaseExternalAccountClient=hx});var pm=de(Qd=>{"use strict";var um,cm,fm;Object.defineProperty(Qd,"__esModule",{value:!0});Qd.IdentityPoolClient=void 0;var dm=require("fs"),hm=require("util"),gU=_l(),mU=(0,hm.promisify)((um=dm.readFile)!==null&&um!==void 0?um:()=>{}),yU=(0,hm.promisify)((cm=dm.realpath)!==null&&cm!==void 0?cm:()=>{}),vU=(0,hm.promisify)((fm=dm.lstat)!==null&&fm!==void 0?fm:()=>{}),px=class extends gU.BaseExternalAccountClient{constructor(e,r){var n,i;super(e,r);if(this.file=e.credential_source.file,this.url=e.credential_source.url,this.headers=e.credential_source.headers,!this.file&&!this.url)throw new Error('No valid Identity Pool "credential_source" provided');if(this.formatType=((n=e.credential_source.format)===null||n===void 0?void 0:n.type)||"text",this.formatSubjectTokenFieldName=(i=e.credential_source.format)===null||i===void 0?void 0:i.subject_token_field_name,this.formatType!=="json"&&this.formatType!=="text")throw new Error(`Invalid credential_source format "${this.formatType}"`);if(this.formatType==="json"&&!this.formatSubjectTokenFieldName)throw new Error("Missing subject_token_field_name for JSON credential_source format")}retrieveSubjectToken(){return M(this,null,function*(){return this.file?yield this.getTokenFromFile(this.file,this.formatType,this.formatSubjectTokenFieldName):yield this.getTokenFromUrl(this.url,this.formatType,this.formatSubjectTokenFieldName,this.headers)})}getTokenFromFile(e,r,n){return M(this,null,function*(){try{if(e=yield yU(e),!(yield vU(e)).isFile())throw new Error}catch(s){throw s instanceof Error&&(s.message=`The file at ${e} does not exist, or it is not a file. ${s.message}`),s}let i,a=yield mU(e,{encoding:"utf8"});if(r==="text"?i=a:r==="json"&&n&&(i=JSON.parse(a)[n]),!i)throw new Error("Unable to parse the subject_token from the credential_source file");return i})}getTokenFromUrl(e,r,n,i){return M(this,null,function*(){let a={url:e,method:"GET",headers:i,responseType:r},s;if(r==="text"?s=(yield this.transporter.request(a)).data:r==="json"&&n&&(s=(yield this.transporter.request(a)).data[n]),!s)throw new Error("Unable to parse the subject_token from the credential_source URL");return s})}};Qd.IdentityPoolClient=px});var vx=de(Xd=>{"use strict";Object.defineProperty(Xd,"__esModule",{value:!0});Xd.AwsRequestSigner=void 0;var gx=Wo(),mx="AWS4-HMAC-SHA256",_U="aws4_request",yx=class{constructor(e,r){this.getCredentials=e,this.region=r,this.crypto=(0,gx.createCrypto)()}getRequestOptions(e){return M(this,null,function*(){if(!e.url)throw new Error('"url" is required in "amzOptions"');let r=typeof e.data=="object"?JSON.stringify(e.data):e.data,n=e.url,i=e.method||"GET",a=e.body||r,s=e.headers,l=yield this.getCredentials(),u=new URL(n),f=yield EU({crypto:this.crypto,host:u.host,canonicalUri:u.pathname,canonicalQuerystring:u.search.substr(1),method:i,region:this.region,securityCredentials:l,requestPayload:a,additionalAmzHeaders:s}),d=Object.assign(f.amzDate?{"x-amz-date":f.amzDate}:{},{Authorization:f.authorizationHeader,host:u.host},s||{});l.token&&Object.assign(d,{"x-amz-security-token":l.token});let h={url:n,method:i,headers:d};return typeof a!="undefined"&&(h.body=a),h})}};Xd.AwsRequestSigner=yx;function Vu(t,e,r){return M(this,null,function*(){return yield t.signWithHmacSha256(e,r)})}function wU(t,e,r,n,i){return M(this,null,function*(){let a=yield Vu(t,`AWS4${e}`,r),s=yield Vu(t,a,n),l=yield Vu(t,s,i);return yield Vu(t,l,"aws4_request")})}function EU(t){return M(this,null,function*(){let e=t.additionalAmzHeaders||{},r=t.requestPayload||"",n=t.host.split(".")[0],i=new Date,a=i.toISOString().replace(/[-:]/g,"").replace(/\.[0-9]+/,""),s=i.toISOString().replace(/[-]/g,"").replace(/T.*/,""),l={};Object.keys(e).forEach(k=>{l[k.toLowerCase()]=e[k]}),t.securityCredentials.token&&(l["x-amz-security-token"]=t.securityCredentials.token);let u=Object.assign({host:t.host},l.date?{}:{"x-amz-date":a},l),f="",d=Object.keys(u).sort();d.forEach(k=>{f+=`${k}:${u[k]}
`});let h=d.join(";"),g=yield t.crypto.sha256DigestHex(r),y=`${t.method}
${t.canonicalUri}
${t.canonicalQuerystring}
${f}
${h}
${g}`,m=`${s}/${t.region}/${n}/${_U}`,_=`${mx}
${a}
${m}
`+(yield t.crypto.sha256DigestHex(y)),E=yield wU(t.crypto,t.securityCredentials.secretAccessKey,s,t.region,n),w=yield Vu(t.crypto,E,_),b=`${mx} Credential=${t.securityCredentials.accessKeyId}/${m}, SignedHeaders=${h}, Signature=${(0,gx.fromArrayBufferToHex)(w)}`;return{amzDate:l.date?void 0:a,authorizationHeader:b,canonicalQuerystring:t.canonicalQuerystring}})}});var gm=de(Jd=>{"use strict";Object.defineProperty(Jd,"__esModule",{value:!0});Jd.AwsClient=void 0;var CU=vx(),bU=_l(),_x=class extends bU.BaseExternalAccountClient{constructor(e,r){var n;super(e,r);this.environmentId=e.credential_source.environment_id,this.regionUrl=e.credential_source.region_url,this.securityCredentialsUrl=e.credential_source.url,this.regionalCredVerificationUrl=e.credential_source.regional_cred_verification_url,this.imdsV2SessionTokenUrl=e.credential_source.imdsv2_session_token_url;let i=(n=this.environmentId)===null||n===void 0?void 0:n.match(/^(aws)(\d+)$/);if(!i||!this.regionalCredVerificationUrl)throw new Error('No valid AWS "credential_source" provided');if(parseInt(i[2],10)!==1)throw new Error(`aws version "${i[2]}" is not supported in the current build.`);this.awsRequestSigner=null,this.region=""}retrieveSubjectToken(){return M(this,null,function*(){if(!this.awsRequestSigner){let i={};this.imdsV2SessionTokenUrl&&(i["x-aws-ec2-metadata-token"]=yield this.getImdsV2SessionToken()),this.region=yield this.getAwsRegion(i),this.awsRequestSigner=new CU.AwsRequestSigner(()=>M(this,null,function*(){if(process.env.AWS_ACCESS_KEY_ID&&process.env.AWS_SECRET_ACCESS_KEY)return{accessKeyId:process.env.AWS_ACCESS_KEY_ID,secretAccessKey:process.env.AWS_SECRET_ACCESS_KEY,token:process.env.AWS_SESSION_TOKEN};let a=yield this.getAwsRoleName(i),s=yield this.getAwsSecurityCredentials(a,i);return{accessKeyId:s.AccessKeyId,secretAccessKey:s.SecretAccessKey,token:s.Token}}),this.region)}let e=yield this.awsRequestSigner.getRequestOptions({url:this.regionalCredVerificationUrl.replace("{region}",this.region),method:"POST"}),r=[],n=Object.assign({"x-goog-cloud-target-resource":this.audience},e.headers);for(let i in n)r.push({key:i,value:n[i]});return encodeURIComponent(JSON.stringify({url:e.url,method:e.method,headers:r}))})}getImdsV2SessionToken(){return M(this,null,function*(){let e={url:this.imdsV2SessionTokenUrl,method:"PUT",responseType:"text",headers:{"x-aws-ec2-metadata-token-ttl-seconds":"300"}};return(yield this.transporter.request(e)).data})}getAwsRegion(e){return M(this,null,function*(){if(process.env.AWS_REGION||process.env.AWS_DEFAULT_REGION)return process.env.AWS_REGION||process.env.AWS_DEFAULT_REGION;if(!this.regionUrl)throw new Error('Unable to determine AWS region due to missing "options.credential_source.region_url"');let r={url:this.regionUrl,method:"GET",responseType:"text",headers:e},n=yield this.transporter.request(r);return n.data.substr(0,n.data.length-1)})}getAwsRoleName(e){return M(this,null,function*(){if(!this.securityCredentialsUrl)throw new Error('Unable to determine AWS role name due to missing "options.credential_source.url"');let r={url:this.securityCredentialsUrl,method:"GET",responseType:"text",headers:e};return(yield this.transporter.request(r)).data})}getAwsSecurityCredentials(e,r){return M(this,null,function*(){return(yield this.transporter.request({url:`${this.securityCredentialsUrl}/${e}`,responseType:"json",headers:r})).data})}};Jd.AwsClient=_x});var mm=de(Zd=>{"use strict";Object.defineProperty(Zd,"__esModule",{value:!0});Zd.ExternalAccountClient=void 0;var xU=_l(),SU=pm(),TU=gm(),wx=class{constructor(){throw new Error("ExternalAccountClients should be initialized via: ExternalAccountClient.fromJSON(), directly via explicit constructors, eg. new AwsClient(options), new IdentityPoolClient(options) or via new GoogleAuth(options).getClient()")}static fromJSON(e,r){var n;return e&&e.type===xU.EXTERNAL_ACCOUNT_TYPE?((n=e.credential_source)===null||n===void 0?void 0:n.environment_id)?new TU.AwsClient(e,r):new SU.IdentityPoolClient(e,r):null}};Zd.ExternalAccountClient=wx});var bx=de(El=>{"use strict";Object.defineProperty(El,"__esModule",{value:!0});El.GoogleAuth=El.CLOUD_SDK_CLIENT_ID=void 0;var AU=require("child_process"),ju=require("fs"),ym=Uf(),kU=require("os"),vm=require("path"),IU=Wo(),RU=yu(),NU=U0(),BU=F0(),DU=q0(),Zs=im(),Ex=am(),Cx=mm(),wl=_l();El.CLOUD_SDK_CLIENT_ID="764086051850-6qr4p6gpi6hn506pt8ejuq83di341hur.apps.googleusercontent.com";var _m=class{constructor(e){this.checkIsGCE=void 0,this.jsonContent=null,this.cachedCredential=null,e=e||{},this._cachedProjectId=e.projectId||null,this.cachedCredential=e.authClient||null,this.keyFilename=e.keyFilename||e.keyFile,this.scopes=e.scopes,this.jsonContent=e.credentials||null,this.clientOptions=e.clientOptions}get isGCE(){return this.checkIsGCE}setGapicJWTValues(e){e.defaultServicePath=this.defaultServicePath,e.useJWTAccessWithScope=this.useJWTAccessWithScope,e.defaultScopes=this.defaultScopes}getProjectId(e){if(e)this.getProjectIdAsync().then(r=>e(null,r),e);else return this.getProjectIdAsync()}getProjectIdAsync(){return this._cachedProjectId?Promise.resolve(this._cachedProjectId):(this._getDefaultProjectIdPromise||(this._getDefaultProjectIdPromise=new Promise((e,r)=>M(this,null,function*(){try{let n=this.getProductionProjectId()||(yield this.getFileProjectId())||(yield this.getDefaultServiceProjectId())||(yield this.getGCEProjectId())||(yield this.getExternalAccountClientProjectId());if(this._cachedProjectId=n,!n)throw new Error(`Unable to detect a Project Id in the current environment. 
To learn more about authentication and Google APIs, visit: 
https://cloud.google.com/docs/authentication/getting-started`);e(n)}catch(n){r(n)}}))),this._getDefaultProjectIdPromise)}getAnyScopes(){return this.scopes||this.defaultScopes}getApplicationDefault(e={},r){let n;if(typeof e=="function"?r=e:n=e,r)this.getApplicationDefaultAsync(n).then(i=>r(null,i.credential,i.projectId),r);else return this.getApplicationDefaultAsync(n)}getApplicationDefaultAsync(){return M(this,arguments,function*(e={}){if(this.cachedCredential)return{credential:this.cachedCredential,projectId:yield this.getProjectIdAsync()};let r,n;if(r=yield this._tryGetApplicationCredentialsFromEnvironmentVariable(e),r)return r instanceof Zs.JWT?r.scopes=this.scopes:r instanceof wl.BaseExternalAccountClient&&(r.scopes=this.getAnyScopes()),this.cachedCredential=r,n=yield this.getProjectId(),{credential:r,projectId:n};if(r=yield this._tryGetApplicationCredentialsFromWellKnownFile(e),r)return r instanceof Zs.JWT?r.scopes=this.scopes:r instanceof wl.BaseExternalAccountClient&&(r.scopes=this.getAnyScopes()),this.cachedCredential=r,n=yield this.getProjectId(),{credential:r,projectId:n};let i;try{i=yield this._checkIsGCE()}catch(a){throw a instanceof Error&&(a.message=`Unexpected error determining execution environment: ${a.message}`),a}if(!i)throw new Error("Could not load the default credentials. Browse to https://cloud.google.com/docs/authentication/getting-started for more information.");return e.scopes=this.getAnyScopes(),this.cachedCredential=new NU.Compute(e),n=yield this.getProjectId(),{projectId:n,credential:this.cachedCredential}})}_checkIsGCE(){return M(this,null,function*(){return this.checkIsGCE===void 0&&(this.checkIsGCE=yield ym.isAvailable()),this.checkIsGCE})}_tryGetApplicationCredentialsFromEnvironmentVariable(e){return M(this,null,function*(){let r=process.env.GOOGLE_APPLICATION_CREDENTIALS||process.env.google_application_credentials;if(!r||r.length===0)return null;try{return this._getApplicationCredentialsFromFilePath(r,e)}catch(n){throw n instanceof Error&&(n.message=`Unable to read the credential file specified by the GOOGLE_APPLICATION_CREDENTIALS environment variable: ${n.message}`),n}})}_tryGetApplicationCredentialsFromWellKnownFile(e){return M(this,null,function*(){let r=null;if(this._isWindows())r=process.env.APPDATA;else{let i=process.env.HOME;i&&(r=vm.join(i,".config"))}return r&&(r=vm.join(r,"gcloud","application_default_credentials.json"),ju.existsSync(r)||(r=null)),r?yield this._getApplicationCredentialsFromFilePath(r,e):null})}_getApplicationCredentialsFromFilePath(n){return M(this,arguments,function*(e,r={}){if(!e||e.length===0)throw new Error("The file path is invalid.");try{if(e=ju.realpathSync(e),!ju.lstatSync(e).isFile())throw new Error}catch(a){throw a instanceof Error&&(a.message=`The file at ${e} does not exist, or it is not a file. ${a.message}`),a}let i=ju.createReadStream(e);return this.fromStream(i,r)})}fromJSON(e,r){let n;if(!e)throw new Error("Must pass in a JSON object containing the Google auth settings.");return r=r||{},e.type==="authorized_user"?(n=new Ex.UserRefreshClient(r),n.fromJSON(e)):e.type===wl.EXTERNAL_ACCOUNT_TYPE?(n=Cx.ExternalAccountClient.fromJSON(e,r),n.scopes=this.getAnyScopes()):(r.scopes=this.scopes,n=new Zs.JWT(r),this.setGapicJWTValues(n),n.fromJSON(e)),n}_cacheClientFromJSON(e,r){let n;return r=r||{},e.type==="authorized_user"?(n=new Ex.UserRefreshClient(r),n.fromJSON(e)):e.type===wl.EXTERNAL_ACCOUNT_TYPE?(n=Cx.ExternalAccountClient.fromJSON(e,r),n.scopes=this.getAnyScopes()):(r.scopes=this.scopes,n=new Zs.JWT(r),this.setGapicJWTValues(n),n.fromJSON(e)),this.jsonContent=e,this.cachedCredential=n,n}fromStream(e,r={},n){let i={};if(typeof r=="function"?n=r:i=r,n)this.fromStreamAsync(e,i).then(a=>n(null,a),n);else return this.fromStreamAsync(e,i)}fromStreamAsync(e,r){return new Promise((n,i)=>{if(!e)throw new Error("Must pass in a stream containing the Google auth settings.");let a="";e.setEncoding("utf8").on("error",i).on("data",s=>a+=s).on("end",()=>{try{try{let s=JSON.parse(a),l=this._cacheClientFromJSON(s,r);return n(l)}catch(s){if(!this.keyFilename)throw s;let l=new Zs.JWT(gn(qr({},this.clientOptions),{keyFile:this.keyFilename}));return this.cachedCredential=l,this.setGapicJWTValues(l),n(l)}}catch(s){return i(s)}})})}fromAPIKey(e,r){r=r||{};let n=new Zs.JWT(r);return n.fromAPIKey(e),n}_isWindows(){let e=kU.platform();return!!(e&&e.length>=3&&e.substring(0,3).toLowerCase()==="win")}getDefaultServiceProjectId(){return M(this,null,function*(){return new Promise(e=>{(0,AU.exec)("gcloud config config-helper --format json",(r,n)=>{if(!r&&n)try{let i=JSON.parse(n).configuration.properties.core.project;e(i);return}catch(i){}e(null)})})})}getProductionProjectId(){return process.env.GCLOUD_PROJECT||process.env.GOOGLE_CLOUD_PROJECT||process.env.gcloud_project||process.env.google_cloud_project}getFileProjectId(){return M(this,null,function*(){if(this.cachedCredential)return this.cachedCredential.projectId;if(this.keyFilename){let r=yield this.getClient();if(r&&r.projectId)return r.projectId}let e=yield this._tryGetApplicationCredentialsFromEnvironmentVariable();return e?e.projectId:null})}getExternalAccountClientProjectId(){return M(this,null,function*(){return!this.jsonContent||this.jsonContent.type!==wl.EXTERNAL_ACCOUNT_TYPE?null:yield(yield this.getClient()).getProjectId()})}getGCEProjectId(){return M(this,null,function*(){try{return yield ym.project("project-id")}catch(e){return null}})}getCredentials(e){if(e)this.getCredentialsAsync().then(r=>e(null,r),e);else return this.getCredentialsAsync()}getCredentialsAsync(){return M(this,null,function*(){let e=yield this.getClient();if(e instanceof wl.BaseExternalAccountClient){let i=e.getServiceAccountEmail();if(i)return{client_email:i}}if(this.jsonContent)return{client_email:this.jsonContent.client_email,private_key:this.jsonContent.private_key};if(!(yield this._checkIsGCE()))throw new Error("Unknown error.");let n=yield ym.instance({property:"service-accounts/",params:{recursive:"true"}});if(!n||!n.default||!n.default.email)throw new Error("Failure from metadata server.");return{client_email:n.default.email}})}getClient(){return M(this,null,function*(){if(!this.cachedCredential)if(this.jsonContent)this._cacheClientFromJSON(this.jsonContent,this.clientOptions);else if(this.keyFilename){let e=vm.resolve(this.keyFilename),r=ju.createReadStream(e);yield this.fromStreamAsync(r,this.clientOptions)}else yield this.getApplicationDefaultAsync(this.clientOptions);return this.cachedCredential})}getIdTokenClient(e){return M(this,null,function*(){let r=yield this.getClient();if(!("fetchIdToken"in r))throw new Error("Cannot fetch ID token in this environment, use GCE or set the GOOGLE_APPLICATION_CREDENTIALS environment variable to a service account credentials JSON file.");return new BU.IdTokenClient({targetAudience:e,idTokenProvider:r})})}getAccessToken(){return M(this,null,function*(){return(yield(yield this.getClient()).getAccessToken()).token})}getRequestHeaders(e){return M(this,null,function*(){return(yield this.getClient()).getRequestHeaders(e)})}authorizeRequest(e){return M(this,null,function*(){e=e||{};let r=e.url||e.uri,i=yield(yield this.getClient()).getRequestHeaders(r);return e.headers=Object.assign(e.headers||{},i),e})}request(e){return M(this,null,function*(){return(yield this.getClient()).request(e)})}getEnv(){return(0,DU.getEnv)()}sign(e){return M(this,null,function*(){let r=yield this.getClient(),n=(0,IU.createCrypto)();if(r instanceof Zs.JWT&&r.key)return yield n.sign(r.key,e);if(!(yield this.getProjectId()))throw new Error("Cannot sign data without a project ID.");let a=yield this.getCredentials();if(!a.client_email)throw new Error("Cannot sign data without `client_email`.");return this.signBlob(n,a.client_email,e)})}signBlob(e,r,n){return M(this,null,function*(){let i=`https://iamcredentials.googleapis.com/v1/projects/-/serviceAccounts/${r}:signBlob`;return(yield this.request({method:"POST",url:i,data:{payload:e.encodeBase64StringUtf8(n)}})).data.signedBlob})}};El.GoogleAuth=_m;_m.DefaultTransporter=RU.DefaultTransporter});var Sx=de($d=>{"use strict";Object.defineProperty($d,"__esModule",{value:!0});$d.IAMAuth=void 0;var xx=class{constructor(e,r){this.selector=e,this.token=r,this.selector=e,this.token=r}getRequestHeaders(){return{"x-goog-iam-authority-selector":this.selector,"x-goog-iam-authorization-token":this.token}}};$d.IAMAuth=xx});var kx=de(eh=>{"use strict";Object.defineProperty(eh,"__esModule",{value:!0});eh.Impersonated=void 0;var Tx=Fs(),OU=Ho(),Ax=class extends Tx.OAuth2Client{constructor(e={}){var r,n,i,a,s,l;super(e);this.credentials={expiry_date:1,refresh_token:"impersonated-placeholder"},this.sourceClient=(r=e.sourceClient)!==null&&r!==void 0?r:new Tx.OAuth2Client,this.targetPrincipal=(n=e.targetPrincipal)!==null&&n!==void 0?n:"",this.delegates=(i=e.delegates)!==null&&i!==void 0?i:[],this.targetScopes=(a=e.targetScopes)!==null&&a!==void 0?a:[],this.lifetime=(s=e.lifetime)!==null&&s!==void 0?s:3600,this.endpoint=(l=e.endpoint)!==null&&l!==void 0?l:"https://iamcredentials.googleapis.com"}refreshToken(e){return M(this,null,function*(){var r,n,i,a,s,l;try{yield this.sourceClient.getAccessToken();let u="projects/-/serviceAccounts/"+this.targetPrincipal,f=`${this.endpoint}/v1/${u}:generateAccessToken`,d={delegates:this.delegates,scope:this.targetScopes,lifetime:this.lifetime+"s"},h=yield this.sourceClient.request({url:f,data:d,method:"POST"}),g=h.data;return this.credentials.access_token=g.accessToken,this.credentials.expiry_date=Date.parse(g.expireTime),{tokens:this.credentials,res:h}}catch(u){if(!(u instanceof Error))throw u;let f=0,d="";throw u instanceof OU.GaxiosError&&(f=(i=(n=(r=u==null?void 0:u.response)===null||r===void 0?void 0:r.data)===null||n===void 0?void 0:n.error)===null||i===void 0?void 0:i.status,d=(l=(s=(a=u==null?void 0:u.response)===null||a===void 0?void 0:a.data)===null||s===void 0?void 0:s.error)===null||l===void 0?void 0:l.message),f&&d?(u.message=`${f}: unable to impersonate: ${d}`,u):(u.message=`unable to impersonate: ${u}`,u)}})}};eh.Impersonated=Ax});var Rx=de(Ai=>{"use strict";Object.defineProperty(Ai,"__esModule",{value:!0});Ai.DownscopedClient=Ai.EXPIRATION_TIME_OFFSET=Ai.MAX_ACCESS_BOUNDARY_RULES_COUNT=void 0;var LU=require("stream"),PU=vu(),MU=sm(),UU="urn:ietf:params:oauth:grant-type:token-exchange",FU="urn:ietf:params:oauth:token-type:access_token",qU="urn:ietf:params:oauth:token-type:access_token",GU="https://sts.googleapis.com/v1/token";Ai.MAX_ACCESS_BOUNDARY_RULES_COUNT=10;Ai.EXPIRATION_TIME_OFFSET=5*60*1e3;var Ix=class extends PU.AuthClient{constructor(e,r,n,i){super();if(this.authClient=e,this.credentialAccessBoundary=r,r.accessBoundary.accessBoundaryRules.length===0)throw new Error("At least one access boundary rule needs to be defined.");if(r.accessBoundary.accessBoundaryRules.length>Ai.MAX_ACCESS_BOUNDARY_RULES_COUNT)throw new Error(`The provided access boundary has more than ${Ai.MAX_ACCESS_BOUNDARY_RULES_COUNT} access boundary rules.`);for(let a of r.accessBoundary.accessBoundaryRules)if(a.availablePermissions.length===0)throw new Error("At least one permission should be defined in access boundary rules.");this.stsCredential=new MU.StsCredentials(GU),this.cachedDownscopedAccessToken=null,typeof(n==null?void 0:n.eagerRefreshThresholdMillis)!="number"?this.eagerRefreshThresholdMillis=Ai.EXPIRATION_TIME_OFFSET:this.eagerRefreshThresholdMillis=n.eagerRefreshThresholdMillis,this.forceRefreshOnFailure=!!(n==null?void 0:n.forceRefreshOnFailure),this.quotaProjectId=i}setCredentials(e){if(!e.expiry_date)throw new Error("The access token expiry_date field is missing in the provided credentials.");super.setCredentials(e),this.cachedDownscopedAccessToken=e}getAccessToken(){return M(this,null,function*(){return(!this.cachedDownscopedAccessToken||this.isExpired(this.cachedDownscopedAccessToken))&&(yield this.refreshAccessTokenAsync()),{token:this.cachedDownscopedAccessToken.access_token,expirationTime:this.cachedDownscopedAccessToken.expiry_date,res:this.cachedDownscopedAccessToken.res}})}getRequestHeaders(){return M(this,null,function*(){let r={Authorization:`Bearer ${(yield this.getAccessToken()).token}`};return this.addSharedMetadataHeaders(r)})}request(e,r){if(r)this.requestAsync(e).then(n=>r(null,n),n=>r(n,n.response));else return this.requestAsync(e)}requestAsync(e,r=!1){return M(this,null,function*(){let n;try{let i=yield this.getRequestHeaders();e.headers=e.headers||{},i&&i["x-goog-user-project"]&&(e.headers["x-goog-user-project"]=i["x-goog-user-project"]),i&&i.Authorization&&(e.headers.Authorization=i.Authorization),n=yield this.transporter.request(e)}catch(i){let a=i.response;if(a){let s=a.status,l=a.config.data instanceof LU.Readable;if(!r&&(s===401||s===403)&&!l&&this.forceRefreshOnFailure)return yield this.refreshAccessTokenAsync(),yield this.requestAsync(e,!0)}throw i}return n})}refreshAccessTokenAsync(){return M(this,null,function*(){var e;let r=(yield this.authClient.getAccessToken()).token,n={grantType:UU,requestedTokenType:FU,subjectToken:r,subjectTokenType:qU},i=yield this.stsCredential.exchangeToken(n,void 0,this.credentialAccessBoundary),a=((e=this.authClient.credentials)===null||e===void 0?void 0:e.expiry_date)||null,s=i.expires_in?new Date().getTime()+i.expires_in*1e3:a;return this.cachedDownscopedAccessToken={access_token:i.access_token,expiry_date:s,res:i.res},this.credentials={},Object.assign(this.credentials,this.cachedDownscopedAccessToken),delete this.credentials.res,this.emit("tokens",{refresh_token:null,expiry_date:this.cachedDownscopedAccessToken.expiry_date,access_token:this.cachedDownscopedAccessToken.access_token,token_type:"Bearer",id_token:null}),this.cachedDownscopedAccessToken})}isExpired(e){let r=new Date().getTime();return e.expiry_date?r>=e.expiry_date-this.eagerRefreshThresholdMillis:!1}};Ai.DownscopedClient=Ix});var Dx=de(ot=>{"use strict";Object.defineProperty(ot,"__esModule",{value:!0});ot.GoogleAuth=ot.auth=ot.DefaultTransporter=ot.DownscopedClient=ot.BaseExternalAccountClient=ot.ExternalAccountClient=ot.IdentityPoolClient=ot.AwsClient=ot.UserRefreshClient=ot.LoginTicket=ot.OAuth2Client=ot.CodeChallengeMethod=ot.Impersonated=ot.JWT=ot.JWTAccess=ot.IdTokenClient=ot.IAMAuth=ot.GCPEnv=ot.Compute=ot.AuthClient=void 0;var Nx=bx();Object.defineProperty(ot,"GoogleAuth",{enumerable:!0,get:function(){return Nx.GoogleAuth}});var VU=vu();Object.defineProperty(ot,"AuthClient",{enumerable:!0,get:function(){return VU.AuthClient}});var jU=U0();Object.defineProperty(ot,"Compute",{enumerable:!0,get:function(){return jU.Compute}});var KU=q0();Object.defineProperty(ot,"GCPEnv",{enumerable:!0,get:function(){return KU.GCPEnv}});var HU=Sx();Object.defineProperty(ot,"IAMAuth",{enumerable:!0,get:function(){return HU.IAMAuth}});var YU=F0();Object.defineProperty(ot,"IdTokenClient",{enumerable:!0,get:function(){return YU.IdTokenClient}});var WU=nm();Object.defineProperty(ot,"JWTAccess",{enumerable:!0,get:function(){return WU.JWTAccess}});var zU=im();Object.defineProperty(ot,"JWT",{enumerable:!0,get:function(){return zU.JWT}});var QU=kx();Object.defineProperty(ot,"Impersonated",{enumerable:!0,get:function(){return QU.Impersonated}});var Bx=Fs();Object.defineProperty(ot,"CodeChallengeMethod",{enumerable:!0,get:function(){return Bx.CodeChallengeMethod}});Object.defineProperty(ot,"OAuth2Client",{enumerable:!0,get:function(){return Bx.OAuth2Client}});var XU=P0();Object.defineProperty(ot,"LoginTicket",{enumerable:!0,get:function(){return XU.LoginTicket}});var JU=am();Object.defineProperty(ot,"UserRefreshClient",{enumerable:!0,get:function(){return JU.UserRefreshClient}});var ZU=gm();Object.defineProperty(ot,"AwsClient",{enumerable:!0,get:function(){return ZU.AwsClient}});var $U=pm();Object.defineProperty(ot,"IdentityPoolClient",{enumerable:!0,get:function(){return $U.IdentityPoolClient}});var eF=mm();Object.defineProperty(ot,"ExternalAccountClient",{enumerable:!0,get:function(){return eF.ExternalAccountClient}});var tF=_l();Object.defineProperty(ot,"BaseExternalAccountClient",{enumerable:!0,get:function(){return tF.BaseExternalAccountClient}});var rF=Rx();Object.defineProperty(ot,"DownscopedClient",{enumerable:!0,get:function(){return rF.DownscopedClient}});var nF=yu();Object.defineProperty(ot,"DefaultTransporter",{enumerable:!0,get:function(){return nF.DefaultTransporter}});var iF=new Nx.GoogleAuth;ot.auth=iF});var Em=de((_7,Lx)=>{"use strict";var Ox=require("fs"),wm;function aF(){try{return Ox.statSync("/.dockerenv"),!0}catch(t){return!1}}function sF(){try{return Ox.readFileSync("/proc/self/cgroup","utf8").includes("docker")}catch(t){return!1}}Lx.exports=()=>(wm===void 0&&(wm=aF()||sF()),wm)});var Ux=de((w7,Cm)=>{"use strict";var oF=require("os"),lF=require("fs"),Px=Em(),Mx=()=>{if(process.platform!=="linux")return!1;if(oF.release().toLowerCase().includes("microsoft"))return!Px();try{return lF.readFileSync("/proc/version","utf8").toLowerCase().includes("microsoft")?!Px():!1}catch(t){return!1}};process.env.__IS_WSL_TEST__?Cm.exports=Mx:Cm.exports=Mx()});var qx=de((E7,Fx)=>{"use strict";Fx.exports=(t,e,r)=>{let n=i=>Object.defineProperty(t,e,{value:i,enumerable:!0,writable:!0});return Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get(){let i=r();return n(i),i},set(i){n(i)}}),t}});var Wx=de((Am,Yx)=>{var uF=require("path"),cF=require("child_process"),{promises:bm,constants:Gx}=require("fs"),th=Ux(),fF=Em(),xm=qx(),Vx=uF.join(__dirname,"xdg-open"),{platform:Cl,arch:jx}=process,dF=(()=>{let t="/mnt/",e;return function(){return M(this,null,function*(){if(e)return e;let r="/etc/wsl.conf",n=!1;try{yield bm.access(r,Gx.F_OK),n=!0}catch(s){}if(!n)return t;let i=yield bm.readFile(r,{encoding:"utf8"}),a=/(?<!#.*)root\s*=\s*(?<mountPoint>.*)/g.exec(i);return a?(e=a.groups.mountPoint.trim(),e=e.endsWith("/")?e:`${e}/`,e):t})}})(),Kx=(t,e)=>M(Am,null,function*(){let r;for(let n of t)try{return yield e(n)}catch(i){r=i}throw r}),rh=t=>M(Am,null,function*(){if(t=qr({wait:!1,background:!1,newInstance:!1,allowNonzeroExitCode:!1},t),Array.isArray(t.app))return Kx(t.app,l=>rh(gn(qr({},t),{app:l})));let{name:e,arguments:r=[]}=t.app||{};if(r=[...r],Array.isArray(e))return Kx(e,l=>rh(gn(qr({},t),{app:{name:l,arguments:r}})));let n,i=[],a={};if(Cl==="darwin")n="open",t.wait&&i.push("--wait-apps"),t.background&&i.push("--background"),t.newInstance&&i.push("--new"),e&&i.push("-a",e);else if(Cl==="win32"||th&&!fF()){let l=yield dF();n=th?`${l}c/Windows/System32/WindowsPowerShell/v1.0/powershell.exe`:`${process.env.SYSTEMROOT}\\System32\\WindowsPowerShell\\v1.0\\powershell`,i.push("-NoProfile","-NonInteractive","\u2013ExecutionPolicy","Bypass","-EncodedCommand"),th||(a.windowsVerbatimArguments=!0);let u=["Start"];t.wait&&u.push("-Wait"),e?(u.push(`"\`"${e}\`""`,"-ArgumentList"),t.target&&r.unshift(t.target)):t.target&&u.push(`"${t.target}"`),r.length>0&&(r=r.map(f=>`"\`"${f}\`""`),u.push(r.join(","))),t.target=Buffer.from(u.join(" "),"utf16le").toString("base64")}else{if(e)n=e;else{let l=!__dirname||__dirname==="/",u=!1;try{yield bm.access(Vx,Gx.X_OK),u=!0}catch(d){}n=process.versions.electron||Cl==="android"||l||!u?"xdg-open":Vx}r.length>0&&i.push(...r),t.wait||(a.stdio="ignore",a.detached=!0)}t.target&&i.push(t.target),Cl==="darwin"&&r.length>0&&i.push("--args",...r);let s=cF.spawn(n,i,a);return t.wait?new Promise((l,u)=>{s.once("error",u),s.once("close",f=>{if(t.allowNonzeroExitCode&&f>0){u(new Error(`Exited with code ${f}`));return}l(s)})}):(s.unref(),s)}),Sm=(t,e)=>{if(typeof t!="string")throw new TypeError("Expected a `target`");return rh(gn(qr({},e),{target:t}))},hF=(t,e)=>{if(typeof t!="string")throw new TypeError("Expected a `name`");let{arguments:r=[]}=e||{};if(r!=null&&!Array.isArray(r))throw new TypeError("Expected `appArguments` as Array type");return rh(gn(qr({},e),{app:{name:t,arguments:r}}))};function Hx(t){if(typeof t=="string"||Array.isArray(t))return t;let{[jx]:e}=t;if(!e)throw new Error(`${jx} is not supported`);return e}function Tm({[Cl]:t},{wsl:e}){if(e&&th)return Hx(e);if(!t)throw new Error(`${Cl} is not supported`);return Hx(t)}var nh={};xm(nh,"chrome",()=>Tm({darwin:"google chrome",win32:"chrome",linux:["google-chrome","google-chrome-stable","chromium"]},{wsl:{ia32:"/mnt/c/Program Files (x86)/Google/Chrome/Application/chrome.exe",x64:["/mnt/c/Program Files/Google/Chrome/Application/chrome.exe","/mnt/c/Program Files (x86)/Google/Chrome/Application/chrome.exe"]}}));xm(nh,"firefox",()=>Tm({darwin:"firefox",win32:"C:\\Program Files\\Mozilla Firefox\\firefox.exe",linux:"firefox"},{wsl:"/mnt/c/Program Files/Mozilla Firefox/firefox.exe"}));xm(nh,"edge",()=>Tm({darwin:"microsoft edge",win32:"msedge",linux:["microsoft-edge","microsoft-edge-dev"]},{wsl:"/mnt/c/Program Files (x86)/Microsoft/Edge/Application/msedge.exe"}));Sm.apps=nh;Sm.openApp=hF;Yx.exports=Sm});var Qx=de((C7,zx)=>{zx.exports=pF;function pF(t){var e={};t.on("connection",function(r){var n=r.remoteAddress+":"+r.remotePort;e[n]=r,r.on("close",function(){delete e[n]})}),t.destroy=function(r){t.close(r);for(var n in e)e[n].destroy()}}});var Ba=de((kl,ec)=>{(function(){var t,e="4.17.21",r=200,n="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",i="Expected a function",a="Invalid `variable` option passed into `_.template`",s="__lodash_hash_undefined__",l=500,u="__lodash_placeholder__",f=1,d=2,h=4,g=1,y=2,m=1,_=2,E=4,w=8,b=16,k=32,N=64,D=128,B=256,ee=512,q=30,U="...",oe=800,ae=16,Ee=1,Ie=2,Qe=3,Ne=1/0,me=9007199254740991,ne=17976931348623157e292,Ge=0/0,Je=4294967295,ut=Je-1,Xe=Je>>>1,ct=[["ary",D],["bind",m],["bindKey",_],["curry",w],["curryRight",b],["flip",ee],["partial",k],["partialRight",N],["rearg",B]],le="[object Arguments]",Nt="[object Array]",Bt="[object AsyncFunction]",et="[object Boolean]",tt="[object Date]",ft="[object DOMException]",I="[object Error]",O="[object Function]",L="[object GeneratorFunction]",H="[object Map]",j="[object Number]",Q="[object Null]",J="[object Object]",Y="[object Promise]",X="[object Proxy]",te="[object RegExp]",Z="[object Set]",he="[object String]",Oe="[object Symbol]",Ue="[object Undefined]",dt="[object WeakMap]",Qt="[object WeakSet]",Xt="[object ArrayBuffer]",rt="[object DataView]",Dt="[object Float32Array]",pr="[object Float64Array]",Fa="[object Int8Array]",bs="[object Int16Array]",xs="[object Int32Array]",xn="[object Uint8Array]",ca="[object Uint8ClampedArray]",an="[object Uint16Array]",Nr="[object Uint32Array]",ur=/\b__p \+= '';/g,Tk=/\b(__p \+=) '' \+/g,Ak=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Dy=/&(?:amp|lt|gt|quot|#39);/g,Oy=/[&<>"']/g,kk=RegExp(Dy.source),Ik=RegExp(Oy.source),Rk=/<%-([\s\S]+?)%>/g,Nk=/<%([\s\S]+?)%>/g,Ly=/<%=([\s\S]+?)%>/g,Bk=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Dk=/^\w*$/,Ok=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,np=/[\\^$.*+?()[\]{}|]/g,Lk=RegExp(np.source),ip=/^\s+/,Pk=/\s/,Mk=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Uk=/\{\n\/\* \[wrapped with (.+)\] \*/,Fk=/,? & /,qk=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Gk=/[()=,{}\[\]\/\s]/,Vk=/\\(\\)?/g,jk=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Py=/\w*$/,Kk=/^[-+]0x[0-9a-f]+$/i,Hk=/^0b[01]+$/i,Yk=/^\[object .+?Constructor\]$/,Wk=/^0o[0-7]+$/i,zk=/^(?:0|[1-9]\d*)$/,Qk=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Dc=/($^)/,Xk=/['\n\r\u2028\u2029\\]/g,Oc="\\ud800-\\udfff",Jk="\\u0300-\\u036f",Zk="\\ufe20-\\ufe2f",$k="\\u20d0-\\u20ff",My=Jk+Zk+$k,Uy="\\u2700-\\u27bf",Fy="a-z\\xdf-\\xf6\\xf8-\\xff",eI="\\xac\\xb1\\xd7\\xf7",tI="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",rI="\\u2000-\\u206f",nI=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",qy="A-Z\\xc0-\\xd6\\xd8-\\xde",Gy="\\ufe0e\\ufe0f",Vy=eI+tI+rI+nI,ap="['\u2019]",iI="["+Oc+"]",jy="["+Vy+"]",Lc="["+My+"]",Ky="\\d+",aI="["+Uy+"]",Hy="["+Fy+"]",Yy="[^"+Oc+Vy+Ky+Uy+Fy+qy+"]",sp="\\ud83c[\\udffb-\\udfff]",sI="(?:"+Lc+"|"+sp+")",Wy="[^"+Oc+"]",op="(?:\\ud83c[\\udde6-\\uddff]){2}",lp="[\\ud800-\\udbff][\\udc00-\\udfff]",To="["+qy+"]",zy="\\u200d",Qy="(?:"+Hy+"|"+Yy+")",oI="(?:"+To+"|"+Yy+")",Xy="(?:"+ap+"(?:d|ll|m|re|s|t|ve))?",Jy="(?:"+ap+"(?:D|LL|M|RE|S|T|VE))?",Zy=sI+"?",$y="["+Gy+"]?",lI="(?:"+zy+"(?:"+[Wy,op,lp].join("|")+")"+$y+Zy+")*",uI="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",cI="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",ev=$y+Zy+lI,fI="(?:"+[aI,op,lp].join("|")+")"+ev,dI="(?:"+[Wy+Lc+"?",Lc,op,lp,iI].join("|")+")",hI=RegExp(ap,"g"),pI=RegExp(Lc,"g"),up=RegExp(sp+"(?="+sp+")|"+dI+ev,"g"),gI=RegExp([To+"?"+Hy+"+"+Xy+"(?="+[jy,To,"$"].join("|")+")",oI+"+"+Jy+"(?="+[jy,To+Qy,"$"].join("|")+")",To+"?"+Qy+"+"+Xy,To+"+"+Jy,cI,uI,Ky,fI].join("|"),"g"),mI=RegExp("["+zy+Oc+My+Gy+"]"),yI=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,vI=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],_I=-1,sr={};sr[Dt]=sr[pr]=sr[Fa]=sr[bs]=sr[xs]=sr[xn]=sr[ca]=sr[an]=sr[Nr]=!0,sr[le]=sr[Nt]=sr[Xt]=sr[et]=sr[rt]=sr[tt]=sr[I]=sr[O]=sr[H]=sr[j]=sr[J]=sr[te]=sr[Z]=sr[he]=sr[dt]=!1;var tr={};tr[le]=tr[Nt]=tr[Xt]=tr[rt]=tr[et]=tr[tt]=tr[Dt]=tr[pr]=tr[Fa]=tr[bs]=tr[xs]=tr[H]=tr[j]=tr[J]=tr[te]=tr[Z]=tr[he]=tr[Oe]=tr[xn]=tr[ca]=tr[an]=tr[Nr]=!0,tr[I]=tr[O]=tr[dt]=!1;var wI={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},EI={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},CI={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},bI={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},xI=parseFloat,SI=parseInt,tv=typeof global=="object"&&global&&global.Object===Object&&global,TI=typeof self=="object"&&self&&self.Object===Object&&self,Ur=tv||TI||Function("return this")(),cp=typeof kl=="object"&&kl&&!kl.nodeType&&kl,Ss=cp&&typeof ec=="object"&&ec&&!ec.nodeType&&ec,rv=Ss&&Ss.exports===cp,fp=rv&&tv.process,Wn=function(){try{var W=Ss&&Ss.require&&Ss.require("util").types;return W||fp&&fp.binding&&fp.binding("util")}catch(ce){}}(),nv=Wn&&Wn.isArrayBuffer,iv=Wn&&Wn.isDate,av=Wn&&Wn.isMap,sv=Wn&&Wn.isRegExp,ov=Wn&&Wn.isSet,lv=Wn&&Wn.isTypedArray;function Ln(W,ce,ie){switch(ie.length){case 0:return W.call(ce);case 1:return W.call(ce,ie[0]);case 2:return W.call(ce,ie[0],ie[1]);case 3:return W.call(ce,ie[0],ie[1],ie[2])}return W.apply(ce,ie)}function AI(W,ce,ie,Be){for(var $e=-1,Vt=W==null?0:W.length;++$e<Vt;){var Br=W[$e];ce(Be,Br,ie(Br),W)}return Be}function zn(W,ce){for(var ie=-1,Be=W==null?0:W.length;++ie<Be&&ce(W[ie],ie,W)!==!1;);return W}function kI(W,ce){for(var ie=W==null?0:W.length;ie--&&ce(W[ie],ie,W)!==!1;);return W}function uv(W,ce){for(var ie=-1,Be=W==null?0:W.length;++ie<Be;)if(!ce(W[ie],ie,W))return!1;return!0}function qa(W,ce){for(var ie=-1,Be=W==null?0:W.length,$e=0,Vt=[];++ie<Be;){var Br=W[ie];ce(Br,ie,W)&&(Vt[$e++]=Br)}return Vt}function Pc(W,ce){var ie=W==null?0:W.length;return!!ie&&Ao(W,ce,0)>-1}function dp(W,ce,ie){for(var Be=-1,$e=W==null?0:W.length;++Be<$e;)if(ie(ce,W[Be]))return!0;return!1}function cr(W,ce){for(var ie=-1,Be=W==null?0:W.length,$e=Array(Be);++ie<Be;)$e[ie]=ce(W[ie],ie,W);return $e}function Ga(W,ce){for(var ie=-1,Be=ce.length,$e=W.length;++ie<Be;)W[$e+ie]=ce[ie];return W}function hp(W,ce,ie,Be){var $e=-1,Vt=W==null?0:W.length;for(Be&&Vt&&(ie=W[++$e]);++$e<Vt;)ie=ce(ie,W[$e],$e,W);return ie}function II(W,ce,ie,Be){var $e=W==null?0:W.length;for(Be&&$e&&(ie=W[--$e]);$e--;)ie=ce(ie,W[$e],$e,W);return ie}function pp(W,ce){for(var ie=-1,Be=W==null?0:W.length;++ie<Be;)if(ce(W[ie],ie,W))return!0;return!1}var RI=gp("length");function NI(W){return W.split("")}function BI(W){return W.match(qk)||[]}function cv(W,ce,ie){var Be;return ie(W,function($e,Vt,Br){if(ce($e,Vt,Br))return Be=Vt,!1}),Be}function Mc(W,ce,ie,Be){for(var $e=W.length,Vt=ie+(Be?1:-1);Be?Vt--:++Vt<$e;)if(ce(W[Vt],Vt,W))return Vt;return-1}function Ao(W,ce,ie){return ce===ce?KI(W,ce,ie):Mc(W,fv,ie)}function DI(W,ce,ie,Be){for(var $e=ie-1,Vt=W.length;++$e<Vt;)if(Be(W[$e],ce))return $e;return-1}function fv(W){return W!==W}function dv(W,ce){var ie=W==null?0:W.length;return ie?yp(W,ce)/ie:Ge}function gp(W){return function(ce){return ce==null?t:ce[W]}}function mp(W){return function(ce){return W==null?t:W[ce]}}function hv(W,ce,ie,Be,$e){return $e(W,function(Vt,Br,Zt){ie=Be?(Be=!1,Vt):ce(ie,Vt,Br,Zt)}),ie}function OI(W,ce){var ie=W.length;for(W.sort(ce);ie--;)W[ie]=W[ie].value;return W}function yp(W,ce){for(var ie,Be=-1,$e=W.length;++Be<$e;){var Vt=ce(W[Be]);Vt!==t&&(ie=ie===t?Vt:ie+Vt)}return ie}function vp(W,ce){for(var ie=-1,Be=Array(W);++ie<W;)Be[ie]=ce(ie);return Be}function LI(W,ce){return cr(ce,function(ie){return[ie,W[ie]]})}function pv(W){return W&&W.slice(0,vv(W)+1).replace(ip,"")}function Pn(W){return function(ce){return W(ce)}}function _p(W,ce){return cr(ce,function(ie){return W[ie]})}function Ql(W,ce){return W.has(ce)}function gv(W,ce){for(var ie=-1,Be=W.length;++ie<Be&&Ao(ce,W[ie],0)>-1;);return ie}function mv(W,ce){for(var ie=W.length;ie--&&Ao(ce,W[ie],0)>-1;);return ie}function PI(W,ce){for(var ie=W.length,Be=0;ie--;)W[ie]===ce&&++Be;return Be}var MI=mp(wI),UI=mp(EI);function FI(W){return"\\"+bI[W]}function qI(W,ce){return W==null?t:W[ce]}function ko(W){return mI.test(W)}function GI(W){return yI.test(W)}function VI(W){for(var ce,ie=[];!(ce=W.next()).done;)ie.push(ce.value);return ie}function wp(W){var ce=-1,ie=Array(W.size);return W.forEach(function(Be,$e){ie[++ce]=[$e,Be]}),ie}function yv(W,ce){return function(ie){return W(ce(ie))}}function Va(W,ce){for(var ie=-1,Be=W.length,$e=0,Vt=[];++ie<Be;){var Br=W[ie];(Br===ce||Br===u)&&(W[ie]=u,Vt[$e++]=ie)}return Vt}function Uc(W){var ce=-1,ie=Array(W.size);return W.forEach(function(Be){ie[++ce]=Be}),ie}function jI(W){var ce=-1,ie=Array(W.size);return W.forEach(function(Be){ie[++ce]=[Be,Be]}),ie}function KI(W,ce,ie){for(var Be=ie-1,$e=W.length;++Be<$e;)if(W[Be]===ce)return Be;return-1}function HI(W,ce,ie){for(var Be=ie+1;Be--;)if(W[Be]===ce)return Be;return Be}function Io(W){return ko(W)?WI(W):RI(W)}function yi(W){return ko(W)?zI(W):NI(W)}function vv(W){for(var ce=W.length;ce--&&Pk.test(W.charAt(ce)););return ce}var YI=mp(CI);function WI(W){for(var ce=up.lastIndex=0;up.test(W);)++ce;return ce}function zI(W){return W.match(up)||[]}function QI(W){return W.match(gI)||[]}var XI=function W(ce){ce=ce==null?Ur:ja.defaults(Ur.Object(),ce,ja.pick(Ur,vI));var ie=ce.Array,Be=ce.Date,$e=ce.Error,Vt=ce.Function,Br=ce.Math,Zt=ce.Object,Ep=ce.RegExp,JI=ce.String,Qn=ce.TypeError,Fc=ie.prototype,ZI=Vt.prototype,Ro=Zt.prototype,qc=ce["__core-js_shared__"],Gc=ZI.toString,Wt=Ro.hasOwnProperty,$I=0,_v=function(){var o=/[^.]+$/.exec(qc&&qc.keys&&qc.keys.IE_PROTO||"");return o?"Symbol(src)_1."+o:""}(),Vc=Ro.toString,eR=Gc.call(Zt),tR=Ur._,rR=Ep("^"+Gc.call(Wt).replace(np,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),jc=rv?ce.Buffer:t,Ka=ce.Symbol,Kc=ce.Uint8Array,wv=jc?jc.allocUnsafe:t,Hc=yv(Zt.getPrototypeOf,Zt),Ev=Zt.create,Cv=Ro.propertyIsEnumerable,Yc=Fc.splice,bv=Ka?Ka.isConcatSpreadable:t,Xl=Ka?Ka.iterator:t,Ts=Ka?Ka.toStringTag:t,Wc=function(){try{var o=Ns(Zt,"defineProperty");return o({},"",{}),o}catch(c){}}(),nR=ce.clearTimeout!==Ur.clearTimeout&&ce.clearTimeout,iR=Be&&Be.now!==Ur.Date.now&&Be.now,aR=ce.setTimeout!==Ur.setTimeout&&ce.setTimeout,zc=Br.ceil,Qc=Br.floor,Cp=Zt.getOwnPropertySymbols,sR=jc?jc.isBuffer:t,xv=ce.isFinite,oR=Fc.join,lR=yv(Zt.keys,Zt),Dr=Br.max,sn=Br.min,uR=Be.now,cR=ce.parseInt,Sv=Br.random,fR=Fc.reverse,bp=Ns(ce,"DataView"),Jl=Ns(ce,"Map"),xp=Ns(ce,"Promise"),No=Ns(ce,"Set"),Zl=Ns(ce,"WeakMap"),$l=Ns(Zt,"create"),Xc=Zl&&new Zl,Bo={},dR=Bs(bp),hR=Bs(Jl),pR=Bs(xp),gR=Bs(No),mR=Bs(Zl),Jc=Ka?Ka.prototype:t,eu=Jc?Jc.valueOf:t,Tv=Jc?Jc.toString:t;function A(o){if(vr(o)&&!nt(o)&&!(o instanceof kt)){if(o instanceof Xn)return o;if(Wt.call(o,"__wrapped__"))return A1(o)}return new Xn(o)}var Do=function(){function o(){}return function(c){if(!gr(c))return{};if(Ev)return Ev(c);o.prototype=c;var p=new o;return o.prototype=t,p}}();function Zc(){}function Xn(o,c){this.__wrapped__=o,this.__actions__=[],this.__chain__=!!c,this.__index__=0,this.__values__=t}A.templateSettings={escape:Rk,evaluate:Nk,interpolate:Ly,variable:"",imports:{_:A}},A.prototype=Zc.prototype,A.prototype.constructor=A,Xn.prototype=Do(Zc.prototype),Xn.prototype.constructor=Xn;function kt(o){this.__wrapped__=o,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Je,this.__views__=[]}function yR(){var o=new kt(this.__wrapped__);return o.__actions__=Sn(this.__actions__),o.__dir__=this.__dir__,o.__filtered__=this.__filtered__,o.__iteratees__=Sn(this.__iteratees__),o.__takeCount__=this.__takeCount__,o.__views__=Sn(this.__views__),o}function vR(){if(this.__filtered__){var o=new kt(this);o.__dir__=-1,o.__filtered__=!0}else o=this.clone(),o.__dir__*=-1;return o}function _R(){var o=this.__wrapped__.value(),c=this.__dir__,p=nt(o),v=c<0,C=p?o.length:0,R=NN(0,C,this.__views__),P=R.start,G=R.end,z=G-P,pe=v?G:P-1,ge=this.__iteratees__,_e=ge.length,Te=0,Pe=sn(z,this.__takeCount__);if(!p||!v&&C==z&&Pe==z)return Xv(o,this.__actions__);var He=[];e:for(;z--&&Te<Pe;){pe+=c;for(var gt=-1,Ye=o[pe];++gt<_e;){var bt=ge[gt],Ot=bt.iteratee,Fn=bt.type,pn=Ot(Ye);if(Fn==Ie)Ye=pn;else if(!pn){if(Fn==Ee)continue e;break e}}He[Te++]=Ye}return He}kt.prototype=Do(Zc.prototype),kt.prototype.constructor=kt;function As(o){var c=-1,p=o==null?0:o.length;for(this.clear();++c<p;){var v=o[c];this.set(v[0],v[1])}}function wR(){this.__data__=$l?$l(null):{},this.size=0}function ER(o){var c=this.has(o)&&delete this.__data__[o];return this.size-=c?1:0,c}function CR(o){var c=this.__data__;if($l){var p=c[o];return p===s?t:p}return Wt.call(c,o)?c[o]:t}function bR(o){var c=this.__data__;return $l?c[o]!==t:Wt.call(c,o)}function xR(o,c){var p=this.__data__;return this.size+=this.has(o)?0:1,p[o]=$l&&c===t?s:c,this}As.prototype.clear=wR,As.prototype.delete=ER,As.prototype.get=CR,As.prototype.has=bR,As.prototype.set=xR;function fa(o){var c=-1,p=o==null?0:o.length;for(this.clear();++c<p;){var v=o[c];this.set(v[0],v[1])}}function SR(){this.__data__=[],this.size=0}function TR(o){var c=this.__data__,p=$c(c,o);if(p<0)return!1;var v=c.length-1;return p==v?c.pop():Yc.call(c,p,1),--this.size,!0}function AR(o){var c=this.__data__,p=$c(c,o);return p<0?t:c[p][1]}function kR(o){return $c(this.__data__,o)>-1}function IR(o,c){var p=this.__data__,v=$c(p,o);return v<0?(++this.size,p.push([o,c])):p[v][1]=c,this}fa.prototype.clear=SR,fa.prototype.delete=TR,fa.prototype.get=AR,fa.prototype.has=kR,fa.prototype.set=IR;function da(o){var c=-1,p=o==null?0:o.length;for(this.clear();++c<p;){var v=o[c];this.set(v[0],v[1])}}function RR(){this.size=0,this.__data__={hash:new As,map:new(Jl||fa),string:new As}}function NR(o){var c=df(this,o).delete(o);return this.size-=c?1:0,c}function BR(o){return df(this,o).get(o)}function DR(o){return df(this,o).has(o)}function OR(o,c){var p=df(this,o),v=p.size;return p.set(o,c),this.size+=p.size==v?0:1,this}da.prototype.clear=RR,da.prototype.delete=NR,da.prototype.get=BR,da.prototype.has=DR,da.prototype.set=OR;function ks(o){var c=-1,p=o==null?0:o.length;for(this.__data__=new da;++c<p;)this.add(o[c])}function LR(o){return this.__data__.set(o,s),this}function PR(o){return this.__data__.has(o)}ks.prototype.add=ks.prototype.push=LR,ks.prototype.has=PR;function vi(o){var c=this.__data__=new fa(o);this.size=c.size}function MR(){this.__data__=new fa,this.size=0}function UR(o){var c=this.__data__,p=c.delete(o);return this.size=c.size,p}function FR(o){return this.__data__.get(o)}function qR(o){return this.__data__.has(o)}function GR(o,c){var p=this.__data__;if(p instanceof fa){var v=p.__data__;if(!Jl||v.length<r-1)return v.push([o,c]),this.size=++p.size,this;p=this.__data__=new da(v)}return p.set(o,c),this.size=p.size,this}vi.prototype.clear=MR,vi.prototype.delete=UR,vi.prototype.get=FR,vi.prototype.has=qR,vi.prototype.set=GR;function Av(o,c){var p=nt(o),v=!p&&Ds(o),C=!p&&!v&&Qa(o),R=!p&&!v&&!C&&Mo(o),P=p||v||C||R,G=P?vp(o.length,JI):[],z=G.length;for(var pe in o)(c||Wt.call(o,pe))&&!(P&&(pe=="length"||C&&(pe=="offset"||pe=="parent")||R&&(pe=="buffer"||pe=="byteLength"||pe=="byteOffset")||ma(pe,z)))&&G.push(pe);return G}function kv(o){var c=o.length;return c?o[Lp(0,c-1)]:t}function VR(o,c){return hf(Sn(o),Is(c,0,o.length))}function jR(o){return hf(Sn(o))}function Sp(o,c,p){(p!==t&&!_i(o[c],p)||p===t&&!(c in o))&&ha(o,c,p)}function tu(o,c,p){var v=o[c];(!(Wt.call(o,c)&&_i(v,p))||p===t&&!(c in o))&&ha(o,c,p)}function $c(o,c){for(var p=o.length;p--;)if(_i(o[p][0],c))return p;return-1}function KR(o,c,p,v){return Ha(o,function(C,R,P){c(v,C,p(C),P)}),v}function Iv(o,c){return o&&qi(c,Fr(c),o)}function HR(o,c){return o&&qi(c,An(c),o)}function ha(o,c,p){c=="__proto__"&&Wc?Wc(o,c,{configurable:!0,enumerable:!0,value:p,writable:!0}):o[c]=p}function Tp(o,c){for(var p=-1,v=c.length,C=ie(v),R=o==null;++p<v;)C[p]=R?t:s0(o,c[p]);return C}function Is(o,c,p){return o===o&&(p!==t&&(o=o<=p?o:p),c!==t&&(o=o>=c?o:c)),o}function Jn(o,c,p,v,C,R){var P,G=c&f,z=c&d,pe=c&h;if(p&&(P=C?p(o,v,C,R):p(o)),P!==t)return P;if(!gr(o))return o;var ge=nt(o);if(ge){if(P=DN(o),!G)return Sn(o,P)}else{var _e=on(o),Te=_e==O||_e==L;if(Qa(o))return $v(o,G);if(_e==J||_e==le||Te&&!C){if(P=z||Te?{}:v1(o),!G)return z?CN(o,HR(P,o)):EN(o,Iv(P,o))}else{if(!tr[_e])return C?o:{};P=ON(o,_e,G)}}R||(R=new vi);var Pe=R.get(o);if(Pe)return Pe;R.set(o,P),W1(o)?o.forEach(function(Ye){P.add(Jn(Ye,c,p,Ye,o,R))}):H1(o)&&o.forEach(function(Ye,bt){P.set(bt,Jn(Ye,c,p,bt,o,R))});var He=pe?z?Yp:Hp:z?An:Fr,gt=ge?t:He(o);return zn(gt||o,function(Ye,bt){gt&&(bt=Ye,Ye=o[bt]),tu(P,bt,Jn(Ye,c,p,bt,o,R))}),P}function YR(o){var c=Fr(o);return function(p){return Rv(p,o,c)}}function Rv(o,c,p){var v=p.length;if(o==null)return!v;for(o=Zt(o);v--;){var C=p[v],R=c[C],P=o[C];if(P===t&&!(C in o)||!R(P))return!1}return!0}function Nv(o,c,p){if(typeof o!="function")throw new Qn(i);return lu(function(){o.apply(t,p)},c)}function ru(o,c,p,v){var C=-1,R=Pc,P=!0,G=o.length,z=[],pe=c.length;if(!G)return z;p&&(c=cr(c,Pn(p))),v?(R=dp,P=!1):c.length>=r&&(R=Ql,P=!1,c=new ks(c));e:for(;++C<G;){var ge=o[C],_e=p==null?ge:p(ge);if(ge=v||ge!==0?ge:0,P&&_e===_e){for(var Te=pe;Te--;)if(c[Te]===_e)continue e;z.push(ge)}else R(c,_e,v)||z.push(ge)}return z}var Ha=i1(Fi),Bv=i1(kp,!0);function WR(o,c){var p=!0;return Ha(o,function(v,C,R){return p=!!c(v,C,R),p}),p}function ef(o,c,p){for(var v=-1,C=o.length;++v<C;){var R=o[v],P=c(R);if(P!=null&&(G===t?P===P&&!Un(P):p(P,G)))var G=P,z=R}return z}function zR(o,c,p,v){var C=o.length;for(p=ht(p),p<0&&(p=-p>C?0:C+p),v=v===t||v>C?C:ht(v),v<0&&(v+=C),v=p>v?0:Q1(v);p<v;)o[p++]=c;return o}function Dv(o,c){var p=[];return Ha(o,function(v,C,R){c(v,C,R)&&p.push(v)}),p}function Xr(o,c,p,v,C){var R=-1,P=o.length;for(p||(p=PN),C||(C=[]);++R<P;){var G=o[R];c>0&&p(G)?c>1?Xr(G,c-1,p,v,C):Ga(C,G):v||(C[C.length]=G)}return C}var Ap=a1(),Ov=a1(!0);function Fi(o,c){return o&&Ap(o,c,Fr)}function kp(o,c){return o&&Ov(o,c,Fr)}function tf(o,c){return qa(c,function(p){return ya(o[p])})}function Rs(o,c){c=Wa(c,o);for(var p=0,v=c.length;o!=null&&p<v;)o=o[Gi(c[p++])];return p&&p==v?o:t}function Lv(o,c,p){var v=c(o);return nt(o)?v:Ga(v,p(o))}function dn(o){return o==null?o===t?Ue:Q:Ts&&Ts in Zt(o)?RN(o):jN(o)}function Ip(o,c){return o>c}function QR(o,c){return o!=null&&Wt.call(o,c)}function XR(o,c){return o!=null&&c in Zt(o)}function JR(o,c,p){return o>=sn(c,p)&&o<Dr(c,p)}function Rp(o,c,p){for(var v=p?dp:Pc,C=o[0].length,R=o.length,P=R,G=ie(R),z=1/0,pe=[];P--;){var ge=o[P];P&&c&&(ge=cr(ge,Pn(c))),z=sn(ge.length,z),G[P]=!p&&(c||C>=120&&ge.length>=120)?new ks(P&&ge):t}ge=o[0];var _e=-1,Te=G[0];e:for(;++_e<C&&pe.length<z;){var Pe=ge[_e],He=c?c(Pe):Pe;if(Pe=p||Pe!==0?Pe:0,!(Te?Ql(Te,He):v(pe,He,p))){for(P=R;--P;){var gt=G[P];if(!(gt?Ql(gt,He):v(o[P],He,p)))continue e}Te&&Te.push(He),pe.push(Pe)}}return pe}function ZR(o,c,p,v){return Fi(o,function(C,R,P){c(v,p(C),R,P)}),v}function nu(o,c,p){c=Wa(c,o),o=C1(o,c);var v=o==null?o:o[Gi($n(c))];return v==null?t:Ln(v,o,p)}function Pv(o){return vr(o)&&dn(o)==le}function $R(o){return vr(o)&&dn(o)==Xt}function eN(o){return vr(o)&&dn(o)==tt}function iu(o,c,p,v,C){return o===c?!0:o==null||c==null||!vr(o)&&!vr(c)?o!==o&&c!==c:tN(o,c,p,v,iu,C)}function tN(o,c,p,v,C,R){var P=nt(o),G=nt(c),z=P?Nt:on(o),pe=G?Nt:on(c);z=z==le?J:z,pe=pe==le?J:pe;var ge=z==J,_e=pe==J,Te=z==pe;if(Te&&Qa(o)){if(!Qa(c))return!1;P=!0,ge=!1}if(Te&&!ge)return R||(R=new vi),P||Mo(o)?g1(o,c,p,v,C,R):kN(o,c,z,p,v,C,R);if(!(p&g)){var Pe=ge&&Wt.call(o,"__wrapped__"),He=_e&&Wt.call(c,"__wrapped__");if(Pe||He){var gt=Pe?o.value():o,Ye=He?c.value():c;return R||(R=new vi),C(gt,Ye,p,v,R)}}return Te?(R||(R=new vi),IN(o,c,p,v,C,R)):!1}function rN(o){return vr(o)&&on(o)==H}function Np(o,c,p,v){var C=p.length,R=C,P=!v;if(o==null)return!R;for(o=Zt(o);C--;){var G=p[C];if(P&&G[2]?G[1]!==o[G[0]]:!(G[0]in o))return!1}for(;++C<R;){G=p[C];var z=G[0],pe=o[z],ge=G[1];if(P&&G[2]){if(pe===t&&!(z in o))return!1}else{var _e=new vi;if(v)var Te=v(pe,ge,z,o,c,_e);if(!(Te===t?iu(ge,pe,g|y,v,_e):Te))return!1}}return!0}function Mv(o){if(!gr(o)||UN(o))return!1;var c=ya(o)?rR:Yk;return c.test(Bs(o))}function nN(o){return vr(o)&&dn(o)==te}function iN(o){return vr(o)&&on(o)==Z}function aN(o){return vr(o)&&_f(o.length)&&!!sr[dn(o)]}function Uv(o){return typeof o=="function"?o:o==null?kn:typeof o=="object"?nt(o)?Gv(o[0],o[1]):qv(o):s_(o)}function Bp(o){if(!ou(o))return lR(o);var c=[];for(var p in Zt(o))Wt.call(o,p)&&p!="constructor"&&c.push(p);return c}function sN(o){if(!gr(o))return VN(o);var c=ou(o),p=[];for(var v in o)v=="constructor"&&(c||!Wt.call(o,v))||p.push(v);return p}function Dp(o,c){return o<c}function Fv(o,c){var p=-1,v=Tn(o)?ie(o.length):[];return Ha(o,function(C,R,P){v[++p]=c(C,R,P)}),v}function qv(o){var c=zp(o);return c.length==1&&c[0][2]?w1(c[0][0],c[0][1]):function(p){return p===o||Np(p,o,c)}}function Gv(o,c){return Xp(o)&&_1(c)?w1(Gi(o),c):function(p){var v=s0(p,o);return v===t&&v===c?o0(p,o):iu(c,v,g|y)}}function rf(o,c,p,v,C){o!==c&&Ap(c,function(R,P){if(C||(C=new vi),gr(R))oN(o,c,P,p,rf,v,C);else{var G=v?v(Zp(o,P),R,P+"",o,c,C):t;G===t&&(G=R),Sp(o,P,G)}},An)}function oN(o,c,p,v,C,R,P){var G=Zp(o,p),z=Zp(c,p),pe=P.get(z);if(pe){Sp(o,p,pe);return}var ge=R?R(G,z,p+"",o,c,P):t,_e=ge===t;if(_e){var Te=nt(z),Pe=!Te&&Qa(z),He=!Te&&!Pe&&Mo(z);ge=z,Te||Pe||He?nt(G)?ge=G:Er(G)?ge=Sn(G):Pe?(_e=!1,ge=$v(z,!0)):He?(_e=!1,ge=e1(z,!0)):ge=[]:uu(z)||Ds(z)?(ge=G,Ds(G)?ge=X1(G):(!gr(G)||ya(G))&&(ge=v1(z))):_e=!1}_e&&(P.set(z,ge),C(ge,z,v,R,P),P.delete(z)),Sp(o,p,ge)}function Vv(o,c){var p=o.length;if(!!p)return c+=c<0?p:0,ma(c,p)?o[c]:t}function jv(o,c,p){c.length?c=cr(c,function(R){return nt(R)?function(P){return Rs(P,R.length===1?R[0]:R)}:R}):c=[kn];var v=-1;c=cr(c,Pn(je()));var C=Fv(o,function(R,P,G){var z=cr(c,function(pe){return pe(R)});return{criteria:z,index:++v,value:R}});return OI(C,function(R,P){return wN(R,P,p)})}function lN(o,c){return Kv(o,c,function(p,v){return o0(o,v)})}function Kv(o,c,p){for(var v=-1,C=c.length,R={};++v<C;){var P=c[v],G=Rs(o,P);p(G,P)&&au(R,Wa(P,o),G)}return R}function uN(o){return function(c){return Rs(c,o)}}function Op(o,c,p,v){var C=v?DI:Ao,R=-1,P=c.length,G=o;for(o===c&&(c=Sn(c)),p&&(G=cr(o,Pn(p)));++R<P;)for(var z=0,pe=c[R],ge=p?p(pe):pe;(z=C(G,ge,z,v))>-1;)G!==o&&Yc.call(G,z,1),Yc.call(o,z,1);return o}function Hv(o,c){for(var p=o?c.length:0,v=p-1;p--;){var C=c[p];if(p==v||C!==R){var R=C;ma(C)?Yc.call(o,C,1):Up(o,C)}}return o}function Lp(o,c){return o+Qc(Sv()*(c-o+1))}function cN(o,c,p,v){for(var C=-1,R=Dr(zc((c-o)/(p||1)),0),P=ie(R);R--;)P[v?R:++C]=o,o+=p;return P}function Pp(o,c){var p="";if(!o||c<1||c>me)return p;do c%2&&(p+=o),c=Qc(c/2),c&&(o+=o);while(c);return p}function vt(o,c){return $p(E1(o,c,kn),o+"")}function fN(o){return kv(Uo(o))}function dN(o,c){var p=Uo(o);return hf(p,Is(c,0,p.length))}function au(o,c,p,v){if(!gr(o))return o;c=Wa(c,o);for(var C=-1,R=c.length,P=R-1,G=o;G!=null&&++C<R;){var z=Gi(c[C]),pe=p;if(z==="__proto__"||z==="constructor"||z==="prototype")return o;if(C!=P){var ge=G[z];pe=v?v(ge,z,G):t,pe===t&&(pe=gr(ge)?ge:ma(c[C+1])?[]:{})}tu(G,z,pe),G=G[z]}return o}var Yv=Xc?function(o,c){return Xc.set(o,c),o}:kn,hN=Wc?function(o,c){return Wc(o,"toString",{configurable:!0,enumerable:!1,value:u0(c),writable:!0})}:kn;function pN(o){return hf(Uo(o))}function Zn(o,c,p){var v=-1,C=o.length;c<0&&(c=-c>C?0:C+c),p=p>C?C:p,p<0&&(p+=C),C=c>p?0:p-c>>>0,c>>>=0;for(var R=ie(C);++v<C;)R[v]=o[v+c];return R}function gN(o,c){var p;return Ha(o,function(v,C,R){return p=c(v,C,R),!p}),!!p}function nf(o,c,p){var v=0,C=o==null?v:o.length;if(typeof c=="number"&&c===c&&C<=Xe){for(;v<C;){var R=v+C>>>1,P=o[R];P!==null&&!Un(P)&&(p?P<=c:P<c)?v=R+1:C=R}return C}return Mp(o,c,kn,p)}function Mp(o,c,p,v){var C=0,R=o==null?0:o.length;if(R===0)return 0;c=p(c);for(var P=c!==c,G=c===null,z=Un(c),pe=c===t;C<R;){var ge=Qc((C+R)/2),_e=p(o[ge]),Te=_e!==t,Pe=_e===null,He=_e===_e,gt=Un(_e);if(P)var Ye=v||He;else pe?Ye=He&&(v||Te):G?Ye=He&&Te&&(v||!Pe):z?Ye=He&&Te&&!Pe&&(v||!gt):Pe||gt?Ye=!1:Ye=v?_e<=c:_e<c;Ye?C=ge+1:R=ge}return sn(R,ut)}function Wv(o,c){for(var p=-1,v=o.length,C=0,R=[];++p<v;){var P=o[p],G=c?c(P):P;if(!p||!_i(G,z)){var z=G;R[C++]=P===0?0:P}}return R}function zv(o){return typeof o=="number"?o:Un(o)?Ge:+o}function Mn(o){if(typeof o=="string")return o;if(nt(o))return cr(o,Mn)+"";if(Un(o))return Tv?Tv.call(o):"";var c=o+"";return c=="0"&&1/o==-Ne?"-0":c}function Ya(o,c,p){var v=-1,C=Pc,R=o.length,P=!0,G=[],z=G;if(p)P=!1,C=dp;else if(R>=r){var pe=c?null:TN(o);if(pe)return Uc(pe);P=!1,C=Ql,z=new ks}else z=c?[]:G;e:for(;++v<R;){var ge=o[v],_e=c?c(ge):ge;if(ge=p||ge!==0?ge:0,P&&_e===_e){for(var Te=z.length;Te--;)if(z[Te]===_e)continue e;c&&z.push(_e),G.push(ge)}else C(z,_e,p)||(z!==G&&z.push(_e),G.push(ge))}return G}function Up(o,c){return c=Wa(c,o),o=C1(o,c),o==null||delete o[Gi($n(c))]}function Qv(o,c,p,v){return au(o,c,p(Rs(o,c)),v)}function af(o,c,p,v){for(var C=o.length,R=v?C:-1;(v?R--:++R<C)&&c(o[R],R,o););return p?Zn(o,v?0:R,v?R+1:C):Zn(o,v?R+1:0,v?C:R)}function Xv(o,c){var p=o;return p instanceof kt&&(p=p.value()),hp(c,function(v,C){return C.func.apply(C.thisArg,Ga([v],C.args))},p)}function Fp(o,c,p){var v=o.length;if(v<2)return v?Ya(o[0]):[];for(var C=-1,R=ie(v);++C<v;)for(var P=o[C],G=-1;++G<v;)G!=C&&(R[C]=ru(R[C]||P,o[G],c,p));return Ya(Xr(R,1),c,p)}function Jv(o,c,p){for(var v=-1,C=o.length,R=c.length,P={};++v<C;){var G=v<R?c[v]:t;p(P,o[v],G)}return P}function qp(o){return Er(o)?o:[]}function Gp(o){return typeof o=="function"?o:kn}function Wa(o,c){return nt(o)?o:Xp(o,c)?[o]:T1(jt(o))}var mN=vt;function za(o,c,p){var v=o.length;return p=p===t?v:p,!c&&p>=v?o:Zn(o,c,p)}var Zv=nR||function(o){return Ur.clearTimeout(o)};function $v(o,c){if(c)return o.slice();var p=o.length,v=wv?wv(p):new o.constructor(p);return o.copy(v),v}function Vp(o){var c=new o.constructor(o.byteLength);return new Kc(c).set(new Kc(o)),c}function yN(o,c){var p=c?Vp(o.buffer):o.buffer;return new o.constructor(p,o.byteOffset,o.byteLength)}function vN(o){var c=new o.constructor(o.source,Py.exec(o));return c.lastIndex=o.lastIndex,c}function _N(o){return eu?Zt(eu.call(o)):{}}function e1(o,c){var p=c?Vp(o.buffer):o.buffer;return new o.constructor(p,o.byteOffset,o.length)}function t1(o,c){if(o!==c){var p=o!==t,v=o===null,C=o===o,R=Un(o),P=c!==t,G=c===null,z=c===c,pe=Un(c);if(!G&&!pe&&!R&&o>c||R&&P&&z&&!G&&!pe||v&&P&&z||!p&&z||!C)return 1;if(!v&&!R&&!pe&&o<c||pe&&p&&C&&!v&&!R||G&&p&&C||!P&&C||!z)return-1}return 0}function wN(o,c,p){for(var v=-1,C=o.criteria,R=c.criteria,P=C.length,G=p.length;++v<P;){var z=t1(C[v],R[v]);if(z){if(v>=G)return z;var pe=p[v];return z*(pe=="desc"?-1:1)}}return o.index-c.index}function r1(o,c,p,v){for(var C=-1,R=o.length,P=p.length,G=-1,z=c.length,pe=Dr(R-P,0),ge=ie(z+pe),_e=!v;++G<z;)ge[G]=c[G];for(;++C<P;)(_e||C<R)&&(ge[p[C]]=o[C]);for(;pe--;)ge[G++]=o[C++];return ge}function n1(o,c,p,v){for(var C=-1,R=o.length,P=-1,G=p.length,z=-1,pe=c.length,ge=Dr(R-G,0),_e=ie(ge+pe),Te=!v;++C<ge;)_e[C]=o[C];for(var Pe=C;++z<pe;)_e[Pe+z]=c[z];for(;++P<G;)(Te||C<R)&&(_e[Pe+p[P]]=o[C++]);return _e}function Sn(o,c){var p=-1,v=o.length;for(c||(c=ie(v));++p<v;)c[p]=o[p];return c}function qi(o,c,p,v){var C=!p;p||(p={});for(var R=-1,P=c.length;++R<P;){var G=c[R],z=v?v(p[G],o[G],G,p,o):t;z===t&&(z=o[G]),C?ha(p,G,z):tu(p,G,z)}return p}function EN(o,c){return qi(o,Qp(o),c)}function CN(o,c){return qi(o,m1(o),c)}function sf(o,c){return function(p,v){var C=nt(p)?AI:KR,R=c?c():{};return C(p,o,je(v,2),R)}}function Oo(o){return vt(function(c,p){var v=-1,C=p.length,R=C>1?p[C-1]:t,P=C>2?p[2]:t;for(R=o.length>3&&typeof R=="function"?(C--,R):t,P&&hn(p[0],p[1],P)&&(R=C<3?t:R,C=1),c=Zt(c);++v<C;){var G=p[v];G&&o(c,G,v,R)}return c})}function i1(o,c){return function(p,v){if(p==null)return p;if(!Tn(p))return o(p,v);for(var C=p.length,R=c?C:-1,P=Zt(p);(c?R--:++R<C)&&v(P[R],R,P)!==!1;);return p}}function a1(o){return function(c,p,v){for(var C=-1,R=Zt(c),P=v(c),G=P.length;G--;){var z=P[o?G:++C];if(p(R[z],z,R)===!1)break}return c}}function bN(o,c,p){var v=c&m,C=su(o);function R(){var P=this&&this!==Ur&&this instanceof R?C:o;return P.apply(v?p:this,arguments)}return R}function s1(o){return function(c){c=jt(c);var p=ko(c)?yi(c):t,v=p?p[0]:c.charAt(0),C=p?za(p,1).join(""):c.slice(1);return v[o]()+C}}function Lo(o){return function(c){return hp(i_(n_(c).replace(hI,"")),o,"")}}function su(o){return function(){var c=arguments;switch(c.length){case 0:return new o;case 1:return new o(c[0]);case 2:return new o(c[0],c[1]);case 3:return new o(c[0],c[1],c[2]);case 4:return new o(c[0],c[1],c[2],c[3]);case 5:return new o(c[0],c[1],c[2],c[3],c[4]);case 6:return new o(c[0],c[1],c[2],c[3],c[4],c[5]);case 7:return new o(c[0],c[1],c[2],c[3],c[4],c[5],c[6])}var p=Do(o.prototype),v=o.apply(p,c);return gr(v)?v:p}}function xN(o,c,p){var v=su(o);function C(){for(var R=arguments.length,P=ie(R),G=R,z=Po(C);G--;)P[G]=arguments[G];var pe=R<3&&P[0]!==z&&P[R-1]!==z?[]:Va(P,z);if(R-=pe.length,R<p)return f1(o,c,of,C.placeholder,t,P,pe,t,t,p-R);var ge=this&&this!==Ur&&this instanceof C?v:o;return Ln(ge,this,P)}return C}function o1(o){return function(c,p,v){var C=Zt(c);if(!Tn(c)){var R=je(p,3);c=Fr(c),p=function(G){return R(C[G],G,C)}}var P=o(c,p,v);return P>-1?C[R?c[P]:P]:t}}function l1(o){return ga(function(c){var p=c.length,v=p,C=Xn.prototype.thru;for(o&&c.reverse();v--;){var R=c[v];if(typeof R!="function")throw new Qn(i);if(C&&!P&&ff(R)=="wrapper")var P=new Xn([],!0)}for(v=P?v:p;++v<p;){R=c[v];var G=ff(R),z=G=="wrapper"?Wp(R):t;z&&Jp(z[0])&&z[1]==(D|w|k|B)&&!z[4].length&&z[9]==1?P=P[ff(z[0])].apply(P,z[3]):P=R.length==1&&Jp(R)?P[G]():P.thru(R)}return function(){var pe=arguments,ge=pe[0];if(P&&pe.length==1&&nt(ge))return P.plant(ge).value();for(var _e=0,Te=p?c[_e].apply(this,pe):ge;++_e<p;)Te=c[_e].call(this,Te);return Te}})}function of(o,c,p,v,C,R,P,G,z,pe){var ge=c&D,_e=c&m,Te=c&_,Pe=c&(w|b),He=c&ee,gt=Te?t:su(o);function Ye(){for(var bt=arguments.length,Ot=ie(bt),Fn=bt;Fn--;)Ot[Fn]=arguments[Fn];if(Pe)var pn=Po(Ye),qn=PI(Ot,pn);if(v&&(Ot=r1(Ot,v,C,Pe)),R&&(Ot=n1(Ot,R,P,Pe)),bt-=qn,Pe&&bt<pe){var Cr=Va(Ot,pn);return f1(o,c,of,Ye.placeholder,p,Ot,Cr,G,z,pe-bt)}var wi=_e?p:this,_a=Te?wi[o]:o;return bt=Ot.length,G?Ot=KN(Ot,G):He&&bt>1&&Ot.reverse(),ge&&z<bt&&(Ot.length=z),this&&this!==Ur&&this instanceof Ye&&(_a=gt||su(_a)),_a.apply(wi,Ot)}return Ye}function u1(o,c){return function(p,v){return ZR(p,o,c(v),{})}}function lf(o,c){return function(p,v){var C;if(p===t&&v===t)return c;if(p!==t&&(C=p),v!==t){if(C===t)return v;typeof p=="string"||typeof v=="string"?(p=Mn(p),v=Mn(v)):(p=zv(p),v=zv(v)),C=o(p,v)}return C}}function jp(o){return ga(function(c){return c=cr(c,Pn(je())),vt(function(p){var v=this;return o(c,function(C){return Ln(C,v,p)})})})}function uf(o,c){c=c===t?" ":Mn(c);var p=c.length;if(p<2)return p?Pp(c,o):c;var v=Pp(c,zc(o/Io(c)));return ko(c)?za(yi(v),0,o).join(""):v.slice(0,o)}function SN(o,c,p,v){var C=c&m,R=su(o);function P(){for(var G=-1,z=arguments.length,pe=-1,ge=v.length,_e=ie(ge+z),Te=this&&this!==Ur&&this instanceof P?R:o;++pe<ge;)_e[pe]=v[pe];for(;z--;)_e[pe++]=arguments[++G];return Ln(Te,C?p:this,_e)}return P}function c1(o){return function(c,p,v){return v&&typeof v!="number"&&hn(c,p,v)&&(p=v=t),c=va(c),p===t?(p=c,c=0):p=va(p),v=v===t?c<p?1:-1:va(v),cN(c,p,v,o)}}function cf(o){return function(c,p){return typeof c=="string"&&typeof p=="string"||(c=ei(c),p=ei(p)),o(c,p)}}function f1(o,c,p,v,C,R,P,G,z,pe){var ge=c&w,_e=ge?P:t,Te=ge?t:P,Pe=ge?R:t,He=ge?t:R;c|=ge?k:N,c&=~(ge?N:k),c&E||(c&=~(m|_));var gt=[o,c,C,Pe,_e,He,Te,G,z,pe],Ye=p.apply(t,gt);return Jp(o)&&b1(Ye,gt),Ye.placeholder=v,x1(Ye,o,c)}function Kp(o){var c=Br[o];return function(p,v){if(p=ei(p),v=v==null?0:sn(ht(v),292),v&&xv(p)){var C=(jt(p)+"e").split("e"),R=c(C[0]+"e"+(+C[1]+v));return C=(jt(R)+"e").split("e"),+(C[0]+"e"+(+C[1]-v))}return c(p)}}var TN=No&&1/Uc(new No([,-0]))[1]==Ne?function(o){return new No(o)}:d0;function d1(o){return function(c){var p=on(c);return p==H?wp(c):p==Z?jI(c):LI(c,o(c))}}function pa(o,c,p,v,C,R,P,G){var z=c&_;if(!z&&typeof o!="function")throw new Qn(i);var pe=v?v.length:0;if(pe||(c&=~(k|N),v=C=t),P=P===t?P:Dr(ht(P),0),G=G===t?G:ht(G),pe-=C?C.length:0,c&N){var ge=v,_e=C;v=C=t}var Te=z?t:Wp(o),Pe=[o,c,p,v,C,ge,_e,R,P,G];if(Te&&GN(Pe,Te),o=Pe[0],c=Pe[1],p=Pe[2],v=Pe[3],C=Pe[4],G=Pe[9]=Pe[9]===t?z?0:o.length:Dr(Pe[9]-pe,0),!G&&c&(w|b)&&(c&=~(w|b)),!c||c==m)var He=bN(o,c,p);else c==w||c==b?He=xN(o,c,G):(c==k||c==(m|k))&&!C.length?He=SN(o,c,p,v):He=of.apply(t,Pe);var gt=Te?Yv:b1;return x1(gt(He,Pe),o,c)}function h1(o,c,p,v){return o===t||_i(o,Ro[p])&&!Wt.call(v,p)?c:o}function p1(o,c,p,v,C,R){return gr(o)&&gr(c)&&(R.set(c,o),rf(o,c,t,p1,R),R.delete(c)),o}function AN(o){return uu(o)?t:o}function g1(o,c,p,v,C,R){var P=p&g,G=o.length,z=c.length;if(G!=z&&!(P&&z>G))return!1;var pe=R.get(o),ge=R.get(c);if(pe&&ge)return pe==c&&ge==o;var _e=-1,Te=!0,Pe=p&y?new ks:t;for(R.set(o,c),R.set(c,o);++_e<G;){var He=o[_e],gt=c[_e];if(v)var Ye=P?v(gt,He,_e,c,o,R):v(He,gt,_e,o,c,R);if(Ye!==t){if(Ye)continue;Te=!1;break}if(Pe){if(!pp(c,function(bt,Ot){if(!Ql(Pe,Ot)&&(He===bt||C(He,bt,p,v,R)))return Pe.push(Ot)})){Te=!1;break}}else if(!(He===gt||C(He,gt,p,v,R))){Te=!1;break}}return R.delete(o),R.delete(c),Te}function kN(o,c,p,v,C,R,P){switch(p){case rt:if(o.byteLength!=c.byteLength||o.byteOffset!=c.byteOffset)return!1;o=o.buffer,c=c.buffer;case Xt:return!(o.byteLength!=c.byteLength||!R(new Kc(o),new Kc(c)));case et:case tt:case j:return _i(+o,+c);case I:return o.name==c.name&&o.message==c.message;case te:case he:return o==c+"";case H:var G=wp;case Z:var z=v&g;if(G||(G=Uc),o.size!=c.size&&!z)return!1;var pe=P.get(o);if(pe)return pe==c;v|=y,P.set(o,c);var ge=g1(G(o),G(c),v,C,R,P);return P.delete(o),ge;case Oe:if(eu)return eu.call(o)==eu.call(c)}return!1}function IN(o,c,p,v,C,R){var P=p&g,G=Hp(o),z=G.length,pe=Hp(c),ge=pe.length;if(z!=ge&&!P)return!1;for(var _e=z;_e--;){var Te=G[_e];if(!(P?Te in c:Wt.call(c,Te)))return!1}var Pe=R.get(o),He=R.get(c);if(Pe&&He)return Pe==c&&He==o;var gt=!0;R.set(o,c),R.set(c,o);for(var Ye=P;++_e<z;){Te=G[_e];var bt=o[Te],Ot=c[Te];if(v)var Fn=P?v(Ot,bt,Te,c,o,R):v(bt,Ot,Te,o,c,R);if(!(Fn===t?bt===Ot||C(bt,Ot,p,v,R):Fn)){gt=!1;break}Ye||(Ye=Te=="constructor")}if(gt&&!Ye){var pn=o.constructor,qn=c.constructor;pn!=qn&&"constructor"in o&&"constructor"in c&&!(typeof pn=="function"&&pn instanceof pn&&typeof qn=="function"&&qn instanceof qn)&&(gt=!1)}return R.delete(o),R.delete(c),gt}function ga(o){return $p(E1(o,t,R1),o+"")}function Hp(o){return Lv(o,Fr,Qp)}function Yp(o){return Lv(o,An,m1)}var Wp=Xc?function(o){return Xc.get(o)}:d0;function ff(o){for(var c=o.name+"",p=Bo[c],v=Wt.call(Bo,c)?p.length:0;v--;){var C=p[v],R=C.func;if(R==null||R==o)return C.name}return c}function Po(o){var c=Wt.call(A,"placeholder")?A:o;return c.placeholder}function je(){var o=A.iteratee||c0;return o=o===c0?Uv:o,arguments.length?o(arguments[0],arguments[1]):o}function df(o,c){var p=o.__data__;return MN(c)?p[typeof c=="string"?"string":"hash"]:p.map}function zp(o){for(var c=Fr(o),p=c.length;p--;){var v=c[p],C=o[v];c[p]=[v,C,_1(C)]}return c}function Ns(o,c){var p=qI(o,c);return Mv(p)?p:t}function RN(o){var c=Wt.call(o,Ts),p=o[Ts];try{o[Ts]=t;var v=!0}catch(R){}var C=Vc.call(o);return v&&(c?o[Ts]=p:delete o[Ts]),C}var Qp=Cp?function(o){return o==null?[]:(o=Zt(o),qa(Cp(o),function(c){return Cv.call(o,c)}))}:h0,m1=Cp?function(o){for(var c=[];o;)Ga(c,Qp(o)),o=Hc(o);return c}:h0,on=dn;(bp&&on(new bp(new ArrayBuffer(1)))!=rt||Jl&&on(new Jl)!=H||xp&&on(xp.resolve())!=Y||No&&on(new No)!=Z||Zl&&on(new Zl)!=dt)&&(on=function(o){var c=dn(o),p=c==J?o.constructor:t,v=p?Bs(p):"";if(v)switch(v){case dR:return rt;case hR:return H;case pR:return Y;case gR:return Z;case mR:return dt}return c});function NN(o,c,p){for(var v=-1,C=p.length;++v<C;){var R=p[v],P=R.size;switch(R.type){case"drop":o+=P;break;case"dropRight":c-=P;break;case"take":c=sn(c,o+P);break;case"takeRight":o=Dr(o,c-P);break}}return{start:o,end:c}}function BN(o){var c=o.match(Uk);return c?c[1].split(Fk):[]}function y1(o,c,p){c=Wa(c,o);for(var v=-1,C=c.length,R=!1;++v<C;){var P=Gi(c[v]);if(!(R=o!=null&&p(o,P)))break;o=o[P]}return R||++v!=C?R:(C=o==null?0:o.length,!!C&&_f(C)&&ma(P,C)&&(nt(o)||Ds(o)))}function DN(o){var c=o.length,p=new o.constructor(c);return c&&typeof o[0]=="string"&&Wt.call(o,"index")&&(p.index=o.index,p.input=o.input),p}function v1(o){return typeof o.constructor=="function"&&!ou(o)?Do(Hc(o)):{}}function ON(o,c,p){var v=o.constructor;switch(c){case Xt:return Vp(o);case et:case tt:return new v(+o);case rt:return yN(o,p);case Dt:case pr:case Fa:case bs:case xs:case xn:case ca:case an:case Nr:return e1(o,p);case H:return new v;case j:case he:return new v(o);case te:return vN(o);case Z:return new v;case Oe:return _N(o)}}function LN(o,c){var p=c.length;if(!p)return o;var v=p-1;return c[v]=(p>1?"& ":"")+c[v],c=c.join(p>2?", ":" "),o.replace(Mk,`{
/* [wrapped with `+c+`] */
`)}function PN(o){return nt(o)||Ds(o)||!!(bv&&o&&o[bv])}function ma(o,c){var p=typeof o;return c=c==null?me:c,!!c&&(p=="number"||p!="symbol"&&zk.test(o))&&o>-1&&o%1==0&&o<c}function hn(o,c,p){if(!gr(p))return!1;var v=typeof c;return(v=="number"?Tn(p)&&ma(c,p.length):v=="string"&&c in p)?_i(p[c],o):!1}function Xp(o,c){if(nt(o))return!1;var p=typeof o;return p=="number"||p=="symbol"||p=="boolean"||o==null||Un(o)?!0:Dk.test(o)||!Bk.test(o)||c!=null&&o in Zt(c)}function MN(o){var c=typeof o;return c=="string"||c=="number"||c=="symbol"||c=="boolean"?o!=="__proto__":o===null}function Jp(o){var c=ff(o),p=A[c];if(typeof p!="function"||!(c in kt.prototype))return!1;if(o===p)return!0;var v=Wp(p);return!!v&&o===v[0]}function UN(o){return!!_v&&_v in o}var FN=qc?ya:p0;function ou(o){var c=o&&o.constructor,p=typeof c=="function"&&c.prototype||Ro;return o===p}function _1(o){return o===o&&!gr(o)}function w1(o,c){return function(p){return p==null?!1:p[o]===c&&(c!==t||o in Zt(p))}}function qN(o){var c=yf(o,function(v){return p.size===l&&p.clear(),v}),p=c.cache;return c}function GN(o,c){var p=o[1],v=c[1],C=p|v,R=C<(m|_|D),P=v==D&&p==w||v==D&&p==B&&o[7].length<=c[8]||v==(D|B)&&c[7].length<=c[8]&&p==w;if(!(R||P))return o;v&m&&(o[2]=c[2],C|=p&m?0:E);var G=c[3];if(G){var z=o[3];o[3]=z?r1(z,G,c[4]):G,o[4]=z?Va(o[3],u):c[4]}return G=c[5],G&&(z=o[5],o[5]=z?n1(z,G,c[6]):G,o[6]=z?Va(o[5],u):c[6]),G=c[7],G&&(o[7]=G),v&D&&(o[8]=o[8]==null?c[8]:sn(o[8],c[8])),o[9]==null&&(o[9]=c[9]),o[0]=c[0],o[1]=C,o}function VN(o){var c=[];if(o!=null)for(var p in Zt(o))c.push(p);return c}function jN(o){return Vc.call(o)}function E1(o,c,p){return c=Dr(c===t?o.length-1:c,0),function(){for(var v=arguments,C=-1,R=Dr(v.length-c,0),P=ie(R);++C<R;)P[C]=v[c+C];C=-1;for(var G=ie(c+1);++C<c;)G[C]=v[C];return G[c]=p(P),Ln(o,this,G)}}function C1(o,c){return c.length<2?o:Rs(o,Zn(c,0,-1))}function KN(o,c){for(var p=o.length,v=sn(c.length,p),C=Sn(o);v--;){var R=c[v];o[v]=ma(R,p)?C[R]:t}return o}function Zp(o,c){if(!(c==="constructor"&&typeof o[c]=="function")&&c!="__proto__")return o[c]}var b1=S1(Yv),lu=aR||function(o,c){return Ur.setTimeout(o,c)},$p=S1(hN);function x1(o,c,p){var v=c+"";return $p(o,LN(v,HN(BN(v),p)))}function S1(o){var c=0,p=0;return function(){var v=uR(),C=ae-(v-p);if(p=v,C>0){if(++c>=oe)return arguments[0]}else c=0;return o.apply(t,arguments)}}function hf(o,c){var p=-1,v=o.length,C=v-1;for(c=c===t?v:c;++p<c;){var R=Lp(p,C),P=o[R];o[R]=o[p],o[p]=P}return o.length=c,o}var T1=qN(function(o){var c=[];return o.charCodeAt(0)===46&&c.push(""),o.replace(Ok,function(p,v,C,R){c.push(C?R.replace(Vk,"$1"):v||p)}),c});function Gi(o){if(typeof o=="string"||Un(o))return o;var c=o+"";return c=="0"&&1/o==-Ne?"-0":c}function Bs(o){if(o!=null){try{return Gc.call(o)}catch(c){}try{return o+""}catch(c){}}return""}function HN(o,c){return zn(ct,function(p){var v="_."+p[0];c&p[1]&&!Pc(o,v)&&o.push(v)}),o.sort()}function A1(o){if(o instanceof kt)return o.clone();var c=new Xn(o.__wrapped__,o.__chain__);return c.__actions__=Sn(o.__actions__),c.__index__=o.__index__,c.__values__=o.__values__,c}function YN(o,c,p){(p?hn(o,c,p):c===t)?c=1:c=Dr(ht(c),0);var v=o==null?0:o.length;if(!v||c<1)return[];for(var C=0,R=0,P=ie(zc(v/c));C<v;)P[R++]=Zn(o,C,C+=c);return P}function WN(o){for(var c=-1,p=o==null?0:o.length,v=0,C=[];++c<p;){var R=o[c];R&&(C[v++]=R)}return C}function zN(){var o=arguments.length;if(!o)return[];for(var c=ie(o-1),p=arguments[0],v=o;v--;)c[v-1]=arguments[v];return Ga(nt(p)?Sn(p):[p],Xr(c,1))}var QN=vt(function(o,c){return Er(o)?ru(o,Xr(c,1,Er,!0)):[]}),XN=vt(function(o,c){var p=$n(c);return Er(p)&&(p=t),Er(o)?ru(o,Xr(c,1,Er,!0),je(p,2)):[]}),JN=vt(function(o,c){var p=$n(c);return Er(p)&&(p=t),Er(o)?ru(o,Xr(c,1,Er,!0),t,p):[]});function ZN(o,c,p){var v=o==null?0:o.length;return v?(c=p||c===t?1:ht(c),Zn(o,c<0?0:c,v)):[]}function $N(o,c,p){var v=o==null?0:o.length;return v?(c=p||c===t?1:ht(c),c=v-c,Zn(o,0,c<0?0:c)):[]}function eB(o,c){return o&&o.length?af(o,je(c,3),!0,!0):[]}function tB(o,c){return o&&o.length?af(o,je(c,3),!0):[]}function rB(o,c,p,v){var C=o==null?0:o.length;return C?(p&&typeof p!="number"&&hn(o,c,p)&&(p=0,v=C),zR(o,c,p,v)):[]}function k1(o,c,p){var v=o==null?0:o.length;if(!v)return-1;var C=p==null?0:ht(p);return C<0&&(C=Dr(v+C,0)),Mc(o,je(c,3),C)}function I1(o,c,p){var v=o==null?0:o.length;if(!v)return-1;var C=v-1;return p!==t&&(C=ht(p),C=p<0?Dr(v+C,0):sn(C,v-1)),Mc(o,je(c,3),C,!0)}function R1(o){var c=o==null?0:o.length;return c?Xr(o,1):[]}function nB(o){var c=o==null?0:o.length;return c?Xr(o,Ne):[]}function iB(o,c){var p=o==null?0:o.length;return p?(c=c===t?1:ht(c),Xr(o,c)):[]}function aB(o){for(var c=-1,p=o==null?0:o.length,v={};++c<p;){var C=o[c];v[C[0]]=C[1]}return v}function N1(o){return o&&o.length?o[0]:t}function sB(o,c,p){var v=o==null?0:o.length;if(!v)return-1;var C=p==null?0:ht(p);return C<0&&(C=Dr(v+C,0)),Ao(o,c,C)}function oB(o){var c=o==null?0:o.length;return c?Zn(o,0,-1):[]}var lB=vt(function(o){var c=cr(o,qp);return c.length&&c[0]===o[0]?Rp(c):[]}),uB=vt(function(o){var c=$n(o),p=cr(o,qp);return c===$n(p)?c=t:p.pop(),p.length&&p[0]===o[0]?Rp(p,je(c,2)):[]}),cB=vt(function(o){var c=$n(o),p=cr(o,qp);return c=typeof c=="function"?c:t,c&&p.pop(),p.length&&p[0]===o[0]?Rp(p,t,c):[]});function fB(o,c){return o==null?"":oR.call(o,c)}function $n(o){var c=o==null?0:o.length;return c?o[c-1]:t}function dB(o,c,p){var v=o==null?0:o.length;if(!v)return-1;var C=v;return p!==t&&(C=ht(p),C=C<0?Dr(v+C,0):sn(C,v-1)),c===c?HI(o,c,C):Mc(o,fv,C,!0)}function hB(o,c){return o&&o.length?Vv(o,ht(c)):t}var pB=vt(B1);function B1(o,c){return o&&o.length&&c&&c.length?Op(o,c):o}function gB(o,c,p){return o&&o.length&&c&&c.length?Op(o,c,je(p,2)):o}function mB(o,c,p){return o&&o.length&&c&&c.length?Op(o,c,t,p):o}var yB=ga(function(o,c){var p=o==null?0:o.length,v=Tp(o,c);return Hv(o,cr(c,function(C){return ma(C,p)?+C:C}).sort(t1)),v});function vB(o,c){var p=[];if(!(o&&o.length))return p;var v=-1,C=[],R=o.length;for(c=je(c,3);++v<R;){var P=o[v];c(P,v,o)&&(p.push(P),C.push(v))}return Hv(o,C),p}function e0(o){return o==null?o:fR.call(o)}function _B(o,c,p){var v=o==null?0:o.length;return v?(p&&typeof p!="number"&&hn(o,c,p)?(c=0,p=v):(c=c==null?0:ht(c),p=p===t?v:ht(p)),Zn(o,c,p)):[]}function wB(o,c){return nf(o,c)}function EB(o,c,p){return Mp(o,c,je(p,2))}function CB(o,c){var p=o==null?0:o.length;if(p){var v=nf(o,c);if(v<p&&_i(o[v],c))return v}return-1}function bB(o,c){return nf(o,c,!0)}function xB(o,c,p){return Mp(o,c,je(p,2),!0)}function SB(o,c){var p=o==null?0:o.length;if(p){var v=nf(o,c,!0)-1;if(_i(o[v],c))return v}return-1}function TB(o){return o&&o.length?Wv(o):[]}function AB(o,c){return o&&o.length?Wv(o,je(c,2)):[]}function kB(o){var c=o==null?0:o.length;return c?Zn(o,1,c):[]}function IB(o,c,p){return o&&o.length?(c=p||c===t?1:ht(c),Zn(o,0,c<0?0:c)):[]}function RB(o,c,p){var v=o==null?0:o.length;return v?(c=p||c===t?1:ht(c),c=v-c,Zn(o,c<0?0:c,v)):[]}function NB(o,c){return o&&o.length?af(o,je(c,3),!1,!0):[]}function BB(o,c){return o&&o.length?af(o,je(c,3)):[]}var DB=vt(function(o){return Ya(Xr(o,1,Er,!0))}),OB=vt(function(o){var c=$n(o);return Er(c)&&(c=t),Ya(Xr(o,1,Er,!0),je(c,2))}),LB=vt(function(o){var c=$n(o);return c=typeof c=="function"?c:t,Ya(Xr(o,1,Er,!0),t,c)});function PB(o){return o&&o.length?Ya(o):[]}function MB(o,c){return o&&o.length?Ya(o,je(c,2)):[]}function UB(o,c){return c=typeof c=="function"?c:t,o&&o.length?Ya(o,t,c):[]}function t0(o){if(!(o&&o.length))return[];var c=0;return o=qa(o,function(p){if(Er(p))return c=Dr(p.length,c),!0}),vp(c,function(p){return cr(o,gp(p))})}function D1(o,c){if(!(o&&o.length))return[];var p=t0(o);return c==null?p:cr(p,function(v){return Ln(c,t,v)})}var FB=vt(function(o,c){return Er(o)?ru(o,c):[]}),qB=vt(function(o){return Fp(qa(o,Er))}),GB=vt(function(o){var c=$n(o);return Er(c)&&(c=t),Fp(qa(o,Er),je(c,2))}),VB=vt(function(o){var c=$n(o);return c=typeof c=="function"?c:t,Fp(qa(o,Er),t,c)}),jB=vt(t0);function KB(o,c){return Jv(o||[],c||[],tu)}function HB(o,c){return Jv(o||[],c||[],au)}var YB=vt(function(o){var c=o.length,p=c>1?o[c-1]:t;return p=typeof p=="function"?(o.pop(),p):t,D1(o,p)});function O1(o){var c=A(o);return c.__chain__=!0,c}function WB(o,c){return c(o),o}function pf(o,c){return c(o)}var zB=ga(function(o){var c=o.length,p=c?o[0]:0,v=this.__wrapped__,C=function(R){return Tp(R,o)};return c>1||this.__actions__.length||!(v instanceof kt)||!ma(p)?this.thru(C):(v=v.slice(p,+p+(c?1:0)),v.__actions__.push({func:pf,args:[C],thisArg:t}),new Xn(v,this.__chain__).thru(function(R){return c&&!R.length&&R.push(t),R}))});function QB(){return O1(this)}function XB(){return new Xn(this.value(),this.__chain__)}function JB(){this.__values__===t&&(this.__values__=z1(this.value()));var o=this.__index__>=this.__values__.length,c=o?t:this.__values__[this.__index__++];return{done:o,value:c}}function ZB(){return this}function $B(o){for(var c,p=this;p instanceof Zc;){var v=A1(p);v.__index__=0,v.__values__=t,c?C.__wrapped__=v:c=v;var C=v;p=p.__wrapped__}return C.__wrapped__=o,c}function eD(){var o=this.__wrapped__;if(o instanceof kt){var c=o;return this.__actions__.length&&(c=new kt(this)),c=c.reverse(),c.__actions__.push({func:pf,args:[e0],thisArg:t}),new Xn(c,this.__chain__)}return this.thru(e0)}function tD(){return Xv(this.__wrapped__,this.__actions__)}var rD=sf(function(o,c,p){Wt.call(o,p)?++o[p]:ha(o,p,1)});function nD(o,c,p){var v=nt(o)?uv:WR;return p&&hn(o,c,p)&&(c=t),v(o,je(c,3))}function iD(o,c){var p=nt(o)?qa:Dv;return p(o,je(c,3))}var aD=o1(k1),sD=o1(I1);function oD(o,c){return Xr(gf(o,c),1)}function lD(o,c){return Xr(gf(o,c),Ne)}function uD(o,c,p){return p=p===t?1:ht(p),Xr(gf(o,c),p)}function L1(o,c){var p=nt(o)?zn:Ha;return p(o,je(c,3))}function P1(o,c){var p=nt(o)?kI:Bv;return p(o,je(c,3))}var cD=sf(function(o,c,p){Wt.call(o,p)?o[p].push(c):ha(o,p,[c])});function fD(o,c,p,v){o=Tn(o)?o:Uo(o),p=p&&!v?ht(p):0;var C=o.length;return p<0&&(p=Dr(C+p,0)),wf(o)?p<=C&&o.indexOf(c,p)>-1:!!C&&Ao(o,c,p)>-1}var dD=vt(function(o,c,p){var v=-1,C=typeof c=="function",R=Tn(o)?ie(o.length):[];return Ha(o,function(P){R[++v]=C?Ln(c,P,p):nu(P,c,p)}),R}),hD=sf(function(o,c,p){ha(o,p,c)});function gf(o,c){var p=nt(o)?cr:Fv;return p(o,je(c,3))}function pD(o,c,p,v){return o==null?[]:(nt(c)||(c=c==null?[]:[c]),p=v?t:p,nt(p)||(p=p==null?[]:[p]),jv(o,c,p))}var gD=sf(function(o,c,p){o[p?0:1].push(c)},function(){return[[],[]]});function mD(o,c,p){var v=nt(o)?hp:hv,C=arguments.length<3;return v(o,je(c,4),p,C,Ha)}function yD(o,c,p){var v=nt(o)?II:hv,C=arguments.length<3;return v(o,je(c,4),p,C,Bv)}function vD(o,c){var p=nt(o)?qa:Dv;return p(o,vf(je(c,3)))}function _D(o){var c=nt(o)?kv:fN;return c(o)}function wD(o,c,p){(p?hn(o,c,p):c===t)?c=1:c=ht(c);var v=nt(o)?VR:dN;return v(o,c)}function ED(o){var c=nt(o)?jR:pN;return c(o)}function CD(o){if(o==null)return 0;if(Tn(o))return wf(o)?Io(o):o.length;var c=on(o);return c==H||c==Z?o.size:Bp(o).length}function bD(o,c,p){var v=nt(o)?pp:gN;return p&&hn(o,c,p)&&(c=t),v(o,je(c,3))}var xD=vt(function(o,c){if(o==null)return[];var p=c.length;return p>1&&hn(o,c[0],c[1])?c=[]:p>2&&hn(c[0],c[1],c[2])&&(c=[c[0]]),jv(o,Xr(c,1),[])}),mf=iR||function(){return Ur.Date.now()};function SD(o,c){if(typeof c!="function")throw new Qn(i);return o=ht(o),function(){if(--o<1)return c.apply(this,arguments)}}function M1(o,c,p){return c=p?t:c,c=o&&c==null?o.length:c,pa(o,D,t,t,t,t,c)}function U1(o,c){var p;if(typeof c!="function")throw new Qn(i);return o=ht(o),function(){return--o>0&&(p=c.apply(this,arguments)),o<=1&&(c=t),p}}var r0=vt(function(o,c,p){var v=m;if(p.length){var C=Va(p,Po(r0));v|=k}return pa(o,v,c,p,C)}),F1=vt(function(o,c,p){var v=m|_;if(p.length){var C=Va(p,Po(F1));v|=k}return pa(c,v,o,p,C)});function q1(o,c,p){c=p?t:c;var v=pa(o,w,t,t,t,t,t,c);return v.placeholder=q1.placeholder,v}function G1(o,c,p){c=p?t:c;var v=pa(o,b,t,t,t,t,t,c);return v.placeholder=G1.placeholder,v}function V1(o,c,p){var v,C,R,P,G,z,pe=0,ge=!1,_e=!1,Te=!0;if(typeof o!="function")throw new Qn(i);c=ei(c)||0,gr(p)&&(ge=!!p.leading,_e="maxWait"in p,R=_e?Dr(ei(p.maxWait)||0,c):R,Te="trailing"in p?!!p.trailing:Te);function Pe(Cr){var wi=v,_a=C;return v=C=t,pe=Cr,P=o.apply(_a,wi),P}function He(Cr){return pe=Cr,G=lu(bt,c),ge?Pe(Cr):P}function gt(Cr){var wi=Cr-z,_a=Cr-pe,o_=c-wi;return _e?sn(o_,R-_a):o_}function Ye(Cr){var wi=Cr-z,_a=Cr-pe;return z===t||wi>=c||wi<0||_e&&_a>=R}function bt(){var Cr=mf();if(Ye(Cr))return Ot(Cr);G=lu(bt,gt(Cr))}function Ot(Cr){return G=t,Te&&v?Pe(Cr):(v=C=t,P)}function Fn(){G!==t&&Zv(G),pe=0,v=z=C=G=t}function pn(){return G===t?P:Ot(mf())}function qn(){var Cr=mf(),wi=Ye(Cr);if(v=arguments,C=this,z=Cr,wi){if(G===t)return He(z);if(_e)return Zv(G),G=lu(bt,c),Pe(z)}return G===t&&(G=lu(bt,c)),P}return qn.cancel=Fn,qn.flush=pn,qn}var TD=vt(function(o,c){return Nv(o,1,c)}),AD=vt(function(o,c,p){return Nv(o,ei(c)||0,p)});function kD(o){return pa(o,ee)}function yf(o,c){if(typeof o!="function"||c!=null&&typeof c!="function")throw new Qn(i);var p=function(){var v=arguments,C=c?c.apply(this,v):v[0],R=p.cache;if(R.has(C))return R.get(C);var P=o.apply(this,v);return p.cache=R.set(C,P)||R,P};return p.cache=new(yf.Cache||da),p}yf.Cache=da;function vf(o){if(typeof o!="function")throw new Qn(i);return function(){var c=arguments;switch(c.length){case 0:return!o.call(this);case 1:return!o.call(this,c[0]);case 2:return!o.call(this,c[0],c[1]);case 3:return!o.call(this,c[0],c[1],c[2])}return!o.apply(this,c)}}function ID(o){return U1(2,o)}var RD=mN(function(o,c){c=c.length==1&&nt(c[0])?cr(c[0],Pn(je())):cr(Xr(c,1),Pn(je()));var p=c.length;return vt(function(v){for(var C=-1,R=sn(v.length,p);++C<R;)v[C]=c[C].call(this,v[C]);return Ln(o,this,v)})}),n0=vt(function(o,c){var p=Va(c,Po(n0));return pa(o,k,t,c,p)}),j1=vt(function(o,c){var p=Va(c,Po(j1));return pa(o,N,t,c,p)}),ND=ga(function(o,c){return pa(o,B,t,t,t,c)});function BD(o,c){if(typeof o!="function")throw new Qn(i);return c=c===t?c:ht(c),vt(o,c)}function DD(o,c){if(typeof o!="function")throw new Qn(i);return c=c==null?0:Dr(ht(c),0),vt(function(p){var v=p[c],C=za(p,0,c);return v&&Ga(C,v),Ln(o,this,C)})}function OD(o,c,p){var v=!0,C=!0;if(typeof o!="function")throw new Qn(i);return gr(p)&&(v="leading"in p?!!p.leading:v,C="trailing"in p?!!p.trailing:C),V1(o,c,{leading:v,maxWait:c,trailing:C})}function LD(o){return M1(o,1)}function PD(o,c){return n0(Gp(c),o)}function MD(){if(!arguments.length)return[];var o=arguments[0];return nt(o)?o:[o]}function UD(o){return Jn(o,h)}function FD(o,c){return c=typeof c=="function"?c:t,Jn(o,h,c)}function qD(o){return Jn(o,f|h)}function GD(o,c){return c=typeof c=="function"?c:t,Jn(o,f|h,c)}function VD(o,c){return c==null||Rv(o,c,Fr(c))}function _i(o,c){return o===c||o!==o&&c!==c}var jD=cf(Ip),KD=cf(function(o,c){return o>=c}),Ds=Pv(function(){return arguments}())?Pv:function(o){return vr(o)&&Wt.call(o,"callee")&&!Cv.call(o,"callee")},nt=ie.isArray,HD=nv?Pn(nv):$R;function Tn(o){return o!=null&&_f(o.length)&&!ya(o)}function Er(o){return vr(o)&&Tn(o)}function YD(o){return o===!0||o===!1||vr(o)&&dn(o)==et}var Qa=sR||p0,WD=iv?Pn(iv):eN;function zD(o){return vr(o)&&o.nodeType===1&&!uu(o)}function QD(o){if(o==null)return!0;if(Tn(o)&&(nt(o)||typeof o=="string"||typeof o.splice=="function"||Qa(o)||Mo(o)||Ds(o)))return!o.length;var c=on(o);if(c==H||c==Z)return!o.size;if(ou(o))return!Bp(o).length;for(var p in o)if(Wt.call(o,p))return!1;return!0}function XD(o,c){return iu(o,c)}function JD(o,c,p){p=typeof p=="function"?p:t;var v=p?p(o,c):t;return v===t?iu(o,c,t,p):!!v}function i0(o){if(!vr(o))return!1;var c=dn(o);return c==I||c==ft||typeof o.message=="string"&&typeof o.name=="string"&&!uu(o)}function ZD(o){return typeof o=="number"&&xv(o)}function ya(o){if(!gr(o))return!1;var c=dn(o);return c==O||c==L||c==Bt||c==X}function K1(o){return typeof o=="number"&&o==ht(o)}function _f(o){return typeof o=="number"&&o>-1&&o%1==0&&o<=me}function gr(o){var c=typeof o;return o!=null&&(c=="object"||c=="function")}function vr(o){return o!=null&&typeof o=="object"}var H1=av?Pn(av):rN;function $D(o,c){return o===c||Np(o,c,zp(c))}function eO(o,c,p){return p=typeof p=="function"?p:t,Np(o,c,zp(c),p)}function tO(o){return Y1(o)&&o!=+o}function rO(o){if(FN(o))throw new $e(n);return Mv(o)}function nO(o){return o===null}function iO(o){return o==null}function Y1(o){return typeof o=="number"||vr(o)&&dn(o)==j}function uu(o){if(!vr(o)||dn(o)!=J)return!1;var c=Hc(o);if(c===null)return!0;var p=Wt.call(c,"constructor")&&c.constructor;return typeof p=="function"&&p instanceof p&&Gc.call(p)==eR}var a0=sv?Pn(sv):nN;function aO(o){return K1(o)&&o>=-me&&o<=me}var W1=ov?Pn(ov):iN;function wf(o){return typeof o=="string"||!nt(o)&&vr(o)&&dn(o)==he}function Un(o){return typeof o=="symbol"||vr(o)&&dn(o)==Oe}var Mo=lv?Pn(lv):aN;function sO(o){return o===t}function oO(o){return vr(o)&&on(o)==dt}function lO(o){return vr(o)&&dn(o)==Qt}var uO=cf(Dp),cO=cf(function(o,c){return o<=c});function z1(o){if(!o)return[];if(Tn(o))return wf(o)?yi(o):Sn(o);if(Xl&&o[Xl])return VI(o[Xl]());var c=on(o),p=c==H?wp:c==Z?Uc:Uo;return p(o)}function va(o){if(!o)return o===0?o:0;if(o=ei(o),o===Ne||o===-Ne){var c=o<0?-1:1;return c*ne}return o===o?o:0}function ht(o){var c=va(o),p=c%1;return c===c?p?c-p:c:0}function Q1(o){return o?Is(ht(o),0,Je):0}function ei(o){if(typeof o=="number")return o;if(Un(o))return Ge;if(gr(o)){var c=typeof o.valueOf=="function"?o.valueOf():o;o=gr(c)?c+"":c}if(typeof o!="string")return o===0?o:+o;o=pv(o);var p=Hk.test(o);return p||Wk.test(o)?SI(o.slice(2),p?2:8):Kk.test(o)?Ge:+o}function X1(o){return qi(o,An(o))}function fO(o){return o?Is(ht(o),-me,me):o===0?o:0}function jt(o){return o==null?"":Mn(o)}var dO=Oo(function(o,c){if(ou(c)||Tn(c)){qi(c,Fr(c),o);return}for(var p in c)Wt.call(c,p)&&tu(o,p,c[p])}),J1=Oo(function(o,c){qi(c,An(c),o)}),Ef=Oo(function(o,c,p,v){qi(c,An(c),o,v)}),hO=Oo(function(o,c,p,v){qi(c,Fr(c),o,v)}),pO=ga(Tp);function gO(o,c){var p=Do(o);return c==null?p:Iv(p,c)}var mO=vt(function(o,c){o=Zt(o);var p=-1,v=c.length,C=v>2?c[2]:t;for(C&&hn(c[0],c[1],C)&&(v=1);++p<v;)for(var R=c[p],P=An(R),G=-1,z=P.length;++G<z;){var pe=P[G],ge=o[pe];(ge===t||_i(ge,Ro[pe])&&!Wt.call(o,pe))&&(o[pe]=R[pe])}return o}),yO=vt(function(o){return o.push(t,p1),Ln(Z1,t,o)});function vO(o,c){return cv(o,je(c,3),Fi)}function _O(o,c){return cv(o,je(c,3),kp)}function wO(o,c){return o==null?o:Ap(o,je(c,3),An)}function EO(o,c){return o==null?o:Ov(o,je(c,3),An)}function CO(o,c){return o&&Fi(o,je(c,3))}function bO(o,c){return o&&kp(o,je(c,3))}function xO(o){return o==null?[]:tf(o,Fr(o))}function SO(o){return o==null?[]:tf(o,An(o))}function s0(o,c,p){var v=o==null?t:Rs(o,c);return v===t?p:v}function TO(o,c){return o!=null&&y1(o,c,QR)}function o0(o,c){return o!=null&&y1(o,c,XR)}var AO=u1(function(o,c,p){c!=null&&typeof c.toString!="function"&&(c=Vc.call(c)),o[c]=p},u0(kn)),kO=u1(function(o,c,p){c!=null&&typeof c.toString!="function"&&(c=Vc.call(c)),Wt.call(o,c)?o[c].push(p):o[c]=[p]},je),IO=vt(nu);function Fr(o){return Tn(o)?Av(o):Bp(o)}function An(o){return Tn(o)?Av(o,!0):sN(o)}function RO(o,c){var p={};return c=je(c,3),Fi(o,function(v,C,R){ha(p,c(v,C,R),v)}),p}function NO(o,c){var p={};return c=je(c,3),Fi(o,function(v,C,R){ha(p,C,c(v,C,R))}),p}var BO=Oo(function(o,c,p){rf(o,c,p)}),Z1=Oo(function(o,c,p,v){rf(o,c,p,v)}),DO=ga(function(o,c){var p={};if(o==null)return p;var v=!1;c=cr(c,function(R){return R=Wa(R,o),v||(v=R.length>1),R}),qi(o,Yp(o),p),v&&(p=Jn(p,f|d|h,AN));for(var C=c.length;C--;)Up(p,c[C]);return p});function OO(o,c){return $1(o,vf(je(c)))}var LO=ga(function(o,c){return o==null?{}:lN(o,c)});function $1(o,c){if(o==null)return{};var p=cr(Yp(o),function(v){return[v]});return c=je(c),Kv(o,p,function(v,C){return c(v,C[0])})}function PO(o,c,p){c=Wa(c,o);var v=-1,C=c.length;for(C||(C=1,o=t);++v<C;){var R=o==null?t:o[Gi(c[v])];R===t&&(v=C,R=p),o=ya(R)?R.call(o):R}return o}function MO(o,c,p){return o==null?o:au(o,c,p)}function UO(o,c,p,v){return v=typeof v=="function"?v:t,o==null?o:au(o,c,p,v)}var e_=d1(Fr),t_=d1(An);function FO(o,c,p){var v=nt(o),C=v||Qa(o)||Mo(o);if(c=je(c,4),p==null){var R=o&&o.constructor;C?p=v?new R:[]:gr(o)?p=ya(R)?Do(Hc(o)):{}:p={}}return(C?zn:Fi)(o,function(P,G,z){return c(p,P,G,z)}),p}function qO(o,c){return o==null?!0:Up(o,c)}function GO(o,c,p){return o==null?o:Qv(o,c,Gp(p))}function VO(o,c,p,v){return v=typeof v=="function"?v:t,o==null?o:Qv(o,c,Gp(p),v)}function Uo(o){return o==null?[]:_p(o,Fr(o))}function jO(o){return o==null?[]:_p(o,An(o))}function KO(o,c,p){return p===t&&(p=c,c=t),p!==t&&(p=ei(p),p=p===p?p:0),c!==t&&(c=ei(c),c=c===c?c:0),Is(ei(o),c,p)}function HO(o,c,p){return c=va(c),p===t?(p=c,c=0):p=va(p),o=ei(o),JR(o,c,p)}function YO(o,c,p){if(p&&typeof p!="boolean"&&hn(o,c,p)&&(c=p=t),p===t&&(typeof c=="boolean"?(p=c,c=t):typeof o=="boolean"&&(p=o,o=t)),o===t&&c===t?(o=0,c=1):(o=va(o),c===t?(c=o,o=0):c=va(c)),o>c){var v=o;o=c,c=v}if(p||o%1||c%1){var C=Sv();return sn(o+C*(c-o+xI("1e-"+((C+"").length-1))),c)}return Lp(o,c)}var WO=Lo(function(o,c,p){return c=c.toLowerCase(),o+(p?r_(c):c)});function r_(o){return l0(jt(o).toLowerCase())}function n_(o){return o=jt(o),o&&o.replace(Qk,MI).replace(pI,"")}function zO(o,c,p){o=jt(o),c=Mn(c);var v=o.length;p=p===t?v:Is(ht(p),0,v);var C=p;return p-=c.length,p>=0&&o.slice(p,C)==c}function QO(o){return o=jt(o),o&&Ik.test(o)?o.replace(Oy,UI):o}function XO(o){return o=jt(o),o&&Lk.test(o)?o.replace(np,"\\$&"):o}var JO=Lo(function(o,c,p){return o+(p?"-":"")+c.toLowerCase()}),ZO=Lo(function(o,c,p){return o+(p?" ":"")+c.toLowerCase()}),$O=s1("toLowerCase");function e3(o,c,p){o=jt(o),c=ht(c);var v=c?Io(o):0;if(!c||v>=c)return o;var C=(c-v)/2;return uf(Qc(C),p)+o+uf(zc(C),p)}function t3(o,c,p){o=jt(o),c=ht(c);var v=c?Io(o):0;return c&&v<c?o+uf(c-v,p):o}function r3(o,c,p){o=jt(o),c=ht(c);var v=c?Io(o):0;return c&&v<c?uf(c-v,p)+o:o}function n3(o,c,p){return p||c==null?c=0:c&&(c=+c),cR(jt(o).replace(ip,""),c||0)}function i3(o,c,p){return(p?hn(o,c,p):c===t)?c=1:c=ht(c),Pp(jt(o),c)}function a3(){var o=arguments,c=jt(o[0]);return o.length<3?c:c.replace(o[1],o[2])}var s3=Lo(function(o,c,p){return o+(p?"_":"")+c.toLowerCase()});function o3(o,c,p){return p&&typeof p!="number"&&hn(o,c,p)&&(c=p=t),p=p===t?Je:p>>>0,p?(o=jt(o),o&&(typeof c=="string"||c!=null&&!a0(c))&&(c=Mn(c),!c&&ko(o))?za(yi(o),0,p):o.split(c,p)):[]}var l3=Lo(function(o,c,p){return o+(p?" ":"")+l0(c)});function u3(o,c,p){return o=jt(o),p=p==null?0:Is(ht(p),0,o.length),c=Mn(c),o.slice(p,p+c.length)==c}function c3(o,c,p){var v=A.templateSettings;p&&hn(o,c,p)&&(c=t),o=jt(o),c=Ef({},c,v,h1);var C=Ef({},c.imports,v.imports,h1),R=Fr(C),P=_p(C,R),G,z,pe=0,ge=c.interpolate||Dc,_e="__p += '",Te=Ep((c.escape||Dc).source+"|"+ge.source+"|"+(ge===Ly?jk:Dc).source+"|"+(c.evaluate||Dc).source+"|$","g"),Pe="//# sourceURL="+(Wt.call(c,"sourceURL")?(c.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++_I+"]")+`
`;o.replace(Te,function(Ye,bt,Ot,Fn,pn,qn){return Ot||(Ot=Fn),_e+=o.slice(pe,qn).replace(Xk,FI),bt&&(G=!0,_e+=`' +
__e(`+bt+`) +
'`),pn&&(z=!0,_e+=`';
`+pn+`;
__p += '`),Ot&&(_e+=`' +
((__t = (`+Ot+`)) == null ? '' : __t) +
'`),pe=qn+Ye.length,Ye}),_e+=`';
`;var He=Wt.call(c,"variable")&&c.variable;if(!He)_e=`with (obj) {
`+_e+`
}
`;else if(Gk.test(He))throw new $e(a);_e=(z?_e.replace(ur,""):_e).replace(Tk,"$1").replace(Ak,"$1;"),_e="function("+(He||"obj")+`) {
`+(He?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(G?", __e = _.escape":"")+(z?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+_e+`return __p
}`;var gt=a_(function(){return Vt(R,Pe+"return "+_e).apply(t,P)});if(gt.source=_e,i0(gt))throw gt;return gt}function f3(o){return jt(o).toLowerCase()}function d3(o){return jt(o).toUpperCase()}function h3(o,c,p){if(o=jt(o),o&&(p||c===t))return pv(o);if(!o||!(c=Mn(c)))return o;var v=yi(o),C=yi(c),R=gv(v,C),P=mv(v,C)+1;return za(v,R,P).join("")}function p3(o,c,p){if(o=jt(o),o&&(p||c===t))return o.slice(0,vv(o)+1);if(!o||!(c=Mn(c)))return o;var v=yi(o),C=mv(v,yi(c))+1;return za(v,0,C).join("")}function g3(o,c,p){if(o=jt(o),o&&(p||c===t))return o.replace(ip,"");if(!o||!(c=Mn(c)))return o;var v=yi(o),C=gv(v,yi(c));return za(v,C).join("")}function m3(o,c){var p=q,v=U;if(gr(c)){var C="separator"in c?c.separator:C;p="length"in c?ht(c.length):p,v="omission"in c?Mn(c.omission):v}o=jt(o);var R=o.length;if(ko(o)){var P=yi(o);R=P.length}if(p>=R)return o;var G=p-Io(v);if(G<1)return v;var z=P?za(P,0,G).join(""):o.slice(0,G);if(C===t)return z+v;if(P&&(G+=z.length-G),a0(C)){if(o.slice(G).search(C)){var pe,ge=z;for(C.global||(C=Ep(C.source,jt(Py.exec(C))+"g")),C.lastIndex=0;pe=C.exec(ge);)var _e=pe.index;z=z.slice(0,_e===t?G:_e)}}else if(o.indexOf(Mn(C),G)!=G){var Te=z.lastIndexOf(C);Te>-1&&(z=z.slice(0,Te))}return z+v}function y3(o){return o=jt(o),o&&kk.test(o)?o.replace(Dy,YI):o}var v3=Lo(function(o,c,p){return o+(p?" ":"")+c.toUpperCase()}),l0=s1("toUpperCase");function i_(o,c,p){return o=jt(o),c=p?t:c,c===t?GI(o)?QI(o):BI(o):o.match(c)||[]}var a_=vt(function(o,c){try{return Ln(o,t,c)}catch(p){return i0(p)?p:new $e(p)}}),_3=ga(function(o,c){return zn(c,function(p){p=Gi(p),ha(o,p,r0(o[p],o))}),o});function w3(o){var c=o==null?0:o.length,p=je();return o=c?cr(o,function(v){if(typeof v[1]!="function")throw new Qn(i);return[p(v[0]),v[1]]}):[],vt(function(v){for(var C=-1;++C<c;){var R=o[C];if(Ln(R[0],this,v))return Ln(R[1],this,v)}})}function E3(o){return YR(Jn(o,f))}function u0(o){return function(){return o}}function C3(o,c){return o==null||o!==o?c:o}var b3=l1(),x3=l1(!0);function kn(o){return o}function c0(o){return Uv(typeof o=="function"?o:Jn(o,f))}function S3(o){return qv(Jn(o,f))}function T3(o,c){return Gv(o,Jn(c,f))}var A3=vt(function(o,c){return function(p){return nu(p,o,c)}}),k3=vt(function(o,c){return function(p){return nu(o,p,c)}});function f0(o,c,p){var v=Fr(c),C=tf(c,v);p==null&&!(gr(c)&&(C.length||!v.length))&&(p=c,c=o,o=this,C=tf(c,Fr(c)));var R=!(gr(p)&&"chain"in p)||!!p.chain,P=ya(o);return zn(C,function(G){var z=c[G];o[G]=z,P&&(o.prototype[G]=function(){var pe=this.__chain__;if(R||pe){var ge=o(this.__wrapped__),_e=ge.__actions__=Sn(this.__actions__);return _e.push({func:z,args:arguments,thisArg:o}),ge.__chain__=pe,ge}return z.apply(o,Ga([this.value()],arguments))})}),o}function I3(){return Ur._===this&&(Ur._=tR),this}function d0(){}function R3(o){return o=ht(o),vt(function(c){return Vv(c,o)})}var N3=jp(cr),B3=jp(uv),D3=jp(pp);function s_(o){return Xp(o)?gp(Gi(o)):uN(o)}function O3(o){return function(c){return o==null?t:Rs(o,c)}}var L3=c1(),P3=c1(!0);function h0(){return[]}function p0(){return!1}function M3(){return{}}function U3(){return""}function F3(){return!0}function q3(o,c){if(o=ht(o),o<1||o>me)return[];var p=Je,v=sn(o,Je);c=je(c),o-=Je;for(var C=vp(v,c);++p<o;)c(p);return C}function G3(o){return nt(o)?cr(o,Gi):Un(o)?[o]:Sn(T1(jt(o)))}function V3(o){var c=++$I;return jt(o)+c}var j3=lf(function(o,c){return o+c},0),K3=Kp("ceil"),H3=lf(function(o,c){return o/c},1),Y3=Kp("floor");function W3(o){return o&&o.length?ef(o,kn,Ip):t}function z3(o,c){return o&&o.length?ef(o,je(c,2),Ip):t}function Q3(o){return dv(o,kn)}function X3(o,c){return dv(o,je(c,2))}function J3(o){return o&&o.length?ef(o,kn,Dp):t}function Z3(o,c){return o&&o.length?ef(o,je(c,2),Dp):t}var $3=lf(function(o,c){return o*c},1),eL=Kp("round"),tL=lf(function(o,c){return o-c},0);function rL(o){return o&&o.length?yp(o,kn):0}function nL(o,c){return o&&o.length?yp(o,je(c,2)):0}return A.after=SD,A.ary=M1,A.assign=dO,A.assignIn=J1,A.assignInWith=Ef,A.assignWith=hO,A.at=pO,A.before=U1,A.bind=r0,A.bindAll=_3,A.bindKey=F1,A.castArray=MD,A.chain=O1,A.chunk=YN,A.compact=WN,A.concat=zN,A.cond=w3,A.conforms=E3,A.constant=u0,A.countBy=rD,A.create=gO,A.curry=q1,A.curryRight=G1,A.debounce=V1,A.defaults=mO,A.defaultsDeep=yO,A.defer=TD,A.delay=AD,A.difference=QN,A.differenceBy=XN,A.differenceWith=JN,A.drop=ZN,A.dropRight=$N,A.dropRightWhile=eB,A.dropWhile=tB,A.fill=rB,A.filter=iD,A.flatMap=oD,A.flatMapDeep=lD,A.flatMapDepth=uD,A.flatten=R1,A.flattenDeep=nB,A.flattenDepth=iB,A.flip=kD,A.flow=b3,A.flowRight=x3,A.fromPairs=aB,A.functions=xO,A.functionsIn=SO,A.groupBy=cD,A.initial=oB,A.intersection=lB,A.intersectionBy=uB,A.intersectionWith=cB,A.invert=AO,A.invertBy=kO,A.invokeMap=dD,A.iteratee=c0,A.keyBy=hD,A.keys=Fr,A.keysIn=An,A.map=gf,A.mapKeys=RO,A.mapValues=NO,A.matches=S3,A.matchesProperty=T3,A.memoize=yf,A.merge=BO,A.mergeWith=Z1,A.method=A3,A.methodOf=k3,A.mixin=f0,A.negate=vf,A.nthArg=R3,A.omit=DO,A.omitBy=OO,A.once=ID,A.orderBy=pD,A.over=N3,A.overArgs=RD,A.overEvery=B3,A.overSome=D3,A.partial=n0,A.partialRight=j1,A.partition=gD,A.pick=LO,A.pickBy=$1,A.property=s_,A.propertyOf=O3,A.pull=pB,A.pullAll=B1,A.pullAllBy=gB,A.pullAllWith=mB,A.pullAt=yB,A.range=L3,A.rangeRight=P3,A.rearg=ND,A.reject=vD,A.remove=vB,A.rest=BD,A.reverse=e0,A.sampleSize=wD,A.set=MO,A.setWith=UO,A.shuffle=ED,A.slice=_B,A.sortBy=xD,A.sortedUniq=TB,A.sortedUniqBy=AB,A.split=o3,A.spread=DD,A.tail=kB,A.take=IB,A.takeRight=RB,A.takeRightWhile=NB,A.takeWhile=BB,A.tap=WB,A.throttle=OD,A.thru=pf,A.toArray=z1,A.toPairs=e_,A.toPairsIn=t_,A.toPath=G3,A.toPlainObject=X1,A.transform=FO,A.unary=LD,A.union=DB,A.unionBy=OB,A.unionWith=LB,A.uniq=PB,A.uniqBy=MB,A.uniqWith=UB,A.unset=qO,A.unzip=t0,A.unzipWith=D1,A.update=GO,A.updateWith=VO,A.values=Uo,A.valuesIn=jO,A.without=FB,A.words=i_,A.wrap=PD,A.xor=qB,A.xorBy=GB,A.xorWith=VB,A.zip=jB,A.zipObject=KB,A.zipObjectDeep=HB,A.zipWith=YB,A.entries=e_,A.entriesIn=t_,A.extend=J1,A.extendWith=Ef,f0(A,A),A.add=j3,A.attempt=a_,A.camelCase=WO,A.capitalize=r_,A.ceil=K3,A.clamp=KO,A.clone=UD,A.cloneDeep=qD,A.cloneDeepWith=GD,A.cloneWith=FD,A.conformsTo=VD,A.deburr=n_,A.defaultTo=C3,A.divide=H3,A.endsWith=zO,A.eq=_i,A.escape=QO,A.escapeRegExp=XO,A.every=nD,A.find=aD,A.findIndex=k1,A.findKey=vO,A.findLast=sD,A.findLastIndex=I1,A.findLastKey=_O,A.floor=Y3,A.forEach=L1,A.forEachRight=P1,A.forIn=wO,A.forInRight=EO,A.forOwn=CO,A.forOwnRight=bO,A.get=s0,A.gt=jD,A.gte=KD,A.has=TO,A.hasIn=o0,A.head=N1,A.identity=kn,A.includes=fD,A.indexOf=sB,A.inRange=HO,A.invoke=IO,A.isArguments=Ds,A.isArray=nt,A.isArrayBuffer=HD,A.isArrayLike=Tn,A.isArrayLikeObject=Er,A.isBoolean=YD,A.isBuffer=Qa,A.isDate=WD,A.isElement=zD,A.isEmpty=QD,A.isEqual=XD,A.isEqualWith=JD,A.isError=i0,A.isFinite=ZD,A.isFunction=ya,A.isInteger=K1,A.isLength=_f,A.isMap=H1,A.isMatch=$D,A.isMatchWith=eO,A.isNaN=tO,A.isNative=rO,A.isNil=iO,A.isNull=nO,A.isNumber=Y1,A.isObject=gr,A.isObjectLike=vr,A.isPlainObject=uu,A.isRegExp=a0,A.isSafeInteger=aO,A.isSet=W1,A.isString=wf,A.isSymbol=Un,A.isTypedArray=Mo,A.isUndefined=sO,A.isWeakMap=oO,A.isWeakSet=lO,A.join=fB,A.kebabCase=JO,A.last=$n,A.lastIndexOf=dB,A.lowerCase=ZO,A.lowerFirst=$O,A.lt=uO,A.lte=cO,A.max=W3,A.maxBy=z3,A.mean=Q3,A.meanBy=X3,A.min=J3,A.minBy=Z3,A.stubArray=h0,A.stubFalse=p0,A.stubObject=M3,A.stubString=U3,A.stubTrue=F3,A.multiply=$3,A.nth=hB,A.noConflict=I3,A.noop=d0,A.now=mf,A.pad=e3,A.padEnd=t3,A.padStart=r3,A.parseInt=n3,A.random=YO,A.reduce=mD,A.reduceRight=yD,A.repeat=i3,A.replace=a3,A.result=PO,A.round=eL,A.runInContext=W,A.sample=_D,A.size=CD,A.snakeCase=s3,A.some=bD,A.sortedIndex=wB,A.sortedIndexBy=EB,A.sortedIndexOf=CB,A.sortedLastIndex=bB,A.sortedLastIndexBy=xB,A.sortedLastIndexOf=SB,A.startCase=l3,A.startsWith=u3,A.subtract=tL,A.sum=rL,A.sumBy=nL,A.template=c3,A.times=q3,A.toFinite=va,A.toInteger=ht,A.toLength=Q1,A.toLower=f3,A.toNumber=ei,A.toSafeInteger=fO,A.toString=jt,A.toUpper=d3,A.trim=h3,A.trimEnd=p3,A.trimStart=g3,A.truncate=m3,A.unescape=y3,A.uniqueId=V3,A.upperCase=v3,A.upperFirst=l0,A.each=L1,A.eachRight=P1,A.first=N1,f0(A,function(){var o={};return Fi(A,function(c,p){Wt.call(A.prototype,p)||(o[p]=c)}),o}(),{chain:!1}),A.VERSION=e,zn(["bind","bindKey","curry","curryRight","partial","partialRight"],function(o){A[o].placeholder=A}),zn(["drop","take"],function(o,c){kt.prototype[o]=function(p){p=p===t?1:Dr(ht(p),0);var v=this.__filtered__&&!c?new kt(this):this.clone();return v.__filtered__?v.__takeCount__=sn(p,v.__takeCount__):v.__views__.push({size:sn(p,Je),type:o+(v.__dir__<0?"Right":"")}),v},kt.prototype[o+"Right"]=function(p){return this.reverse()[o](p).reverse()}}),zn(["filter","map","takeWhile"],function(o,c){var p=c+1,v=p==Ee||p==Qe;kt.prototype[o]=function(C){var R=this.clone();return R.__iteratees__.push({iteratee:je(C,3),type:p}),R.__filtered__=R.__filtered__||v,R}}),zn(["head","last"],function(o,c){var p="take"+(c?"Right":"");kt.prototype[o]=function(){return this[p](1).value()[0]}}),zn(["initial","tail"],function(o,c){var p="drop"+(c?"":"Right");kt.prototype[o]=function(){return this.__filtered__?new kt(this):this[p](1)}}),kt.prototype.compact=function(){return this.filter(kn)},kt.prototype.find=function(o){return this.filter(o).head()},kt.prototype.findLast=function(o){return this.reverse().find(o)},kt.prototype.invokeMap=vt(function(o,c){return typeof o=="function"?new kt(this):this.map(function(p){return nu(p,o,c)})}),kt.prototype.reject=function(o){return this.filter(vf(je(o)))},kt.prototype.slice=function(o,c){o=ht(o);var p=this;return p.__filtered__&&(o>0||c<0)?new kt(p):(o<0?p=p.takeRight(-o):o&&(p=p.drop(o)),c!==t&&(c=ht(c),p=c<0?p.dropRight(-c):p.take(c-o)),p)},kt.prototype.takeRightWhile=function(o){return this.reverse().takeWhile(o).reverse()},kt.prototype.toArray=function(){return this.take(Je)},Fi(kt.prototype,function(o,c){var p=/^(?:filter|find|map|reject)|While$/.test(c),v=/^(?:head|last)$/.test(c),C=A[v?"take"+(c=="last"?"Right":""):c],R=v||/^find/.test(c);!C||(A.prototype[c]=function(){var P=this.__wrapped__,G=v?[1]:arguments,z=P instanceof kt,pe=G[0],ge=z||nt(P),_e=function(bt){var Ot=C.apply(A,Ga([bt],G));return v&&Te?Ot[0]:Ot};ge&&p&&typeof pe=="function"&&pe.length!=1&&(z=ge=!1);var Te=this.__chain__,Pe=!!this.__actions__.length,He=R&&!Te,gt=z&&!Pe;if(!R&&ge){P=gt?P:new kt(this);var Ye=o.apply(P,G);return Ye.__actions__.push({func:pf,args:[_e],thisArg:t}),new Xn(Ye,Te)}return He&&gt?o.apply(this,G):(Ye=this.thru(_e),He?v?Ye.value()[0]:Ye.value():Ye)})}),zn(["pop","push","shift","sort","splice","unshift"],function(o){var c=Fc[o],p=/^(?:push|sort|unshift)$/.test(o)?"tap":"thru",v=/^(?:pop|shift)$/.test(o);A.prototype[o]=function(){var C=arguments;if(v&&!this.__chain__){var R=this.value();return c.apply(nt(R)?R:[],C)}return this[p](function(P){return c.apply(nt(P)?P:[],C)})}}),Fi(kt.prototype,function(o,c){var p=A[c];if(p){var v=p.name+"";Wt.call(Bo,v)||(Bo[v]=[]),Bo[v].push({name:c,func:p})}}),Bo[of(t,_).name]=[{name:"wrapper",func:t}],kt.prototype.clone=yR,kt.prototype.reverse=vR,kt.prototype.value=_R,A.prototype.at=zB,A.prototype.chain=QB,A.prototype.commit=XB,A.prototype.next=JB,A.prototype.plant=$B,A.prototype.reverse=eD,A.prototype.toJSON=A.prototype.valueOf=A.prototype.value=tD,A.prototype.first=A.prototype.head,Xl&&(A.prototype[Xl]=ZB),A},ja=XI();typeof define=="function"&&typeof define.amd=="object"&&define.amd?(Ur._=ja,define(function(){return ja})):Ss?((Ss.exports=ja)._=ja,cp._=ja):Ur._=ja}).call(kl)});var $m=de((uz,wh)=>{var OS,LS,PS,MS,US,FS,qS,GS,VS,vh,Zm,jS,KS,HS,Bl,YS,WS,zS,QS,XS,JS,ZS,$S,_h;(function(t){var e=typeof global=="object"?global:typeof self=="object"?self:typeof this=="object"?this:{};typeof define=="function"&&define.amd?define("tslib",["exports"],function(n){t(r(e,r(n)))}):typeof wh=="object"&&typeof wh.exports=="object"?t(r(e,r(wh.exports))):t(r(e));function r(n,i){return n!==e&&(typeof Object.create=="function"?Object.defineProperty(n,"__esModule",{value:!0}):n.__esModule=!0),function(a,s){return n[a]=i?i(a,s):s}}})(function(t){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])};OS=function(n,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");e(n,i);function a(){this.constructor=n}n.prototype=i===null?Object.create(i):(a.prototype=i.prototype,new a)},LS=Object.assign||function(n){for(var i,a=1,s=arguments.length;a<s;a++){i=arguments[a];for(var l in i)Object.prototype.hasOwnProperty.call(i,l)&&(n[l]=i[l])}return n},PS=function(n,i){var a={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&i.indexOf(s)<0&&(a[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,s=Object.getOwnPropertySymbols(n);l<s.length;l++)i.indexOf(s[l])<0&&Object.prototype.propertyIsEnumerable.call(n,s[l])&&(a[s[l]]=n[s[l]]);return a},MS=function(n,i,a,s){var l=arguments.length,u=l<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,a):s,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(n,i,a,s);else for(var d=n.length-1;d>=0;d--)(f=n[d])&&(u=(l<3?f(u):l>3?f(i,a,u):f(i,a))||u);return l>3&&u&&Object.defineProperty(i,a,u),u},US=function(n,i){return function(a,s){i(a,s,n)}},FS=function(n,i){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,i)},qS=function(n,i,a,s){function l(u){return u instanceof a?u:new a(function(f){f(u)})}return new(a||(a=Promise))(function(u,f){function d(y){try{g(s.next(y))}catch(m){f(m)}}function h(y){try{g(s.throw(y))}catch(m){f(m)}}function g(y){y.done?u(y.value):l(y.value).then(d,h)}g((s=s.apply(n,i||[])).next())})},GS=function(n,i){var a={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},s,l,u,f;return f={next:d(0),throw:d(1),return:d(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function d(g){return function(y){return h([g,y])}}function h(g){if(s)throw new TypeError("Generator is already executing.");for(;a;)try{if(s=1,l&&(u=g[0]&2?l.return:g[0]?l.throw||((u=l.return)&&u.call(l),0):l.next)&&!(u=u.call(l,g[1])).done)return u;switch(l=0,u&&(g=[g[0]&2,u.value]),g[0]){case 0:case 1:u=g;break;case 4:return a.label++,{value:g[1],done:!1};case 5:a.label++,l=g[1],g=[0];continue;case 7:g=a.ops.pop(),a.trys.pop();continue;default:if(u=a.trys,!(u=u.length>0&&u[u.length-1])&&(g[0]===6||g[0]===2)){a=0;continue}if(g[0]===3&&(!u||g[1]>u[0]&&g[1]<u[3])){a.label=g[1];break}if(g[0]===6&&a.label<u[1]){a.label=u[1],u=g;break}if(u&&a.label<u[2]){a.label=u[2],a.ops.push(g);break}u[2]&&a.ops.pop(),a.trys.pop();continue}g=i.call(n,a)}catch(y){g=[6,y],l=0}finally{s=u=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}},VS=function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&_h(i,n,a)},_h=Object.create?function(n,i,a,s){s===void 0&&(s=a),Object.defineProperty(n,s,{enumerable:!0,get:function(){return i[a]}})}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]},vh=function(n){var i=typeof Symbol=="function"&&Symbol.iterator,a=i&&n[i],s=0;if(a)return a.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&s>=n.length&&(n=void 0),{value:n&&n[s++],done:!n}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},Zm=function(n,i){var a=typeof Symbol=="function"&&n[Symbol.iterator];if(!a)return n;var s=a.call(n),l,u=[],f;try{for(;(i===void 0||i-- >0)&&!(l=s.next()).done;)u.push(l.value)}catch(d){f={error:d}}finally{try{l&&!l.done&&(a=s.return)&&a.call(s)}finally{if(f)throw f.error}}return u},jS=function(){for(var n=[],i=0;i<arguments.length;i++)n=n.concat(Zm(arguments[i]));return n},KS=function(){for(var n=0,i=0,a=arguments.length;i<a;i++)n+=arguments[i].length;for(var s=Array(n),l=0,i=0;i<a;i++)for(var u=arguments[i],f=0,d=u.length;f<d;f++,l++)s[l]=u[f];return s},HS=function(n,i){for(var a=0,s=i.length,l=n.length;a<s;a++,l++)n[l]=i[a];return n},Bl=function(n){return this instanceof Bl?(this.v=n,this):new Bl(n)},YS=function(n,i,a){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=a.apply(n,i||[]),l,u=[];return l={},f("next"),f("throw"),f("return"),l[Symbol.asyncIterator]=function(){return this},l;function f(_){s[_]&&(l[_]=function(E){return new Promise(function(w,b){u.push([_,E,w,b])>1||d(_,E)})})}function d(_,E){try{h(s[_](E))}catch(w){m(u[0][3],w)}}function h(_){_.value instanceof Bl?Promise.resolve(_.value.v).then(g,y):m(u[0][2],_)}function g(_){d("next",_)}function y(_){d("throw",_)}function m(_,E){_(E),u.shift(),u.length&&d(u[0][0],u[0][1])}},WS=function(n){var i,a;return i={},s("next"),s("throw",function(l){throw l}),s("return"),i[Symbol.iterator]=function(){return this},i;function s(l,u){i[l]=n[l]?function(f){return(a=!a)?{value:Bl(n[l](f)),done:l==="return"}:u?u(f):f}:u}},zS=function(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n[Symbol.asyncIterator],a;return i?i.call(n):(n=typeof vh=="function"?vh(n):n[Symbol.iterator](),a={},s("next"),s("throw"),s("return"),a[Symbol.asyncIterator]=function(){return this},a);function s(u){a[u]=n[u]&&function(f){return new Promise(function(d,h){f=n[u](f),l(d,h,f.done,f.value)})}}function l(u,f,d,h){Promise.resolve(h).then(function(g){u({value:g,done:d})},f)}},QS=function(n,i){return Object.defineProperty?Object.defineProperty(n,"raw",{value:i}):n.raw=i,n};var r=Object.create?function(n,i){Object.defineProperty(n,"default",{enumerable:!0,value:i})}:function(n,i){n.default=i};XS=function(n){if(n&&n.__esModule)return n;var i={};if(n!=null)for(var a in n)a!=="default"&&Object.prototype.hasOwnProperty.call(n,a)&&_h(i,n,a);return r(i,n),i},JS=function(n){return n&&n.__esModule?n:{default:n}},ZS=function(n,i,a,s){if(a==="a"&&!s)throw new TypeError("Private accessor was defined without a getter");if(typeof i=="function"?n!==i||!s:!i.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return a==="m"?s:a==="a"?s.call(n):s?s.value:i.get(n)},$S=function(n,i,a,s,l){if(s==="m")throw new TypeError("Private method is not writable");if(s==="a"&&!l)throw new TypeError("Private accessor was defined without a setter");if(typeof i=="function"?n!==i||!l:!i.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return s==="a"?l.call(n,a):l?l.value=a:i.set(n,a),a},t("__extends",OS),t("__assign",LS),t("__rest",PS),t("__decorate",MS),t("__param",US),t("__metadata",FS),t("__awaiter",qS),t("__generator",GS),t("__exportStar",VS),t("__createBinding",_h),t("__values",vh),t("__read",Zm),t("__spread",jS),t("__spreadArrays",KS),t("__spreadArray",HS),t("__await",Bl),t("__asyncGenerator",YS),t("__asyncDelegator",WS),t("__asyncValues",zS),t("__makeTemplateObject",QS),t("__importStar",XS),t("__importDefault",JS),t("__classPrivateFieldGet",ZS),t("__classPrivateFieldSet",$S)})});var bT=de((uQ,Ah)=>{var nT,iT,aT,sT,oT,lT,uT,cT,fT,Th,ty,dT,hT,Dl,pT,gT,mT,yT,vT,_T,wT,ET,CT;(function(t){var e=typeof global=="object"?global:typeof self=="object"?self:typeof this=="object"?this:{};typeof define=="function"&&define.amd?define("tslib",["exports"],function(n){t(r(e,r(n)))}):typeof Ah=="object"&&typeof Ah.exports=="object"?t(r(e,r(Ah.exports))):t(r(e));function r(n,i){return n!==e&&(typeof Object.create=="function"?Object.defineProperty(n,"__esModule",{value:!0}):n.__esModule=!0),function(a,s){return n[a]=i?i(a,s):s}}})(function(t){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])};nT=function(r,n){e(r,n);function i(){this.constructor=r}r.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)},iT=Object.assign||function(r){for(var n,i=1,a=arguments.length;i<a;i++){n=arguments[i];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])}return r},aT=function(r,n){var i={};for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&n.indexOf(a)<0&&(i[a]=r[a]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,a=Object.getOwnPropertySymbols(r);s<a.length;s++)n.indexOf(a[s])<0&&Object.prototype.propertyIsEnumerable.call(r,a[s])&&(i[a[s]]=r[a[s]]);return i},sT=function(r,n,i,a){var s=arguments.length,l=s<3?n:a===null?a=Object.getOwnPropertyDescriptor(n,i):a,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")l=Reflect.decorate(r,n,i,a);else for(var f=r.length-1;f>=0;f--)(u=r[f])&&(l=(s<3?u(l):s>3?u(n,i,l):u(n,i))||l);return s>3&&l&&Object.defineProperty(n,i,l),l},oT=function(r,n){return function(i,a){n(i,a,r)}},lT=function(r,n){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,n)},uT=function(r,n,i,a){function s(l){return l instanceof i?l:new i(function(u){u(l)})}return new(i||(i=Promise))(function(l,u){function f(g){try{h(a.next(g))}catch(y){u(y)}}function d(g){try{h(a.throw(g))}catch(y){u(y)}}function h(g){g.done?l(g.value):s(g.value).then(f,d)}h((a=a.apply(r,n||[])).next())})},cT=function(r,n){var i={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},a,s,l,u;return u={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function f(h){return function(g){return d([h,g])}}function d(h){if(a)throw new TypeError("Generator is already executing.");for(;i;)try{if(a=1,s&&(l=h[0]&2?s.return:h[0]?s.throw||((l=s.return)&&l.call(s),0):s.next)&&!(l=l.call(s,h[1])).done)return l;switch(s=0,l&&(h=[h[0]&2,l.value]),h[0]){case 0:case 1:l=h;break;case 4:return i.label++,{value:h[1],done:!1};case 5:i.label++,s=h[1],h=[0];continue;case 7:h=i.ops.pop(),i.trys.pop();continue;default:if(l=i.trys,!(l=l.length>0&&l[l.length-1])&&(h[0]===6||h[0]===2)){i=0;continue}if(h[0]===3&&(!l||h[1]>l[0]&&h[1]<l[3])){i.label=h[1];break}if(h[0]===6&&i.label<l[1]){i.label=l[1],l=h;break}if(l&&i.label<l[2]){i.label=l[2],i.ops.push(h);break}l[2]&&i.ops.pop(),i.trys.pop();continue}h=n.call(r,i)}catch(g){h=[6,g],s=0}finally{a=l=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}},CT=function(r,n,i,a){a===void 0&&(a=i),r[a]=n[i]},fT=function(r,n){for(var i in r)i!=="default"&&!n.hasOwnProperty(i)&&(n[i]=r[i])},Th=function(r){var n=typeof Symbol=="function"&&Symbol.iterator,i=n&&r[n],a=0;if(i)return i.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&a>=r.length&&(r=void 0),{value:r&&r[a++],done:!r}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")},ty=function(r,n){var i=typeof Symbol=="function"&&r[Symbol.iterator];if(!i)return r;var a=i.call(r),s,l=[],u;try{for(;(n===void 0||n-- >0)&&!(s=a.next()).done;)l.push(s.value)}catch(f){u={error:f}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(u)throw u.error}}return l},dT=function(){for(var r=[],n=0;n<arguments.length;n++)r=r.concat(ty(arguments[n]));return r},hT=function(){for(var r=0,n=0,i=arguments.length;n<i;n++)r+=arguments[n].length;for(var a=Array(r),s=0,n=0;n<i;n++)for(var l=arguments[n],u=0,f=l.length;u<f;u++,s++)a[s]=l[u];return a},Dl=function(r){return this instanceof Dl?(this.v=r,this):new Dl(r)},pT=function(r,n,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var a=i.apply(r,n||[]),s,l=[];return s={},u("next"),u("throw"),u("return"),s[Symbol.asyncIterator]=function(){return this},s;function u(m){a[m]&&(s[m]=function(_){return new Promise(function(E,w){l.push([m,_,E,w])>1||f(m,_)})})}function f(m,_){try{d(a[m](_))}catch(E){y(l[0][3],E)}}function d(m){m.value instanceof Dl?Promise.resolve(m.value.v).then(h,g):y(l[0][2],m)}function h(m){f("next",m)}function g(m){f("throw",m)}function y(m,_){m(_),l.shift(),l.length&&f(l[0][0],l[0][1])}},gT=function(r){var n,i;return n={},a("next"),a("throw",function(s){throw s}),a("return"),n[Symbol.iterator]=function(){return this},n;function a(s,l){n[s]=r[s]?function(u){return(i=!i)?{value:Dl(r[s](u)),done:s==="return"}:l?l(u):u}:l}},mT=function(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r[Symbol.asyncIterator],i;return n?n.call(r):(r=typeof Th=="function"?Th(r):r[Symbol.iterator](),i={},a("next"),a("throw"),a("return"),i[Symbol.asyncIterator]=function(){return this},i);function a(l){i[l]=r[l]&&function(u){return new Promise(function(f,d){u=r[l](u),s(f,d,u.done,u.value)})}}function s(l,u,f,d){Promise.resolve(d).then(function(h){l({value:h,done:f})},u)}},yT=function(r,n){return Object.defineProperty?Object.defineProperty(r,"raw",{value:n}):r.raw=n,r},vT=function(r){if(r&&r.__esModule)return r;var n={};if(r!=null)for(var i in r)Object.hasOwnProperty.call(r,i)&&(n[i]=r[i]);return n.default=r,n},_T=function(r){return r&&r.__esModule?r:{default:r}},wT=function(r,n){if(!n.has(r))throw new TypeError("attempted to get private field on non-instance");return n.get(r)},ET=function(r,n,i){if(!n.has(r))throw new TypeError("attempted to set private field on non-instance");return n.set(r,i),i},t("__extends",nT),t("__assign",iT),t("__rest",aT),t("__decorate",sT),t("__param",oT),t("__metadata",lT),t("__awaiter",uT),t("__generator",cT),t("__exportStar",fT),t("__createBinding",CT),t("__values",Th),t("__read",ty),t("__spread",dT),t("__spreadArrays",hT),t("__await",Dl),t("__asyncGenerator",pT),t("__asyncDelegator",gT),t("__asyncValues",mT),t("__makeTemplateObject",yT),t("__importStar",vT),t("__importDefault",_T),t("__classPrivateFieldGet",wT),t("__classPrivateFieldSet",ET)})});var uy=de(Ct=>{"use strict";Object.defineProperty(Ct,"__esModule",{value:!0});var yr=require("obsidian"),oy="YYYY-MM-DD",ly="gggg-[W]ww",dA="YYYY-MM",hA="YYYY-[Q]Q",pA="YYYY";function hc(t){var r,n;let e=window.app.plugins.getPlugin("periodic-notes");return e&&((n=(r=e.settings)==null?void 0:r[t])==null?void 0:n.enabled)}function pc(){var t,e,r,n;try{let{internalPlugins:i,plugins:a}=window.app;if(hc("daily")){let{format:f,folder:d,template:h}=((e=(t=a.getPlugin("periodic-notes"))==null?void 0:t.settings)==null?void 0:e.daily)||{};return{format:f||oy,folder:(d==null?void 0:d.trim())||"",template:(h==null?void 0:h.trim())||""}}let{folder:s,format:l,template:u}=((n=(r=i.getPluginById("daily-notes"))==null?void 0:r.instance)==null?void 0:n.options)||{};return{format:l||oy,folder:(s==null?void 0:s.trim())||"",template:(u==null?void 0:u.trim())||""}}catch(i){console.info("No custom daily note settings found!",i)}}function gc(){var t,e,r,n,i,a,s;try{let l=window.app.plugins,u=(t=l.getPlugin("calendar"))==null?void 0:t.options,f=(r=(e=l.getPlugin("periodic-notes"))==null?void 0:e.settings)==null?void 0:r.weekly;if(hc("weekly"))return{format:f.format||ly,folder:((n=f.folder)==null?void 0:n.trim())||"",template:((i=f.template)==null?void 0:i.trim())||""};let d=u||{};return{format:d.weeklyNoteFormat||ly,folder:((a=d.weeklyNoteFolder)==null?void 0:a.trim())||"",template:((s=d.weeklyNoteTemplate)==null?void 0:s.trim())||""}}catch(l){console.info("No custom weekly note settings found!",l)}}function mc(){var e,r,n,i;let t=window.app.plugins;try{let a=hc("monthly")&&((r=(e=t.getPlugin("periodic-notes"))==null?void 0:e.settings)==null?void 0:r.monthly)||{};return{format:a.format||dA,folder:((n=a.folder)==null?void 0:n.trim())||"",template:((i=a.template)==null?void 0:i.trim())||""}}catch(a){console.info("No custom monthly note settings found!",a)}}function yc(){var e,r,n,i;let t=window.app.plugins;try{let a=hc("quarterly")&&((r=(e=t.getPlugin("periodic-notes"))==null?void 0:e.settings)==null?void 0:r.quarterly)||{};return{format:a.format||hA,folder:((n=a.folder)==null?void 0:n.trim())||"",template:((i=a.template)==null?void 0:i.trim())||""}}catch(a){console.info("No custom quarterly note settings found!",a)}}function vc(){var e,r,n,i;let t=window.app.plugins;try{let a=hc("yearly")&&((r=(e=t.getPlugin("periodic-notes"))==null?void 0:e.settings)==null?void 0:r.yearly)||{};return{format:a.format||pA,folder:((n=a.folder)==null?void 0:n.trim())||"",template:((i=a.template)==null?void 0:i.trim())||""}}catch(a){console.info("No custom yearly note settings found!",a)}}function gA(...t){let e=[];for(let n=0,i=t.length;n<i;n++)e=e.concat(t[n].split("/"));let r=[];for(let n=0,i=e.length;n<i;n++){let a=e[n];!a||a==="."||r.push(a)}return e[0]===""&&r.unshift(""),r.join("/")}function $q(t){let e=t.substring(t.lastIndexOf("/")+1);return e.lastIndexOf(".")!=-1&&(e=e.substring(0,e.lastIndexOf("."))),e}function e9(t){return M(this,null,function*(){let e=t.replace(/\\/g,"/").split("/");if(e.pop(),e.length){let r=gA(...e);window.app.vault.getAbstractFileByPath(r)||(yield window.app.vault.createFolder(r))}})}function _c(t,e){return M(this,null,function*(){e.endsWith(".md")||(e+=".md");let r=yr.normalizePath(gA(t,e));return yield e9(r),r})}function ql(t){return M(this,null,function*(){let{metadataCache:e,vault:r}=window.app,n=yr.normalizePath(t);if(n==="/")return Promise.resolve(["",null]);try{let i=e.getFirstLinkpathDest(n,""),a=yield r.cachedRead(i),s=window.app.foldManager.load(i);return[a,s]}catch(i){return console.error(`Failed to read the daily note template '${n}'`,i),new yr.Notice("Failed to read the daily note template"),["",null]}})}function Li(t,e="day"){let r=t.clone().startOf(e).format();return`${e}-${r}`}function mA(t){return t.replace(/\[[^\]]*\]/g,"")}function t9(t,e){if(e==="week"){let r=mA(t);return/w{1,2}/i.test(r)&&(/M{1,4}/.test(r)||/D{1,4}/.test(r))}return!1}function Gl(t,e){return yA(t.basename,e)}function r9(t,e){return yA($q(t),e)}function yA(t,e){let n={day:pc,week:gc,month:mc,quarter:yc,year:vc}[e]().format.split("/").pop(),i=window.moment(t,n,!0);if(!i.isValid())return null;if(t9(n,e)&&e==="week"){let a=mA(n);if(/w{1,2}/i.test(a))return window.moment(t,n.replace(/M{1,4}/g,"").replace(/D{1,4}/g,""),!1)}return i}var vA=class extends Error{};function _A(t){return M(this,null,function*(){let e=window.app,{vault:r}=e,n=window.moment,{template:i,format:a,folder:s}=pc(),[l,u]=yield ql(i),f=t.format(a),d=yield _c(s,f);try{let h=yield r.create(d,l.replace(/{{\s*date\s*}}/gi,f).replace(/{{\s*time\s*}}/gi,n().format("HH:mm")).replace(/{{\s*title\s*}}/gi,f).replace(/{{\s*(date|time)\s*(([+-]\d+)([yqmwdhs]))?\s*(:.+?)?}}/gi,(g,y,m,_,E,w)=>{let b=n(),k=t.clone().set({hour:b.get("hour"),minute:b.get("minute"),second:b.get("second")});return m&&k.add(parseInt(_,10),E),w?k.format(w.substring(1).trim()):k.format(a)}).replace(/{{\s*yesterday\s*}}/gi,t.clone().subtract(1,"day").format(a)).replace(/{{\s*tomorrow\s*}}/gi,t.clone().add(1,"d").format(a)));return e.foldManager.save(h,u),h}catch(h){console.error(`Failed to create file: '${d}'`,h),new yr.Notice("Unable to create new file.")}})}function n9(t,e){var r;return(r=e[Li(t,"day")])!=null?r:null}function i9(){let{vault:t}=window.app,{folder:e}=pc(),r=t.getAbstractFileByPath(yr.normalizePath(e));if(!r)throw new vA("Failed to find daily notes folder");let n={};return yr.Vault.recurseChildren(r,i=>{if(i instanceof yr.TFile){let a=Gl(i,"day");if(a){let s=Li(a,"day");n[s]=i}}}),n}var wA=class extends Error{};function a9(){let{moment:t}=window,e=t.localeData()._week.dow,r=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"];for(;e;)r.push(r.shift()),e--;return r}function s9(t){return a9().indexOf(t.toLowerCase())}function EA(t){return M(this,null,function*(){let{vault:e}=window.app,{template:r,format:n,folder:i}=gc(),[a,s]=yield ql(r),l=t.format(n),u=yield _c(i,l);try{let f=yield e.create(u,a.replace(/{{\s*(date|time)\s*(([+-]\d+)([yqmwdhs]))?\s*(:.+?)?}}/gi,(d,h,g,y,m,_)=>{let E=window.moment(),w=t.clone().set({hour:E.get("hour"),minute:E.get("minute"),second:E.get("second")});return g&&w.add(parseInt(y,10),m),_?w.format(_.substring(1).trim()):w.format(n)}).replace(/{{\s*title\s*}}/gi,l).replace(/{{\s*time\s*}}/gi,window.moment().format("HH:mm")).replace(/{{\s*(sunday|monday|tuesday|wednesday|thursday|friday|saturday)\s*:(.*?)}}/gi,(d,h,g)=>{let y=s9(h);return t.weekday(y).format(g.trim())}));return window.app.foldManager.save(f,s),f}catch(f){console.error(`Failed to create file: '${u}'`,f),new yr.Notice("Unable to create new file.")}})}function o9(t,e){var r;return(r=e[Li(t,"week")])!=null?r:null}function l9(){let t={};if(!TA())return t;let{vault:e}=window.app,{folder:r}=gc(),n=e.getAbstractFileByPath(yr.normalizePath(r));if(!n)throw new wA("Failed to find weekly notes folder");return yr.Vault.recurseChildren(n,i=>{if(i instanceof yr.TFile){let a=Gl(i,"week");if(a){let s=Li(a,"week");t[s]=i}}}),t}var CA=class extends Error{};function bA(t){return M(this,null,function*(){let{vault:e}=window.app,{template:r,format:n,folder:i}=mc(),[a,s]=yield ql(r),l=t.format(n),u=yield _c(i,l);try{let f=yield e.create(u,a.replace(/{{\s*(date|time)\s*(([+-]\d+)([yqmwdhs]))?\s*(:.+?)?}}/gi,(d,h,g,y,m,_)=>{let E=window.moment(),w=t.clone().set({hour:E.get("hour"),minute:E.get("minute"),second:E.get("second")});return g&&w.add(parseInt(y,10),m),_?w.format(_.substring(1).trim()):w.format(n)}).replace(/{{\s*date\s*}}/gi,l).replace(/{{\s*time\s*}}/gi,window.moment().format("HH:mm")).replace(/{{\s*title\s*}}/gi,l));return window.app.foldManager.save(f,s),f}catch(f){console.error(`Failed to create file: '${u}'`,f),new yr.Notice("Unable to create new file.")}})}function u9(t,e){var r;return(r=e[Li(t,"month")])!=null?r:null}function c9(){let t={};if(!AA())return t;let{vault:e}=window.app,{folder:r}=mc(),n=e.getAbstractFileByPath(yr.normalizePath(r));if(!n)throw new CA("Failed to find monthly notes folder");return yr.Vault.recurseChildren(n,i=>{if(i instanceof yr.TFile){let a=Gl(i,"month");if(a){let s=Li(a,"month");t[s]=i}}}),t}var xA=class extends Error{};function f9(t){return M(this,null,function*(){let{vault:e}=window.app,{template:r,format:n,folder:i}=yc(),[a,s]=yield ql(r),l=t.format(n),u=yield _c(i,l);try{let f=yield e.create(u,a.replace(/{{\s*(date|time)\s*(([+-]\d+)([yqmwdhs]))?\s*(:.+?)?}}/gi,(d,h,g,y,m,_)=>{let E=window.moment(),w=t.clone().set({hour:E.get("hour"),minute:E.get("minute"),second:E.get("second")});return g&&w.add(parseInt(y,10),m),_?w.format(_.substring(1).trim()):w.format(n)}).replace(/{{\s*date\s*}}/gi,l).replace(/{{\s*time\s*}}/gi,window.moment().format("HH:mm")).replace(/{{\s*title\s*}}/gi,l));return window.app.foldManager.save(f,s),f}catch(f){console.error(`Failed to create file: '${u}'`,f),new yr.Notice("Unable to create new file.")}})}function d9(t,e){var r;return(r=e[Li(t,"quarter")])!=null?r:null}function h9(){let t={};if(!kA())return t;let{vault:e}=window.app,{folder:r}=yc(),n=e.getAbstractFileByPath(yr.normalizePath(r));if(!n)throw new xA("Failed to find quarterly notes folder");return yr.Vault.recurseChildren(n,i=>{if(i instanceof yr.TFile){let a=Gl(i,"quarter");if(a){let s=Li(a,"quarter");t[s]=i}}}),t}var SA=class extends Error{};function p9(t){return M(this,null,function*(){let{vault:e}=window.app,{template:r,format:n,folder:i}=vc(),[a,s]=yield ql(r),l=t.format(n),u=yield _c(i,l);try{let f=yield e.create(u,a.replace(/{{\s*(date|time)\s*(([+-]\d+)([yqmwdhs]))?\s*(:.+?)?}}/gi,(d,h,g,y,m,_)=>{let E=window.moment(),w=t.clone().set({hour:E.get("hour"),minute:E.get("minute"),second:E.get("second")});return g&&w.add(parseInt(y,10),m),_?w.format(_.substring(1).trim()):w.format(n)}).replace(/{{\s*date\s*}}/gi,l).replace(/{{\s*time\s*}}/gi,window.moment().format("HH:mm")).replace(/{{\s*title\s*}}/gi,l));return window.app.foldManager.save(f,s),f}catch(f){console.error(`Failed to create file: '${u}'`,f),new yr.Notice("Unable to create new file.")}})}function g9(t,e){var r;return(r=e[Li(t,"year")])!=null?r:null}function m9(){let t={};if(!IA())return t;let{vault:e}=window.app,{folder:r}=vc(),n=e.getAbstractFileByPath(yr.normalizePath(r));if(!n)throw new SA("Failed to find yearly notes folder");return yr.Vault.recurseChildren(n,i=>{if(i instanceof yr.TFile){let a=Gl(i,"year");if(a){let s=Li(a,"year");t[s]=i}}}),t}function y9(){var n,i;let{app:t}=window,e=t.internalPlugins.plugins["daily-notes"];if(e&&e.enabled)return!0;let r=t.plugins.getPlugin("periodic-notes");return r&&((i=(n=r.settings)==null?void 0:n.daily)==null?void 0:i.enabled)}function TA(){var r,n;let{app:t}=window;if(t.plugins.getPlugin("calendar"))return!0;let e=t.plugins.getPlugin("periodic-notes");return e&&((n=(r=e.settings)==null?void 0:r.weekly)==null?void 0:n.enabled)}function AA(){var r,n;let{app:t}=window,e=t.plugins.getPlugin("periodic-notes");return e&&((n=(r=e.settings)==null?void 0:r.monthly)==null?void 0:n.enabled)}function kA(){var r,n;let{app:t}=window,e=t.plugins.getPlugin("periodic-notes");return e&&((n=(r=e.settings)==null?void 0:r.quarterly)==null?void 0:n.enabled)}function IA(){var r,n;let{app:t}=window,e=t.plugins.getPlugin("periodic-notes");return e&&((n=(r=e.settings)==null?void 0:r.yearly)==null?void 0:n.enabled)}function v9(t){return{day:pc,week:gc,month:mc,quarter:yc,year:vc}[t]()}function _9(t,e){return{day:_A,month:bA,week:EA}[t](e)}Ct.DEFAULT_DAILY_NOTE_FORMAT=oy;Ct.DEFAULT_MONTHLY_NOTE_FORMAT=dA;Ct.DEFAULT_QUARTERLY_NOTE_FORMAT=hA;Ct.DEFAULT_WEEKLY_NOTE_FORMAT=ly;Ct.DEFAULT_YEARLY_NOTE_FORMAT=pA;Ct.appHasDailyNotesPluginLoaded=y9;Ct.appHasMonthlyNotesPluginLoaded=AA;Ct.appHasQuarterlyNotesPluginLoaded=kA;Ct.appHasWeeklyNotesPluginLoaded=TA;Ct.appHasYearlyNotesPluginLoaded=IA;Ct.createDailyNote=_A;Ct.createMonthlyNote=bA;Ct.createPeriodicNote=_9;Ct.createQuarterlyNote=f9;Ct.createWeeklyNote=EA;Ct.createYearlyNote=p9;Ct.getAllDailyNotes=i9;Ct.getAllMonthlyNotes=c9;Ct.getAllQuarterlyNotes=h9;Ct.getAllWeeklyNotes=l9;Ct.getAllYearlyNotes=m9;Ct.getDailyNote=n9;Ct.getDailyNoteSettings=pc;Ct.getDateFromFile=Gl;Ct.getDateFromPath=r9;Ct.getDateUID=Li;Ct.getMonthlyNote=u9;Ct.getMonthlyNoteSettings=mc;Ct.getPeriodicNoteSettings=v9;Ct.getQuarterlyNote=d9;Ct.getQuarterlyNoteSettings=yc;Ct.getTemplateInfo=ql;Ct.getWeeklyNote=o9;Ct.getWeeklyNoteSettings=gc;Ct.getYearlyNote=g9;Ct.getYearlyNoteSettings=vc});var OA=de(_s=>{"use strict";Object.defineProperty(_s,"__esModule",{value:!0});_s.isDate=_s.isComparable=_s.isIterable=void 0;_s.isIterable=t=>!(t==null||t[Symbol.iterator]==null);_s.isComparable=t=>{let e=Object.prototype.toString,r=t;return r.compare!=null&&e.call(r.compare).endsWith("Function]")};_s.isDate=t=>Object.prototype.toString.call(t).endsWith("Date]")});var PA=de(LA=>{"use strict";Object.defineProperty(LA,"__esModule",{value:!0})});var MA=de(Oh=>{"use strict";Object.defineProperty(Oh,"__esModule",{value:!0});var E9=$m(),cy=OA(),C9=(t,e)=>t-e,b9=(t,e)=>Number(t-e),x9=(t,e)=>t.localeCompare(e),S9=(t,e)=>t.getTime()-e.getTime(),Vl={number:C9,string:x9,Date:S9,bigInt:b9,none:()=>0},T9=t=>{if(typeof t=="number")return Vl.number;if(typeof t=="string")return Vl.string;if(typeof t=="bigint")return Vl.bigInt;if(cy.isDate(t))return Vl.Date;if(cy.isComparable(t))return(e,r)=>e.compare(r);throw new Error("Cannot sort keys in this map. You have to specify compareFn if the type of key in this map is not number, string, or Date.")},wo=class extends Map{constructor(e,r){super();this.specifiedCompareFn=!1,this.isCompareFn=n=>typeof n=="function",this.compareFn=Vl.none,this.sortedKeys=[],cy.isIterable(e)&&this._constructor(e,r),this.isCompareFn(e)&&this._constructor(null,e),e==null&&this._constructor(null,r)}get comparator(){return this.compareFn}compare(e,r){return Math.sign(this.compareFn(e,r))}_constructor(e,r){if(this.compareFn=r==null?Vl.none:r,this.specifiedCompareFn=r!=null,e!=null)for(let n of e)this.set(...n)}static fromMap(e,r){let n=new wo(r);return n.setAll(e),n}duplicate(){return wo.fromMap(this,this.compareFn)}toMap(){let e=new Map,r=Array.from(super.entries());return r.sort((n,i)=>this.compareFn(n[0],i[0])),r.forEach(([n,i])=>{e.set(n,i)}),e}reverseKeys(){return[...this.sortedKeys].reverse().values()}get(e){let r=this.sortedKeys.find(n=>this.comparator(n,e)===0);if(r!=null)return super.get(r)}set(e,r){this.sortedKeys.length===0&&!this.specifiedCompareFn&&(this.compareFn=T9(e),this.specifiedCompareFn=!0);let n=this.sortedKeys.find(i=>this.compareFn(i,e)===0);return n==null?(this.sortedKeys.push(e),super.set(e,r)):super.set(n,r),this.sortedKeys.sort(this.compareFn),this}setAll(e){return e.forEach((r,n)=>{this.set(n,r)}),this}delete(e){return super.delete(e)?(this.sortedKeys=this.sortedKeys.filter(r=>this.compare(r,e)!==0),!0):!1}clear(){super.clear(),this.sortedKeys=[]}keys(){return this.sortedKeys.values()}values(){return this.sortedKeys.map(e=>super.get(e)).values()}entries(){return this.toMap().entries()}firstEntry(){let e=this.firstKey();if(e==null)return;let r=this.get(e);return r===void 0?void 0:[e,r]}firstKey(){return this.sortedKeys[0]}lastEntry(){let e=this.lastKey();if(e==null)return;let r=this.get(e);return r===void 0?void 0:[e,r]}lastKey(){return[...this.sortedKeys].reverse()[0]}shiftEntry(){let e=this.firstEntry();if(e!=null)return this.delete(e[0]),e}popEntry(){let e=this.lastEntry();if(e!=null)return this.delete(e[0]),e}floorEntry(e){let r=this.floorKey(e);if(r!=null){let n=this.get(r);return n===void 0?void 0:[r,n]}}floorKey(e){return this.sortedKeys.filter(n=>this.compare(n,e)<=0).reverse()[0]}ceilingEntry(e){let r=this.ceilingKey(e);if(r!=null){let n=this.get(r);return n===void 0?void 0:[r,n]}}ceilingKey(e){return this.sortedKeys.filter(n=>this.compare(n,e)>=0)[0]}lowerEntry(e){let r=this.lowerKey(e);if(r!=null){let n=this.get(r);return n===void 0?void 0:[r,n]}}lowerKey(e){return this.sortedKeys.filter(n=>this.compare(n,e)<0).reverse()[0]}higherEntry(e){let r=this.higherKey(e);if(r!=null){let n=this.get(r);return n===void 0?void 0:[r,n]}}higherKey(e){return this.sortedKeys.filter(n=>this.compare(n,e)>0)[0]}splitLower(e,r=!0){let n=Array.from(this.entries()).filter(i=>{let a=this.compare(i[0],e)<0;return r?a||this.compare(i[0],e)===0:a});return new wo(n,this.compareFn)}splitHigher(e,r=!0){let n=Array.from(this.entries()).filter(i=>{let a=this.compare(i[0],e)>0;return r?a||this.compare(i[0],e)===0:a});return new wo(n,this.compareFn)}forEach(e,r){Array.from(this.entries()).forEach(([n,i])=>{e(i,n,this)},r)}};Oh.default=wo;E9.__exportStar(PA(),Oh)});fL(exports,{default:()=>st});var zl=_t(require("obsidian"));var g0=_t(require("obsidian")),Cf=new Map;function wt(t,e=!1){let r=window.moment();Cf.has(t)?(Cf.get(t).isBefore(r)||e)&&(new g0.Notice(t),Cf.set(t,r.add(1,"minute"))):(console.log(`[Google Calendar] ${t}`),new g0.Notice(t),Cf.set(t,r.add(0,"minute")))}var Ht=_t(require("obsidian"));var bf=()=>{var t;return(t=window.localStorage.getItem("googleCalendarAccessToken"))!=null?t:""},wa=()=>{var t;return(t=window.localStorage.getItem("googleCalendarRefreshToken"))!=null?t:""},xf=()=>{var e;let t=(e=window.localStorage.getItem("googleCalendarExpirationTime"))!=null?e:"0";return parseInt(t,10)},Os=()=>{var t;return(t=window.localStorage.getItem("googleCalendarUserId"))!=null?t:""},Xa=t=>{t!="undefined"&&window.localStorage.setItem("googleCalendarAccessToken",t)},Sf=t=>{t!="undefined"&&window.localStorage.setItem("googleCalendarUserId",t)},fu=t=>{t!="undefined"&&window.localStorage.setItem("googleCalendarRefreshToken",t)},Ja=t=>{isNaN(t)||window.localStorage.setItem("googleCalendarExpirationTime",t+"")};var ih=_t(require("obsidian"));var d_=_t(require("obsidian")),Jr=(t,e,r,n=!1)=>M(void 0,null,function*(){let i=st.getInstance(),a={"Content-Type":"application/json"};if(n==!1){let l=yield h_(i);if(!l)return;a.Authorization="Bearer "+l}if(i.settings.debugMode){console.log(`New Request ${e}:${t}`);let l=qr({},a);l.Authorization&&(l.Authorization=l.Authorization.substring(0,15)+"..."),console.log({body:r,headers:l});let u=yield fetch(t,{method:e,body:r?JSON.stringify(r):null,headers:a});return u.status>=400?void 0:e.toLowerCase()=="delete"?{status:"success"}:yield u.json()}let s=yield(0,d_.requestUrl)({method:e,url:t,body:r?JSON.stringify(r):null,headers:a});if(!(s.status>=400))return e.toLowerCase()=="delete"?{status:"success"}:yield s.json});var km=42813;function gF(){return!(!bf()||bf()==""||!xf()||isNaN(xf())||xf()<+new Date)}var mF=t=>M(void 0,null,function*(){let e={client_id:t.settings.googleClientId,client_secret:t.settings.googleClientSecret.trim(),grant_type:"refresh_token",refresh_token:wa()},r=yield Jr("https://oauth2.googleapis.com/token","POST",e,!0);return r?(Xa(r.access_token),Ja(+new Date+r.expires_in*1e3),!0):(wt("Error while refreshing authentication"),!1)}),Xx=t=>M(void 0,null,function*(){let e={uid:Os()},r=yield Jr(`${t.settings.googleOAuthServer}/api/google/refresh`,"POST",e,!0);return r?(Xa(r.access_token),Ja(+new Date+r.expires_in*1e3),!0):(wt("Error while refreshing authentication"),!1)});function h_(t){return M(this,null,function*(){if(!zt())return"";let e=!1;return gF()==!1&&(wa()!=""||Os()!="")&&(t.settings.useCustomClient?(e=yield mF(t),e==!1&&(e=yield Xx(t))):e=yield Xx(t)),bf()})}function Jx(){return M(this,null,function*(){let t=st.getInstance();if(ih.Platform.isDesktop){if(!Zx())return;let{OAuth2Client:e}=Dx(),r=require("http"),n=Wx(),i=require("url"),a=Qx(),s=new e(t.settings.googleClientId,t.settings.googleClientSecret.trim(),`http://127.0.0.1:${km}/callback`),l=s.generateAuthUrl({scope:["https://www.googleapis.com/auth/calendar"],access_type:"offline",prompt:"consent"}),u=r.createServer((f,d)=>M(this,null,function*(){try{if(f.url.indexOf("/callback")>-1){let g=new i.URL(f.url,`http://localhost:${km}`).searchParams.get("code");d.end("Authentication successful! Please return to obsidian."),u.destroy();let y=yield s.getToken(g);fu(y.tokens.refresh_token),Xa(y.tokens.access_token),Ja(y.tokens.expiry_date),console.info("Tokens acquired."),t.settingsTab.display()}}catch(h){console.log("Auth failed")}})).listen(km,()=>M(this,null,function*(){(yield n(l,{wait:!1})).unref()}));a(u)}else new ih.Notice("Can't use OAuth on this device")})}var Im=new Map,Rm=new Map;function $x(){return M(this,null,function*(){if(!zt())return;let t=yield Jr("https://www.googleapis.com/calendar/v3/colors","GET",null);if(!t){wt("Error fetching color data from google");return}Object.keys(t.calendar).forEach(e=>{Im.set(e,t.calendar[e].background)}),Object.keys(t.event).forEach(e=>{Rm.set(e,t.event[e].background)})})}function Ku(t){return t.colorId&&Rm.has(t.colorId)?Rm.get(t.colorId):t.parent.colorId&&Im.has(t.parent.colorId)?Im.get(t.parent.colorId):"#a4bdfc"}var Nm=[];function eS(t,e){return e.filter(n=>!t.settings.calendarBlackList.some(i=>i[0]==n.id))}function Or(){return M(this,null,function*(){if(!zt())return[];let t=st.getInstance();if(Nm.length)return eS(t,Nm);yield $x();let e=yield Jr("https://www.googleapis.com/calendar/v3/users/me/calendarList","GET",null);return e?(Nm=e.items,eS(t,e.items)):(wt("Could not list Google Calendars"),[])})}var Ni=_t(require("obsidian"));var CS=_t(require("obsidian"));var wr="top",Lr="bottom",Ir="right",br="left",ah="auto",hs=[wr,Lr,Ir,br],Ia="start",$s="end",tS="clippingParents",sh="viewport",bl="popper",rS="reference",Bm=hs.reduce(function(t,e){return t.concat([e+"-"+Ia,e+"-"+$s])},[]),oh=[].concat(hs,[ah]).reduce(function(t,e){return t.concat([e,e+"-"+Ia,e+"-"+$s])},[]),yF="beforeRead",vF="read",_F="afterRead",wF="beforeMain",EF="main",CF="afterMain",bF="beforeWrite",xF="write",SF="afterWrite",nS=[yF,vF,_F,wF,EF,CF,bF,xF,SF];function Yr(t){return t?(t.nodeName||"").toLowerCase():null}function mr(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function li(t){var e=mr(t).Element;return t instanceof e||t instanceof Element}function Pr(t){var e=mr(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function xl(t){if(typeof ShadowRoot=="undefined")return!1;var e=mr(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function TF(t){var e=t.state;Object.keys(e.elements).forEach(function(r){var n=e.styles[r]||{},i=e.attributes[r]||{},a=e.elements[r];!Pr(a)||!Yr(a)||(Object.assign(a.style,n),Object.keys(i).forEach(function(s){var l=i[s];l===!1?a.removeAttribute(s):a.setAttribute(s,l===!0?"":l)}))})}function AF(t){var e=t.state,r={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,r.popper),e.styles=r,e.elements.arrow&&Object.assign(e.elements.arrow.style,r.arrow),function(){Object.keys(e.elements).forEach(function(n){var i=e.elements[n],a=e.attributes[n]||{},s=Object.keys(e.styles.hasOwnProperty(n)?e.styles[n]:r[n]),l=s.reduce(function(u,f){return u[f]="",u},{});!Pr(i)||!Yr(i)||(Object.assign(i.style,l),Object.keys(a).forEach(function(u){i.removeAttribute(u)}))})}}var iS={name:"applyStyles",enabled:!0,phase:"write",fn:TF,effect:AF,requires:["computeStyles"]};function Wr(t){return t.split("-")[0]}var ki=Math.max,eo=Math.min,Ra=Math.round;function Sl(){var t=navigator.userAgentData;return t!=null&&t.brands?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function Hu(){return!/^((?!chrome|android).)*safari/i.test(Sl())}function ui(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!1);var n=t.getBoundingClientRect(),i=1,a=1;e&&Pr(t)&&(i=t.offsetWidth>0&&Ra(n.width)/t.offsetWidth||1,a=t.offsetHeight>0&&Ra(n.height)/t.offsetHeight||1);var s=li(t)?mr(t):window,l=s.visualViewport,u=!Hu()&&r,f=(n.left+(u&&l?l.offsetLeft:0))/i,d=(n.top+(u&&l?l.offsetTop:0))/a,h=n.width/i,g=n.height/a;return{width:h,height:g,top:d,right:f+h,bottom:d+g,left:f,x:f,y:d}}function to(t){var e=ui(t),r=t.offsetWidth,n=t.offsetHeight;return Math.abs(e.width-r)<=1&&(r=e.width),Math.abs(e.height-n)<=1&&(n=e.height),{x:t.offsetLeft,y:t.offsetTop,width:r,height:n}}function Yu(t,e){var r=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(r&&xl(r)){var n=e;do{if(n&&t.isSameNode(n))return!0;n=n.parentNode||n.host}while(n)}return!1}function wn(t){return mr(t).getComputedStyle(t)}function Dm(t){return["table","td","th"].indexOf(Yr(t))>=0}function tn(t){return((li(t)?t.ownerDocument:t.document)||window.document).documentElement}function Na(t){return Yr(t)==="html"?t:t.assignedSlot||t.parentNode||(xl(t)?t.host:null)||tn(t)}function aS(t){return!Pr(t)||wn(t).position==="fixed"?null:t.offsetParent}function kF(t){var e=/firefox/i.test(Sl()),r=/Trident/i.test(Sl());if(r&&Pr(t)){var n=wn(t);if(n.position==="fixed")return null}var i=Na(t);for(xl(i)&&(i=i.host);Pr(i)&&["html","body"].indexOf(Yr(i))<0;){var a=wn(i);if(a.transform!=="none"||a.perspective!=="none"||a.contain==="paint"||["transform","perspective"].indexOf(a.willChange)!==-1||e&&a.willChange==="filter"||e&&a.filter&&a.filter!=="none")return i;i=i.parentNode}return null}function Ii(t){for(var e=mr(t),r=aS(t);r&&Dm(r)&&wn(r).position==="static";)r=aS(r);return r&&(Yr(r)==="html"||Yr(r)==="body"&&wn(r).position==="static")?e:r||kF(t)||e}function ro(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function no(t,e,r){return ki(t,eo(e,r))}function sS(t,e,r){var n=no(t,e,r);return n>r?r:n}function Wu(){return{top:0,right:0,bottom:0,left:0}}function zu(t){return Object.assign({},Wu(),t)}function Qu(t,e){return e.reduce(function(r,n){return r[n]=t,r},{})}var IF=function(e,r){return e=typeof e=="function"?e(Object.assign({},r.rects,{placement:r.placement})):e,zu(typeof e!="number"?e:Qu(e,hs))};function RF(t){var e,r=t.state,n=t.name,i=t.options,a=r.elements.arrow,s=r.modifiersData.popperOffsets,l=Wr(r.placement),u=ro(l),f=[br,Ir].indexOf(l)>=0,d=f?"height":"width";if(!(!a||!s)){var h=IF(i.padding,r),g=to(a),y=u==="y"?wr:br,m=u==="y"?Lr:Ir,_=r.rects.reference[d]+r.rects.reference[u]-s[u]-r.rects.popper[d],E=s[u]-r.rects.reference[u],w=Ii(a),b=w?u==="y"?w.clientHeight||0:w.clientWidth||0:0,k=_/2-E/2,N=h[y],D=b-g[d]-h[m],B=b/2-g[d]/2+k,ee=no(N,B,D),q=u;r.modifiersData[n]=(e={},e[q]=ee,e.centerOffset=ee-B,e)}}function NF(t){var e=t.state,r=t.options,n=r.element,i=n===void 0?"[data-popper-arrow]":n;i!=null&&(typeof i=="string"&&(i=e.elements.popper.querySelector(i),!i)||!Yu(e.elements.popper,i)||(e.elements.arrow=i))}var oS={name:"arrow",enabled:!0,phase:"main",fn:RF,effect:NF,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function ci(t){return t.split("-")[1]}var BF={top:"auto",right:"auto",bottom:"auto",left:"auto"};function DF(t){var e=t.x,r=t.y,n=window,i=n.devicePixelRatio||1;return{x:Ra(e*i)/i||0,y:Ra(r*i)/i||0}}function lS(t){var e,r=t.popper,n=t.popperRect,i=t.placement,a=t.variation,s=t.offsets,l=t.position,u=t.gpuAcceleration,f=t.adaptive,d=t.roundOffsets,h=t.isFixed,g=s.x,y=g===void 0?0:g,m=s.y,_=m===void 0?0:m,E=typeof d=="function"?d({x:y,y:_}):{x:y,y:_};y=E.x,_=E.y;var w=s.hasOwnProperty("x"),b=s.hasOwnProperty("y"),k=br,N=wr,D=window;if(f){var B=Ii(r),ee="clientHeight",q="clientWidth";if(B===mr(r)&&(B=tn(r),wn(B).position!=="static"&&l==="absolute"&&(ee="scrollHeight",q="scrollWidth")),B=B,i===wr||(i===br||i===Ir)&&a===$s){N=Lr;var U=h&&B===D&&D.visualViewport?D.visualViewport.height:B[ee];_-=U-n.height,_*=u?1:-1}if(i===br||(i===wr||i===Lr)&&a===$s){k=Ir;var oe=h&&B===D&&D.visualViewport?D.visualViewport.width:B[q];y-=oe-n.width,y*=u?1:-1}}var ae=Object.assign({position:l},f&&BF),Ee=d===!0?DF({x:y,y:_}):{x:y,y:_};if(y=Ee.x,_=Ee.y,u){var Ie;return Object.assign({},ae,(Ie={},Ie[N]=b?"0":"",Ie[k]=w?"0":"",Ie.transform=(D.devicePixelRatio||1)<=1?"translate("+y+"px, "+_+"px)":"translate3d("+y+"px, "+_+"px, 0)",Ie))}return Object.assign({},ae,(e={},e[N]=b?_+"px":"",e[k]=w?y+"px":"",e.transform="",e))}function OF(t){var e=t.state,r=t.options,n=r.gpuAcceleration,i=n===void 0?!0:n,a=r.adaptive,s=a===void 0?!0:a,l=r.roundOffsets,u=l===void 0?!0:l;if(!1)var f;var d={placement:Wr(e.placement),variation:ci(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:i,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,lS(Object.assign({},d,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:s,roundOffsets:u})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,lS(Object.assign({},d,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:u})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}var uS={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:OF,data:{}};var lh={passive:!0};function LF(t){var e=t.state,r=t.instance,n=t.options,i=n.scroll,a=i===void 0?!0:i,s=n.resize,l=s===void 0?!0:s,u=mr(e.elements.popper),f=[].concat(e.scrollParents.reference,e.scrollParents.popper);return a&&f.forEach(function(d){d.addEventListener("scroll",r.update,lh)}),l&&u.addEventListener("resize",r.update,lh),function(){a&&f.forEach(function(d){d.removeEventListener("scroll",r.update,lh)}),l&&u.removeEventListener("resize",r.update,lh)}}var cS={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:LF,data:{}};var PF={left:"right",right:"left",bottom:"top",top:"bottom"};function Tl(t){return t.replace(/left|right|bottom|top/g,function(e){return PF[e]})}var MF={start:"end",end:"start"};function uh(t){return t.replace(/start|end/g,function(e){return MF[e]})}function io(t){var e=mr(t),r=e.pageXOffset,n=e.pageYOffset;return{scrollLeft:r,scrollTop:n}}function ao(t){return ui(tn(t)).left+io(t).scrollLeft}function Om(t,e){var r=mr(t),n=tn(t),i=r.visualViewport,a=n.clientWidth,s=n.clientHeight,l=0,u=0;if(i){a=i.width,s=i.height;var f=Hu();(f||!f&&e==="fixed")&&(l=i.offsetLeft,u=i.offsetTop)}return{width:a,height:s,x:l+ao(t),y:u}}function Lm(t){var e,r=tn(t),n=io(t),i=(e=t.ownerDocument)==null?void 0:e.body,a=ki(r.scrollWidth,r.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),s=ki(r.scrollHeight,r.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),l=-n.scrollLeft+ao(t),u=-n.scrollTop;return wn(i||r).direction==="rtl"&&(l+=ki(r.clientWidth,i?i.clientWidth:0)-a),{width:a,height:s,x:l,y:u}}function so(t){var e=wn(t),r=e.overflow,n=e.overflowX,i=e.overflowY;return/auto|scroll|overlay|hidden/.test(r+i+n)}function ch(t){return["html","body","#document"].indexOf(Yr(t))>=0?t.ownerDocument.body:Pr(t)&&so(t)?t:ch(Na(t))}function ps(t,e){var r;e===void 0&&(e=[]);var n=ch(t),i=n===((r=t.ownerDocument)==null?void 0:r.body),a=mr(n),s=i?[a].concat(a.visualViewport||[],so(n)?n:[]):n,l=e.concat(s);return i?l:l.concat(ps(Na(s)))}function Al(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function UF(t,e){var r=ui(t,!1,e==="fixed");return r.top=r.top+t.clientTop,r.left=r.left+t.clientLeft,r.bottom=r.top+t.clientHeight,r.right=r.left+t.clientWidth,r.width=t.clientWidth,r.height=t.clientHeight,r.x=r.left,r.y=r.top,r}function fS(t,e,r){return e===sh?Al(Om(t,r)):li(e)?UF(e,r):Al(Lm(tn(t)))}function FF(t){var e=ps(Na(t)),r=["absolute","fixed"].indexOf(wn(t).position)>=0,n=r&&Pr(t)?Ii(t):t;return li(n)?e.filter(function(i){return li(i)&&Yu(i,n)&&Yr(i)!=="body"}):[]}function Pm(t,e,r,n){var i=e==="clippingParents"?FF(t):[].concat(e),a=[].concat(i,[r]),s=a[0],l=a.reduce(function(u,f){var d=fS(t,f,n);return u.top=ki(d.top,u.top),u.right=eo(d.right,u.right),u.bottom=eo(d.bottom,u.bottom),u.left=ki(d.left,u.left),u},fS(t,s,n));return l.width=l.right-l.left,l.height=l.bottom-l.top,l.x=l.left,l.y=l.top,l}function Xu(t){var e=t.reference,r=t.element,n=t.placement,i=n?Wr(n):null,a=n?ci(n):null,s=e.x+e.width/2-r.width/2,l=e.y+e.height/2-r.height/2,u;switch(i){case wr:u={x:s,y:e.y-r.height};break;case Lr:u={x:s,y:e.y+e.height};break;case Ir:u={x:e.x+e.width,y:l};break;case br:u={x:e.x-r.width,y:l};break;default:u={x:e.x,y:e.y}}var f=i?ro(i):null;if(f!=null){var d=f==="y"?"height":"width";switch(a){case Ia:u[f]=u[f]-(e[d]/2-r[d]/2);break;case $s:u[f]=u[f]+(e[d]/2-r[d]/2);break;default:}}return u}function Ri(t,e){e===void 0&&(e={});var r=e,n=r.placement,i=n===void 0?t.placement:n,a=r.strategy,s=a===void 0?t.strategy:a,l=r.boundary,u=l===void 0?tS:l,f=r.rootBoundary,d=f===void 0?sh:f,h=r.elementContext,g=h===void 0?bl:h,y=r.altBoundary,m=y===void 0?!1:y,_=r.padding,E=_===void 0?0:_,w=zu(typeof E!="number"?E:Qu(E,hs)),b=g===bl?rS:bl,k=t.rects.popper,N=t.elements[m?b:g],D=Pm(li(N)?N:N.contextElement||tn(t.elements.popper),u,d,s),B=ui(t.elements.reference),ee=Xu({reference:B,element:k,strategy:"absolute",placement:i}),q=Al(Object.assign({},k,ee)),U=g===bl?q:B,oe={top:D.top-U.top+w.top,bottom:U.bottom-D.bottom+w.bottom,left:D.left-U.left+w.left,right:U.right-D.right+w.right},ae=t.modifiersData.offset;if(g===bl&&ae){var Ee=ae[i];Object.keys(oe).forEach(function(Ie){var Qe=[Ir,Lr].indexOf(Ie)>=0?1:-1,Ne=[wr,Lr].indexOf(Ie)>=0?"y":"x";oe[Ie]+=Ee[Ne]*Qe})}return oe}function Mm(t,e){e===void 0&&(e={});var r=e,n=r.placement,i=r.boundary,a=r.rootBoundary,s=r.padding,l=r.flipVariations,u=r.allowedAutoPlacements,f=u===void 0?oh:u,d=ci(n),h=d?l?Bm:Bm.filter(function(m){return ci(m)===d}):hs,g=h.filter(function(m){return f.indexOf(m)>=0});g.length===0&&(g=h);var y=g.reduce(function(m,_){return m[_]=Ri(t,{placement:_,boundary:i,rootBoundary:a,padding:s})[Wr(_)],m},{});return Object.keys(y).sort(function(m,_){return y[m]-y[_]})}function qF(t){if(Wr(t)===ah)return[];var e=Tl(t);return[uh(t),e,uh(e)]}function GF(t){var e=t.state,r=t.options,n=t.name;if(!e.modifiersData[n]._skip){for(var i=r.mainAxis,a=i===void 0?!0:i,s=r.altAxis,l=s===void 0?!0:s,u=r.fallbackPlacements,f=r.padding,d=r.boundary,h=r.rootBoundary,g=r.altBoundary,y=r.flipVariations,m=y===void 0?!0:y,_=r.allowedAutoPlacements,E=e.options.placement,w=Wr(E),b=w===E,k=u||(b||!m?[Tl(E)]:qF(E)),N=[E].concat(k).reduce(function(Nt,Bt){return Nt.concat(Wr(Bt)===ah?Mm(e,{placement:Bt,boundary:d,rootBoundary:h,padding:f,flipVariations:m,allowedAutoPlacements:_}):Bt)},[]),D=e.rects.reference,B=e.rects.popper,ee=new Map,q=!0,U=N[0],oe=0;oe<N.length;oe++){var ae=N[oe],Ee=Wr(ae),Ie=ci(ae)===Ia,Qe=[wr,Lr].indexOf(Ee)>=0,Ne=Qe?"width":"height",me=Ri(e,{placement:ae,boundary:d,rootBoundary:h,altBoundary:g,padding:f}),ne=Qe?Ie?Ir:br:Ie?Lr:wr;D[Ne]>B[Ne]&&(ne=Tl(ne));var Ge=Tl(ne),Je=[];if(a&&Je.push(me[Ee]<=0),l&&Je.push(me[ne]<=0,me[Ge]<=0),Je.every(function(Nt){return Nt})){U=ae,q=!1;break}ee.set(ae,Je)}if(q)for(var ut=m?3:1,Xe=function(Bt){var et=N.find(function(tt){var ft=ee.get(tt);if(ft)return ft.slice(0,Bt).every(function(I){return I})});if(et)return U=et,"break"},ct=ut;ct>0;ct--){var le=Xe(ct);if(le==="break")break}e.placement!==U&&(e.modifiersData[n]._skip=!0,e.placement=U,e.reset=!0)}}var dS={name:"flip",enabled:!0,phase:"main",fn:GF,requiresIfExists:["offset"],data:{_skip:!1}};function hS(t,e,r){return r===void 0&&(r={x:0,y:0}),{top:t.top-e.height-r.y,right:t.right-e.width+r.x,bottom:t.bottom-e.height+r.y,left:t.left-e.width-r.x}}function pS(t){return[wr,Ir,Lr,br].some(function(e){return t[e]>=0})}function VF(t){var e=t.state,r=t.name,n=e.rects.reference,i=e.rects.popper,a=e.modifiersData.preventOverflow,s=Ri(e,{elementContext:"reference"}),l=Ri(e,{altBoundary:!0}),u=hS(s,n),f=hS(l,i,a),d=pS(u),h=pS(f);e.modifiersData[r]={referenceClippingOffsets:u,popperEscapeOffsets:f,isReferenceHidden:d,hasPopperEscaped:h},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":d,"data-popper-escaped":h})}var gS={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:VF};function jF(t,e,r){var n=Wr(t),i=[br,wr].indexOf(n)>=0?-1:1,a=typeof r=="function"?r(Object.assign({},e,{placement:t})):r,s=a[0],l=a[1];return s=s||0,l=(l||0)*i,[br,Ir].indexOf(n)>=0?{x:l,y:s}:{x:s,y:l}}function KF(t){var e=t.state,r=t.options,n=t.name,i=r.offset,a=i===void 0?[0,0]:i,s=oh.reduce(function(d,h){return d[h]=jF(h,e.rects,a),d},{}),l=s[e.placement],u=l.x,f=l.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=u,e.modifiersData.popperOffsets.y+=f),e.modifiersData[n]=s}var mS={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:KF};function HF(t){var e=t.state,r=t.name;e.modifiersData[r]=Xu({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}var yS={name:"popperOffsets",enabled:!0,phase:"read",fn:HF,data:{}};function Um(t){return t==="x"?"y":"x"}function YF(t){var e=t.state,r=t.options,n=t.name,i=r.mainAxis,a=i===void 0?!0:i,s=r.altAxis,l=s===void 0?!1:s,u=r.boundary,f=r.rootBoundary,d=r.altBoundary,h=r.padding,g=r.tether,y=g===void 0?!0:g,m=r.tetherOffset,_=m===void 0?0:m,E=Ri(e,{boundary:u,rootBoundary:f,padding:h,altBoundary:d}),w=Wr(e.placement),b=ci(e.placement),k=!b,N=ro(w),D=Um(N),B=e.modifiersData.popperOffsets,ee=e.rects.reference,q=e.rects.popper,U=typeof _=="function"?_(Object.assign({},e.rects,{placement:e.placement})):_,oe=typeof U=="number"?{mainAxis:U,altAxis:U}:Object.assign({mainAxis:0,altAxis:0},U),ae=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,Ee={x:0,y:0};if(!!B){if(a){var Ie,Qe=N==="y"?wr:br,Ne=N==="y"?Lr:Ir,me=N==="y"?"height":"width",ne=B[N],Ge=ne+E[Qe],Je=ne-E[Ne],ut=y?-q[me]/2:0,Xe=b===Ia?ee[me]:q[me],ct=b===Ia?-q[me]:-ee[me],le=e.elements.arrow,Nt=y&&le?to(le):{width:0,height:0},Bt=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:Wu(),et=Bt[Qe],tt=Bt[Ne],ft=no(0,ee[me],Nt[me]),I=k?ee[me]/2-ut-ft-et-oe.mainAxis:Xe-ft-et-oe.mainAxis,O=k?-ee[me]/2+ut+ft+tt+oe.mainAxis:ct+ft+tt+oe.mainAxis,L=e.elements.arrow&&Ii(e.elements.arrow),H=L?N==="y"?L.clientTop||0:L.clientLeft||0:0,j=(Ie=ae==null?void 0:ae[N])!=null?Ie:0,Q=ne+I-j-H,J=ne+O-j,Y=no(y?eo(Ge,Q):Ge,ne,y?ki(Je,J):Je);B[N]=Y,Ee[N]=Y-ne}if(l){var X,te=N==="x"?wr:br,Z=N==="x"?Lr:Ir,he=B[D],Oe=D==="y"?"height":"width",Ue=he+E[te],dt=he-E[Z],Qt=[wr,br].indexOf(w)!==-1,Xt=(X=ae==null?void 0:ae[D])!=null?X:0,rt=Qt?Ue:he-ee[Oe]-q[Oe]-Xt+oe.altAxis,Dt=Qt?he+ee[Oe]+q[Oe]-Xt-oe.altAxis:dt,pr=y&&Qt?sS(rt,he,Dt):no(y?rt:Ue,he,y?Dt:dt);B[D]=pr,Ee[D]=pr-he}e.modifiersData[n]=Ee}}var vS={name:"preventOverflow",enabled:!0,phase:"main",fn:YF,requiresIfExists:["offset"]};function Fm(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function qm(t){return t===mr(t)||!Pr(t)?io(t):Fm(t)}function WF(t){var e=t.getBoundingClientRect(),r=Ra(e.width)/t.offsetWidth||1,n=Ra(e.height)/t.offsetHeight||1;return r!==1||n!==1}function Gm(t,e,r){r===void 0&&(r=!1);var n=Pr(e),i=Pr(e)&&WF(e),a=tn(e),s=ui(t,i,r),l={scrollLeft:0,scrollTop:0},u={x:0,y:0};return(n||!n&&!r)&&((Yr(e)!=="body"||so(a))&&(l=qm(e)),Pr(e)?(u=ui(e,!0),u.x+=e.clientLeft,u.y+=e.clientTop):a&&(u.x=ao(a))),{x:s.left+l.scrollLeft-u.x,y:s.top+l.scrollTop-u.y,width:s.width,height:s.height}}function zF(t){var e=new Map,r=new Set,n=[];t.forEach(function(a){e.set(a.name,a)});function i(a){r.add(a.name);var s=[].concat(a.requires||[],a.requiresIfExists||[]);s.forEach(function(l){if(!r.has(l)){var u=e.get(l);u&&i(u)}}),n.push(a)}return t.forEach(function(a){r.has(a.name)||i(a)}),n}function Vm(t){var e=zF(t);return nS.reduce(function(r,n){return r.concat(e.filter(function(i){return i.phase===n}))},[])}function jm(t){var e;return function(){return e||(e=new Promise(function(r){Promise.resolve().then(function(){e=void 0,r(t())})})),e}}function Km(t){var e=t.reduce(function(r,n){var i=r[n.name];return r[n.name]=i?Object.assign({},i,n,{options:Object.assign({},i.options,n.options),data:Object.assign({},i.data,n.data)}):n,r},{});return Object.keys(e).map(function(r){return e[r]})}var _S={placement:"bottom",modifiers:[],strategy:"absolute"};function wS(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return!e.some(function(n){return!(n&&typeof n.getBoundingClientRect=="function")})}function ES(t){t===void 0&&(t={});var e=t,r=e.defaultModifiers,n=r===void 0?[]:r,i=e.defaultOptions,a=i===void 0?_S:i;return function(l,u,f){f===void 0&&(f=a);var d={placement:"bottom",orderedModifiers:[],options:Object.assign({},_S,a),modifiersData:{},elements:{reference:l,popper:u},attributes:{},styles:{}},h=[],g=!1,y={state:d,setOptions:function(w){var b=typeof w=="function"?w(d.options):w;_(),d.options=Object.assign({},a,d.options,b),d.scrollParents={reference:li(l)?ps(l):l.contextElement?ps(l.contextElement):[],popper:ps(u)};var k=Vm(Km([].concat(n,d.options.modifiers)));if(d.orderedModifiers=k.filter(function(ae){return ae.enabled}),!1){var N;if(getBasePlacement(d.options.placement)===auto)var D;var B,ee,q,U,oe}return m(),y.update()},forceUpdate:function(){if(!g){var w=d.elements,b=w.reference,k=w.popper;if(!!wS(b,k)){d.rects={reference:Gm(b,Ii(k),d.options.strategy==="fixed"),popper:to(k)},d.reset=!1,d.placement=d.options.placement,d.orderedModifiers.forEach(function(ae){return d.modifiersData[ae.name]=Object.assign({},ae.data)});for(var N=0,D=0;D<d.orderedModifiers.length;D++){if(d.reset===!0){d.reset=!1,D=-1;continue}var B=d.orderedModifiers[D],ee=B.fn,q=B.options,U=q===void 0?{}:q,oe=B.name;typeof ee=="function"&&(d=ee({state:d,options:U,name:oe,instance:y})||d)}}}},update:jm(function(){return new Promise(function(E){y.forceUpdate(),E(d)})}),destroy:function(){_(),g=!0}};if(!wS(l,u))return y;y.setOptions(f).then(function(E){!g&&f.onFirstUpdate&&f.onFirstUpdate(E)});function m(){d.orderedModifiers.forEach(function(E){var w=E.name,b=E.options,k=b===void 0?{}:b,N=E.effect;if(typeof N=="function"){var D=N({state:d,name:w,instance:y,options:k}),B=function(){};h.push(D||B)}})}function _(){h.forEach(function(E){return E()}),h=[]}return y}}var QF=[cS,yS,uS,iS,mS,dS,vS,oS,gS],Hm=ES({defaultModifiers:QF});var XF=(t,e)=>(t%e+e)%e,bS=class{constructor(e,r,n){this.owner=e,this.containerEl=r,r.on("click",".suggestion-item",this.onSuggestionClick.bind(this)),r.on("mousemove",".suggestion-item",this.onSuggestionMouseover.bind(this)),n.register([],"ArrowUp",i=>{if(!i.isComposing)return this.setSelectedItem(this.selectedItem-1,!0),!1}),n.register([],"ArrowDown",i=>{if(!i.isComposing)return this.setSelectedItem(this.selectedItem+1,!0),!1}),n.register([],"Enter",i=>{if(!i.isComposing)return this.useSelectedItem(i),!1})}onSuggestionClick(e,r){e.preventDefault();let n=this.suggestions.indexOf(r);this.setSelectedItem(n,!1),this.useSelectedItem(e)}onSuggestionMouseover(e,r){let n=this.suggestions.indexOf(r);this.setSelectedItem(n,!1)}setSuggestions(e){this.containerEl.empty();let r=[];e.forEach(n=>{let i=this.containerEl.createDiv("suggestion-item");this.owner.renderSuggestion(n,i),r.push(i)}),this.values=e,this.suggestions=r,this.setSelectedItem(0,!1)}useSelectedItem(e){let r=this.values[this.selectedItem];r&&this.owner.selectSuggestion(r,e)}setSelectedItem(e,r){let n=XF(e,this.suggestions.length),i=this.suggestions[this.selectedItem],a=this.suggestions[n];i==null||i.removeClass("is-selected"),a==null||a.addClass("is-selected"),this.selectedItem=n,r&&a.scrollIntoView(!1)}},Ju=class{constructor(e){this.inputEl=e,this.scope=new CS.Scope,this.suggestEl=createDiv("suggestion-container");let r=this.suggestEl.createDiv("suggestion");this.suggest=new bS(this,r,this.scope),this.scope.register([],"Escape",this.close.bind(this)),this.inputEl.addEventListener("input",this.onInputChanged.bind(this)),this.inputEl.addEventListener("focus",this.onInputChanged.bind(this)),this.inputEl.addEventListener("blur",this.close.bind(this)),this.suggestEl.on("mousedown",".suggestion-container",n=>{n.preventDefault()})}onInputChanged(){let e=this.inputEl.value,r=this.getSuggestions(e);if(!r){this.close();return}r.length>0?(this.suggest.setSuggestions(r),this.open(app.dom.appContainerEl,this.inputEl)):this.close()}open(e,r){app.keymap.pushScope(this.scope),e.appendChild(this.suggestEl),this.popper=Hm(r,this.suggestEl,{placement:"bottom-start",modifiers:[{name:"sameWidth",enabled:!0,fn:({state:n,instance:i})=>{let a=`${n.rects.reference.width}px`;n.styles.popper.width!==a&&(n.styles.popper.width=a,i.update())},phase:"beforeWrite",requires:["computeStyles"]}]})}close(){app.keymap.popScope(this.scope),this.suggest.setSuggestions([]),this.popper&&this.popper.destroy(),this.suggestEl.detach()}};function JF(t){t=(0,Ni.normalizePath)(t);let e=app.vault.getAbstractFileByPath(t);return!e||!(e instanceof Ni.TFolder)?null:e}function xS(t){let e=JF(t),r=[];return Ni.Vault.recurseChildren(e,n=>{n instanceof Ni.TFile&&r.push(n)}),r.sort((n,i)=>n.basename.localeCompare(i.basename)),r}var SS;(function(r){r[r.TemplateFiles=0]="TemplateFiles",r[r.ScriptFiles=1]="ScriptFiles"})(SS||(SS={}));var Zu=class extends Ju{constructor(e,r){super(e);this.inputEl=e;this.plugin=r}getSuggestions(e){var s,l,u,f,d,h,g;let r=[];if(this.plugin.templaterPlugin){let y=(0,Ni.normalizePath)((u=(l=(s=this.plugin)==null?void 0:s.templaterPlugin)==null?void 0:l.settings)==null?void 0:u.templates_folder),m=xS(y);r=[...r,...m]}if(this.plugin.coreTemplatePlugin){let y=(0,Ni.normalizePath)((g=(h=(d=(f=this.plugin)==null?void 0:f.coreTemplatePlugin)==null?void 0:d.instance)==null?void 0:h.options)==null?void 0:g.folder),m=xS(y);r=[...r,...m]}if(!r)return[];let n=new Set(r),i=[],a=e.toLowerCase();return n.forEach(y=>{y instanceof Ni.TFile&&y.extension==="md"&&y.path.toLowerCase().contains(a)&&i.push(y)}),i}renderSuggestion(e,r){r.setText(e.path)}selectSuggestion(e){this.inputEl.value=e.path,this.inputEl.trigger("input"),this.close()}};var TS=_t(require("obsidian"));var $u=class extends Ju{getSuggestions(e){let r=app.vault.getAllLoadedFiles(),n=[],i=e.toLowerCase();return r.forEach(a=>{a instanceof TS.TFolder&&a.path.toLowerCase().contains(i)&&n.push(a)}),n}renderSuggestion(e,r){r.setText(e.path)}selectSuggestion(e){this.inputEl.value=e.path,this.inputEl.trigger("input"),this.close()}};var Ym=class extends Ht.PluginSettingTab{constructor(e,r){super(e,r);this.plugin=r}display(){let{containerEl:e}=this,r=wa()||Os();e.empty(),e.createEl("h2",{text:"Settings for Google Calendar"}),e.createEl("h4",{text:"Please restart Obsidian to let changes take effect"}),new Ht.Setting(e).setName("Use own authentication client").setDesc("Please create your own client.").addToggle(i=>i.setValue(this.plugin.settings.useCustomClient).onChange(a=>M(this,null,function*(){this.plugin.settings.useCustomClient=a,yield this.plugin.saveSettings(),this.display()}))),this.plugin.settings.useCustomClient?(new Ht.Setting(e).setName("ClientId").setDesc("Google client id").setClass("SubSettings").addText(i=>i.setPlaceholder("Enter your client id").setValue(this.plugin.settings.googleClientId).onChange(a=>M(this,null,function*(){this.plugin.settings.googleClientId=a.trim(),yield this.plugin.saveSettings()}))),new Ht.Setting(e).setName("ClientSecret").setDesc("Google client secret").setClass("SubSettings").addText(i=>i.setPlaceholder("Enter your client secret").setValue(this.plugin.settings.googleClientSecret).onChange(a=>M(this,null,function*(){this.plugin.settings.googleClientSecret=a.trim(),yield this.plugin.saveSettings()}))),Ht.Platform.isMobileApp&&new Ht.Setting(e).setName("Refresh Token").setDesc("Google Refresh Token from OAuth").setClass("SubSettings").addText(i=>i.setPlaceholder("Enter refresh token").setValue(this.plugin.settings.googleRefreshToken).onChange(a=>M(this,null,function*(){this.plugin.settings.googleRefreshToken=a.trim(),fu(a)})))):new Ht.Setting(e).setName("Server url").setDesc("The url to the server where the oauth takes place").setClass("SubSettings").addText(i=>{i.setValue(this.plugin.settings.googleOAuthServer).onChange(a=>M(this,null,function*(){this.plugin.settings.googleOAuthServer=a.trim(),yield this.plugin.saveSettings()}))}),new Ht.Setting(e).setName("Login with google").addButton(i=>{i.setButtonText(r?"Logout":"Login").onClick(()=>{r?(fu(""),Sf(""),Xa(""),Ja(0),this.hide(),this.display()):this.plugin.settings.useCustomClient?Jx():window.open(`${this.plugin.settings.googleOAuthServer}/api/google`)})}),new Ht.Setting(e).setName("Refresh Interval").setDesc("Time in seconds between refresh request from google server").addSlider(i=>{i.setValue(this.plugin.settings.refreshInterval),i.setLimits(10,360,1),i.setDynamicTooltip(),i.onChange(a=>M(this,null,function*(){this.plugin.settings.refreshInterval=a,yield this.plugin.saveSettings()}))}),new Ht.Setting(e).setName("Default webview theme").addDropdown(i=>M(this,null,function*(){i.addOption("auto","Auto"),i.addOption("dark","Dark"),i.addOption("light","Light"),i.setValue(this.plugin.settings.webViewDefaultColorMode),i.onChange(a=>M(this,null,function*(){this.plugin.settings.webViewDefaultColorMode=a,yield this.plugin.saveSettings(),this.hide(),this.display()}))})),new Ht.Setting(e).setName("Show daily notes").setDesc("Will display daily notes and allow to open and create daily notes").addToggle(i=>{i.setValue(this.plugin.settings.activateDailyNoteAddon),i.onChange(a=>M(this,null,function*(){this.plugin.settings.activateDailyNoteAddon=a,yield this.plugin.saveSettings(),this.hide(),this.display()}))}),this.plugin.settings.activateDailyNoteAddon&&new Ht.Setting(e).setName("Daily dot color").setDesc("Color for daily note dots in month view").addText(i=>{i.inputEl.type="color",i.setValue(this.plugin.settings.dailyNoteDotColor),i.onChange(a=>M(this,null,function*(){this.plugin.settings.dailyNoteDotColor=a,yield this.plugin.saveSettings()}))}),new Ht.Setting(e).setName("Auto create Event Notes").setDesc("Will create new notes from a event if the description contains :obsidian:").addToggle(i=>{i.setValue(this.plugin.settings.autoCreateEventNotes),i.onChange(a=>M(this,null,function*(){this.plugin.settings.autoCreateEventNotes=a,yield this.plugin.saveSettings(),this.hide(),this.display()}))}),new Ht.Setting(e).setName("Keep auto created Notes open").setDesc("When creating a new note should it stay open for direct editing").setClass("SubSettings").addToggle(i=>{i.setValue(this.plugin.settings.autoCreateEventKeepOpen),i.onChange(a=>M(this,null,function*(){this.plugin.settings.autoCreateEventKeepOpen=a,yield this.plugin.saveSettings(),this.hide(),this.display()}))}),new Ht.Setting(e).setName("Import Start Offset").setDesc("Days in the past from events to import").setClass("SubSettings").addSlider(i=>{i.setValue(this.plugin.settings.importStartOffset),i.setLimits(0,7,1),i.setDynamicTooltip(),i.onChange(a=>M(this,null,function*(){i.showTooltip(),this.plugin.settings.importStartOffset=a,yield this.plugin.saveSettings()}))}),new Ht.Setting(e).setName("Import End Offset").setDesc("Days in the future from events to import").setClass("SubSettings").addSlider(i=>{i.setValue(this.plugin.settings.importEndOffset),i.setLimits(0,7,1),i.setDynamicTooltip(),i.onChange(a=>M(this,null,function*(){this.plugin.settings.importEndOffset=a,yield this.plugin.saveSettings()}))}),new Ht.Setting(e).setName("Debug Mode").setDesc("Enable if something is not working").addToggle(i=>{i.setValue(this.plugin.settings.debugMode),i.onChange(a=>M(this,null,function*(){this.plugin.settings.debugMode=a,yield this.plugin.saveSettings()}))}),new Ht.Setting(e).setName("Use defaults for note creation").setDesc("If active creating notes will be faster but less flexible").addToggle(i=>{i.setValue(this.plugin.settings.useDefaultTemplate),i.onChange(a=>M(this,null,function*(){this.plugin.settings.useDefaultTemplate=a,yield this.plugin.saveSettings(),this.display()}))}),this.plugin.settings.useDefaultTemplate&&(new Ht.Setting(e).setName("Default Template").setDesc("Template to use at note creation").setClass("SubSettings").addSearch(i=>{new Zu(i.inputEl,this.plugin),i.setPlaceholder("Template").setValue(this.plugin.settings.defaultTemplate).onChange(a=>M(this,null,function*(){this.plugin.settings.defaultTemplate=a,yield this.plugin.saveSettings()})),i.containerEl.addClass("templater_search")}),new Ht.Setting(e).setName("Default Folder").setDesc("Folder to save notes to after creation").setClass("SubSettings").addSearch(i=>{new $u(i.inputEl),i.setPlaceholder("Example: folder1/folder2").setValue(this.plugin.settings.defaultFolder).onChange(a=>M(this,null,function*(){this.plugin.settings.defaultFolder=a,yield this.plugin.saveSettings()})),i.containerEl.addClass("templater_search")}));let n=this.plugin.settings.insertTemplates;if(n.length&&(new Ht.Setting(e).setName("Saved Templates"),n.forEach(i=>{let a=new Ht.Setting(e).setClass("SubSettings").setName(i.name).addButton(s=>{s.setButtonText("Remove"),s.onClick(()=>M(this,null,function*(){this.plugin.settings.insertTemplates.remove(i),a.settingEl.remove(),yield this.plugin.saveSettings(),this.hide(),this.display()}))})})),zt()){new Ht.Setting(e).setName("Default Calendar").addDropdown(a=>M(this,null,function*(){a.addOption("Default","Select a calendar"),(yield Or()).forEach(l=>{a.addOption(l.id,l.summary)}),a.setValue(this.plugin.settings.defaultCalendar),a.onChange(l=>M(this,null,function*(){this.plugin.settings.defaultCalendar=l,yield this.plugin.saveSettings()}))})),e.createEl("h3","Calendar Blacklist");let i=this.plugin.settings.calendarBlackList;new Ht.Setting(e).setName("Add Item to BlackList").addDropdown(a=>M(this,null,function*(){a.addOption("Default","Select Option to add"),(yield Or()).forEach(l=>{a.addOption(l.id+"_=_"+l.summary,l.summary)}),a.onChange(l=>M(this,null,function*(){let[u,f]=l.split("_=_");i.contains([u,f])||(this.plugin.settings.calendarBlackList=[...i,[u,f]],yield this.plugin.saveSettings());let d=new Ht.Setting(e).setClass("SubSettings").setName(f).addButton(h=>{h.setButtonText("Remove"),h.onClick(()=>M(this,null,function*(){this.plugin.settings.calendarBlackList.remove([u,f]),d.settingEl.remove(),yield this.plugin.saveSettings()}))})}))})),i.forEach(a=>{let s=new Ht.Setting(e).setClass("SubSettings").setName(a[1]).addButton(l=>{l.setButtonText("Remove"),l.onClick(()=>M(this,null,function*(){this.plugin.settings.calendarBlackList.remove(a),s.settingEl.remove(),yield this.plugin.saveSettings()}))})})}}};function Zx(){let t=st.getInstance();return t.settings.googleClientId==""||t.settings.googleClientSecret==""?(wt("Google Calendar missing settings"),!1):!0}function zt(){return(!wa()||wa()=="")&&(!Os()||Os()=="")?(wt("Google Calendar missing settings or not logged in"),!1):!0}var DA=_t(require("obsidian"));var AS=_t(Ba());var fh=new Map;function Bi(){fh.clear()}function dr(){return M(this,arguments,function*({startDate:t,endDate:e,exclude:r,include:n}={}){let i=st.getInstance();t||(t=window.moment()),t=t.startOf("day"),e||(e=t.clone()),e=e.endOf("day");let a=yield Or();n&&n.length?a=a.filter(l=>n.contains(l.id)||n.contains(l.summary)):r&&r.length&&(a=a.filter(l=>!(r.contains(l.id)||r.contains(l.summary))));let s=[];for(let l=0;l<a.length;l++){let u=yield eq(i,a[l],t,e);s=[...s,...u]}return s=AS.default.orderBy(s,[l=>{var u;return new Date((u=l.start.date)!=null?u:l.start.dateTime)}],"asc"),s})}function ZF(t,e,r){return M(this,null,function*(){if(!zt())return[];let n,i=2500,a=[];do{let s=`https://www.googleapis.com/calendar/v3/calendars/${encodeURIComponent(t.id)}/events?`;if(s+=`maxResults=${i}`,s+="&futureevents=true",s+="&singleEvents=true",s+="&orderby=starttime",s+="&sortorder=ascending",s+=`&timeMin=${e}`,s+=`&timeMax=${r}`,n&&n.nextPageToken&&(s+=`&nextPageToken=${n.nextPageToken}`),n=yield Jr(s,"GET",null),!n){wt("Could not list Google Events");continue}let l=n.items.filter(u=>(u.parent=t,u.status!="cancelled"));a=[...a,...l]}while(n.items.length==i);return a})}function $F(t,e,r){let n=[];return t.forEach(i=>{if(!i.start.dateTime||!i.end.dateTime)return;let a=window.moment(i.end.dateTime),s=window.moment(i.start.dateTime);if(s.isSame(a,"day"))return;let l=[],u=a.endOf("day").diff(s.startOf("day"),"days")+1,f=i.summary,d=1;do i.summary=`${f} (Day ${d}/${u})`,i.eventType="multiDay",l=[...l,structuredClone(i)],d++,s=s.add(1,"days"),i.start.dateTime=s.format("YYYY-MM-DD HH:mm");while(!s.isAfter(a,"day"));l=l.filter(h=>{let g=window.moment(h.start.dateTime);return!(e&&g.isBefore(e,"day")||r&&g.isSameOrAfter(r,"day"))}),i.eventType="delete",n=[...n,...l]}),t=[...t,...n],t}function eq(t,e,r,n){return M(this,null,function*(){let i=r.toISOString(),a=n.toISOString(),s=JSON.stringify({start:i,end:a,calendar:e.id});if(fh.has(s)){let{events:u,updated:f}=fh.get(s);if(f.clone().add(t.settings.refreshInterval,"second").isAfter(window.moment()))return u}let l=yield ZF(e,i,a);return l=$F(l,r,n),l=l.filter(u=>u.eventType!=="delete"),fh.set(s,{events:l,updated:window.moment()}),l})}var NA=_t(require("obsidian"));var fA=_t(require("obsidian"));function At(){}function Wm(t){return t()}function kS(){return Object.create(null)}function ln(t){t.forEach(Wm)}function IS(t){return typeof t=="function"}function Bn(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}var dh;function tc(t,e){return dh||(dh=document.createElement("a")),dh.href=e,t===dh.href}function RS(t){return Object.keys(t).length===0}function Il(t){return t==null?"":t}var nz=typeof window!="undefined";var iz=new Set;var NS=!1;function tq(){NS=!0}function rq(){NS=!1}function se(t,e){t.appendChild(e)}function fi(t,e,r){let n=nq(t);if(!n.getElementById(e)){let i=fe("style");i.id=e,i.textContent=r,iq(n,i)}}function nq(t){if(!t)return document;let e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function iq(t,e){se(t.head||t,e)}function Se(t,e,r){t.insertBefore(e,r||null)}function xe(t){t.parentNode.removeChild(t)}function En(t,e){for(let r=0;r<t.length;r+=1)t[r]&&t[r].d(e)}function fe(t){return document.createElement(t)}function xr(t){return document.createTextNode(t)}function Le(){return xr(" ")}function ia(){return xr("")}function at(t,e,r,n){return t.addEventListener(e,r,n),()=>t.removeEventListener(e,r,n)}function re(t,e,r){r==null?t.removeAttribute(e):t.getAttribute(e)!==r&&t.setAttribute(e,r)}function aq(t){return Array.from(t.childNodes)}function di(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function Di(t,e){t.value=e==null?"":e}function Ze(t,e,r,n){r===null?t.style.removeProperty(e):t.style.setProperty(e,r,n?"important":"")}function rc(t,e){for(let r=0;r<t.options.length;r+=1){let n=t.options[r];if(n.__value===e){n.selected=!0;return}}t.selectedIndex=-1}function zm(t){let e=t.querySelector(":checked")||t.options[0];return e&&e.__value}var az=new Map;var nc;function ic(t){nc=t}function BS(){if(!nc)throw new Error("Function called outside component initialization");return nc}function oo(t){BS().$$.on_mount.push(t)}function lo(t){BS().$$.on_destroy.push(t)}var ac=[];var Dn=[],hh=[],Qm=[],sq=Promise.resolve(),Xm=!1;function oq(){Xm||(Xm=!0,sq.then(DS))}function Rl(t){hh.push(t)}function Da(t){Qm.push(t)}var Jm=new Set,ph=0;function DS(){let t=nc;do{for(;ph<ac.length;){let e=ac[ph];ph++,ic(e),lq(e.$$)}for(ic(null),ac.length=0,ph=0;Dn.length;)Dn.pop()();for(let e=0;e<hh.length;e+=1){let r=hh[e];Jm.has(r)||(Jm.add(r),r())}hh.length=0}while(ac.length);for(;Qm.length;)Qm.pop()();Xm=!1,Jm.clear(),ic(t)}function lq(t){if(t.fragment!==null){t.update(),ln(t.before_update);let e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Rl)}}var gh=new Set,uo;function mh(){uo={r:0,c:[],p:uo}}function yh(){uo.r||ln(uo.c),uo=uo.p}function hi(t,e){t&&t.i&&(gh.delete(t),t.i(e))}function Oi(t,e,r,n){if(t&&t.o){if(gh.has(t))return;gh.add(t),uo.c.push(()=>{gh.delete(t),n&&(r&&t.d(1),n())}),t.o(e)}else n&&n()}var sz=typeof window!="undefined"?window:typeof globalThis!="undefined"?globalThis:global;var oz=new Set(["allowfullscreen","allowpaymentrequest","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","hidden","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"]);function Oa(t,e,r){let n=t.$$.props[e];n!==void 0&&(t.$$.bound[n]=r,r(t.$$.ctx[n]))}function sc(t){t&&t.c()}function Nl(t,e,r,n){let{fragment:i,on_mount:a,on_destroy:s,after_update:l}=t.$$;i&&i.m(e,r),n||Rl(()=>{let u=a.map(Wm).filter(IS);s?s.push(...u):ln(u),t.$$.on_mount=[]}),l.forEach(Rl)}function co(t,e){let r=t.$$;r.fragment!==null&&(ln(r.on_destroy),r.fragment&&r.fragment.d(e),r.on_destroy=r.fragment=null,r.ctx=[])}function uq(t,e){t.$$.dirty[0]===-1&&(ac.push(t),oq(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function On(t,e,r,n,i,a,s,l=[-1]){let u=nc;ic(t);let f=t.$$={fragment:null,ctx:null,props:a,update:At,not_equal:i,bound:kS(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(u?u.$$.context:[])),callbacks:kS(),dirty:l,skip_bound:!1,root:e.target||u.$$.root};s&&s(f.root);let d=!1;if(f.ctx=r?r(t,e.props||{},(h,g,...y)=>{let m=y.length?y[0]:g;return f.ctx&&i(f.ctx[h],f.ctx[h]=m)&&(!f.skip_bound&&f.bound[h]&&f.bound[h](m),d&&uq(t,h)),g}):[],f.update(),d=!0,ln(f.before_update),f.fragment=n?n(f.ctx):!1,e.target){if(e.hydrate){tq();let h=aq(e.target);f.fragment&&f.fragment.l(h),h.forEach(xe)}else f.fragment&&f.fragment.c();e.intro&&hi(t.$$.fragment),Nl(t,e.target,e.anchor,e.customElement),rq(),DS()}ic(u)}var cq;typeof HTMLElement=="function"&&(cq=class extends HTMLElement{constructor(){super();this.attachShadow({mode:"open"})}connectedCallback(){let{on_mount:t}=this.$$;this.$$.on_disconnect=t.map(Wm).filter(IS);for(let e in this.$$.slotted)this.appendChild(this.$$.slotted[e])}attributeChangedCallback(t,e,r){this[t]=r}disconnectedCallback(){ln(this.$$.on_disconnect)}$destroy(){co(this,1),this.$destroy=At}$on(t,e){let r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(e),()=>{let n=r.indexOf(e);n!==-1&&r.splice(n,1)}}$set(t){this.$$set&&!RS(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}});var Cn=class{$destroy(){co(this,1),this.$destroy=At}$on(e,r){let n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(r),()=>{let i=n.indexOf(r);i!==-1&&n.splice(i,1)}}$set(e){this.$$set&&!RS(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}};var eT=_t($m()),{__extends:cz,__assign:fz,__rest:dz,__decorate:hz,__param:pz,__metadata:gz,__awaiter:Sr,__generator:mz,__exportStar:yz,__createBinding:vz,__values:_z,__read:wz,__spread:Ez,__spreadArrays:Cz,__spreadArray:bz,__await:xz,__asyncGenerator:Sz,__asyncDelegator:Tz,__asyncValues:Az,__makeTemplateObject:kz,__importStar:Iz,__importDefault:Rz,__classPrivateFieldGet:Nz,__classPrivateFieldSet:Bz}=eT.default;function Eh(t,e=!1){return M(this,null,function*(){var i;if(!zt())return!1;let r=(i=t.recurringEventId)!=null?i:t.id;return e&&t.recurringEventId&&(r=t.id),!!(yield Jr(`https://www.googleapis.com/calendar/v3/calendars/${t.parent.id}/events/${r}`,"DELETE",null))})}function Ch(t,e=!1){return M(this,null,function*(){var a;if(!zt())return null;let r=(a=t.recurringEventId)!=null?a:t.id;e&&t.recurringEventId&&(r=t.id);let n=t.parent.id;delete t.parent;let i=yield Jr(`https://www.googleapis.com/calendar/v3/calendars/${n}/events/${r}`,"PUT",t);return i?(wt("Updated Event",!0),i):(wt("Could not create Google Event"),null)})}function bh(t){return M(this,null,function*(){if(!zt())return null;let e=t.parent.id;t.start.timeZone=t.parent.timeZone,t.end.timeZone=t.parent.timeZone,delete t.parent;let r=yield Jr(`https://www.googleapis.com/calendar/v3/calendars/${e}/events`,"POST",t);return r?(wt(`Google Event ${r.summary} created`,!0),r):(wt("Could not create Google Event"),null)})}var xh=["MO","TU","WE","TH","FR","SA","SU"],Rr=function(){function t(e,r){if(r===0)throw new Error("Can't create weekday with n == 0");this.weekday=e,this.n=r}return t.fromStr=function(e){return new t(xh.indexOf(e))},t.prototype.nth=function(e){return this.n===e?this:new t(this.weekday,e)},t.prototype.equals=function(e){return this.weekday===e.weekday&&this.n===e.n},t.prototype.toString=function(){var e=xh[this.weekday];return this.n&&(e=(this.n>0?"+":"")+String(this.n)+e),e},t.prototype.getJsWeekday=function(){return this.weekday===6?0:this.weekday+1},t}();var ar=function(t){return t!=null},Kn=function(t){return typeof t=="number"},ey=function(t){return xh.indexOf(t)>=0},rn=Array.isArray,pi=function(t,e){e===void 0&&(e=t),arguments.length===1&&(e=t,t=0);for(var r=[],n=t;n<e;n++)r.push(n);return r};var Rt=function(t,e){var r=0,n=[];if(rn(t))for(;r<e;r++)n[r]=[].concat(t);else for(;r<e;r++)n[r]=t;return n},tT=function(t){return rn(t)?t:[t]};function fo(t,e,r){r===void 0&&(r=" ");var n=String(t);return e=e>>0,n.length>e?String(n):(e=e-n.length,e>r.length&&(r+=Rt(r,e/r.length)),r.slice(0,e)+String(n))}var rT=function(t,e,r){var n=t.split(e);return r?n.slice(0,r).concat([n.slice(r).join(e)]):n},un=function(t,e){var r=t%e;return r*e<0?r+e:r},Sh=function(t,e){return{div:Math.floor(t/e),mod:un(t,e)}},Hn=function(t){return!ar(t)||t.length===0},Tr=function(t){return!Hn(t)},Lt=function(t,e){return Tr(t)&&t.indexOf(e)!==-1};var gs;(function(t){t.MONTH_DAYS=[31,28,31,30,31,30,31,31,30,31,30,31],t.ONE_DAY=1e3*60*60*24,t.MAXYEAR=9999,t.ORDINAL_BASE=new Date(Date.UTC(1970,0,1)),t.PY_WEEKDAYS=[6,0,1,2,3,4,5],t.getYearDay=function(e){var r=new Date(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate());return Math.ceil((r.valueOf()-new Date(e.getUTCFullYear(),0,1).valueOf())/t.ONE_DAY)+1},t.isLeapYear=function(e){return e%4==0&&e%100!=0||e%400==0},t.isDate=function(e){return e instanceof Date},t.isValidDate=function(e){return t.isDate(e)&&!isNaN(e.getTime())},t.tzOffset=function(e){return e.getTimezoneOffset()*60*1e3},t.daysBetween=function(e,r){var n=e.getTime()-t.tzOffset(e),i=r.getTime()-t.tzOffset(r),a=n-i;return Math.round(a/t.ONE_DAY)},t.toOrdinal=function(e){return t.daysBetween(e,t.ORDINAL_BASE)},t.fromOrdinal=function(e){return new Date(t.ORDINAL_BASE.getTime()+e*t.ONE_DAY)},t.getMonthDays=function(e){var r=e.getUTCMonth();return r===1&&t.isLeapYear(e.getUTCFullYear())?29:t.MONTH_DAYS[r]},t.getWeekday=function(e){return t.PY_WEEKDAYS[e.getUTCDay()]},t.monthRange=function(e,r){var n=new Date(Date.UTC(e,r,1));return[t.getWeekday(n),t.getMonthDays(n)]},t.combine=function(e,r){return r=r||e,new Date(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),r.getHours(),r.getMinutes(),r.getSeconds(),r.getMilliseconds()))},t.clone=function(e){var r=new Date(e.getTime());return r},t.cloneDates=function(e){for(var r=[],n=0;n<e.length;n++)r.push(t.clone(e[n]));return r},t.sort=function(e){e.sort(function(r,n){return r.getTime()-n.getTime()})},t.timeToUntilString=function(e,r){r===void 0&&(r=!0);var n=new Date(e);return[fo(n.getUTCFullYear().toString(),4,"0"),fo(n.getUTCMonth()+1,2,"0"),fo(n.getUTCDate(),2,"0"),"T",fo(n.getUTCHours(),2,"0"),fo(n.getUTCMinutes(),2,"0"),fo(n.getUTCSeconds(),2,"0"),r?"Z":""].join("")},t.untilStringToDate=function(e){var r=/^(\d{4})(\d{2})(\d{2})(T(\d{2})(\d{2})(\d{2})Z?)?$/,n=r.exec(e);if(!n)throw new Error("Invalid UNTIL value: "+e);return new Date(Date.UTC(parseInt(n[1],10),parseInt(n[2],10)-1,parseInt(n[3],10),parseInt(n[5],10)||0,parseInt(n[6],10)||0,parseInt(n[7],10)||0))}})(gs||(gs={}));var ze=gs;var fq=function(){function t(e,r){this.minDate=null,this.maxDate=null,this._result=[],this.total=0,this.method=e,this.args=r,e==="between"?(this.maxDate=r.inc?r.before:new Date(r.before.getTime()-1),this.minDate=r.inc?r.after:new Date(r.after.getTime()+1)):e==="before"?this.maxDate=r.inc?r.dt:new Date(r.dt.getTime()-1):e==="after"&&(this.minDate=r.inc?r.dt:new Date(r.dt.getTime()+1))}return t.prototype.accept=function(e){++this.total;var r=this.minDate&&e<this.minDate,n=this.maxDate&&e>this.maxDate;if(this.method==="between"){if(r)return!0;if(n)return!1}else if(this.method==="before"){if(n)return!1}else if(this.method==="after")return r?!0:(this.add(e),!1);return this.add(e)},t.prototype.add=function(e){return this._result.push(e),!0},t.prototype.getValue=function(){var e=this._result;switch(this.method){case"all":case"between":return e;case"before":case"after":default:return e.length?e[e.length-1]:null}},t.prototype.clone=function(){return new t(this.method,this.args)},t}(),La=fq;var xT=_t(bT()),{__extends:Ol,__assign:bn,__rest:cQ,__decorate:fQ,__param:dQ,__metadata:hQ,__awaiter:pQ,__generator:gQ,__exportStar:mQ,__createBinding:yQ,__values:vQ,__read:_Q,__spread:wQ,__spreadArrays:ho,__await:EQ,__asyncGenerator:CQ,__asyncDelegator:bQ,__asyncValues:xQ,__makeTemplateObject:SQ,__importStar:TQ,__importDefault:AQ,__classPrivateFieldGet:kQ,__classPrivateFieldSet:IQ}=xT.default;var dq=function(t){Ol(e,t);function e(r,n,i){var a=t.call(this,r,n)||this;return a.iterator=i,a}return e.prototype.add=function(r){return this.iterator(r,this._result.length)?(this._result.push(r),!0):!1},e}(La),ry=dq;var hq={dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],tokens:{SKIP:/^[ \r\n\t]+|^\.$/,number:/^[1-9][0-9]*/,numberAsText:/^(one|two|three)/i,every:/^every/i,"day(s)":/^days?/i,"weekday(s)":/^weekdays?/i,"week(s)":/^weeks?/i,"hour(s)":/^hours?/i,"minute(s)":/^minutes?/i,"month(s)":/^months?/i,"year(s)":/^years?/i,on:/^(on|in)/i,at:/^(at)/i,the:/^the/i,first:/^first/i,second:/^second/i,third:/^third/i,nth:/^([1-9][0-9]*)(\.|th|nd|rd|st)/i,last:/^last/i,for:/^for/i,"time(s)":/^times?/i,until:/^(un)?til/i,monday:/^mo(n(day)?)?/i,tuesday:/^tu(e(s(day)?)?)?/i,wednesday:/^we(d(n(esday)?)?)?/i,thursday:/^th(u(r(sday)?)?)?/i,friday:/^fr(i(day)?)?/i,saturday:/^sa(t(urday)?)?/i,sunday:/^su(n(day)?)?/i,january:/^jan(uary)?/i,february:/^feb(ruary)?/i,march:/^mar(ch)?/i,april:/^apr(il)?/i,may:/^may/i,june:/^june?/i,july:/^july?/i,august:/^aug(ust)?/i,september:/^sep(t(ember)?)?/i,october:/^oct(ober)?/i,november:/^nov(ember)?/i,december:/^dec(ember)?/i,comma:/^(,\s*|(and|or)\s*)+/i}},po=hq;var ST=function(t,e){return t.indexOf(e)!==-1},pq=function(t){return t.toString()},gq=function(t,e,r){return e+" "+r+", "+t},mq=function(){function t(e,r,n,i){if(r===void 0&&(r=pq),n===void 0&&(n=po),i===void 0&&(i=gq),this.text=[],this.language=n||po,this.gettext=r,this.dateFormatter=i,this.rrule=e,this.options=e.options,this.origOptions=e.origOptions,this.origOptions.bymonthday){var a=[].concat(this.options.bymonthday),s=[].concat(this.options.bynmonthday);a.sort(function(d,h){return d-h}),s.sort(function(d,h){return h-d}),this.bymonthday=a.concat(s),this.bymonthday.length||(this.bymonthday=null)}if(ar(this.origOptions.byweekday)){var l=rn(this.origOptions.byweekday)?this.origOptions.byweekday:[this.origOptions.byweekday],u=String(l);this.byweekday={allWeeks:l.filter(function(d){return!d.n}),someWeeks:l.filter(function(d){return Boolean(d.n)}),isWeekdays:u.indexOf("MO")!==-1&&u.indexOf("TU")!==-1&&u.indexOf("WE")!==-1&&u.indexOf("TH")!==-1&&u.indexOf("FR")!==-1&&u.indexOf("SA")===-1&&u.indexOf("SU")===-1,isEveryDay:u.indexOf("MO")!==-1&&u.indexOf("TU")!==-1&&u.indexOf("WE")!==-1&&u.indexOf("TH")!==-1&&u.indexOf("FR")!==-1&&u.indexOf("SA")!==-1&&u.indexOf("SU")!==-1};var f=function(d,h){return d.weekday-h.weekday};this.byweekday.allWeeks.sort(f),this.byweekday.someWeeks.sort(f),this.byweekday.allWeeks.length||(this.byweekday.allWeeks=null),this.byweekday.someWeeks.length||(this.byweekday.someWeeks=null)}else this.byweekday=null}return t.isFullyConvertible=function(e){var r=!0;if(!(e.options.freq in t.IMPLEMENTED)||e.origOptions.until&&e.origOptions.count)return!1;for(var n in e.origOptions){if(ST(["dtstart","wkst","freq"],n))return!0;if(!ST(t.IMPLEMENTED[e.options.freq],n))return!1}return r},t.prototype.isFullyConvertible=function(){return t.isFullyConvertible(this.rrule)},t.prototype.toString=function(){var e=this.gettext;if(!(this.options.freq in t.IMPLEMENTED))return e("RRule error: Unable to fully convert this rrule to text");if(this.text=[e("every")],this[Me.FREQUENCIES[this.options.freq]](),this.options.until){this.add(e("until"));var r=this.options.until;this.add(this.dateFormatter(r.getUTCFullYear(),this.language.monthNames[r.getUTCMonth()],r.getUTCDate()))}else this.options.count&&this.add(e("for")).add(this.options.count.toString()).add(this.plural(this.options.count)?e("times"):e("time"));return this.isFullyConvertible()||this.add(e("(~ approximate)")),this.text.join("")},t.prototype.HOURLY=function(){var e=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?e("hours"):e("hour"))},t.prototype.MINUTELY=function(){var e=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?e("minutes"):e("minute"))},t.prototype.DAILY=function(){var e=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()),this.byweekday&&this.byweekday.isWeekdays?this.add(this.plural(this.options.interval)?e("weekdays"):e("weekday")):this.add(this.plural(this.options.interval)?e("days"):e("day")),this.origOptions.bymonth&&(this.add(e("in")),this._bymonth()),this.bymonthday?this._bymonthday():this.byweekday?this._byweekday():this.origOptions.byhour&&this._byhour()},t.prototype.WEEKLY=function(){var e=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()).add(this.plural(this.options.interval)?e("weeks"):e("week")),this.byweekday&&this.byweekday.isWeekdays?this.options.interval===1?this.add(this.plural(this.options.interval)?e("weekdays"):e("weekday")):this.add(e("on")).add(e("weekdays")):this.byweekday&&this.byweekday.isEveryDay?this.add(this.plural(this.options.interval)?e("days"):e("day")):(this.options.interval===1&&this.add(e("week")),this.origOptions.bymonth&&(this.add(e("in")),this._bymonth()),this.bymonthday?this._bymonthday():this.byweekday&&this._byweekday())},t.prototype.MONTHLY=function(){var e=this.gettext;this.origOptions.bymonth?(this.options.interval!==1&&(this.add(this.options.interval.toString()).add(e("months")),this.plural(this.options.interval)&&this.add(e("in"))),this._bymonth()):(this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?e("months"):e("month"))),this.bymonthday?this._bymonthday():this.byweekday&&this.byweekday.isWeekdays?this.add(e("on")).add(e("weekdays")):this.byweekday&&this._byweekday()},t.prototype.YEARLY=function(){var e=this.gettext;this.origOptions.bymonth?(this.options.interval!==1&&(this.add(this.options.interval.toString()),this.add(e("years"))),this._bymonth()):(this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?e("years"):e("year"))),this.bymonthday?this._bymonthday():this.byweekday&&this._byweekday(),this.options.byyearday&&this.add(e("on the")).add(this.list(this.options.byyearday,this.nth,e("and"))).add(e("day")),this.options.byweekno&&this.add(e("in")).add(this.plural(this.options.byweekno.length)?e("weeks"):e("week")).add(this.list(this.options.byweekno,void 0,e("and")))},t.prototype._bymonthday=function(){var e=this.gettext;this.byweekday&&this.byweekday.allWeeks?this.add(e("on")).add(this.list(this.byweekday.allWeeks,this.weekdaytext,e("or"))).add(e("the")).add(this.list(this.bymonthday,this.nth,e("or"))):this.add(e("on the")).add(this.list(this.bymonthday,this.nth,e("and")))},t.prototype._byweekday=function(){var e=this.gettext;this.byweekday.allWeeks&&!this.byweekday.isWeekdays&&this.add(e("on")).add(this.list(this.byweekday.allWeeks,this.weekdaytext)),this.byweekday.someWeeks&&(this.byweekday.allWeeks&&this.add(e("and")),this.add(e("on the")).add(this.list(this.byweekday.someWeeks,this.weekdaytext,e("and"))))},t.prototype._byhour=function(){var e=this.gettext;this.add(e("at")).add(this.list(this.origOptions.byhour,void 0,e("and")))},t.prototype._bymonth=function(){this.add(this.list(this.options.bymonth,this.monthtext,this.gettext("and")))},t.prototype.nth=function(e){e=parseInt(e.toString(),10);var r,n,i=this.gettext;if(e===-1)return i("last");switch(n=Math.abs(e),n){case 1:case 21:case 31:r=n+i("st");break;case 2:case 22:r=n+i("nd");break;case 3:case 23:r=n+i("rd");break;default:r=n+i("th")}return e<0?r+" "+i("last"):r},t.prototype.monthtext=function(e){return this.language.monthNames[e-1]},t.prototype.weekdaytext=function(e){var r=Kn(e)?(e+1)%7:e.getJsWeekday();return(e.n?this.nth(e.n)+" ":"")+this.language.dayNames[r]},t.prototype.plural=function(e){return e%100!=1},t.prototype.add=function(e){return this.text.push(" "),this.text.push(e),this},t.prototype.list=function(e,r,n,i){i===void 0&&(i=","),rn(e)||(e=[e]);var a=function(u,f,d){for(var h="",g=0;g<u.length;g++)g!==0&&(g===u.length-1?h+=" "+d+" ":h+=f+" "),h+=u[g];return h};r=r||function(u){return u.toString()};var s=this,l=function(u){return r&&r.call(s,u)};return n?a(e.map(l),i,n):e.map(l).join(i+" ")},t}(),aa=mq;var yq=function(){function t(e){this.done=!0,this.rules=e}return t.prototype.start=function(e){return this.text=e,this.done=!1,this.nextSymbol()},t.prototype.isDone=function(){return this.done&&this.symbol===null},t.prototype.nextSymbol=function(){var e,r,n=this;this.symbol=null,this.value=null;do{if(this.done)return!1;var i=void 0;e=null;for(var a in this.rules){i=this.rules[a];var s=i.exec(n.text);s&&(e===null||s[0].length>e[0].length)&&(e=s,r=a)}if(e!=null&&(this.text=this.text.substr(e[0].length),this.text===""&&(this.done=!0)),e==null){this.done=!0,this.symbol=null,this.value=null;return}}while(r==="SKIP");return this.symbol=r,this.value=e,!0},t.prototype.accept=function(e){if(this.symbol===e){if(this.value){var r=this.value;return this.nextSymbol(),r}return this.nextSymbol(),!0}return!1},t.prototype.acceptNumber=function(){return this.accept("number")},t.prototype.expect=function(e){if(this.accept(e))return!0;throw new Error("expected "+e+" but found "+this.symbol)},t}();function oc(t,e){e===void 0&&(e=po);var r={},n=new yq(e.tokens);if(!n.start(t))return null;return i(),r;function i(){n.expect("every");var g=n.acceptNumber();if(g&&(r.interval=parseInt(g[0],10)),n.isDone())throw new Error("Unexpected end");switch(n.symbol){case"day(s)":r.freq=Me.DAILY,n.nextSymbol()&&(s(),h());break;case"weekday(s)":r.freq=Me.WEEKLY,r.byweekday=[Me.MO,Me.TU,Me.WE,Me.TH,Me.FR],n.nextSymbol(),h();break;case"week(s)":r.freq=Me.WEEKLY,n.nextSymbol()&&(a(),h());break;case"hour(s)":r.freq=Me.HOURLY,n.nextSymbol()&&(a(),h());break;case"minute(s)":r.freq=Me.MINUTELY,n.nextSymbol()&&(a(),h());break;case"month(s)":r.freq=Me.MONTHLY,n.nextSymbol()&&(a(),h());break;case"year(s)":r.freq=Me.YEARLY,n.nextSymbol()&&(a(),h());break;case"monday":case"tuesday":case"wednesday":case"thursday":case"friday":case"saturday":case"sunday":r.freq=Me.WEEKLY;var y=n.symbol.substr(0,2).toUpperCase();if(r.byweekday=[Me[y]],!n.nextSymbol())return;for(;n.accept("comma");){if(n.isDone())throw new Error("Unexpected end");var m=u();if(!m)throw new Error("Unexpected symbol "+n.symbol+", expected weekday");r.byweekday.push(Me[m]),n.nextSymbol()}d(),h();break;case"january":case"february":case"march":case"april":case"may":case"june":case"july":case"august":case"september":case"october":case"november":case"december":if(r.freq=Me.YEARLY,r.bymonth=[l()],!n.nextSymbol())return;for(;n.accept("comma");){if(n.isDone())throw new Error("Unexpected end");var _=l();if(!_)throw new Error("Unexpected symbol "+n.symbol+", expected month");r.bymonth.push(_),n.nextSymbol()}a(),h();break;default:throw new Error("Unknown symbol")}}function a(){var g=n.accept("on"),y=n.accept("the");if(!!(g||y))do{var m=f(),_=u(),E=l();if(m)_?(n.nextSymbol(),r.byweekday||(r.byweekday=[]),r.byweekday.push(Me[_].nth(m))):(r.bymonthday||(r.bymonthday=[]),r.bymonthday.push(m),n.accept("day(s)"));else if(_)n.nextSymbol(),r.byweekday||(r.byweekday=[]),r.byweekday.push(Me[_]);else if(n.symbol==="weekday(s)")n.nextSymbol(),r.byweekday||(r.byweekday=[Me.MO,Me.TU,Me.WE,Me.TH,Me.FR]);else if(n.symbol==="week(s)"){n.nextSymbol();var w=n.acceptNumber();if(!w)throw new Error("Unexpected symbol "+n.symbol+", expected week number");for(r.byweekno=[parseInt(w[0],10)];n.accept("comma");){if(w=n.acceptNumber(),!w)throw new Error("Unexpected symbol "+n.symbol+"; expected monthday");r.byweekno.push(parseInt(w[0],10))}}else if(E)n.nextSymbol(),r.bymonth||(r.bymonth=[]),r.bymonth.push(E);else return}while(n.accept("comma")||n.accept("the")||n.accept("on"))}function s(){var g=n.accept("at");if(!!g)do{var y=n.acceptNumber();if(!y)throw new Error("Unexpected symbol "+n.symbol+", expected hour");for(r.byhour=[parseInt(y[0],10)];n.accept("comma");){if(y=n.acceptNumber(),!y)throw new Error("Unexpected symbol "+n.symbol+"; expected hour");r.byhour.push(parseInt(y[0],10))}}while(n.accept("comma")||n.accept("at"))}function l(){switch(n.symbol){case"january":return 1;case"february":return 2;case"march":return 3;case"april":return 4;case"may":return 5;case"june":return 6;case"july":return 7;case"august":return 8;case"september":return 9;case"october":return 10;case"november":return 11;case"december":return 12;default:return!1}}function u(){switch(n.symbol){case"monday":case"tuesday":case"wednesday":case"thursday":case"friday":case"saturday":case"sunday":return n.symbol.substr(0,2).toUpperCase();default:return!1}}function f(){switch(n.symbol){case"last":return n.nextSymbol(),-1;case"first":return n.nextSymbol(),1;case"second":return n.nextSymbol(),n.accept("last")?-2:2;case"third":return n.nextSymbol(),n.accept("last")?-3:3;case"nth":var g=parseInt(n.value[1],10);if(g<-366||g>366)throw new Error("Nth out of range: "+g);return n.nextSymbol(),n.accept("last")?-g:g;default:return!1}}function d(){n.accept("on"),n.accept("the");var g=f();if(!!g)for(r.bymonthday=[g],n.nextSymbol();n.accept("comma");){if(g=f(),!g)throw new Error("Unexpected symbol "+n.symbol+"; expected monthday");r.bymonthday.push(g),n.nextSymbol()}}function h(){if(n.symbol==="until"){var g=Date.parse(n.text);if(!g)throw new Error("Cannot parse until date:"+n.text);r.until=new Date(g)}else n.accept("for")&&(r.count=parseInt(n.value[0],10),n.expect("number"))}}var Et;(function(t){t[t.YEARLY=0]="YEARLY",t[t.MONTHLY=1]="MONTHLY",t[t.WEEKLY=2]="WEEKLY",t[t.DAILY=3]="DAILY",t[t.HOURLY=4]="HOURLY",t[t.MINUTELY=5]="MINUTELY",t[t.SECONDLY=6]="SECONDLY"})(Et||(Et={}));function lc(t){return t<Et.HOURLY}var TT=function(t,e){return e===void 0&&(e=po),new Me(oc(t,e)||void 0)},Ll=["count","until","interval","byweekday","bymonthday","bymonth"];aa.IMPLEMENTED=[];aa.IMPLEMENTED[Et.HOURLY]=Ll;aa.IMPLEMENTED[Et.MINUTELY]=Ll;aa.IMPLEMENTED[Et.DAILY]=["byhour"].concat(Ll);aa.IMPLEMENTED[Et.WEEKLY]=Ll;aa.IMPLEMENTED[Et.MONTHLY]=Ll;aa.IMPLEMENTED[Et.YEARLY]=["byweekno","byyearday"].concat(Ll);var AT=function(t,e,r,n){return new aa(t,e,r,n).toString()},kT=aa.isFullyConvertible;var Pl=function(){function t(e,r,n,i){this.hour=e,this.minute=r,this.second=n,this.millisecond=i||0}return t.prototype.getHours=function(){return this.hour},t.prototype.getMinutes=function(){return this.minute},t.prototype.getSeconds=function(){return this.second},t.prototype.getMilliseconds=function(){return this.millisecond},t.prototype.getTime=function(){return(this.hour*60*60+this.minute*60+this.second)*1e3+this.millisecond},t}();var IT=function(t){Ol(e,t);function e(r,n,i,a,s,l,u){var f=t.call(this,a,s,l,u)||this;return f.year=r,f.month=n,f.day=i,f}return e.fromDate=function(r){return new this(r.getUTCFullYear(),r.getUTCMonth()+1,r.getUTCDate(),r.getUTCHours(),r.getUTCMinutes(),r.getUTCSeconds(),r.valueOf()%1e3)},e.prototype.getWeekday=function(){return gs.getWeekday(new Date(this.getTime()))},e.prototype.getTime=function(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second,this.millisecond)).getTime()},e.prototype.getDay=function(){return this.day},e.prototype.getMonth=function(){return this.month},e.prototype.getYear=function(){return this.year},e.prototype.addYears=function(r){this.year+=r},e.prototype.addMonths=function(r){if(this.month+=r,this.month>12){var n=Math.floor(this.month/12),i=un(this.month,12);this.month=i,this.year+=n,this.month===0&&(this.month=12,--this.year)}},e.prototype.addWeekly=function(r,n){n>this.getWeekday()?this.day+=-(this.getWeekday()+1+(6-n))+r*7:this.day+=-(this.getWeekday()-n)+r*7,this.fixDay()},e.prototype.addDaily=function(r){this.day+=r,this.fixDay()},e.prototype.addHours=function(r,n,i){for(n&&(this.hour+=Math.floor((23-this.hour)/r)*r);;){this.hour+=r;var a=Sh(this.hour,24),s=a.div,l=a.mod;if(s&&(this.hour=l,this.addDaily(s)),Hn(i)||Lt(i,this.hour))break}},e.prototype.addMinutes=function(r,n,i,a){for(n&&(this.minute+=Math.floor((1439-(this.hour*60+this.minute))/r)*r);;){this.minute+=r;var s=Sh(this.minute,60),l=s.div,u=s.mod;if(l&&(this.minute=u,this.addHours(l,!1,i)),(Hn(i)||Lt(i,this.hour))&&(Hn(a)||Lt(a,this.minute)))break}},e.prototype.addSeconds=function(r,n,i,a,s){for(n&&(this.second+=Math.floor((86399-(this.hour*3600+this.minute*60+this.second))/r)*r);;){this.second+=r;var l=Sh(this.second,60),u=l.div,f=l.mod;if(u&&(this.second=f,this.addMinutes(u,!1,i,a)),(Hn(i)||Lt(i,this.hour))&&(Hn(a)||Lt(a,this.minute))&&(Hn(s)||Lt(s,this.second)))break}},e.prototype.fixDay=function(){if(!(this.day<=28)){var r=gs.monthRange(this.year,this.month-1)[1];if(!(this.day<=r))for(;this.day>r;){if(this.day-=r,++this.month,this.month===13&&(this.month=1,++this.year,this.year>gs.MAXYEAR))return;r=gs.monthRange(this.year,this.month-1)[1]}}},e.prototype.add=function(r,n){var i=r.freq,a=r.interval,s=r.wkst,l=r.byhour,u=r.byminute,f=r.bysecond;switch(i){case Et.YEARLY:return this.addYears(a);case Et.MONTHLY:return this.addMonths(a);case Et.WEEKLY:return this.addWeekly(a,s);case Et.DAILY:return this.addDaily(a);case Et.HOURLY:return this.addHours(a,n,l);case Et.MINUTELY:return this.addMinutes(a,n,l,u);case Et.SECONDLY:return this.addSeconds(a,n,l,u,f)}},e}(Pl);function ny(t){for(var e=[],r=Object.keys(t),n=0,i=r;n<i.length;n++){var a=i[n];Lt(BT,a)||e.push(a),ze.isDate(t[a])&&!ze.isValidDate(t[a])&&e.push(a)}if(e.length)throw new Error("Invalid options: "+e.join(", "));return bn({},t)}function RT(t){var e=bn(bn({},uc),ny(t));if(ar(e.byeaster)&&(e.freq=Me.YEARLY),!(ar(e.freq)&&Me.FREQUENCIES[e.freq]))throw new Error("Invalid frequency: "+e.freq+" "+t.freq);if(e.dtstart||(e.dtstart=new Date(new Date().setMilliseconds(0))),ar(e.wkst)?Kn(e.wkst)||(e.wkst=e.wkst.weekday):e.wkst=Me.MO.weekday,ar(e.bysetpos)){Kn(e.bysetpos)&&(e.bysetpos=[e.bysetpos]);for(var r=0;r<e.bysetpos.length;r++){var n=e.bysetpos[r];if(n===0||!(n>=-366&&n<=366))throw new Error("bysetpos must be between 1 and 366, or between -366 and -1")}}if(!(Boolean(e.byweekno)||Tr(e.byweekno)||Tr(e.byyearday)||Boolean(e.bymonthday)||Tr(e.bymonthday)||ar(e.byweekday)||ar(e.byeaster)))switch(e.freq){case Me.YEARLY:e.bymonth||(e.bymonth=e.dtstart.getUTCMonth()+1),e.bymonthday=e.dtstart.getUTCDate();break;case Me.MONTHLY:e.bymonthday=e.dtstart.getUTCDate();break;case Me.WEEKLY:e.byweekday=[ze.getWeekday(e.dtstart)];break}if(ar(e.bymonth)&&!rn(e.bymonth)&&(e.bymonth=[e.bymonth]),ar(e.byyearday)&&!rn(e.byyearday)&&Kn(e.byyearday)&&(e.byyearday=[e.byyearday]),!ar(e.bymonthday))e.bymonthday=[],e.bynmonthday=[];else if(rn(e.bymonthday)){for(var i=[],a=[],r=0;r<e.bymonthday.length;r++){var n=e.bymonthday[r];n>0?i.push(n):n<0&&a.push(n)}e.bymonthday=i,e.bynmonthday=a}else e.bymonthday<0?(e.bynmonthday=[e.bymonthday],e.bymonthday=[]):(e.bynmonthday=[],e.bymonthday=[e.bymonthday]);if(ar(e.byweekno)&&!rn(e.byweekno)&&(e.byweekno=[e.byweekno]),!ar(e.byweekday))e.bynweekday=null;else if(Kn(e.byweekday))e.byweekday=[e.byweekday],e.bynweekday=null;else if(ey(e.byweekday))e.byweekday=[Rr.fromStr(e.byweekday).weekday],e.bynweekday=null;else if(e.byweekday instanceof Rr)!e.byweekday.n||e.freq>Me.MONTHLY?(e.byweekday=[e.byweekday.weekday],e.bynweekday=null):(e.bynweekday=[[e.byweekday.weekday,e.byweekday.n]],e.byweekday=null);else{for(var s=[],l=[],r=0;r<e.byweekday.length;r++){var u=e.byweekday[r];if(Kn(u)){s.push(u);continue}else if(ey(u)){s.push(Rr.fromStr(u).weekday);continue}!u.n||e.freq>Me.MONTHLY?s.push(u.weekday):l.push([u.weekday,u.n])}e.byweekday=Tr(s)?s:null,e.bynweekday=Tr(l)?l:null}return ar(e.byhour)?Kn(e.byhour)&&(e.byhour=[e.byhour]):e.byhour=e.freq<Me.HOURLY?[e.dtstart.getUTCHours()]:null,ar(e.byminute)?Kn(e.byminute)&&(e.byminute=[e.byminute]):e.byminute=e.freq<Me.MINUTELY?[e.dtstart.getUTCMinutes()]:null,ar(e.bysecond)?Kn(e.bysecond)&&(e.bysecond=[e.bysecond]):e.bysecond=e.freq<Me.SECONDLY?[e.dtstart.getUTCSeconds()]:null,{parsedOptions:e}}function NT(t){var e=t.dtstart.getTime()%1e3;if(!lc(t.freq))return[];var r=[];return t.byhour.forEach(function(n){t.byminute.forEach(function(i){t.bysecond.forEach(function(a){r.push(new Pl(n,i,a,e))})})}),r}function cc(t){var e=t.split(`
`).map(vq).filter(function(r){return r!==null});return bn(bn({},e[0]),e[1])}function fc(t){var e={},r=/DTSTART(?:;TZID=([^:=]+?))?(?::|=)([^;\s]+)/i.exec(t);if(!r)return e;var n=r[0],i=r[1],a=r[2];return i&&(e.tzid=i),e.dtstart=ze.untilStringToDate(a),e}function vq(t){if(t=t.replace(/^\s+|\s+$/,""),!t.length)return null;var e=/^([A-Z]+?)[:;]/.exec(t.toUpperCase());if(!e)return DT(t);var r=e[0],n=e[1];switch(n.toUpperCase()){case"RRULE":case"EXRULE":return DT(t);case"DTSTART":return fc(t);default:throw new Error("Unsupported RFC prop "+n+" in "+t)}}function DT(t){var e=t.replace(/^RRULE:/i,""),r=fc(e),n=t.replace(/^(?:RRULE|EXRULE):/i,"").split(";");return n.forEach(function(i){var a=i.split("="),s=a[0],l=a[1];switch(s.toUpperCase()){case"FREQ":r.freq=Et[l.toUpperCase()];break;case"WKST":r.wkst=gi[l.toUpperCase()];break;case"COUNT":case"INTERVAL":case"BYSETPOS":case"BYMONTH":case"BYMONTHDAY":case"BYYEARDAY":case"BYWEEKNO":case"BYHOUR":case"BYMINUTE":case"BYSECOND":var u=_q(l),f=s.toLowerCase();r[f]=u;break;case"BYWEEKDAY":case"BYDAY":r.byweekday=wq(l);break;case"DTSTART":case"TZID":var d=fc(t);r.tzid=d.tzid,r.dtstart=d.dtstart;break;case"UNTIL":r.until=ze.untilStringToDate(l);break;case"BYEASTER":r.byeaster=Number(l);break;default:throw new Error("Unknown RRULE property '"+s+"'")}}),r}function _q(t){if(t.indexOf(",")!==-1){var e=t.split(",");return e.map(OT)}return OT(t)}function OT(t){return/^[+-]?\d+$/.test(t)?Number(t):t}function wq(t){var e=t.split(",");return e.map(function(r){if(r.length===2)return gi[r];var n=r.match(/^([+-]?\d{1,2})([A-Z]{2})$/),i=Number(n[1]),a=n[2],s=gi[a].weekday;return new Rr(s,i)})}var go=function(){function t(e,r){this.date=e,this.tzid=r}return Object.defineProperty(t.prototype,"isUTC",{get:function(){return!this.tzid||this.tzid.toUpperCase()==="UTC"},enumerable:!0,configurable:!0}),t.prototype.toString=function(){var e=ze.timeToUntilString(this.date.getTime(),this.isUTC);return this.isUTC?":"+e:";TZID="+this.tzid+":"+e},t.prototype.getTime=function(){return this.date.getTime()},t.prototype.rezonedDate=function(){var e;if(this.isUTC)return this.date;var r=Intl.DateTimeFormat().resolvedOptions().timeZone,n=new Date(this.date.toLocaleString(void 0,{timeZone:r})),i=new Date(this.date.toLocaleString(void 0,{timeZone:(e=this.tzid,e!=null?e:"UTC")})),a=i.getTime()-n.getTime();return new Date(this.date.getTime()-a)},t}();function dc(t){for(var e=[],r="",n=Object.keys(t),i=Object.keys(uc),a=0;a<n.length;a++)if(n[a]!=="tzid"&&!!Lt(i,n[a])){var s=n[a].toUpperCase(),l=t[n[a]],u="";if(!(!ar(l)||rn(l)&&!l.length)){switch(s){case"FREQ":u=Me.FREQUENCIES[t.freq];break;case"WKST":Kn(l)?u=new Rr(l).toString():u=l.toString();break;case"BYWEEKDAY":s="BYDAY",u=tT(l).map(function(y){return y instanceof Rr?y:rn(y)?new Rr(y[0],y[1]):new Rr(y)}).toString();break;case"DTSTART":r=Eq(l,t.tzid);break;case"UNTIL":u=ze.timeToUntilString(l,!t.tzid);break;default:if(rn(l)){for(var f=[],d=0;d<l.length;d++)f[d]=String(l[d]);u=f.toString()}else u=String(l)}u&&e.push([s,u])}}var h=e.map(function(y){var m=y[0],_=y[1];return m+"="+_.toString()}).join(";"),g="";return h!==""&&(g="RRULE:"+h),[r,g].filter(function(y){return!!y}).join(`
`)}function Eq(t,e){return t?"DTSTART"+new go(new Date(t),e).toString():""}function Cq(t,e){return Array.isArray(t)?!Array.isArray(e)||t.length!==e.length?!1:t.every(function(r,n){return r.getTime()===e[n].getTime()}):t instanceof Date?e instanceof Date&&t.getTime()===e.getTime():t===e}var LT=function(){function t(){this.all=!1,this.before=[],this.after=[],this.between=[]}return t.prototype._cacheAdd=function(e,r,n){r&&(r=r instanceof Date?ze.clone(r):ze.cloneDates(r)),e==="all"?this.all=r:(n._value=r,this[e].push(n))},t.prototype._cacheGet=function(e,r){var n=!1,i=r?Object.keys(r):[],a=function(d){for(var h=0;h<i.length;h++){var g=i[h];if(!Cq(r[g],d[g]))return!0}return!1},s=this[e];if(e==="all")n=this.all;else if(rn(s))for(var l=0;l<s.length;l++){var u=s[l];if(!(i.length&&a(u))){n=u._value;break}}if(!n&&this.all){for(var f=new La(e,r),l=0;l<this.all.length&&f.accept(this.all[l]);l++);n=f.getValue(),this._cacheAdd(e,n,r)}return rn(n)?ze.cloneDates(n):n instanceof Date?ze.clone(n):n},t}();var PT=ho(Rt(1,31),Rt(2,28),Rt(3,31),Rt(4,30),Rt(5,31),Rt(6,30),Rt(7,31),Rt(8,31),Rt(9,30),Rt(10,31),Rt(11,30),Rt(12,31),Rt(1,7)),MT=ho(Rt(1,31),Rt(2,29),Rt(3,31),Rt(4,30),Rt(5,31),Rt(6,30),Rt(7,31),Rt(8,31),Rt(9,30),Rt(10,31),Rt(11,30),Rt(12,31),Rt(1,7)),bq=pi(1,29),xq=pi(1,30),ms=pi(1,31),cn=pi(1,32),UT=ho(cn,xq,cn,ms,cn,ms,cn,cn,ms,cn,ms,cn,cn.slice(0,7)),FT=ho(cn,bq,cn,ms,cn,ms,cn,cn,ms,cn,ms,cn,cn.slice(0,7)),Sq=pi(-28,0),Tq=pi(-29,0),ys=pi(-30,0),fn=pi(-31,0),qT=ho(fn,Tq,fn,ys,fn,ys,fn,fn,ys,fn,ys,fn,fn.slice(0,7)),GT=ho(fn,Sq,fn,ys,fn,ys,fn,fn,ys,fn,ys,fn,fn.slice(0,7)),VT=[0,31,60,91,121,152,182,213,244,274,305,335,366],jT=[0,31,59,90,120,151,181,212,243,273,304,334,365],iy=function(){for(var t=[],e=0;e<55;e++)t=t.concat(pi(7));return t}();function KT(t,e){var r=new Date(Date.UTC(t,0,1)),n=ze.isLeapYear(t)?366:365,i=ze.isLeapYear(t+1)?366:365,a=ze.toOrdinal(r),s=ze.getWeekday(r),l=bn(bn({yearlen:n,nextyearlen:i,yearordinal:a,yearweekday:s},Aq(t)),{wnomask:null});if(Hn(e.byweekno))return l;l.wnomask=Rt(0,n+7);var u,f,d=u=un(7-s+e.wkst,7);d>=4?(d=0,f=l.yearlen+un(s-e.wkst,7)):f=n-d;for(var h=Math.floor(f/7),g=un(f,7),y=Math.floor(h+g/4),m=0;m<e.byweekno.length;m++){var _=e.byweekno[m];if(_<0&&(_+=y+1),_>0&&_<=y){var E=void 0;_>1?(E=d+(_-1)*7,d!==u&&(E-=7-u)):E=d;for(var w=0;w<7&&(l.wnomask[E]=1,E++,l.wdaymask[E]!==e.wkst);w++);}}if(Lt(e.byweekno,1)){var E=d+y*7;if(d!==u&&(E-=7-u),E<n)for(var m=0;m<7&&(l.wnomask[E]=1,E+=1,l.wdaymask[E]!==e.wkst);m++);}if(d){var b=void 0;if(Lt(e.byweekno,-1))b=-1;else{var k=ze.getWeekday(new Date(Date.UTC(t-1,0,1))),N=un(7-k.valueOf()+e.wkst,7),D=ze.isLeapYear(t-1)?366:365,B=void 0;N>=4?(N=0,B=D+un(k-e.wkst,7)):B=n-d,b=Math.floor(52+un(B,7)/4)}if(Lt(e.byweekno,b))for(var E=0;E<d;E++)l.wnomask[E]=1}return l}function Aq(t){var e=ze.isLeapYear(t)?366:365,r=new Date(Date.UTC(t,0,1)),n=ze.getWeekday(r);return e===365?{mmask:PT,mdaymask:FT,nmdaymask:GT,wdaymask:iy.slice(n),mrange:jT}:{mmask:MT,mdaymask:UT,nmdaymask:qT,wdaymask:iy.slice(n),mrange:VT}}function HT(t,e,r,n,i,a){var s={lastyear:t,lastmonth:e,nwdaymask:[]},l=[];if(a.freq===Me.YEARLY)if(Hn(a.bymonth))l=[[0,r]];else for(var u=0;u<a.bymonth.length;u++)e=a.bymonth[u],l.push(n.slice(e-1,e+1));else a.freq===Me.MONTHLY&&(l=[n.slice(e-1,e+1)]);if(Hn(l))return s;s.nwdaymask=Rt(0,r);for(var u=0;u<l.length;u++)for(var f=l[u],d=f[0],h=f[1]-1,g=0;g<a.bynweekday.length;g++){var y=void 0,m=a.bynweekday[g],_=m[0],E=m[1];E<0?(y=h+(E+1)*7,y-=un(i[y]-_,7)):(y=d+(E-1)*7,y+=un(7-i[y]+_,7)),d<=y&&y<=h&&(s.nwdaymask[y]=1)}return s}function YT(t,e){e===void 0&&(e=0);var r=t%19,n=Math.floor(t/100),i=t%100,a=Math.floor(n/4),s=n%4,l=Math.floor((n+8)/25),u=Math.floor((n-l+1)/3),f=Math.floor(19*r+n-a-u+15)%30,d=Math.floor(i/4),h=i%4,g=Math.floor(32+2*s+2*d-f-h)%7,y=Math.floor((r+11*f+22*g)/451),m=Math.floor((f+g-7*y+114)/31),_=(f+g-7*y+114)%31+1,E=Date.UTC(t,m-1,_+e),w=Date.UTC(t,0,1);return[Math.ceil((E-w)/(1e3*60*60*24))]}var kq=function(){function t(e){this.options=e}return t.prototype.rebuild=function(e,r){var n=this.options;if(e!==this.lastyear&&(this.yearinfo=KT(e,n)),Tr(n.bynweekday)&&(r!==this.lastmonth||e!==this.lastyear)){var i=this.yearinfo,a=i.yearlen,s=i.mrange,l=i.wdaymask;this.monthinfo=HT(e,r,a,s,l,n)}ar(n.byeaster)&&(this.eastermask=YT(e,n.byeaster))},Object.defineProperty(t.prototype,"lastyear",{get:function(){return this.monthinfo?this.monthinfo.lastyear:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lastmonth",{get:function(){return this.monthinfo?this.monthinfo.lastmonth:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"yearlen",{get:function(){return this.yearinfo.yearlen},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"yearordinal",{get:function(){return this.yearinfo.yearordinal},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"mrange",{get:function(){return this.yearinfo.mrange},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"wdaymask",{get:function(){return this.yearinfo.wdaymask},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"mmask",{get:function(){return this.yearinfo.mmask},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"wnomask",{get:function(){return this.yearinfo.wnomask},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nwdaymask",{get:function(){return this.monthinfo?this.monthinfo.nwdaymask:[]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nextyearlen",{get:function(){return this.yearinfo.nextyearlen},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"mdaymask",{get:function(){return this.yearinfo.mdaymask},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nmdaymask",{get:function(){return this.yearinfo.nmdaymask},enumerable:!0,configurable:!0}),t.prototype.ydayset=function(){return[pi(this.yearlen),0,this.yearlen]},t.prototype.mdayset=function(e,r,n){for(var i=this.mrange[r-1],a=this.mrange[r],s=Rt(null,this.yearlen),l=i;l<a;l++)s[l]=l;return[s,i,a]},t.prototype.wdayset=function(e,r,n){for(var i=Rt(null,this.yearlen+7),a=ze.toOrdinal(new Date(Date.UTC(e,r-1,n)))-this.yearordinal,s=a,l=0;l<7&&(i[a]=a,++a,this.wdaymask[a]!==this.options.wkst);l++);return[i,s,a]},t.prototype.ddayset=function(e,r,n){var i=Rt(null,this.yearlen),a=ze.toOrdinal(new Date(Date.UTC(e,r-1,n)))-this.yearordinal;return i[a]=a,[i,a,a+1]},t.prototype.htimeset=function(e,r,n,i){var a=this,s=[];return this.options.byminute.forEach(function(l){s=s.concat(a.mtimeset(e,l,n,i))}),ze.sort(s),s},t.prototype.mtimeset=function(e,r,n,i){var a=this.options.bysecond.map(function(s){return new Pl(e,r,s,i)});return ze.sort(a),a},t.prototype.stimeset=function(e,r,n,i){return[new Pl(e,r,n,i)]},t.prototype.getdayset=function(e){switch(e){case Et.YEARLY:return this.ydayset.bind(this);case Et.MONTHLY:return this.mdayset.bind(this);case Et.WEEKLY:return this.wdayset.bind(this);case Et.DAILY:return this.ddayset.bind(this);default:return this.ddayset.bind(this)}},t.prototype.gettimeset=function(e){switch(e){case Et.HOURLY:return this.htimeset.bind(this);case Et.MINUTELY:return this.mtimeset.bind(this);case Et.SECONDLY:return this.stimeset.bind(this)}},t}(),WT=kq;function zT(t,e,r,n,i,a){for(var s=[],l=0;l<t.length;l++){var u=void 0,f=void 0,d=t[l];d<0?(u=Math.floor(d/e.length),f=un(d,e.length)):(u=Math.floor((d-1)/e.length),f=un(d-1,e.length));for(var h=[],g=r;g<n;g++){var y=a[g];!ar(y)||h.push(y)}var m=void 0;u<0?m=h.slice(u)[0]:m=h[u];var _=e[f],E=ze.fromOrdinal(i.yearordinal+m),w=ze.combine(E,_);Lt(s,w)||s.push(w)}return ze.sort(s),s}function kh(t,e){var r=e.dtstart,n=e.freq,i=e.interval,a=e.until,s=e.bysetpos,l=e.count;if(l===0||i===0)return Pa(t);var u=IT.fromDate(r),f=new WT(e);f.rebuild(u.year,u.month);for(var d=Nq(f,u,e);;){var h=f.getdayset(n)(u.year,u.month,u.day),g=h[0],y=h[1],m=h[2],_=Rq(g,y,m,f,e);if(Tr(s))for(var E=zT(s,d,y,m,f,g),w=0;w<E.length;w++){var b=E[w];if(a&&b>a)return Pa(t);if(b>=r){var k=QT(b,e);if(!t.accept(k)||l&&(--l,!l))return Pa(t)}}else for(var w=y;w<m;w++){var N=g[w];if(!!ar(N))for(var D=ze.fromOrdinal(f.yearordinal+N),B=0;B<d.length;B++){var ee=d[B],b=ze.combine(D,ee);if(a&&b>a)return Pa(t);if(b>=r){var k=QT(b,e);if(!t.accept(k)||l&&(--l,!l))return Pa(t)}}}if(e.interval===0||(u.add(e,_),u.year>ze.MAXYEAR))return Pa(t);lc(n)||(d=f.gettimeset(n)(u.hour,u.minute,u.second,0)),f.rebuild(u.year,u.month)}}function Iq(t,e,r){var n=r.bymonth,i=r.byweekno,a=r.byweekday,s=r.byeaster,l=r.bymonthday,u=r.bynmonthday,f=r.byyearday;return Tr(n)&&!Lt(n,t.mmask[e])||Tr(i)&&!t.wnomask[e]||Tr(a)&&!Lt(a,t.wdaymask[e])||Tr(t.nwdaymask)&&!t.nwdaymask[e]||s!==null&&!Lt(t.eastermask,e)||(Tr(l)||Tr(u))&&!Lt(l,t.mdaymask[e])&&!Lt(u,t.nmdaymask[e])||Tr(f)&&(e<t.yearlen&&!Lt(f,e+1)&&!Lt(f,-t.yearlen+e)||e>=t.yearlen&&!Lt(f,e+1-t.yearlen)&&!Lt(f,-t.nextyearlen+e-t.yearlen))}function QT(t,e){return new go(t,e.tzid).rezonedDate()}function Pa(t){return t.getValue()}function Rq(t,e,r,n,i){for(var a=!1,s=e;s<r;s++){var l=t[s];a=Iq(n,l,i),a&&(t[l]=null)}return a}function Nq(t,e,r){var n=r.freq,i=r.byhour,a=r.byminute,s=r.bysecond;return lc(n)?NT(r):n>=Me.HOURLY&&Tr(i)&&!Lt(i,e.hour)||n>=Me.MINUTELY&&Tr(a)&&!Lt(a,e.minute)||n>=Me.SECONDLY&&Tr(s)&&!Lt(s,e.second)?[]:t.gettimeset(n)(e.hour,e.minute,e.second,e.millisecond)}var gi={MO:new Rr(0),TU:new Rr(1),WE:new Rr(2),TH:new Rr(3),FR:new Rr(4),SA:new Rr(5),SU:new Rr(6)},uc={freq:Et.YEARLY,dtstart:null,interval:1,wkst:gi.MO,count:null,until:null,tzid:null,bysetpos:null,bymonth:null,bymonthday:null,bynmonthday:null,byyearday:null,byweekno:null,byweekday:null,bynweekday:null,byhour:null,byminute:null,bysecond:null,byeaster:null},BT=Object.keys(uc),Me=function(){function t(e,r){e===void 0&&(e={}),r===void 0&&(r=!1),this._cache=r?null:new LT,this.origOptions=ny(e);var n=RT(e).parsedOptions;this.options=n}return t.parseText=function(e,r){return oc(e,r)},t.fromText=function(e,r){return TT(e,r)},t.fromString=function(e){return new t(t.parseString(e)||void 0)},t.prototype._iter=function(e){return kh(e,this.options)},t.prototype._cacheGet=function(e,r){return this._cache?this._cache._cacheGet(e,r):!1},t.prototype._cacheAdd=function(e,r,n){if(!!this._cache)return this._cache._cacheAdd(e,r,n)},t.prototype.all=function(e){if(e)return this._iter(new ry("all",{},e));var r=this._cacheGet("all");return r===!1&&(r=this._iter(new La("all",{})),this._cacheAdd("all",r)),r},t.prototype.between=function(e,r,n,i){if(n===void 0&&(n=!1),!ze.isValidDate(e)||!ze.isValidDate(r))throw new Error("Invalid date passed in to RRule.between");var a={before:r,after:e,inc:n};if(i)return this._iter(new ry("between",a,i));var s=this._cacheGet("between",a);return s===!1&&(s=this._iter(new La("between",a)),this._cacheAdd("between",s,a)),s},t.prototype.before=function(e,r){if(r===void 0&&(r=!1),!ze.isValidDate(e))throw new Error("Invalid date passed in to RRule.before");var n={dt:e,inc:r},i=this._cacheGet("before",n);return i===!1&&(i=this._iter(new La("before",n)),this._cacheAdd("before",i,n)),i},t.prototype.after=function(e,r){if(r===void 0&&(r=!1),!ze.isValidDate(e))throw new Error("Invalid date passed in to RRule.after");var n={dt:e,inc:r},i=this._cacheGet("after",n);return i===!1&&(i=this._iter(new La("after",n)),this._cacheAdd("after",i,n)),i},t.prototype.count=function(){return this.all().length},t.prototype.toString=function(){return dc(this.origOptions)},t.prototype.toText=function(e,r,n){return AT(this,e,r,n)},t.prototype.isFullyConvertibleToText=function(){return kT(this)},t.prototype.clone=function(){return new t(this.origOptions)},t.FREQUENCIES=["YEARLY","MONTHLY","WEEKLY","DAILY","HOURLY","MINUTELY","SECONDLY"],t.YEARLY=Et.YEARLY,t.MONTHLY=Et.MONTHLY,t.WEEKLY=Et.WEEKLY,t.DAILY=Et.DAILY,t.HOURLY=Et.HOURLY,t.MINUTELY=Et.MINUTELY,t.SECONDLY=Et.SECONDLY,t.MO=gi.MO,t.TU=gi.TU,t.WE=gi.WE,t.TH=gi.TH,t.FR=gi.FR,t.SA=gi.SA,t.SU=gi.SU,t.parseString=cc,t.optionsToString=dc,t}();function XT(t,e,r,n,i,a){var s={},l=t.accept;function u(g,y){r.forEach(function(m){m.between(g,y,!0).forEach(function(_){s[Number(_)]=!0})})}i.forEach(function(g){var y=new go(g,a).rezonedDate();s[Number(y)]=!0}),t.accept=function(g){var y=Number(g);return isNaN(y)?l.call(this,g):!s[y]&&(u(new Date(y-1),new Date(y+1)),!s[y])?(s[y]=!0,l.call(this,g)):!0},t.method==="between"&&(u(t.args.after,t.args.before),t.accept=function(g){var y=Number(g);return s[y]?!0:(s[y]=!0,l.call(this,g))});for(var f=0;f<n.length;f++){var d=new go(n[f],a).rezonedDate();if(!t.accept(new Date(d.getTime())))break}e.forEach(function(g){kh(t,g.options)});var h=t._result;switch(ze.sort(h),t.method){case"all":case"between":return h;case"before":return h.length&&h[h.length-1]||null;case"after":default:return h.length&&h[0]||null}}var JT={dtstart:null,cache:!1,unfold:!1,forceset:!1,compatible:!1,tzid:null};function Bq(t,e){var r=[],n=[],i=[],a=[],s=fc(t),l=s.dtstart,u=s.tzid,f=Mq(t,e.unfold);return f.forEach(function(d){if(!!d){var h=Pq(d),g=h.name,y=h.parms,m=h.value;switch(g.toUpperCase()){case"RRULE":if(y.length)throw new Error("unsupported RRULE parm: "+y.join(","));r.push(cc(d));break;case"RDATE":var _=/RDATE(?:;TZID=([^:=]+))?/i.exec(d),E=_[0],w=_[1];w&&!u&&(u=w),n=n.concat(ZT(m,y));break;case"EXRULE":if(y.length)throw new Error("unsupported EXRULE parm: "+y.join(","));i.push(cc(m));break;case"EXDATE":a=a.concat(ZT(m,y));break;case"DTSTART":break;default:throw new Error("unsupported property: "+g)}}}),{dtstart:l,tzid:u,rrulevals:r,rdatevals:n,exrulevals:i,exdatevals:a}}function Dq(t,e){var r=Bq(t,e),n=r.rrulevals,i=r.rdatevals,a=r.exrulevals,s=r.exdatevals,l=r.dtstart,u=r.tzid,f=e.cache===!1;if(e.compatible&&(e.forceset=!0,e.unfold=!0),e.forceset||n.length>1||i.length||a.length||s.length){var d=new mo(f);return d.dtstart(l),d.tzid(u||void 0),n.forEach(function(g){d.rrule(new Me(ay(g,l,u),f))}),i.forEach(function(g){d.rdate(g)}),a.forEach(function(g){d.exrule(new Me(ay(g,l,u),f))}),s.forEach(function(g){d.exdate(g)}),e.compatible&&e.dtstart&&d.rdate(l),d}var h=n[0]||{};return new Me(ay(h,h.dtstart||e.dtstart||l,h.tzid||e.tzid||u),f)}function Ml(t,e){return e===void 0&&(e={}),Dq(t,Oq(e))}function ay(t,e,r){return bn(bn({},t),{dtstart:e,tzid:r})}function Oq(t){var e=[],r=Object.keys(t),n=Object.keys(JT);if(r.forEach(function(i){Lt(n,i)||e.push(i)}),e.length)throw new Error("Invalid options: "+e.join(", "));return bn(bn({},JT),t)}function Lq(t){if(t.indexOf(":")===-1)return{name:"RRULE",value:t};var e=rT(t,":",1),r=e[0],n=e[1];return{name:r,value:n}}function Pq(t){var e=Lq(t),r=e.name,n=e.value,i=r.split(";");if(!i)throw new Error("empty property name");return{name:i[0].toUpperCase(),parms:i.slice(1),value:n}}function Mq(t,e){if(e===void 0&&(e=!1),t=t&&t.trim(),!t)throw new Error("Invalid empty string");if(!e)return t.split(/\s/);for(var r=t.split(`
`),n=0;n<r.length;){var i=r[n]=r[n].replace(/\s+$/g,"");i?n>0&&i[0]===" "?(r[n-1]+=i.slice(1),r.splice(n,1)):n+=1:r.splice(n,1)}return r}function Uq(t){t.forEach(function(e){if(!/(VALUE=DATE(-TIME)?)|(TZID=)/.test(e))throw new Error("unsupported RDATE/EXDATE parm: "+e)})}function ZT(t,e){return Uq(e),t.split(",").map(function(r){return ze.untilStringToDate(r)})}function $T(t){var e=this;return function(r){if(r!==void 0&&(e["_"+t]=r),e["_"+t]!==void 0)return e["_"+t];for(var n=0;n<e._rrule.length;n++){var i=e._rrule[n].origOptions[t];if(i)return i}}}var mo=function(t){Ol(e,t);function e(r){r===void 0&&(r=!1);var n=t.call(this,{},r)||this;return n.dtstart=$T.apply(n,["dtstart"]),n.tzid=$T.apply(n,["tzid"]),n._rrule=[],n._rdate=[],n._exrule=[],n._exdate=[],n}return e.prototype._iter=function(r){return XT(r,this._rrule,this._exrule,this._rdate,this._exdate,this.tzid())},e.prototype.rrule=function(r){eA(r,this._rrule)},e.prototype.exrule=function(r){eA(r,this._exrule)},e.prototype.rdate=function(r){tA(r,this._rdate)},e.prototype.exdate=function(r){tA(r,this._exdate)},e.prototype.rrules=function(){return this._rrule.map(function(r){return Ml(r.toString())})},e.prototype.exrules=function(){return this._exrule.map(function(r){return Ml(r.toString())})},e.prototype.rdates=function(){return this._rdate.map(function(r){return new Date(r.getTime())})},e.prototype.exdates=function(){return this._exdate.map(function(r){return new Date(r.getTime())})},e.prototype.valueOf=function(){var r=[];return!this._rrule.length&&this._dtstart&&(r=r.concat(dc({dtstart:this._dtstart}))),this._rrule.forEach(function(n){r=r.concat(n.toString().split(`
`))}),this._exrule.forEach(function(n){r=r.concat(n.toString().split(`
`).map(function(i){return i.replace(/^RRULE:/,"EXRULE:")}).filter(function(i){return!/^DTSTART/.test(i)}))}),this._rdate.length&&r.push(rA("RDATE",this._rdate,this.tzid())),this._exdate.length&&r.push(rA("EXDATE",this._exdate,this.tzid())),r},e.prototype.toString=function(){return this.valueOf().join(`
`)},e.prototype.clone=function(){var r=new e(!!this._cache);return this._rrule.forEach(function(n){return r.rrule(n.clone())}),this._exrule.forEach(function(n){return r.exrule(n.clone())}),this._rdate.forEach(function(n){return r.rdate(new Date(n.getTime()))}),this._exdate.forEach(function(n){return r.exdate(new Date(n.getTime()))}),r},e}(Me);function eA(t,e){if(!(t instanceof Me))throw new TypeError(String(t)+" is not RRule instance");Lt(e.map(String),String(t))||e.push(t)}function tA(t,e){if(!(t instanceof Date))throw new TypeError(String(t)+" is not Date instance");Lt(e.map(Number),Number(t))||(e.push(t),ze.sort(e))}function rA(t,e,r){var n=!r||r.toUpperCase()==="UTC",i=n?t+":":t+";TZID="+r+":",a=e.map(function(s){return ze.timeToUntilString(s.valueOf(),n)}).join(",");return""+i+a}var nA=Me;var iA=_t(Ba());var Ul=_t(require("obsidian"));var yo=_t(require("obsidian"));var Ih=_t(Ba()),sy=t=>M(void 0,null,function*(){var s,l;if(!t.settings.autoCreateEventNotes||!zt())return;let e=Math.abs(t.settings.importStartOffset),r=Math.abs(t.settings.importEndOffset),n=window.moment().local().subtract(e,"day"),i=window.moment().local().add(r,"day"),a=yield dr({startDate:n,endDate:i});for(let u=0;u<a.length;u++){let f=(l=(s=a[u].description)==null?void 0:s.match(/:(.*-)?obsidian-?(.*)?:/))!=null?l:[];f.length==3&&(yield vo(a[u],f[1],f[2]))}}),Fq=(t,e)=>{let r=/{{gEvent\.([^}>]*)}}/gm,n,i=[];do n=r.exec(e),i.push(n);while(n);return i.forEach(a=>{if(a){let s="";if(a[1]=="attendees"){let l=Ih.default.get(t,a[1],"");for(let u=0;u<l.length;u++)l[u].displayName?s+=`- [[@${l[u].displayName}]]
`:s+=`- [[@${l[u].email}]]
`}else if(a[1]=="attachments"){let l=Ih.default.get(t,a[1],"");for(let u=0;u<l.length;u++)l[u].title?s+=`- [${l[u].title}](${l[u].fileUrl})
`:s+=`- [${l[u].fileUrl}](${l[u].fileUrl})
`}else s=Ih.default.get(t,a[1],"");s===Object(s)&&(s=JSON.stringify(s)),e=e.replace(a[0],s!=null?s:"")}}),e},vo=(t,e,r)=>M(void 0,null,function*(){let n=st.getInstance(),{vault:i}=app,{adapter:a}=i,s=app.fileManager.getNewFileParent("").path;e&&(e.endsWith("-")&&(e=e.slice(0,-1)),e="/"+e.split(/[/\\]/).join("/"),(yield a.exists(e))&&(s=e));let l=t.summary.trim().replace("<","lt").replace(">","gt").replace('"',"''").replace("\\","-").replace("/","-").replace(":","-").replace("|","-").replace("*","").replace("?",""),u=(0,yo.normalizePath)(`${s}/${l}.md`);if(yield a.exists(u))return i.getAbstractFileByPath(u);let f=yield i.create(u,"");if(wt(`EventNote ${t.summary} created.`),!n.coreTemplatePlugin&&!n.templaterPlugin||!r)return i.getAbstractFileByPath(u);r.match(/.*\.md/)||(r=r+".md");let d={state:{mode:"source"},active:!0},h=yield app.workspace.getLeaf(!0);return yield h.setViewState({type:"MarkdownView"}),yield app.workspace.setActiveLeaf(h,!1,!0),yield h.openFile(f,d),n.templaterPlugin&&n.coreTemplatePlugin?(yield g(!0))||(yield g(!1))||wt("Template not compatible"):n.templaterPlugin?(yield g(!0))||wt("Template not compatible"):n.coreTemplatePlugin&&((yield g(!1))||wt("Template not compatible")),n.settings.autoCreateEventKeepOpen||h.detach(),i.getAbstractFileByPath(u);function g(y){return M(this,null,function*(){var D,B,ee,q,U;let m;y?m=(0,yo.normalizePath)((B=(D=n==null?void 0:n.templaterPlugin)==null?void 0:D.settings)==null?void 0:B.templates_folder):m=(0,yo.normalizePath)((U=(q=(ee=n==null?void 0:n.coreTemplatePlugin)==null?void 0:ee.instance)==null?void 0:q.options)==null?void 0:U.folder);let _;if((yield a.exists(r))?_=r:(_=`${m}/${r}`,m==="/"&&(_=r)),!(yield a.exists(_)))return wt(`Template: ${r} doesn't exit.`),!1;let E=i.getAbstractFileByPath(_);if(!(E instanceof yo.TFile))return!1;let w=yield i.cachedRead(E),b=Fq(t,w);if(y&&b.contains("{{")&&b.contains("}}"))return!1;if(!y&&b.contains("<%")&&b.contains("%>"))return!1;let k=E.path+".tmp";yield a.write(k,b);let N=app.vault.getAbstractFileByPath(k);if(!(N instanceof yo.TFile))return!1;try{return y?yield n.templaterPlugin.templater.append_template_to_active_file(N):yield n.coreTemplatePlugin.instance.insertTemplate(N),a.remove(k),!0}catch(oe){return a.remove(k),!1}})}});var _o=class extends Ul.Modal{constructor(e,r){super(window.app);this.template=null;this.folder=null;this.plugin=st.getInstance();this.event=e,this.onSubmit=r}onOpen(){let{contentEl:e}=this;e.createEl("h1",{text:"You can now select a template to use"}),new Ul.Setting(e).setName("Template").addSearch(r=>{new Zu(r.inputEl,this.plugin),r.setPlaceholder("Template").setValue("").onChange(n=>this.template=n),r.containerEl.addClass("templater_search")}),new Ul.Setting(e).setName("Folder").addSearch(r=>{new $u(r.inputEl),r.setPlaceholder("Example: folder1/folder2").setValue(app.vault.config.newFileFolderPath).onChange(n=>this.folder=n),r.containerEl.addClass("templater_search")}),new Ul.Setting(e).setName("").addButton(r=>{r.setButtonText("Create Note"),r.onClick(()=>M(this,null,function*(){let n=yield vo(this.event,this.folder,this.template);this.onSubmit(n),this.close()}))})}onClose(){let{contentEl:e}=this;e.empty()}};function Fl(t,e){return M(this,null,function*(){if(!zt())return null;let r=yield Jr(`https://www.googleapis.com/calendar/v3/calendars/${e}/events/${t}`,"GET",null);return r.parent=(yield Or()).find(n=>n.id===e),r||(wt("Could not get Google Event"),null)})}function qq(t){fi(t,"svelte-8eu8j5",".buttonRow.svelte-8eu8j5.svelte-8eu8j5{display:flex;flex-direction:row;align-items:center;justify-content:space-around;padding:5px}.summaryInput.svelte-8eu8j5.svelte-8eu8j5{border:none;border-bottom:2px solid;border-radius:0px;height:40px;font-size:35px;text-align:center}.disabled.svelte-8eu8j5.svelte-8eu8j5{opacity:0.2}label.svelte-8eu8j5.svelte-8eu8j5{margin-top:5px}.googleFullDayContainer.svelte-8eu8j5.svelte-8eu8j5{margin-top:10px;display:flex;flex-direction:row;justify-content:space-between;align-items:center}.googleEventButtonContainer.svelte-8eu8j5.svelte-8eu8j5{margin-top:10px;display:flex;flex-direction:column;justify-content:space-around}.googleEventButtonContainer.svelte-8eu8j5 button.svelte-8eu8j5{width:40%}")}function aA(t,e,r){let n=t.slice();return n[29]=e[r],n}function Gq(t){let e,r,n,i,a,s,l=t[3],u=[];for(let f=0;f<l.length;f+=1)u[f]=sA(aA(t,l,f));return{c(){var f;e=fe("label"),e.textContent="Calendar",r=Le(),n=fe("select");for(let d=0;d<u.length;d+=1)u[d].c();re(e,"for","calendar"),re(e,"class","svelte-8eu8j5"),re(n,"name","calendar"),re(n,"class","dropdown"),n.disabled=i=((f=t[0])==null?void 0:f.id)!==void 0},m(f,d){Se(f,e,d),Se(f,r,d),Se(f,n,d);for(let h=0;h<u.length;h+=1)u[h].m(n,null);a||(s=at(n,"change",t[11]),a=!0)},p(f,d){var h;if(d[0]&9){l=f[3];let g;for(g=0;g<l.length;g+=1){let y=aA(f,l,g);u[g]?u[g].p(y,d):(u[g]=sA(y),u[g].c(),u[g].m(n,null))}for(;g<u.length;g+=1)u[g].d(1);u.length=l.length}d[0]&1&&i!==(i=((h=f[0])==null?void 0:h.id)!==void 0)&&(n.disabled=i)},d(f){f&&xe(e),f&&xe(r),f&&xe(n),En(u,f),a=!1,s()}}}function Vq(t){let e;return{c(){e=fe("span"),e.textContent="Loading"},m(r,n){Se(r,e,n)},p:At,d(r){r&&xe(e)}}}function sA(t){let e,r=t[29].summary+"",n,i,a,s;return{c(){var l,u;e=fe("option"),n=xr(r),re(e,"id",i=t[29].id),e.__value=a=t[29].id,e.value=e.__value,e.selected=s=t[29].id==((u=(l=t[0])==null?void 0:l.parent)==null?void 0:u.id)},m(l,u){Se(l,e,u),se(e,n)},p(l,u){var f,d;u[0]&8&&r!==(r=l[29].summary+"")&&di(n,r),u[0]&8&&i!==(i=l[29].id)&&re(e,"id",i),u[0]&8&&a!==(a=l[29].id)&&(e.__value=a,e.value=e.__value),u[0]&9&&s!==(s=l[29].id==((d=(f=l[0])==null?void 0:f.parent)==null?void 0:d.id))&&(e.selected=s)},d(l){l&&xe(e)}}}function jq(t){let e,r,n,i,a,s,l,u,f,d;return{c(){e=fe("label"),e.textContent="Start Date",r=Le(),n=fe("input"),i=Le(),a=fe("label"),a.textContent="End Date",s=Le(),l=fe("input"),re(e,"for","eventStartDate"),re(e,"class","svelte-8eu8j5"),re(n,"type","datetime-local"),re(n,"name","eventStartDate"),re(a,"for","eventEndDate"),re(a,"class","svelte-8eu8j5"),re(l,"type","datetime-local"),re(l,"name","eventEndDate"),re(l,"min",u=window.moment(t[1]).format("YYYY-MM-DDThh:mm"))},m(h,g){Se(h,e,g),Se(h,r,g),Se(h,n,g),Di(n,t[1]),Se(h,i,g),Se(h,a,g),Se(h,s,g),Se(h,l,g),Di(l,t[2]),f||(d=[at(n,"input",t[24]),at(l,"input",t[25])],f=!0)},p(h,g){g[0]&2&&Di(n,h[1]),g[0]&2&&u!==(u=window.moment(h[1]).format("YYYY-MM-DDThh:mm"))&&re(l,"min",u),g[0]&4&&Di(l,h[2])},d(h){h&&xe(e),h&&xe(r),h&&xe(n),h&&xe(i),h&&xe(a),h&&xe(s),h&&xe(l),f=!1,ln(d)}}}function Kq(t){let e,r,n,i,a;return{c(){e=fe("label"),e.textContent="Date",r=Le(),n=fe("input"),re(e,"for","eventDate"),re(e,"class","svelte-8eu8j5"),re(n,"type","date"),re(n,"name","eventDate")},m(s,l){Se(s,e,l),Se(s,r,l),Se(s,n,l),Di(n,t[6]),i||(a=at(n,"input",t[23]),i=!0)},p(s,l){l[0]&64&&Di(n,s[6])},d(s){s&&xe(e),s&&xe(r),s&&xe(n),i=!1,a()}}}function Hq(t){let e,r,n,i;return{c(){e=fe("div"),r=fe("button"),r.textContent="Create",re(r,"class","svelte-8eu8j5"),re(e,"class","buttonRow svelte-8eu8j5")},m(a,s){Se(a,e,s),se(e,r),n||(i=at(r,"click",t[12]),n=!0)},p:At,d(a){a&&xe(e),n=!1,i()}}}function Yq(t){let e,r,n,i,a,s,l,u,f,d,h;function g(k,N){return k[7]!=""?zq:Wq}let y=g(t,[-1,-1]),m=y(t);function _(k,N){return k[8]?Xq:Qq}let E=_(t,[-1,-1]),w=E(t),b=t[7]!=""&&oA(t);return{c(){e=fe("div"),m.c(),r=Le(),w.c(),n=Le(),i=fe("div"),a=fe("button"),a.textContent="Update",s=Le(),l=fe("button"),l.textContent="Delete",u=Le(),b&&b.c(),f=ia(),re(e,"class","buttonRow svelte-8eu8j5"),re(a,"class","svelte-8eu8j5"),re(l,"class","svelte-8eu8j5"),re(i,"class","buttonRow svelte-8eu8j5")},m(k,N){Se(k,e,N),m.m(e,null),se(e,r),w.m(e,null),Se(k,n,N),Se(k,i,N),se(i,a),se(i,s),se(i,l),Se(k,u,N),b&&b.m(k,N),Se(k,f,N),d||(h=[at(a,"click",t[15]),at(l,"click",t[13])],d=!0)},p(k,N){y===(y=g(k,N))&&m?m.p(k,N):(m.d(1),m=y(k),m&&(m.c(),m.m(e,r))),E===(E=_(k,N))&&w?w.p(k,N):(w.d(1),w=E(k),w&&(w.c(),w.m(e,null))),k[7]!=""?b?b.p(k,N):(b=oA(k),b.c(),b.m(f.parentNode,f)):b&&(b.d(1),b=null)},d(k){k&&xe(e),m.d(),w.d(),k&&xe(n),k&&xe(i),k&&xe(u),b&&b.d(k),k&&xe(f),d=!1,ln(h)}}}function Wq(t){let e,r,n;return{c(){e=fe("button"),e.textContent="Show Single Event",re(e,"class","svelte-8eu8j5")},m(i,a){Se(i,e,a),r||(n=at(e,"click",t[19]),r=!0)},p:At,d(i){i&&xe(e),r=!1,n()}}}function zq(t){let e,r,n;return{c(){e=fe("button"),e.textContent="Show Recurring Event",re(e,"class","svelte-8eu8j5")},m(i,a){Se(i,e,a),r||(n=at(e,"click",t[19]),r=!0)},p:At,d(i){i&&xe(e),r=!1,n()}}}function Qq(t){let e,r,n;return{c(){e=fe("button"),e.textContent="Create Event Note",re(e,"class","svelte-8eu8j5")},m(i,a){Se(i,e,a),r||(n=at(e,"click",t[18]),r=!0)},p:At,d(i){i&&xe(e),r=!1,n()}}}function Xq(t){let e,r,n;return{c(){e=fe("button"),e.textContent="Open Event Note",re(e,"class","svelte-8eu8j5")},m(i,a){Se(i,e,a),r||(n=at(e,"click",t[17]),r=!0)},p:At,d(i){i&&xe(e),r=!1,n()}}}function oA(t){let e,r,n,i,a,s;return{c(){e=fe("div"),r=fe("button"),r.textContent="Update All",n=Le(),i=fe("button"),i.textContent="Delete All",r.disabled=!0,re(r,"class","disabled svelte-8eu8j5"),re(i,"class","svelte-8eu8j5"),re(e,"class","buttonRow svelte-8eu8j5")},m(l,u){Se(l,e,u),se(e,r),se(e,n),se(e,i),a||(s=[at(r,"click",t[16]),at(i,"click",t[14])],a=!0)},p:At,d(l){l&&xe(e),a=!1,ln(s)}}}function Jq(t){let e,r,n,i,a,s,l,u,f,d,h,g,y,m,_,E,w,b,k,N,D,B,ee;function q(ne,Ge){return ne[4]?Vq:Gq}let U=q(t,[-1,-1]),oe=U(t);function ae(ne,Ge){return ne[5]?Kq:jq}let Ee=ae(t,[-1,-1]),Ie=Ee(t);function Qe(ne,Ge){return ne[0].id?Yq:Hq}let Ne=Qe(t,[-1,-1]),me=Ne(t);return{c(){e=fe("div"),r=fe("input"),n=Le(),i=fe("label"),i.textContent="Description",a=Le(),s=fe("textarea"),u=Le(),oe.c(),f=Le(),d=fe("div"),h=fe("label"),h.textContent="Full Day",g=Le(),y=fe("input"),m=Le(),Ie.c(),_=Le(),E=fe("label"),E.textContent="Reoccurring",w=Le(),b=fe("input"),N=Le(),D=fe("div"),me.c(),re(r,"class","summaryInput svelte-8eu8j5"),re(r,"name","summary"),re(r,"type","text"),re(r,"placeholder","Summary"),re(i,"for","description"),re(i,"class","svelte-8eu8j5"),re(s,"name","description"),s.value=l=t[9](),re(h,"for","fullDay"),re(h,"class","svelte-8eu8j5"),re(y,"type","checkbox"),re(y,"name","fullDay"),re(d,"class","googleFullDayContainer svelte-8eu8j5"),re(E,"for","reoccurring"),re(E,"class","svelte-8eu8j5"),re(b,"type","text"),re(b,"name","Reoccurring"),b.disabled=k=t[0].id!=null,re(D,"class","googleEventButtonContainer svelte-8eu8j5"),re(e,"class","googleEventDetails")},m(ne,Ge){Se(ne,e,Ge),se(e,r),Di(r,t[0].summary),se(e,n),se(e,i),se(e,a),se(e,s),se(e,u),oe.m(e,null),se(e,f),se(e,d),se(d,h),se(d,g),se(d,y),y.checked=t[5],se(e,m),Ie.m(e,null),se(e,_),se(e,E),se(e,w),se(e,b),Di(b,t[7]),se(e,N),se(e,D),me.m(D,null),B||(ee=[at(r,"input",t[21]),at(s,"change",t[10]),at(y,"change",t[22]),at(b,"input",t[26])],B=!0)},p(ne,Ge){Ge[0]&1&&r.value!==ne[0].summary&&Di(r,ne[0].summary),U===(U=q(ne,Ge))&&oe?oe.p(ne,Ge):(oe.d(1),oe=U(ne),oe&&(oe.c(),oe.m(e,f))),Ge[0]&32&&(y.checked=ne[5]),Ee===(Ee=ae(ne,Ge))&&Ie?Ie.p(ne,Ge):(Ie.d(1),Ie=Ee(ne),Ie&&(Ie.c(),Ie.m(e,_))),Ge[0]&1&&k!==(k=ne[0].id!=null)&&(b.disabled=k),Ge[0]&128&&b.value!==ne[7]&&Di(b,ne[7]),Ne===(Ne=Qe(ne,Ge))&&me?me.p(ne,Ge):(me.d(1),me=Ne(ne),me&&(me.c(),me.m(D,null)))},i:At,o:At,d(ne){ne&&xe(e),oe.d(),Ie.d(),me.d(),B=!1,ln(ee)}}}function lA(){let t=15,e=1e3*60*t;return window.moment(new Date(Math.round(new Date().getTime()/e)*e))}function Zq(t,e,r){let{event:n}=e,{closeFunction:i}=e,a,s=!0,l,u=st.getInstance(),f,d,h,g="",y=app.vault.getFiles().find(me=>me.basename==n.summary);function m(me){let ne=iA.default.cloneDeep(me);return l?(ne.start.date=window.moment(h).format("YYYY-MM-DD"),ne.end.date=window.moment(h).format("YYYY-MM-DD"),delete ne.start.dateTime,delete ne.end.dateTime):(ne.start.dateTime=window.moment(f).format(),ne.end.dateTime=window.moment(d).format(),delete ne.start.date,delete ne.end.date),ne}oo(()=>Sr(void 0,void 0,void 0,function*(){var me,ne,Ge,Je,ut;if(r(5,l=((me=n==null?void 0:n.start)===null||me===void 0?void 0:me.dateTime)==null&&((ne=n==null?void 0:n.start)===null||ne===void 0?void 0:ne.date)!==void 0),r(3,a=yield Or()),r(4,s=!1),n.id==null){r(0,n.summary=(Ge=n.summary)!==null&&Ge!==void 0?Ge:"",n),r(0,n.description=(Je=n.description)!==null&&Je!==void 0?Je:"",n),r(0,n.parent=a.find(ct=>ct.id===u.settings.defaultCalendar),n),n.parent||r(0,n.parent=a[a.length-1],n),r(7,g="");let Xe=lA();r(1,f=Xe.format("YYYY-MM-DDTHH:mm")),r(2,d=Xe.add(1,"hour").format("YYYY-MM-DDTHH:mm")),r(6,h=Xe.format("YYYY-MM-DD")),n.start.date&&r(6,h=window.moment(n.start.date).format("YYYY-MM-DD")),n.start.dateTime&&n.end.dateTime&&(r(1,f=window.moment(n.start.dateTime).format("YYYY-MM-DDTHH:mm")),r(2,d=window.moment(n.end.dateTime).format("YYYY-MM-DDTHH:mm")))}else{let Xe=yield Fl((ut=n.recurringEventId)!==null&&ut!==void 0?ut:n.id,n.parent.id);if(Xe==null?void 0:Xe.recurrence){let ct=Ml(Xe.recurrence[0]);r(7,g=ct.toText())}else r(7,g="");if(l){let ct=lA();r(1,f=ct.format("YYYY-MM-DDTHH:mm")),r(2,d=ct.add(1,"hour").format("YYYY-MM-DDTHH:mm")),r(6,h=window.moment(n.start.date).format("YYYY-MM-DD"))}else r(1,f=window.moment(n.start.dateTime).format("YYYY-MM-DDTHH:mm")),r(2,d=window.moment(n.end.dateTime).format("YYYY-MM-DDTHH:mm")),r(6,h=window.moment().format("YYYY-MM-DD"))}}));let _=()=>n.description?n.description.replace(/<\/?[^>]+(>|$)/g,""):"",E=me=>{me.target instanceof HTMLTextAreaElement&&r(0,n.description=me.target.value,n)},w=me=>{let ne=me.target;if(ne instanceof HTMLSelectElement){let Ge=ne.value;r(0,n.parent.id=Ge,n)}},b=()=>Sr(void 0,void 0,void 0,function*(){if(g&&g!="")try{let ne=Me.fromText(g),Ge=new mo;Ge.rrule(ne);let Je=Ge.valueOf();if(g&&Je[0]==""){wt("Event not created. Error in recurrence text.",!0);return}r(0,n.recurrence=Je,n)}catch(ne){wt("Event not created. Error in recurrence text.",!0);return}(yield bh(m(n))).id&&i()}),k=me=>Sr(void 0,void 0,void 0,function*(){let ne=!1;n.recurringEventId?ne=yield Eh(n,!0):ne=yield Eh(n),ne&&i()}),N=()=>Sr(void 0,void 0,void 0,function*(){(yield Eh(m(n)))&&i()}),D=()=>Sr(void 0,void 0,void 0,function*(){let me=m(n),ne;me.recurringEventId?ne=yield Ch(me,!0):ne=yield Ch(me),ne.id&&i()}),B=()=>Sr(void 0,void 0,void 0,function*(){(yield Ch(m(n))).id&&i()}),ee=()=>Sr(void 0,void 0,void 0,function*(){app.workspace.getLeaf(!0).openFile(y),i()}),q=()=>Sr(void 0,void 0,void 0,function*(){new _o(n,me=>r(8,y=me)).open()}),U=()=>{window.open(n.htmlLink)};function oe(){n.summary=this.value,r(0,n)}function ae(){l=this.checked,r(5,l)}function Ee(){h=this.value,r(6,h)}function Ie(){f=this.value,r(1,f)}function Qe(){d=this.value,r(2,d),r(1,f)}function Ne(){g=this.value,r(7,g)}return t.$$set=me=>{"event"in me&&r(0,n=me.event),"closeFunction"in me&&r(20,i=me.closeFunction)},t.$$.update=()=>{if(t.$$.dirty[0]&6){e:{let me=window.moment(f);window.moment(d).isBefore(me)&&r(2,d=me.add(1,"hour").format("YYYY-MM-DDTHH:mm"))}}},[n,f,d,a,s,l,h,g,y,_,E,w,b,k,N,D,B,ee,q,U,i,oe,ae,Ee,Ie,Qe,Ne]}var uA=class extends Cn{constructor(e){super();On(this,e,Zq,Jq,Bn,{event:0,closeFunction:20},qq,[-1,-1])}},cA=uA;var mi=class extends fA.Modal{constructor(e,r){super(st.getInstance().app);this.selectedEvent=e,r&&(this.closeFunction=r)}onOpen(){return M(this,null,function*(){let{contentEl:e}=this;new cA({target:e,props:{event:this.selectedEvent,closeFunction:()=>{this.closeFunction&&this.closeFunction(),this.close()}}})})}onClose(){let{contentEl:e}=this;e.empty()}};var BA=_t(uy());var Rh=_t(uy()),RA=_t(Ba()),Nh={},w9=new Event("dailyNoteUpdate",{bubbles:!0,cancelable:!1,composed:!1}),wc=t=>M(void 0,null,function*(){if(app.workspace.layoutReady&&t.settings.activateDailyNoteAddon){let e={};try{e=(0,Rh.getAllDailyNotes)()}catch(r){console.log("Daily note folder not set. Deactivated Show Daily notes setting."),t.settings.activateDailyNoteAddon=!1,t.saveSettings()}RA.default.isEqual(Nh,e)==!1&&(Nh=e),document.dispatchEvent(w9)}}),Bh=()=>Nh,Ec=t=>(0,Rh.getDailyNote)(t,Nh);var Pi=class extends NA.FuzzySuggestModal{constructor(e,r,n=window.moment(),i=!1,a){super(window.app);this.plugin=st.getInstance();this.eventList=[...e],this.modalSelectMode=r,this.setPlaceholder(`${n.format("MM/DD/YYYY")} Arrow left/right to switch day`),this.emptyStateText="No events found enter to create a new one",this.eventsChanged=i,this.currentDate=n.clone(),a&&(this.closeFunction=a),this.inputEl.addEventListener("keydown",s=>M(this,null,function*(){let l=!1;!this.getSuggestions(this.inputEl.value).length&&s.key=="Enter"&&new mi({summary:this.inputEl.value,start:{date:n.format()},end:{}},()=>{this.eventsChanged=!0,this.close()}).open(),s.key=="ArrowRight"?(s.ctrlKey?this.currentDate=this.currentDate.add(1,"month"):s.shiftKey?this.currentDate=this.currentDate.add(1,"week"):this.currentDate=this.currentDate.add(1,"day"),l=!0):s.key=="ArrowLeft"&&(s.ctrlKey?this.currentDate=this.currentDate.subtract(1,"month"):s.shiftKey?this.currentDate=this.currentDate.subtract(1,"week"):this.currentDate=this.currentDate.subtract(1,"day"),l=!0),l&&(this.setPlaceholder("Loading"),this.eventList=yield dr({startDate:this.currentDate}),this.inputEl.dispatchEvent(new Event("input")),this.setPlaceholder(`${this.currentDate.format("MM/DD/YYYY")} Arrow left and right to switch day`))}))}getItems(){return this.plugin.settings.activateDailyNoteAddon?[{id:"xxx",start:null,end:null},...this.eventList]:this.eventList}getItemText(e){return e.id=="xxx"?Ec(this.currentDate)?"Open daily note":"Create daily note":e.start.date?`${e.start.date}		 | ${e.summary}	`:`${window.moment(e.start.dateTime).format("YYYY-MM-DD HH:mm")}	 | ${e.summary}	`}onChooseItem(e){return M(this,null,function*(){if(e.id=="xxx"){let r=Ec(this.currentDate);r||(r=yield(0,BA.createDailyNote)(this.currentDate)),yield app.workspace.getLeaf(!1).openFile(r,{active:!0});return}this.modalSelectMode=="details"?(this.open(),new mi(e,()=>this.eventsChanged=!0).open()):this.modalSelectMode=="createNote"&&(this.plugin.settings.useDefaultTemplate?vo(e,this.plugin.settings.defaultFolder,this.plugin.settings.defaultTemplate):new _o(e,()=>{}).open())})}onClose(){this.closeFunction&&this.eventsChanged&&this.closeFunction()}};var Dh=class extends DA.FuzzySuggestModal{constructor(e){super(st.getInstance().app);this.calendarList=e,this.setPlaceholder("Select a calendar to view it")}getItems(){return this.calendarList}getItemText(e){return`${e.summary}	`}onChooseItem(e){return M(this,null,function*(){let r=yield dr({include:[e.id]});new Pi(r,"details").open()})}};var vs;(function(i){i.web="web",i.month="month",i.day="day",i.schedule="schedule"})(vs||(vs={}));var Jh=_t(require("obsidian"));var qA=_t(MA());function Cc(t){return t.getHours()/24+t.getMinutes()/(60*24)}function UA(t,e){if(t.start.date||(t==null?void 0:t.eventType)=="multiDay")return 0;let r=Cc(new Date(t.start.dateTime));return e*r}function FA(t,e){if(t.start.date||(t==null?void 0:t.eventType)=="multiDay")return 25;let r=Cc(new Date(t.start.dateTime)),n=Cc(new Date(t.end.dateTime));return e*(n-r)}var Lh=()=>app.vault.config.theme?app.vault.config.theme=="obsidian"?"dark":"light":"dark";function A9(t){fi(t,"svelte-ejm9xr",'.googleCalendarEvent.svelte-ejm9xr{display:flex;padding:10px;padding-top:0;position:absolute;width:150px;left:40px;border-radius:5px;color:black;font-size:0.5em;box-shadow:3px 2px 8px 4px rgba(0,0,0,0.36);overflow:hidden}.hourLine.svelte-ejm9xr::after{content:"";position:absolute;width:90%;left:25px;border-bottom:1px solid white}.hourLineLarge.svelte-ejm9xr::after{width:80%;left:50px}.hourText.svelte-ejm9xr{display:block;font-family:"consolas"}.timeline.svelte-ejm9xr,.hourText.svelte-ejm9xr,.hourTextContainer.svelte-ejm9xr{overflow:hidden}.timeDisplay.svelte-ejm9xr{position:absolute;height:3px;background:red;overflow:visible}.timeline.svelte-ejm9xr{position:relative;display:flex;flex-direction:row;overflow:visible}')}function GA(t,e,r){let n=t.slice();return n[19]=e[r],n[21]=r,n}function VA(t,e,r){let n=t.slice();return n[22]=e[r],n[21]=r,n}function jA(t,e,r){let n=t.slice();return n[22]=e[r],n[21]=r,n}function k9(t){let e,r,n,i,a=`-${t[1]/52}px`,s,l=window.moment().isSame(t[0],"day"),u,f=`${t[1]}px`,d=`${t[2]}px`,h={length:24},g=[];for(let b=0;b<h.length;b+=1)g[b]=KA(jA(t,h,b));let y={length:24},m=[];for(let b=0;b<y.length;b+=1)m[b]=HA(VA(t,y,b));let _=l&&YA(t),E=t[5],w=[];for(let b=0;b<E.length;b+=1)w[b]=WA(GA(t,E,b));return{c(){e=fe("div"),r=fe("div");for(let b=0;b<g.length;b+=1)g[b].c();n=Le(),i=fe("div");for(let b=0;b<m.length;b+=1)m[b].c();s=Le(),_&&_.c(),u=Le();for(let b=0;b<w.length;b+=1)w[b].c();re(r,"class","hourLineContainer"),re(i,"class","hourTextContainer svelte-ejm9xr"),Ze(i,"margin-top",a,!1),re(e,"class","timeline svelte-ejm9xr"),Ze(e,"height",f,!1),Ze(e,"width",d,!1)},m(b,k){Se(b,e,k),se(e,r);for(let N=0;N<g.length;N+=1)g[N].m(r,null);se(e,n),se(e,i);for(let N=0;N<m.length;N+=1)m[N].m(i,null);se(e,s),_&&_.m(e,null),se(e,u);for(let N=0;N<w.length;N+=1)w[N].m(e,null)},p(b,k){if(k&66){h={length:24};let N;for(N=0;N<h.length;N+=1){let D=jA(b,h,N);g[N]?g[N].p(D,k):(g[N]=KA(D),g[N].c(),g[N].m(r,null))}for(;N<g.length;N+=1)g[N].d(1);g.length=h.length}if(k&834){y={length:24};let N;for(N=0;N<y.length;N+=1){let D=VA(b,y,N);m[N]?m[N].p(D,k):(m[N]=HA(D),m[N].c(),m[N].m(i,null))}for(;N<m.length;N+=1)m[N].d(1);m.length=y.length}if(k&2&&a!==(a=`-${b[1]/52}px`)&&Ze(i,"margin-top",a,!1),k&1&&(l=window.moment().isSame(b[0],"day")),l?_?_.p(b,k):(_=YA(b),_.c(),_.m(e,u)):_&&(_.d(1),_=null),k&160){E=b[5];let N;for(N=0;N<E.length;N+=1){let D=GA(b,E,N);w[N]?w[N].p(D,k):(w[N]=WA(D),w[N].c(),w[N].m(e,null))}for(;N<w.length;N+=1)w[N].d(1);w.length=E.length}k&2&&f!==(f=`${b[1]}px`)&&Ze(e,"height",f,!1),k&4&&d!==(d=`${b[2]}px`)&&Ze(e,"width",d,!1)},d(b){b&&xe(e),En(g,b),En(m,b),_&&_.d(),En(w,b)}}}function I9(t){let e;return{c(){e=fe("p"),e.textContent="Loading"},m(r,n){Se(r,e,n)},p:At,d(r){r&&xe(e)}}}function KA(t){let e,r,n=`${t[1]/24}px`;return{c(){e=fe("div"),re(e,"class",r=""+(Il(t[6]==2?"hourLine hourLineLarge":"hourLine")+" svelte-ejm9xr")),Ze(e,"height",n,!1)},m(i,a){Se(i,e,a)},p(i,a){a&64&&r!==(r=""+(Il(i[6]==2?"hourLine hourLineLarge":"hourLine")+" svelte-ejm9xr"))&&re(e,"class",r),a&2&&n!==(n=`${i[1]/24}px`)&&Ze(e,"height",n,!1)},d(i){i&&xe(e)}}}function HA(t){let e,r=t[9](t[21],t[6])+"",n,i=`${t[1]/24}px`,a=`${t[1]/50}px`,s,l;return{c(){e=fe("span"),n=xr(r),re(e,"class","hourText svelte-ejm9xr"),Ze(e,"height",i,!1),Ze(e,"font-size",a,!1)},m(u,f){Se(u,e,f),se(e,n),s||(l=at(e,"click",t[8]),s=!0)},p(u,f){f&64&&r!==(r=u[9](u[21],u[6])+"")&&di(n,r),f&2&&i!==(i=`${u[1]/24}px`)&&Ze(e,"height",i,!1),f&2&&a!==(a=`${u[1]/50}px`)&&Ze(e,"font-size",a,!1)},d(u){u&&xe(e),s=!1,l()}}}function YA(t){let e,r=`${t[4]}px`,n=`${t[2]}px`;return{c(){e=fe("div"),re(e,"class","timeDisplay svelte-ejm9xr"),Ze(e,"top",r,!1),Ze(e,"width",n,!1)},m(i,a){Se(i,e,a)},p(i,a){a&16&&r!==(r=`${i[4]}px`)&&Ze(e,"top",r,!1),a&4&&n!==(n=`${i[2]}px`)&&Ze(e,"width",n,!1)},d(i){i&&xe(e)}}}function WA(t){let e,r,n=t[19].event.summary+"",i,a,s,l,u,f=`${t[19].y}px`,d=`${t[19].x}px`,h=`${t[19].width}px`,g=`${t[19].height}px`,y,m;function _(...E){return t[13](t[19],...E)}return{c(){e=fe("div"),r=fe("span"),i=xr(n),s=Le(),re(r,"class",a="googleCalendarName googleCalendarName_Calendar_Color_"+t[19].event.parent.colorId+" googleCalendarName_Event_Color_"+t[19].event.parent.colorId+" googleCalendarName_Id_"+t[19].event.parent.id+" svelte-ejm9xr"),re(e,"class",l="googleCalendarEvent googleCalendarEvent_Calendar_Color_"+t[19].event.parent.colorId+" googleCalendarEvent_Event_Color_"+t[19].event.parent.colorId+" googleCalendarEvent_Id_"+t[19].event.parent.id+" svelte-ejm9xr"),re(e,"id",u=t[19].event.id),Ze(e,"top",f,!1),Ze(e,"left",d,!1),Ze(e,"width",h,!1),Ze(e,"height",g,!1),Ze(e,"background",Ku(t[19].event),!1)},m(E,w){Se(E,e,w),se(e,r),se(r,i),se(e,s),y||(m=at(e,"click",_),y=!0)},p(E,w){t=E,w&32&&n!==(n=t[19].event.summary+"")&&di(i,n),w&32&&a!==(a="googleCalendarName googleCalendarName_Calendar_Color_"+t[19].event.parent.colorId+" googleCalendarName_Event_Color_"+t[19].event.parent.colorId+" googleCalendarName_Id_"+t[19].event.parent.id+" svelte-ejm9xr")&&re(r,"class",a),w&32&&l!==(l="googleCalendarEvent googleCalendarEvent_Calendar_Color_"+t[19].event.parent.colorId+" googleCalendarEvent_Event_Color_"+t[19].event.parent.colorId+" googleCalendarEvent_Id_"+t[19].event.parent.id+" svelte-ejm9xr")&&re(e,"class",l),w&32&&u!==(u=t[19].event.id)&&re(e,"id",u),w&32&&f!==(f=`${t[19].y}px`)&&Ze(e,"top",f,!1),w&32&&d!==(d=`${t[19].x}px`)&&Ze(e,"left",d,!1),w&32&&h!==(h=`${t[19].width}px`)&&Ze(e,"width",h,!1),w&32&&g!==(g=`${t[19].height}px`)&&Ze(e,"height",g,!1),w&32&&Ze(e,"background",Ku(t[19].event),!1)},d(E){E&&xe(e),y=!1,m()}}}function R9(t){let e;function r(a,s){return a[3]?I9:k9}let n=r(t,-1),i=n(t);return{c(){i.c(),e=ia()},m(a,s){i.m(a,s),Se(a,e,s)},p(a,[s]){n===(n=r(a,s))&&i?i.p(a,s):(i.d(1),i=n(a),i&&(i.c(),i.m(e.parentNode,e)))},i:At,o:At,d(a){i.d(a),a&&xe(e)}}}function N9(t,e,r){let{height:n=700}=e,{width:i=300}=e,{date:a=window.moment()}=e,{include:s}=e,{exclude:l}=e,u=!0,f=0,d=[],h=[],g,y=st.getInstance(),m=y.settings.timelineHourFormat,_=()=>Sr(void 0,void 0,void 0,function*(){r(6,m=y.settings.timelineHourFormat),yield w();let B=Cc(new Date);r(4,f=Math.floor(n*B))}),E=()=>{let B=new qA.default;d.forEach(U=>{let oe=U.start.date||U.start.dateTime;B.has(oe)?B.get(oe).push(U):B.set(oe,[U])});let ee=0,q=null;for(let U of B.values()){if(U[0].start.dateTime){let oe=window.moment(U[0].start.dateTime);q&&oe.isBefore(q,"minutes")?ee++:ee=0,q=window.moment(U[0].end.dateTime)}U.forEach((oe,ae)=>{let Ee=30;m==2&&(Ee=50);let Ie=Ee+ee*10,Qe=(i-Ie)/U.length;r(5,h=[...h,{event:oe,x:Ie+Qe*ae,y:UA(oe,n),width:Qe,height:FA(oe,n),fullDay:oe.start.date!=null}])})}},w=()=>Sr(void 0,void 0,void 0,function*(){if(!a.isValid())return;let B=yield dr({startDate:a,include:s,exclude:l});JSON.stringify(B)!=JSON.stringify(d)&&(d=B,r(5,h=[]),E()),r(3,u=!1)}),b=(B,ee)=>{ee.shiftKey?window.open(B.htmlLink):new mi(B,()=>{Bi(),r(0,a),r(12,g)}).open()};lo(()=>{clearInterval(g)});let k=()=>{r(6,m+=1),m>2&&r(6,m=0),y.settings.timelineHourFormat=m,y.saveSettings()},N=(B,ee)=>{let q=window.moment(`${B}:00:00`,"H:mm:ss");switch(ee){case 0:return q.format("HH");case 1:return q.format("hh");case 2:return q.format("hh A")}},D=(B,ee)=>b(B.event,ee);return t.$$set=B=>{"height"in B&&r(1,n=B.height),"width"in B&&r(2,i=B.width),"date"in B&&r(0,a=B.date),"include"in B&&r(10,s=B.include),"exclude"in B&&r(11,l=B.exclude)},t.$$.update=()=>{if(t.$$.dirty&4097){e:r(0,a),r(12,g),g&&clearInterval(g),r(3,u=!0),r(12,g=setInterval(_,5e3)),_()}},[a,n,i,u,f,h,m,b,k,N,s,l,g,D]}var zA=class extends Cn{constructor(e){super();On(this,e,N9,R9,Bn,{height:1,width:2,date:0,include:10,exclude:11},A9)}},QA=zA;function B9(t){fi(t,"svelte-169s007",".fixedSizeButton.svelte-169s007{text-align:center;padding:10px 5%;margin:0}.titleContainer.svelte-169s007{display:flex;flex-direction:row;align-items:center;justify-content:flex-start}.navigationContainer.svelte-169s007{display:flex;flex-direction:row;align-items:center;justify-content:space-around;flex-wrap:wrap;padding-bottom:30px}")}function XA(t){let e,r,n,i,a,s=t[0].format("YYYY-MM-DD")+"",l,u,f,d,h,g,y,m,_,E,w,b,k,N;return{c(){e=fe("div"),r=fe("button"),r.textContent="+",n=Le(),i=fe("h3"),a=xr("Google Calendar "),l=xr(s),u=Le(),f=fe("div"),d=fe("button"),d.textContent="<<",h=Le(),g=fe("button"),g.textContent="<",y=Le(),m=fe("button"),m.textContent="Today",_=Le(),E=fe("button"),E.textContent=">",w=Le(),b=fe("button"),b.textContent=">>",re(r,"aria-label","Create Event"),re(e,"class","titleContainer svelte-169s007"),re(d,"class","fixedSizeButton svelte-169s007"),re(d,"aria-label","Back 1 week"),re(g,"class","fixedSizeButton svelte-169s007"),re(g,"aria-label","Back 1 day"),re(m,"class","fixedSizeButton svelte-169s007"),re(m,"aria-label","Jump to today"),re(E,"class","fixedSizeButton svelte-169s007"),re(E,"aria-label","Forward 1 day"),re(b,"class","fixedSizeButton svelte-169s007"),re(b,"aria-label","Forward 1 week"),re(f,"class","navigationContainer svelte-169s007")},m(D,B){Se(D,e,B),se(e,r),se(e,n),se(e,i),se(i,a),se(i,l),Se(D,u,B),Se(D,f,B),se(f,d),se(f,h),se(f,g),se(f,y),se(f,m),se(f,_),se(f,E),se(f,w),se(f,b),k||(N=[at(r,"click",t[11]),at(d,"click",t[6]),at(g,"click",t[7]),at(m,"click",t[8]),at(E,"click",t[10]),at(b,"click",t[9])],k=!0)},p(D,B){B&1&&s!==(s=D[0].format("YYYY-MM-DD")+"")&&di(l,s)},d(D){D&&xe(e),D&&xe(u),D&&xe(f),k=!1,ln(N)}}}function D9(t){let e,r,n,i,a,s=t[3]&&t[0]&&XA(t);function l(f){t[13](f)}let u={height:t[1],width:t[2],include:t[4],exclude:t[5]};return t[0]!==void 0&&(u.date=t[0]),n=new QA({props:u}),Dn.push(()=>Oa(n,"date",l)),{c(){e=fe("div"),s&&s.c(),r=Le(),sc(n.$$.fragment),Ze(e,"padding-left","10px")},m(f,d){Se(f,e,d),s&&s.m(e,null),se(e,r),Nl(n,e,null),a=!0},p(f,[d]){f[3]&&f[0]?s?s.p(f,d):(s=XA(f),s.c(),s.m(e,r)):s&&(s.d(1),s=null);let h={};d&2&&(h.height=f[1]),d&4&&(h.width=f[2]),d&16&&(h.include=f[4]),d&32&&(h.exclude=f[5]),!i&&d&1&&(i=!0,h.date=f[0],Da(()=>i=!1)),n.$set(h)},i(f){a||(hi(n.$$.fragment,f),a=!0)},o(f){Oi(n.$$.fragment,f),a=!1},d(f){f&&xe(e),s&&s.d(),co(n)}}}function O9(t,e,r){let{height:n=void 0}=e,{width:i=void 0}=e,{date:a=void 0}=e,{navigation:s=!1}=e,{include:l}=e,{exclude:u}=e,f=0,d=()=>r(12,f-=7),h=()=>r(12,f-=1),g=()=>r(12,f=0),y=()=>r(12,f+=7),m=()=>r(12,f+=1),_=w=>{new mi({start:{},end:{}},()=>{Bi(),r(0,a),r(3,s),r(12,f)}).open()};function E(w){a=w,r(0,a),r(3,s),r(12,f)}return t.$$set=w=>{"height"in w&&r(1,n=w.height),"width"in w&&r(2,i=w.width),"date"in w&&r(0,a=w.date),"navigation"in w&&r(3,s=w.navigation),"include"in w&&r(4,l=w.include),"exclude"in w&&r(5,u=w.exclude)},t.$$.update=()=>{if(t.$$.dirty&4105){e:r(0,a=s?window.moment().local().add(f,"days"):a)}},[a,n,i,s,l,u,d,h,g,y,m,_,f,E]}var JA=class extends Cn{constructor(e){super();On(this,e,O9,D9,Bn,{height:1,width:2,date:0,navigation:3,include:4,exclude:5},B9)}},Ph=JA;function L9(t){fi(t,"svelte-1ficnkj",".fullSize.svelte-1ficnkj,.content.svelte-1ficnkj,.box.svelte-1ficnkj{width:100%;height:100%;overflow:scoll !important}")}function P9(t){let e,r,n=`${t[0]}px`,i=`${t[1]}px`;return{c(){e=fe("webview"),tc(e.src,r=t[3])||re(e,"src",r),re(e,"allowpopups",""),Ze(e,"width",n,!1),Ze(e,"height",i,!1)},m(a,s){Se(a,e,s),t[7](e)},p(a,s){s&8&&!tc(e.src,r=a[3])&&re(e,"src",r),s&1&&n!==(n=`${a[0]}px`)&&Ze(e,"width",n,!1),s&2&&i!==(i=`${a[1]}px`)&&Ze(e,"height",i,!1)},d(a){a&&xe(e),t[7](null)}}}function M9(t){let e,r;return{c(){e=fe("webview"),tc(e.src,r=t[3])||re(e,"src",r),re(e,"allowpopups",""),re(e,"class","fullSize svelte-1ficnkj")},m(n,i){Se(n,e,i),t[6](e)},p(n,i){i&8&&!tc(e.src,r=n[3])&&re(e,"src",r)},d(n){n&&xe(e),t[6](null)}}}function U9(t){let e,r;function n(s,l){return s[0]==0?M9:P9}let i=n(t,-1),a=i(t);return{c(){e=fe("div"),r=fe("div"),a.c(),re(r,"class","content svelte-1ficnkj"),re(e,"class","box svelte-1ficnkj")},m(s,l){Se(s,e,l),se(e,r),a.m(r,null)},p(s,[l]){i===(i=n(s,l))&&a?a.p(s,l):(a.d(1),a=i(s),a&&(a.c(),a.m(r,null)))},i:At,o:At,d(s){s&&xe(e),a.d()}}}function F9(t,e,r){let n=st.getInstance(),{date:i=window.moment()}=e,{width:a=0}=e,{height:s=0}=e,{theme:l=n.settings.webViewDefaultColorMode}=e,u,f="";i.isValid()?f=`https://calendar.google.com/calendar/u/0/r/day/${i.format("yyyy/M/D")}`:f="https://calendar.google.com/calendar/u/0/r/day/",oo(()=>{l=="auto"&&r(4,l=Lh()),l=="dark"&&u.addEventListener("dom-ready",()=>{u.insertCSS(`
                html {
                    filter: hue-rotate(180deg)invert(100)contrast(93%) !important;
                }
            
            `)})});function d(g){Dn[g?"unshift":"push"](()=>{u=g,r(2,u)})}function h(g){Dn[g?"unshift":"push"](()=>{u=g,r(2,u)})}return t.$$set=g=>{"date"in g&&r(5,i=g.date),"width"in g&&r(0,a=g.width),"height"in g&&r(1,s=g.height),"theme"in g&&r(4,l=g.theme)},[a,s,u,f,l,i,d,h]}var ZA=class extends Cn{constructor(e){super();On(this,e,F9,U9,Bn,{date:5,width:0,height:1,theme:4},L9)}},Mh=ZA;var a$=_t(require("obsidian"));function zr(){}function bc(t,e){for(let r in e)t[r]=e[r];return t}function q9(t){return t&&typeof t=="object"&&typeof t.then=="function"}function $A(t){return t()}function e2(){return Object.create(null)}function ws(t){t.forEach($A)}function sa(t){return typeof t=="function"}function fy(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function Uh(t,e){return t!=t?e==e:t!==e}function G9(t){return Object.keys(t).length===0}function t2(t,e,r,n){if(t){let i=r2(t,e,r,n);return t[0](i)}}function r2(t,e,r,n){return t[1]&&n?bc(r.ctx.slice(),t[1](n(e))):r.ctx}function V9(t,e,r,n){if(t[2]&&n){let i=t[2](n(r));if(e.dirty===void 0)return i;if(typeof i=="object"){let a=[],s=Math.max(e.dirty.length,i.length);for(let l=0;l<s;l+=1)a[l]=e.dirty[l]|i[l];return a}return e.dirty|i}return e.dirty}function n2(t,e,r,n,i,a,s){let l=V9(e,n,i,a);if(l){let u=r2(e,r,n,s);t.p(u,l)}}function jl(t){return t==null?"":t}function yt(t,e){t.appendChild(e)}function Qr(t,e,r){t.insertBefore(e,r||null)}function Mr(t){t.parentNode.removeChild(t)}function Fh(t,e){for(let r=0;r<t.length;r+=1)t[r]&&t[r].d(e)}function Yt(t){return document.createElement(t)}function Kl(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function Eo(t){return document.createTextNode(t)}function Yn(){return Eo(" ")}function qh(){return Eo("")}function Ma(t,e,r,n){return t.addEventListener(e,r,n),()=>t.removeEventListener(e,r,n)}function lt(t,e,r){r==null?t.removeAttribute(e):t.getAttribute(e)!==r&&t.setAttribute(e,r)}function i2(t,e){let r=Object.getOwnPropertyDescriptors(t.__proto__);for(let n in e)e[n]==null?t.removeAttribute(n):n==="style"?t.style.cssText=e[n]:n==="__value"?t.value=t[n]=e[n]:r[n]&&r[n].set?t[n]=e[n]:lt(t,n,e[n])}function j9(t){return Array.from(t.childNodes)}function xc(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function Ar(t,e,r){t.classList[r?"add":"remove"](e)}var Gh;function Es(t){Gh=t}function K9(){if(!Gh)throw new Error("Function called outside component initialization");return Gh}var Sc=[],a2=[],Vh=[],s2=[],H9=Promise.resolve(),dy=!1;function Y9(){dy||(dy=!0,H9.then(my))}function hy(t){Vh.push(t)}var py=!1,gy=new Set;function my(){if(!py){py=!0;do{for(let t=0;t<Sc.length;t+=1){let e=Sc[t];Es(e),W9(e.$$)}for(Es(null),Sc.length=0;a2.length;)a2.pop()();for(let t=0;t<Vh.length;t+=1){let e=Vh[t];gy.has(e)||(gy.add(e),e())}Vh.length=0}while(Sc.length);for(;s2.length;)s2.pop()();dy=!1,py=!1,gy.clear()}}function W9(t){if(t.fragment!==null){t.update(),ws(t.before_update);let e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(hy)}}var jh=new Set,Co;function bo(){Co={r:0,c:[],p:Co}}function xo(){Co.r||ws(Co.c),Co=Co.p}function Jt(t,e){t&&t.i&&(jh.delete(t),t.i(e))}function hr(t,e,r,n){if(t&&t.o){if(jh.has(t))return;jh.add(t),Co.c.push(()=>{jh.delete(t),n&&(r&&t.d(1),n())}),t.o(e)}}function o2(t,e){let r=e.token={};function n(i,a,s,l){if(e.token!==r)return;e.resolved=l;let u=e.ctx;s!==void 0&&(u=u.slice(),u[s]=l);let f=i&&(e.current=i)(u),d=!1;e.block&&(e.blocks?e.blocks.forEach((h,g)=>{g!==a&&h&&(bo(),hr(h,1,1,()=>{e.blocks[g]===h&&(e.blocks[g]=null)}),xo())}):e.block.d(1),f.c(),Jt(f,1),f.m(e.mount(),e.anchor),d=!0),e.block=f,e.blocks&&(e.blocks[a]=f),d&&my()}if(q9(t)){let i=K9();if(t.then(a=>{Es(i),n(e.then,1,e.value,a),Es(null)},a=>{if(Es(i),n(e.catch,2,e.error,a),Es(null),!e.hasCatch)throw a}),e.current!==e.pending)return n(e.pending,0),!0}else{if(e.current!==e.then)return n(e.then,1,e.value,t),!0;e.resolved=t}}function l2(t,e){hr(t,1,1,()=>{e.delete(t.key)})}function u2(t,e,r,n,i,a,s,l,u,f,d,h){let g=t.length,y=a.length,m=g,_={};for(;m--;)_[t[m].key]=m;let E=[],w=new Map,b=new Map;for(m=y;m--;){let B=h(i,a,m),ee=r(B),q=s.get(ee);q?n&&q.p(B,e):(q=f(ee,B),q.c()),w.set(ee,E[m]=q),ee in _&&b.set(ee,Math.abs(m-_[ee]))}let k=new Set,N=new Set;function D(B){Jt(B,1),B.m(l,d),s.set(B.key,B),d=B.first,y--}for(;g&&y;){let B=E[y-1],ee=t[g-1],q=B.key,U=ee.key;B===ee?(d=B.first,g--,y--):w.has(U)?!s.has(q)||k.has(q)?D(B):N.has(U)?g--:b.get(q)>b.get(U)?(N.add(q),D(B)):(k.add(U),g--):(u(ee,s),g--)}for(;g--;){let B=t[g];w.has(B.key)||u(B,s)}for(;y;)D(E[y-1]);return E}function Kh(t,e){let r={},n={},i={$$scope:1},a=t.length;for(;a--;){let s=t[a],l=e[a];if(l){for(let u in s)u in l||(n[u]=1);for(let u in l)i[u]||(r[u]=l[u],i[u]=1);t[a]=l}else for(let u in s)i[u]=1}for(let s in n)s in r||(r[s]=void 0);return r}function yy(t){return typeof t=="object"&&t!==null?t:{}}function Ua(t){t&&t.c()}function oa(t,e,r,n){let{fragment:i,on_mount:a,on_destroy:s,after_update:l}=t.$$;i&&i.m(e,r),n||hy(()=>{let u=a.map($A).filter(sa);s?s.push(...u):ws(u),t.$$.on_mount=[]}),l.forEach(hy)}function la(t,e){let r=t.$$;r.fragment!==null&&(ws(r.on_destroy),r.fragment&&r.fragment.d(e),r.on_destroy=r.fragment=null,r.ctx=[])}function z9(t,e){t.$$.dirty[0]===-1&&(Sc.push(t),Y9(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function So(t,e,r,n,i,a,s=[-1]){let l=Gh;Es(t);let u=t.$$={fragment:null,ctx:null,props:a,update:zr,not_equal:i,bound:e2(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(l?l.$$.context:[]),callbacks:e2(),dirty:s,skip_bound:!1},f=!1;if(u.ctx=r?r(t,e.props||{},(d,h,...g)=>{let y=g.length?g[0]:h;return u.ctx&&i(u.ctx[d],u.ctx[d]=y)&&(!u.skip_bound&&u.bound[d]&&u.bound[d](y),f&&z9(t,d)),h}):[],u.update(),f=!0,ws(u.before_update),u.fragment=n?n(u.ctx):!1,e.target){if(e.hydrate){let d=j9(e.target);u.fragment&&u.fragment.l(d),d.forEach(Mr)}else u.fragment&&u.fragment.c();e.intro&&Jt(t.$$.fragment),oa(t,e.target,e.anchor,e.customElement),my()}Es(l)}var Cs=class{$destroy(){la(this,1),this.$destroy=zr}$on(e,r){let n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(r),()=>{let i=n.indexOf(r);i!==-1&&n.splice(i,1)}}$set(e){this.$$set&&!G9(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}};function Q9(t,e="day"){let r=t.clone().startOf(e).format();return`${e}-${r}`}var Hh=Q9;function X9(){var t=Yt("style");t.id="svelte-1widvzq-style",t.textContent=".dot.svelte-1widvzq,.hollow.svelte-1widvzq{display:inline-block;height:6px;width:6px;margin:0 1px}.filled.svelte-1widvzq{fill:var(--color-dot)}.active.filled.svelte-1widvzq{fill:var(--text-on-accent)}.hollow.svelte-1widvzq{fill:none;stroke:var(--color-dot)}.active.hollow.svelte-1widvzq{fill:none;stroke:var(--text-on-accent)}",yt(document.head,t)}function J9(t){let e,r,n;return{c(){e=Kl("svg"),r=Kl("circle"),lt(r,"cx","3"),lt(r,"cy","3"),lt(r,"r","2"),lt(e,"class",n=""+(jl(`hollow ${t[0]}`)+" svelte-1widvzq")),lt(e,"viewBox","0 0 6 6"),lt(e,"xmlns","http://www.w3.org/2000/svg"),Ar(e,"active",t[2])},m(i,a){Qr(i,e,a),yt(e,r)},p(i,a){a&1&&n!==(n=""+(jl(`hollow ${i[0]}`)+" svelte-1widvzq"))&&lt(e,"class",n),a&5&&Ar(e,"active",i[2])},d(i){i&&Mr(e)}}}function Z9(t){let e,r,n;return{c(){e=Kl("svg"),r=Kl("circle"),lt(r,"cx","3"),lt(r,"cy","3"),lt(r,"r","2"),lt(e,"class",n=""+(jl(`dot filled ${t[0]}`)+" svelte-1widvzq")),lt(e,"viewBox","0 0 6 6"),lt(e,"xmlns","http://www.w3.org/2000/svg"),Ar(e,"active",t[2])},m(i,a){Qr(i,e,a),yt(e,r)},p(i,a){a&1&&n!==(n=""+(jl(`dot filled ${i[0]}`)+" svelte-1widvzq"))&&lt(e,"class",n),a&5&&Ar(e,"active",i[2])},d(i){i&&Mr(e)}}}function $9(t){let e;function r(a,s){return a[1]?Z9:J9}let n=r(t),i=n(t);return{c(){i.c(),e=qh()},m(a,s){i.m(a,s),Qr(a,e,s)},p(a,[s]){n===(n=r(a))&&i?i.p(a,s):(i.d(1),i=n(a),i&&(i.c(),i.m(e.parentNode,e)))},i:zr,o:zr,d(a){i.d(a),a&&Mr(e)}}}function eG(t,e,r){let{className:n=""}=e,{isFilled:i}=e,{isActive:a}=e;return t.$$set=s=>{"className"in s&&r(0,n=s.className),"isFilled"in s&&r(1,i=s.isFilled),"isActive"in s&&r(2,a=s.isActive)},[n,i,a]}var vy=class extends Cs{constructor(e){super();document.getElementById("svelte-1widvzq-style")||X9(),So(this,e,eG,$9,fy,{className:0,isFilled:1,isActive:2})}},tG=t=>({}),c2=t=>({metadata:null}),rG=t=>({metadata:t&1}),f2=t=>({metadata:t[3]});function nG(t){let e,r=t[2].default,n=t2(r,t,t[1],c2);return{c(){n&&n.c()},m(i,a){n&&n.m(i,a),e=!0},p(i,a){n&&n.p&&a&2&&n2(n,r,i,i[1],a,tG,c2)},i(i){e||(Jt(n,i),e=!0)},o(i){hr(n,i),e=!1},d(i){n&&n.d(i)}}}function iG(t){let e,r,n,i={ctx:t,current:null,token:null,hasCatch:!1,pending:oG,then:sG,catch:aG,value:3,blocks:[,,,]};return o2(r=t[0],i),{c(){e=qh(),i.block.c()},m(a,s){Qr(a,e,s),i.block.m(a,i.anchor=s),i.mount=()=>e.parentNode,i.anchor=e,n=!0},p(a,s){if(t=a,i.ctx=t,!(s&1&&r!==(r=t[0])&&o2(r,i))){let l=t.slice();l[3]=i.resolved,i.block.p(l,s)}},i(a){n||(Jt(i.block),n=!0)},o(a){for(let s=0;s<3;s+=1){let l=i.blocks[s];hr(l)}n=!1},d(a){a&&Mr(e),i.block.d(a),i.token=null,i=null}}}function aG(t){return{c:zr,m:zr,p:zr,i:zr,o:zr,d:zr}}function sG(t){let e,r=t[2].default,n=t2(r,t,t[1],f2);return{c(){n&&n.c()},m(i,a){n&&n.m(i,a),e=!0},p(i,a){n&&n.p&&a&3&&n2(n,r,i,i[1],a,rG,f2)},i(i){e||(Jt(n,i),e=!0)},o(i){hr(n,i),e=!1},d(i){n&&n.d(i)}}}function oG(t){return{c:zr,m:zr,p:zr,i:zr,o:zr,d:zr}}function lG(t){let e,r,n,i,a=[iG,nG],s=[];function l(u,f){return u[0]?0:1}return e=l(t),r=s[e]=a[e](t),{c(){r.c(),n=qh()},m(u,f){s[e].m(u,f),Qr(u,n,f),i=!0},p(u,[f]){let d=e;e=l(u),e===d?s[e].p(u,f):(bo(),hr(s[d],1,1,()=>{s[d]=null}),xo(),r=s[e],r?r.p(u,f):(r=s[e]=a[e](u),r.c()),Jt(r,1),r.m(n.parentNode,n))},i(u){i||(Jt(r),i=!0)},o(u){hr(r),i=!1},d(u){s[e].d(u),u&&Mr(n)}}}function uG(t,e,r){let{$$slots:n={},$$scope:i}=e,{metadata:a}=e;return t.$$set=s=>{"metadata"in s&&r(0,a=s.metadata),"$$scope"in s&&r(1,i=s.$$scope)},[a,i,n]}var _y=class extends Cs{constructor(e){super();So(this,e,uG,lG,Uh,{metadata:0})}};function cG(){return navigator.appVersion.indexOf("Mac")!==-1}function Yh(t){return cG()?t.metaKey:t.ctrlKey}function fG(...t){return window.moment.weekdaysShort(!0)}function d2(t){return t.isoWeekday()===6||t.isoWeekday()===7}function dG(t){return t[0].weekday(0)}function hG(t,...e){let r=window.moment().locale(),n=[],i,a=t.clone().locale(r).date(1),s=a.weekday(),l=a.clone().subtract(s,"days");for(let u=0;u<42;u++)u%7==0&&(i={days:[],weekNum:l.week()},n.push(i)),i.days.push(l),l=l.clone().add(1,"days");return n}function pG(){var t=Yt("style");t.id="svelte-q3wqg9-style",t.textContent=".day.svelte-q3wqg9{background-color:var(--color-background-day);border-radius:4px;color:var(--color-text-day);cursor:pointer;font-size:0.8em;height:100%;padding:4px;position:relative;text-align:center;transition:background-color 0.1s ease-in, color 0.1s ease-in;vertical-align:baseline}.day.svelte-q3wqg9:hover{background-color:var(--interactive-hover)}.day.active.svelte-q3wqg9:hover{background-color:var(--interactive-accent-hover)}.adjacent-month.svelte-q3wqg9{opacity:0.25}.today.svelte-q3wqg9{color:var(--color-text-today)}.day.svelte-q3wqg9:active,.active.svelte-q3wqg9,.active.today.svelte-q3wqg9{color:var(--text-on-accent);background-color:var(--interactive-accent)}.dot-container.svelte-q3wqg9{display:flex;flex-wrap:wrap;justify-content:center;line-height:6px;min-height:6px}",yt(document.head,t)}function h2(t,e,r){let n=t.slice();return n[11]=e[r],n}function p2(t){let e,r,n=[t[11]],i={};for(let a=0;a<n.length;a+=1)i=bc(i,n[a]);return e=new vy({props:i}),{c(){Ua(e.$$.fragment)},m(a,s){oa(e,a,s),r=!0},p(a,s){let l=s&128?Kh(n,[yy(a[11])]):{};e.$set(l)},i(a){r||(Jt(e.$$.fragment,a),r=!0)},o(a){hr(e.$$.fragment,a),r=!1},d(a){la(e,a)}}}function gG(t){let e,r=t[0].format("D")+"",n,i,a,s,l,u,f,d=t[7].dots,h=[];for(let _=0;_<d.length;_+=1)h[_]=p2(h2(t,d,_));let g=_=>hr(h[_],1,1,()=>{h[_]=null}),y=[{class:s=`day ${t[7].classes.join(" ")}`},t[7].dataAttributes||{}],m={};for(let _=0;_<y.length;_+=1)m=bc(m,y[_]);return{c(){e=Yt("div"),n=Eo(r),i=Yn(),a=Yt("div");for(let _=0;_<h.length;_+=1)h[_].c();lt(a,"class","dot-container svelte-q3wqg9"),i2(e,m),Ar(e,"active",t[6]===Hh(t[0],"day")),Ar(e,"adjacent-month",!t[0].isSame(t[5],"month")),Ar(e,"today",t[0].isSame(t[4],"day")),Ar(e,"svelte-q3wqg9",!0)},m(_,E){Qr(_,e,E),yt(e,n),yt(e,i),yt(e,a);for(let w=0;w<h.length;w+=1)h[w].m(a,null);l=!0,u||(f=[Ma(e,"click",function(){sa(t[2]&&t[8])&&(t[2]&&t[8]).apply(this,arguments)}),Ma(e,"contextmenu",function(){sa(t[3]&&t[9])&&(t[3]&&t[9]).apply(this,arguments)}),Ma(e,"pointerover",function(){sa(t[1]&&t[10])&&(t[1]&&t[10]).apply(this,arguments)})],u=!0)},p(_,E){if(t=_,(!l||E&1)&&r!==(r=t[0].format("D")+"")&&xc(n,r),E&128){d=t[7].dots;let w;for(w=0;w<d.length;w+=1){let b=h2(t,d,w);h[w]?(h[w].p(b,E),Jt(h[w],1)):(h[w]=p2(b),h[w].c(),Jt(h[w],1),h[w].m(a,null))}for(bo(),w=d.length;w<h.length;w+=1)g(w);xo()}i2(e,m=Kh(y,[(!l||E&128&&s!==(s=`day ${t[7].classes.join(" ")}`))&&{class:s},E&128&&(t[7].dataAttributes||{})])),Ar(e,"active",t[6]===Hh(t[0],"day")),Ar(e,"adjacent-month",!t[0].isSame(t[5],"month")),Ar(e,"today",t[0].isSame(t[4],"day")),Ar(e,"svelte-q3wqg9",!0)},i(_){if(!l){for(let E=0;E<d.length;E+=1)Jt(h[E]);l=!0}},o(_){h=h.filter(Boolean);for(let E=0;E<h.length;E+=1)hr(h[E]);l=!1},d(_){_&&Mr(e),Fh(h,_),u=!1,ws(f)}}}function mG(t){let e,r,n;return r=new _y({props:{metadata:t[7],$$slots:{default:[gG,({metadata:i})=>({7:i}),({metadata:i})=>i?128:0]},$$scope:{ctx:t}}}),{c(){e=Yt("td"),Ua(r.$$.fragment)},m(i,a){Qr(i,e,a),oa(r,e,null),n=!0},p(i,[a]){let s={};a&128&&(s.metadata=i[7]),a&16639&&(s.$$scope={dirty:a,ctx:i}),r.$set(s)},i(i){n||(Jt(r.$$.fragment,i),n=!0)},o(i){hr(r.$$.fragment,i),n=!1},d(i){i&&Mr(e),la(r)}}}function yG(t,e,r){let{date:n}=e,{metadata:i}=e,{onHover:a}=e,{onClick:s}=e,{onContextMenu:l}=e,{today:u}=e,{displayedMonth:f=null}=e,{selectedId:d=null}=e,h=m=>s(n,Yh(m)),g=m=>l(n,m),y=m=>a(n,m.target,Yh(m));return t.$$set=m=>{"date"in m&&r(0,n=m.date),"metadata"in m&&r(7,i=m.metadata),"onHover"in m&&r(1,a=m.onHover),"onClick"in m&&r(2,s=m.onClick),"onContextMenu"in m&&r(3,l=m.onContextMenu),"today"in m&&r(4,u=m.today),"displayedMonth"in m&&r(5,f=m.displayedMonth),"selectedId"in m&&r(6,d=m.selectedId)},[n,a,s,l,u,f,d,i,h,g,y]}var g2=class extends Cs{constructor(e){super();document.getElementById("svelte-q3wqg9-style")||pG(),So(this,e,yG,mG,Uh,{date:0,metadata:7,onHover:1,onClick:2,onContextMenu:3,today:4,displayedMonth:5,selectedId:6})}};function vG(){var t=Yt("style");t.id="svelte-156w7na-style",t.textContent=".arrow.svelte-156w7na.svelte-156w7na{align-items:center;cursor:pointer;display:flex;justify-content:center;width:24px}.arrow.is-mobile.svelte-156w7na.svelte-156w7na{width:32px}.right.svelte-156w7na.svelte-156w7na{transform:rotate(180deg)}.arrow.svelte-156w7na svg.svelte-156w7na{color:var(--color-arrow);height:16px;width:16px}",yt(document.head,t)}function _G(t){let e,r,n,i,a;return{c(){e=Yt("div"),r=Kl("svg"),n=Kl("path"),lt(n,"fill","currentColor"),lt(n,"d","M34.52 239.03L228.87 44.69c9.37-9.37 24.57-9.37 33.94 0l22.67 22.67c9.36 9.36 9.37 24.52.04 33.9L131.49 256l154.02 154.75c9.34 9.38 9.32 24.54-.04 33.9l-22.67 22.67c-9.37 9.37-24.57 9.37-33.94 0L34.52 272.97c-9.37-9.37-9.37-24.57 0-33.94z"),lt(r,"focusable","false"),lt(r,"role","img"),lt(r,"xmlns","http://www.w3.org/2000/svg"),lt(r,"viewBox","0 0 320 512"),lt(r,"class","svelte-156w7na"),lt(e,"class","arrow svelte-156w7na"),lt(e,"aria-label",t[1]),Ar(e,"is-mobile",t[3]),Ar(e,"right",t[2]==="right")},m(s,l){Qr(s,e,l),yt(e,r),yt(r,n),i||(a=Ma(e,"click",function(){sa(t[0])&&t[0].apply(this,arguments)}),i=!0)},p(s,[l]){t=s,l&2&&lt(e,"aria-label",t[1]),l&4&&Ar(e,"right",t[2]==="right")},i:zr,o:zr,d(s){s&&Mr(e),i=!1,a()}}}function wG(t,e,r){let{onClick:n}=e,{tooltip:i}=e,{direction:a}=e,s=window.app.isMobile;return t.$$set=l=>{"onClick"in l&&r(0,n=l.onClick),"tooltip"in l&&r(1,i=l.tooltip),"direction"in l&&r(2,a=l.direction)},[n,i,a,s]}var wy=class extends Cs{constructor(e){super();document.getElementById("svelte-156w7na-style")||vG(),So(this,e,wG,_G,fy,{onClick:0,tooltip:1,direction:2})}};function EG(){var t=Yt("style");t.id="svelte-1vwr9dd-style",t.textContent=".nav.svelte-1vwr9dd.svelte-1vwr9dd{align-items:center;display:flex;margin:0.6em 0 1em;padding:0 8px;width:100%}.nav.is-mobile.svelte-1vwr9dd.svelte-1vwr9dd{padding:0}.title.svelte-1vwr9dd.svelte-1vwr9dd{color:var(--color-text-title);font-size:1.5em;margin:0}.is-mobile.svelte-1vwr9dd .title.svelte-1vwr9dd{font-size:1.3em}.month.svelte-1vwr9dd.svelte-1vwr9dd{font-weight:500;text-transform:capitalize}.year.svelte-1vwr9dd.svelte-1vwr9dd{color:var(--interactive-accent)}.right-nav.svelte-1vwr9dd.svelte-1vwr9dd{display:flex;justify-content:center;margin-left:auto}.reset-button.svelte-1vwr9dd.svelte-1vwr9dd{cursor:pointer;border-radius:4px;color:var(--text-muted);font-size:0.7em;font-weight:600;letter-spacing:1px;margin:0 4px;padding:0px 4px;text-transform:uppercase}.is-mobile.svelte-1vwr9dd .reset-button.svelte-1vwr9dd{display:none}",yt(document.head,t)}function CG(t){let e,r,n,i=t[0].format("MMM")+"",a,s,l,u=t[0].format("YYYY")+"",f,d,h,g,y,m,_,E,w,b,k;return g=new wy({props:{direction:"left",onClick:t[3],tooltip:"Previous Month"}}),E=new wy({props:{direction:"right",onClick:t[2],tooltip:"Next Month"}}),{c(){e=Yt("div"),r=Yt("h3"),n=Yt("span"),a=Eo(i),s=Yn(),l=Yt("span"),f=Eo(u),d=Yn(),h=Yt("div"),Ua(g.$$.fragment),y=Yn(),m=Yt("div"),m.textContent=`${t[4]}`,_=Yn(),Ua(E.$$.fragment),lt(n,"class","month svelte-1vwr9dd"),lt(l,"class","year svelte-1vwr9dd"),lt(r,"class","title svelte-1vwr9dd"),lt(m,"class","reset-button svelte-1vwr9dd"),lt(h,"class","right-nav svelte-1vwr9dd"),lt(e,"class","nav svelte-1vwr9dd"),Ar(e,"is-mobile",t[5])},m(N,D){Qr(N,e,D),yt(e,r),yt(r,n),yt(n,a),yt(r,s),yt(r,l),yt(l,f),yt(e,d),yt(e,h),oa(g,h,null),yt(h,y),yt(h,m),yt(h,_),oa(E,h,null),w=!0,b||(k=[Ma(r,"click",function(){sa(t[1])&&t[1].apply(this,arguments)}),Ma(m,"click",function(){sa(t[1])&&t[1].apply(this,arguments)})],b=!0)},p(N,[D]){t=N,(!w||D&1)&&i!==(i=t[0].format("MMM")+"")&&xc(a,i),(!w||D&1)&&u!==(u=t[0].format("YYYY")+"")&&xc(f,u);let B={};D&8&&(B.onClick=t[3]),g.$set(B);let ee={};D&4&&(ee.onClick=t[2]),E.$set(ee)},i(N){w||(Jt(g.$$.fragment,N),Jt(E.$$.fragment,N),w=!0)},o(N){hr(g.$$.fragment,N),hr(E.$$.fragment,N),w=!1},d(N){N&&Mr(e),la(g),la(E),b=!1,ws(k)}}}function bG(t,e,r){let{displayedMonth:n}=e,{today:i}=e,{resetDisplayedMonth:a}=e,{incrementDisplayedMonth:s}=e,{decrementDisplayedMonth:l}=e,u=i.calendar().split(/\d|\s/)[0],f=window.app.isMobile;return t.$$set=d=>{"displayedMonth"in d&&r(0,n=d.displayedMonth),"today"in d&&r(6,i=d.today),"resetDisplayedMonth"in d&&r(1,a=d.resetDisplayedMonth),"incrementDisplayedMonth"in d&&r(2,s=d.incrementDisplayedMonth),"decrementDisplayedMonth"in d&&r(3,l=d.decrementDisplayedMonth)},[n,a,s,l,u,f,i]}var m2=class extends Cs{constructor(e){super();document.getElementById("svelte-1vwr9dd-style")||EG(),So(this,e,bG,CG,fy,{displayedMonth:0,today:6,resetDisplayedMonth:1,incrementDisplayedMonth:2,decrementDisplayedMonth:3})}};function xG(){var t=Yt("style");t.id="svelte-egt0yd-style",t.textContent="td.svelte-egt0yd{border-right:1px solid var(--background-modifier-border)}.week-num.svelte-egt0yd{background-color:var(--color-background-weeknum);border-radius:4px;color:var(--color-text-weeknum);cursor:pointer;font-size:0.65em;height:100%;padding:4px;text-align:center;transition:background-color 0.1s ease-in, color 0.1s ease-in;vertical-align:baseline}.week-num.svelte-egt0yd:hover{background-color:var(--interactive-hover)}.week-num.active.svelte-egt0yd:hover{background-color:var(--interactive-accent-hover)}.active.svelte-egt0yd{color:var(--text-on-accent);background-color:var(--interactive-accent)}.dot-container.svelte-egt0yd{display:flex;flex-wrap:wrap;justify-content:center;line-height:6px;min-height:6px}",yt(document.head,t)}function y2(t,e,r){let n=t.slice();return n[11]=e[r],n}function v2(t){let e,r,n=[t[11]],i={};for(let a=0;a<n.length;a+=1)i=bc(i,n[a]);return e=new vy({props:i}),{c(){Ua(e.$$.fragment)},m(a,s){oa(e,a,s),r=!0},p(a,s){let l=s&64?Kh(n,[yy(a[11])]):{};e.$set(l)},i(a){r||(Jt(e.$$.fragment,a),r=!0)},o(a){hr(e.$$.fragment,a),r=!1},d(a){la(e,a)}}}function SG(t){let e,r,n,i,a,s,l,u,f=t[6].dots,d=[];for(let g=0;g<f.length;g+=1)d[g]=v2(y2(t,f,g));let h=g=>hr(d[g],1,1,()=>{d[g]=null});return{c(){e=Yt("div"),r=Eo(t[0]),n=Yn(),i=Yt("div");for(let g=0;g<d.length;g+=1)d[g].c();lt(i,"class","dot-container svelte-egt0yd"),lt(e,"class",a=""+(jl(`week-num ${t[6].classes.join(" ")}`)+" svelte-egt0yd")),Ar(e,"active",t[5]===Hh(t[1][0],"week"))},m(g,y){Qr(g,e,y),yt(e,r),yt(e,n),yt(e,i);for(let m=0;m<d.length;m+=1)d[m].m(i,null);s=!0,l||(u=[Ma(e,"click",function(){sa(t[3]&&t[8])&&(t[3]&&t[8]).apply(this,arguments)}),Ma(e,"contextmenu",function(){sa(t[4]&&t[9])&&(t[4]&&t[9]).apply(this,arguments)}),Ma(e,"pointerover",function(){sa(t[2]&&t[10])&&(t[2]&&t[10]).apply(this,arguments)})],l=!0)},p(g,y){if(t=g,(!s||y&1)&&xc(r,t[0]),y&64){f=t[6].dots;let m;for(m=0;m<f.length;m+=1){let _=y2(t,f,m);d[m]?(d[m].p(_,y),Jt(d[m],1)):(d[m]=v2(_),d[m].c(),Jt(d[m],1),d[m].m(i,null))}for(bo(),m=f.length;m<d.length;m+=1)h(m);xo()}(!s||y&64&&a!==(a=""+(jl(`week-num ${t[6].classes.join(" ")}`)+" svelte-egt0yd")))&&lt(e,"class",a),y&98&&Ar(e,"active",t[5]===Hh(t[1][0],"week"))},i(g){if(!s){for(let y=0;y<f.length;y+=1)Jt(d[y]);s=!0}},o(g){d=d.filter(Boolean);for(let y=0;y<d.length;y+=1)hr(d[y]);s=!1},d(g){g&&Mr(e),Fh(d,g),l=!1,ws(u)}}}function TG(t){let e,r,n;return r=new _y({props:{metadata:t[6],$$slots:{default:[SG,({metadata:i})=>({6:i}),({metadata:i})=>i?64:0]},$$scope:{ctx:t}}}),{c(){e=Yt("td"),Ua(r.$$.fragment),lt(e,"class","svelte-egt0yd")},m(i,a){Qr(i,e,a),oa(r,e,null),n=!0},p(i,[a]){let s={};a&64&&(s.metadata=i[6]),a&16639&&(s.$$scope={dirty:a,ctx:i}),r.$set(s)},i(i){n||(Jt(r.$$.fragment,i),n=!0)},o(i){hr(r.$$.fragment,i),n=!1},d(i){i&&Mr(e),la(r)}}}function AG(t,e,r){let{weekNum:n}=e,{days:i}=e,{metadata:a}=e,{onHover:s}=e,{onClick:l}=e,{onContextMenu:u}=e,{selectedId:f=null}=e,d,h=m=>l(d,Yh(m)),g=m=>u(i[0],m),y=m=>s(d,m.target,Yh(m));return t.$$set=m=>{"weekNum"in m&&r(0,n=m.weekNum),"days"in m&&r(1,i=m.days),"metadata"in m&&r(6,a=m.metadata),"onHover"in m&&r(2,s=m.onHover),"onClick"in m&&r(3,l=m.onClick),"onContextMenu"in m&&r(4,u=m.onContextMenu),"selectedId"in m&&r(5,f=m.selectedId)},t.$$.update=()=>{t.$$.dirty&2&&r(7,d=dG(i))},[n,i,s,l,u,f,a,d,h,g,y]}var _2=class extends Cs{constructor(e){super();document.getElementById("svelte-egt0yd-style")||xG(),So(this,e,AG,TG,Uh,{weekNum:0,days:1,metadata:6,onHover:2,onClick:3,onContextMenu:4,selectedId:5})}};function w2(t){return M(this,null,function*(){let e={dots:[],classes:[],dataAttributes:{}};return(yield Promise.all(t)).reduce((n,i)=>({classes:[...n.classes,...i.classes||[]],dataAttributes:Object.assign(n.dataAttributes,i.dataAttributes),dots:[...n.dots,...i.dots||[]]}),e)})}function E2(t,e,...r){return w2(t.map(n=>n.getDailyMetadata(e)))}function C2(t,e,...r){return w2(t.map(n=>n.getWeeklyMetadata(e)))}function kG(){var t=Yt("style");t.id="svelte-pcimu8-style",t.textContent=".container.svelte-pcimu8{--color-background-heading:transparent;--color-background-day:transparent;--color-background-weeknum:transparent;--color-background-weekend:transparent;--color-dot:var(--text-muted);--color-arrow:var(--text-muted);--color-button:var(--text-muted);--color-text-title:var(--text-normal);--color-text-heading:var(--text-muted);--color-text-day:var(--text-normal);--color-text-today:var(--interactive-accent);--color-text-weeknum:var(--text-muted)}.container.svelte-pcimu8{padding:0 8px}.container.is-mobile.svelte-pcimu8{padding:0}th.svelte-pcimu8{text-align:center}.weekend.svelte-pcimu8{background-color:var(--color-background-weekend)}.calendar.svelte-pcimu8{border-collapse:collapse;width:100%}th.svelte-pcimu8{background-color:var(--color-background-heading);color:var(--color-text-heading);font-size:0.6em;letter-spacing:1px;padding:4px;text-transform:uppercase}",yt(document.head,t)}function b2(t,e,r){let n=t.slice();return n[18]=e[r],n}function x2(t,e,r){let n=t.slice();return n[21]=e[r],n}function S2(t,e,r){let n=t.slice();return n[24]=e[r],n}function T2(t,e,r){let n=t.slice();return n[27]=e[r],n}function A2(t){let e;return{c(){e=Yt("col")},m(r,n){Qr(r,e,n)},d(r){r&&Mr(e)}}}function k2(t){let e;return{c(){e=Yt("col"),lt(e,"class","svelte-pcimu8"),Ar(e,"weekend",d2(t[27]))},m(r,n){Qr(r,e,n)},p(r,n){n&16384&&Ar(e,"weekend",d2(r[27]))},d(r){r&&Mr(e)}}}function I2(t){let e;return{c(){e=Yt("th"),e.textContent="W",lt(e,"class","svelte-pcimu8")},m(r,n){Qr(r,e,n)},d(r){r&&Mr(e)}}}function R2(t){let e,r=t[24]+"",n;return{c(){e=Yt("th"),n=Eo(r),lt(e,"class","svelte-pcimu8")},m(i,a){Qr(i,e,a),yt(e,n)},p(i,a){a&32768&&r!==(r=i[24]+"")&&xc(n,r)},d(i){i&&Mr(e)}}}function N2(t){let e,r,n=[t[18],{metadata:C2(t[8],t[18].days[0],t[10])},{onClick:t[7]},{onContextMenu:t[5]},{onHover:t[3]},{selectedId:t[9]}],i={};for(let a=0;a<n.length;a+=1)i=bc(i,n[a]);return e=new _2({props:i}),{c(){Ua(e.$$.fragment)},m(a,s){oa(e,a,s),r=!0},p(a,s){let l=s&18344?Kh(n,[s&16384&&yy(a[18]),s&17664&&{metadata:C2(a[8],a[18].days[0],a[10])},s&128&&{onClick:a[7]},s&32&&{onContextMenu:a[5]},s&8&&{onHover:a[3]},s&512&&{selectedId:a[9]}]):{};e.$set(l)},i(a){r||(Jt(e.$$.fragment,a),r=!0)},o(a){hr(e.$$.fragment,a),r=!1},d(a){la(e,a)}}}function B2(t,e){let r,n,i;return n=new g2({props:{date:e[21],today:e[10],displayedMonth:e[0],onClick:e[6],onContextMenu:e[4],onHover:e[2],metadata:E2(e[8],e[21],e[10]),selectedId:e[9]}}),{key:t,first:null,c(){r=qh(),Ua(n.$$.fragment),this.first=r},m(a,s){Qr(a,r,s),oa(n,a,s),i=!0},p(a,s){e=a;let l={};s&16384&&(l.date=e[21]),s&1024&&(l.today=e[10]),s&1&&(l.displayedMonth=e[0]),s&64&&(l.onClick=e[6]),s&16&&(l.onContextMenu=e[4]),s&4&&(l.onHover=e[2]),s&17664&&(l.metadata=E2(e[8],e[21],e[10])),s&512&&(l.selectedId=e[9]),n.$set(l)},i(a){i||(Jt(n.$$.fragment,a),i=!0)},o(a){hr(n.$$.fragment,a),i=!1},d(a){a&&Mr(r),la(n,a)}}}function D2(t,e){let r,n,i=[],a=new Map,s,l,u=e[1]&&N2(e),f=e[18].days,d=h=>h[21].format();for(let h=0;h<f.length;h+=1){let g=x2(e,f,h),y=d(g);a.set(y,i[h]=B2(y,g))}return{key:t,first:null,c(){r=Yt("tr"),u&&u.c(),n=Yn();for(let h=0;h<i.length;h+=1)i[h].c();s=Yn(),this.first=r},m(h,g){Qr(h,r,g),u&&u.m(r,null),yt(r,n);for(let y=0;y<i.length;y+=1)i[y].m(r,null);yt(r,s),l=!0},p(h,g){e=h,e[1]?u?(u.p(e,g),g&2&&Jt(u,1)):(u=N2(e),u.c(),Jt(u,1),u.m(r,n)):u&&(bo(),hr(u,1,1,()=>{u=null}),xo()),g&18261&&(f=e[18].days,bo(),i=u2(i,g,d,1,e,f,a,r,l2,B2,s,x2),xo())},i(h){if(!l){Jt(u);for(let g=0;g<f.length;g+=1)Jt(i[g]);l=!0}},o(h){hr(u);for(let g=0;g<i.length;g+=1)hr(i[g]);l=!1},d(h){h&&Mr(r),u&&u.d();for(let g=0;g<i.length;g+=1)i[g].d()}}}function IG(t){let e,r,n,i,a,s,l,u,f,d,h,g,y=[],m=new Map,_;r=new m2({props:{today:t[10],displayedMonth:t[0],incrementDisplayedMonth:t[11],decrementDisplayedMonth:t[12],resetDisplayedMonth:t[13]}});let E=t[1]&&A2(),w=t[14][1].days,b=[];for(let q=0;q<w.length;q+=1)b[q]=k2(T2(t,w,q));let k=t[1]&&I2(),N=t[15],D=[];for(let q=0;q<N.length;q+=1)D[q]=R2(S2(t,N,q));let B=t[14],ee=q=>q[18].weekNum;for(let q=0;q<B.length;q+=1){let U=b2(t,B,q),oe=ee(U);m.set(oe,y[q]=D2(oe,U))}return{c(){e=Yt("div"),Ua(r.$$.fragment),n=Yn(),i=Yt("table"),a=Yt("colgroup"),E&&E.c(),s=Yn();for(let q=0;q<b.length;q+=1)b[q].c();l=Yn(),u=Yt("thead"),f=Yt("tr"),k&&k.c(),d=Yn();for(let q=0;q<D.length;q+=1)D[q].c();h=Yn(),g=Yt("tbody");for(let q=0;q<y.length;q+=1)y[q].c();lt(i,"class","calendar svelte-pcimu8"),lt(e,"id","calendar-container"),lt(e,"class","container svelte-pcimu8"),Ar(e,"is-mobile",t[16])},m(q,U){Qr(q,e,U),oa(r,e,null),yt(e,n),yt(e,i),yt(i,a),E&&E.m(a,null),yt(a,s);for(let oe=0;oe<b.length;oe+=1)b[oe].m(a,null);yt(i,l),yt(i,u),yt(u,f),k&&k.m(f,null),yt(f,d);for(let oe=0;oe<D.length;oe+=1)D[oe].m(f,null);yt(i,h),yt(i,g);for(let oe=0;oe<y.length;oe+=1)y[oe].m(g,null);_=!0},p(q,[U]){let oe={};if(U&1024&&(oe.today=q[10]),U&1&&(oe.displayedMonth=q[0]),r.$set(oe),q[1]?E||(E=A2(),E.c(),E.m(a,s)):E&&(E.d(1),E=null),U&16384){w=q[14][1].days;let ae;for(ae=0;ae<w.length;ae+=1){let Ee=T2(q,w,ae);b[ae]?b[ae].p(Ee,U):(b[ae]=k2(Ee),b[ae].c(),b[ae].m(a,null))}for(;ae<b.length;ae+=1)b[ae].d(1);b.length=w.length}if(q[1]?k||(k=I2(),k.c(),k.m(f,d)):k&&(k.d(1),k=null),U&32768){N=q[15];let ae;for(ae=0;ae<N.length;ae+=1){let Ee=S2(q,N,ae);D[ae]?D[ae].p(Ee,U):(D[ae]=R2(Ee),D[ae].c(),D[ae].m(f,null))}for(;ae<D.length;ae+=1)D[ae].d(1);D.length=N.length}U&18431&&(B=q[14],bo(),y=u2(y,U,ee,1,q,B,m,g,l2,D2,null,b2),xo())},i(q){if(!_){Jt(r.$$.fragment,q);for(let U=0;U<B.length;U+=1)Jt(y[U]);_=!0}},o(q){hr(r.$$.fragment,q);for(let U=0;U<y.length;U+=1)hr(y[U]);_=!1},d(q){q&&Mr(e),la(r),E&&E.d(),Fh(b,q),k&&k.d(),Fh(D,q);for(let U=0;U<y.length;U+=1)y[U].d()}}}function RG(t,e,r){let{localeData:n}=e,{showWeekNums:i=!1}=e,{onHoverDay:a}=e,{onHoverWeek:s}=e,{onContextMenuDay:l}=e,{onContextMenuWeek:u}=e,{onClickDay:f}=e,{onClickWeek:d}=e,{sources:h=[]}=e,{selectedId:g}=e,{today:y=window.moment()}=e,{displayedMonth:m=y}=e,_,E,w=window.app.isMobile;function b(){r(0,m=m.clone().add(1,"month"))}function k(){r(0,m=m.clone().subtract(1,"month"))}function N(){r(0,m=y.clone())}return t.$$set=D=>{"localeData"in D&&r(17,n=D.localeData),"showWeekNums"in D&&r(1,i=D.showWeekNums),"onHoverDay"in D&&r(2,a=D.onHoverDay),"onHoverWeek"in D&&r(3,s=D.onHoverWeek),"onContextMenuDay"in D&&r(4,l=D.onContextMenuDay),"onContextMenuWeek"in D&&r(5,u=D.onContextMenuWeek),"onClickDay"in D&&r(6,f=D.onClickDay),"onClickWeek"in D&&r(7,d=D.onClickWeek),"sources"in D&&r(8,h=D.sources),"selectedId"in D&&r(9,g=D.selectedId),"today"in D&&r(10,y=D.today),"displayedMonth"in D&&r(0,m=D.displayedMonth)},t.$$.update=()=>{t.$$.dirty&131073&&r(14,_=hG(m,n)),t.$$.dirty&132096&&r(15,E=fG(y,n))},[m,i,a,s,l,u,f,d,h,g,y,b,k,N,_,E,w,n]}var Wh=class extends Cs{constructor(e){super();document.getElementById("svelte-pcimu8-style")||kG(),So(this,e,RG,IG,Uh,{localeData:17,showWeekNums:1,onHoverDay:2,onHoverWeek:3,onContextMenuDay:4,onContextMenuWeek:5,onClickDay:6,onClickWeek:7,sources:8,selectedId:9,today:10,displayedMonth:0,incrementDisplayedMonth:11,decrementDisplayedMonth:12,resetDisplayedMonth:13})}get incrementDisplayedMonth(){return this.$$.ctx[11]}get decrementDisplayedMonth(){return this.$$.ctx[12]}get resetDisplayedMonth(){return this.$$.ctx[13]}};var zh=_t(Ba());function NG(t){let e,r,n,i=`${t[1]}px`,a=`${t[2]}px`,s,l=[OG,DG],u=[];function f(d,h){return d[3]?0:1}return r=f(t,-1),n=u[r]=l[r](t),{c(){e=fe("div"),n.c(),re(e,"class","calendarContainer"),Ze(e,"width",i,!1),Ze(e,"height",a,!1)},m(d,h){Se(d,e,h),u[r].m(e,null),s=!0},p(d,h){let g=r;r=f(d,h),r===g?u[r].p(d,h):(mh(),Oi(u[g],1,1,()=>{u[g]=null}),yh(),n=u[r],n?n.p(d,h):(n=u[r]=l[r](d),n.c()),hi(n,1),n.m(e,null)),h&2&&i!==(i=`${d[1]}px`)&&Ze(e,"width",i,!1),h&4&&a!==(a=`${d[2]}px`)&&Ze(e,"height",a,!1)},i(d){s||(hi(n),s=!0)},o(d){Oi(n),s=!1},d(d){d&&xe(e),u[r].d()}}}function BG(t){let e,r,n,i,a=[PG,LG],s=[];function l(u,f){return u[3]?0:1}return r=l(t,-1),n=s[r]=a[r](t),{c(){e=fe("div"),n.c(),re(e,"class","calendarContainer")},m(u,f){Se(u,e,f),s[r].m(e,null),i=!0},p(u,f){let d=r;r=l(u,f),r===d?s[r].p(u,f):(mh(),Oi(s[d],1,1,()=>{s[d]=null}),yh(),n=s[r],n?n.p(u,f):(n=s[r]=a[r](u),n.c()),hi(n,1),n.m(e,null))},i(u){i||(hi(n),i=!0)},o(u){Oi(n),i=!1},d(u){u&&xe(e),s[r].d()}}}function DG(t){let e,r,n,i,a,s;function l(h){t[15](h)}function u(h){t[16](h)}function f(h){t[17](h)}let d={showWeekNums:!1,onClickDay:t[7]};return t[4]!==void 0&&(d.sources=t[4]),t[0]!==void 0&&(d.displayedMonth=t[0]),t[5]!==void 0&&(d.today=t[5]),r=new Wh({props:d}),Dn.push(()=>Oa(r,"sources",l)),Dn.push(()=>Oa(r,"displayedMonth",u)),Dn.push(()=>Oa(r,"today",f)),{c(){e=fe("div"),sc(r.$$.fragment),Ze(e,"--theme-color",t[6].settings.dailyNoteDotColor)},m(h,g){Se(h,e,g),Nl(r,e,null),s=!0},p(h,g){let y={};!n&&g&16&&(n=!0,y.sources=h[4],Da(()=>n=!1)),!i&&g&1&&(i=!0,y.displayedMonth=h[0],Da(()=>i=!1)),!a&&g&32&&(a=!0,y.today=h[5],Da(()=>a=!1)),r.$set(y),(!s||g&64)&&Ze(e,"--theme-color",h[6].settings.dailyNoteDotColor)},i(h){s||(hi(r.$$.fragment,h),s=!0)},o(h){Oi(r.$$.fragment,h),s=!1},d(h){h&&xe(e),co(r)}}}function OG(t){let e;return{c(){e=fe("p"),e.textContent="Loading..."},m(r,n){Se(r,e,n)},p:At,i:At,o:At,d(r){r&&xe(e)}}}function LG(t){let e,r,n,i,a,s;function l(h){t[12](h)}function u(h){t[13](h)}function f(h){t[14](h)}let d={showWeekNums:!1,onClickDay:t[7]};return t[4]!==void 0&&(d.sources=t[4]),t[0]!==void 0&&(d.displayedMonth=t[0]),t[5]!==void 0&&(d.today=t[5]),r=new Wh({props:d}),Dn.push(()=>Oa(r,"sources",l)),Dn.push(()=>Oa(r,"displayedMonth",u)),Dn.push(()=>Oa(r,"today",f)),{c(){e=fe("div"),sc(r.$$.fragment),Ze(e,"--daily-dot-color",t[6].settings.dailyNoteDotColor)},m(h,g){Se(h,e,g),Nl(r,e,null),s=!0},p(h,g){let y={};!n&&g&16&&(n=!0,y.sources=h[4],Da(()=>n=!1)),!i&&g&1&&(i=!0,y.displayedMonth=h[0],Da(()=>i=!1)),!a&&g&32&&(a=!0,y.today=h[5],Da(()=>a=!1)),r.$set(y),(!s||g&64)&&Ze(e,"--daily-dot-color",h[6].settings.dailyNoteDotColor)},i(h){s||(hi(r.$$.fragment,h),s=!0)},o(h){Oi(r.$$.fragment,h),s=!1},d(h){h&&xe(e),co(r)}}}function PG(t){let e;return{c(){e=fe("p"),e.textContent="Loading..."},m(r,n){Se(r,e,n)},p:At,i:At,o:At,d(r){r&&xe(e)}}}function MG(t){let e,r,n,i,a=[BG,NG],s=[];function l(u,f){return u[1]==0||u[2]==0?0:1}return e=l(t,-1),r=s[e]=a[e](t),{c(){r.c(),n=ia()},m(u,f){s[e].m(u,f),Se(u,n,f),i=!0},p(u,[f]){let d=e;e=l(u,f),e===d?s[e].p(u,f):(mh(),Oi(s[d],1,1,()=>{s[d]=null}),yh(),r=s[e],r?r.p(u,f):(r=s[e]=a[e](u),r.c()),hi(r,1),r.m(n.parentNode,n))},i(u){i||(hi(r),i=!0)},o(u){Oi(r),i=!1},d(u){s[e].d(u),u&&xe(n)}}}function UG(t,e,r){let{displayedMonth:n=window.moment()}=e,{width:i=0}=e,{height:a=0}=e,{include:s}=e,{exclude:l}=e,u=Bh(),f,d,h,g=!0,y,m=window.moment(),_=st.getInstance();function E(U){return Sr(this,void 0,void 0,function*(){r(6,_);let oe=U.clone().startOf("month").subtract(6,"days"),ae=U.clone().endOf("month").add(12,"days"),Ee=yield dr({startDate:oe,endDate:ae,include:s,exclude:l});if(zh.default.isEqual(Ee,h)&&zh.default.isEqual(u,Bh()))return;u=Bh();let Ie=zh.default.groupBy(Ee,Ne=>{var me;return window.moment((me=Ne.start.date)!==null&&me!==void 0?me:Ne.start.dateTime).startOf("day").format()});h=Ee;let Qe={getDailyMetadata:Ne=>Sr(this,void 0,void 0,function*(){let me=[];_.settings.activateDailyNoteAddon&&Ec(Ne)&&(me=[{isFilled:!0,className:"googleCalendarDailyDot",color:"default"}]);let ne=Ie[Ne.startOf("day").format()];return ne?(me=[...me,...Array(ne.length).fill({isFilled:!0,className:"googleCalendarDot",color:"default"})],{dataAttributes:{amount:ne.length+""},dots:me}):{dataAttributes:{amount:me.length+""},dots:me}})};r(3,g=!1),r(4,y=null),r(4,y=[Qe])})}let w=(U,oe)=>U.filter(ae=>ae.start.date?window.moment(ae.start.date).isSame(oe,"day"):window.moment(ae.start.dateTime).isSame(oe,"day")),b=(U,oe)=>{new Pi(w(h,U),"details",U,!1,()=>{Bi(),r(0,n)}).open()};lo(()=>{clearInterval(f),clearInterval(d)});function k(U){y=U,r(4,y)}function N(U){n=U,r(0,n)}function D(U){m=U,r(5,m),r(10,f),r(0,n),r(11,d)}function B(U){y=U,r(4,y)}function ee(U){n=U,r(0,n)}function q(U){m=U,r(5,m),r(10,f),r(0,n),r(11,d)}return t.$$set=U=>{"displayedMonth"in U&&r(0,n=U.displayedMonth),"width"in U&&r(1,i=U.width),"height"in U&&r(2,a=U.height),"include"in U&&r(8,s=U.include),"exclude"in U&&r(9,l=U.exclude)},t.$$.update=()=>{if(t.$$.dirty&3073){e:f&&clearInterval(f),r(10,f=setInterval(()=>E(n),1e3)),d&&clearInterval(d),r(11,d=setInterval(()=>r(5,m=window.moment()),6e4)),E(n)}},[n,i,a,g,y,m,_,b,s,l,f,d,k,N,D,B,ee,q]}var O2=class extends Cn{constructor(e){super();On(this,e,UG,MG,Bn,{displayedMonth:0,width:1,height:2,include:8,exclude:9})}},Qh=O2;function FG(t){fi(t,"svelte-1f1t9un",'.scheduleContainer.svelte-1f1t9un{padding:10px}.scheduleContent.svelte-1f1t9un{display:flex;flex-direction:column;align-items:flex-start;white-space:nowrap}.dayContainer.svelte-1f1t9un{display:flex;flex-direction:row;align-items:flex-start;justify-content:flex-start;border-bottom:1px solid white;margin:2px 0px;padding:2px 0px;flex-wrap:wrap}.dateDisplay.svelte-1f1t9un{display:flex;flex-direction:row;align-items:flex-end;width:105px;min-width:105px}.dayNumber.svelte-1f1t9un{border-radius:50%;-moz-border-radius:50%;-webkit-border-radius:50%;display:inline-block;font-weight:bold;line-height:40px;text-align:center;width:40px;min-width:40px;cursor:pointer}.today.svelte-1f1t9un{color:white;background:#4285f4;text-decoration:none}.dayText.svelte-1f1t9un{font-size:15px}.dayEvents.svelte-1f1t9un{display:flex;flex-direction:column;flex:1}.dayEvent.svelte-1f1t9un{display:flex;flex:1;flex-direction:row;align-items:center;padding:5px;border-radius:10px;cursor:pointer;flex-wrap:wrap}.dayEvent.svelte-1f1t9un:hover{background-color:rgba(128, 128, 128, 0.129)}.circleTime.svelte-1f1t9un{display:flex;flex-direction:row;width:220px;min-width:220px}.recurringCircleContainer.svelte-1f1t9un,.circleContainer.svelte-1f1t9un{position:relative;display:flex;width:30px;min-width:30px;height:30px;align-items:center;justify-content:center}.recurringCircleContainer.svelte-1f1t9un::after{content:"\u21BA";position:absolute;width:30px;height:30px;text-align:center;line-height:30px;font-size:30px;color:rgb(164, 164, 164);white-space:nowrap}.circle.svelte-1f1t9un{width:10px;min-width:10px;height:10px;border-radius:50%}.timeContainer.svelte-1f1t9un{width:150px;min-width:150px}.eventTitleContainer.svelte-1f1t9un{white-space:nowrap}')}function L2(t,e,r){let n=t.slice();return n[15]=e[r][0],n[1]=e[r][1],n}function P2(t,e,r){let n=t.slice();return n[18]=e[r],n}function qG(t){let e,r=[...t[2]],n=[];for(let i=0;i<r.length;i+=1)n[i]=U2(L2(t,r,i));return{c(){e=fe("div");for(let i=0;i<n.length;i+=1)n[i].c();re(e,"class","scheduleContent svelte-1f1t9un")},m(i,a){Se(i,e,a);for(let s=0;s<n.length;s+=1)n[s].m(e,null)},p(i,a){if(a&124){r=[...i[2]];let s;for(s=0;s<r.length;s+=1){let l=L2(i,r,s);n[s]?n[s].p(l,a):(n[s]=U2(l),n[s].c(),n[s].m(e,null))}for(;s<n.length;s+=1)n[s].d(1);n.length=r.length}},d(i){i&&xe(e),En(n,i)}}}function GG(t){let e;return{c(){e=fe("span"),e.textContent="LOADING"},m(r,n){Se(r,e,n)},p:At,d(r){r&&xe(e)}}}function M2(t){let e,r,n,i,a,s,l,u,f=t[3](t[18])+"",d,h,g,y,m=t[18].summary+"",_,E,w,b;function k(...N){return t[13](t[18],...N)}return{c(){e=fe("div"),r=fe("div"),n=fe("div"),i=fe("div"),s=Le(),l=fe("div"),u=fe("span"),d=xr(f),h=Le(),g=fe("div"),y=fe("span"),_=xr(m),E=Le(),re(i,"class","circle svelte-1f1t9un"),Ze(i,"background",Ku(t[18]),!1),re(n,"class",a=""+(Il(t[18].recurringEventId?"recurringCircleContainer":"circleContainer")+" svelte-1f1t9un")),re(l,"class","timeContainer svelte-1f1t9un"),re(r,"class","circleTime svelte-1f1t9un"),re(g,"class","eventTitleContainer svelte-1f1t9un"),re(e,"class","dayEvent svelte-1f1t9un")},m(N,D){Se(N,e,D),se(e,r),se(r,n),se(n,i),se(r,s),se(r,l),se(l,u),se(u,d),se(e,h),se(e,g),se(g,y),se(y,_),se(e,E),w||(b=at(e,"click",k),w=!0)},p(N,D){t=N},d(N){N&&xe(e),w=!1,b()}}}function U2(t){let e,r,n,i,a=t[15].slice(0,2)+"",s,l,u,f,d=t[15].slice(2)+"",h,g,y,m,_,E;function w(){return t[12](t[1])}let b=t[1],k=[];for(let N=0;N<b.length;N+=1)k[N]=M2(P2(t,b,N));return{c(){e=fe("div"),r=fe("div"),n=fe("div"),i=fe("span"),s=xr(a),u=Le(),f=fe("span"),h=xr(d),g=Le(),y=fe("div");for(let N=0;N<k.length;N+=1)k[N].c();m=Le(),re(n,"class",l=""+(Il(t[6](t[1][0])?"dayNumber today":"dayNumber")+" svelte-1f1t9un")),re(f,"class","dayText svelte-1f1t9un"),re(r,"class","dateDisplay svelte-1f1t9un"),re(y,"class","dayEvents svelte-1f1t9un"),re(e,"class","dayContainer svelte-1f1t9un")},m(N,D){Se(N,e,D),se(e,r),se(r,n),se(n,i),se(i,s),se(r,u),se(r,f),se(f,h),se(e,g),se(e,y);for(let B=0;B<k.length;B+=1)k[B].m(y,null);se(e,m),_||(E=at(n,"click",w),_=!0)},p(N,D){if(t=N,D&28){b=t[1];let B;for(B=0;B<b.length;B+=1){let ee=P2(t,b,B);k[B]?k[B].p(ee,D):(k[B]=M2(ee),k[B].c(),k[B].m(y,null))}for(;B<k.length;B+=1)k[B].d(1);k.length=b.length}},d(N){N&&xe(e),En(k,N),_=!1,E()}}}function VG(t){let e;function r(a,s){return a[0]?GG:qG}let n=r(t,-1),i=n(t);return{c(){e=fe("div"),i.c(),re(e,"class","scheduleContainer svelte-1f1t9un")},m(a,s){Se(a,e,s),i.m(e,null)},p(a,[s]){n===(n=r(a,s))&&i?i.p(a,s):(i.d(1),i=n(a),i&&(i.c(),i.m(e,null)))},i:At,o:At,d(a){a&&xe(e),i.d()}}}function jG(t,e,r){let{timeSpan:n=7}=e,{date:i=window.moment()}=e,{include:a}=e,{exclude:s}=e,l,u=new Map,f=!1,d=[],h=()=>Sr(void 0,void 0,void 0,function*(){let b=yield dr({startDate:i,endDate:i.clone().add(n,"day"),include:a,exclude:s});if(JSON.stringify(b)==JSON.stringify(d)){r(0,f=!1);return}u.clear(),r(1,d=b),d.forEach(k=>{let N=k.start.date?window.moment(k.start.date).format("DD MMM, ddd"):window.moment(k.start.dateTime).format("DD MMM, ddd");u.has(N)?u.get(N).push(k):u.set(N,[k])}),r(0,f=!1)}),g=b=>{if(b.start.date)return"All day";{let k=window.moment(b.start.dateTime).format("hh:mma"),N=window.moment(b.end.dateTime).format("hh:mma");return`${k}-${N}`}},y=(b,k)=>{k.shiftKey?window.open(b.htmlLink):new mi(b,()=>{Bi(),r(7,i),r(11,l)}).open()},m=b=>Sr(void 0,void 0,void 0,function*(){let k=window.moment(b.start.date||b.start.dateTime),N=yield dr({startDate:k});new Pi(N,"details",k,!1,()=>{Bi(),r(7,i),r(11,l)}).open()}),_=b=>{let k=window.moment(b.start.date||b.start.dateTime);return window.moment().local().isSame(k,"day")};lo(()=>{clearInterval(l)});let E=b=>m(b[0]),w=(b,k)=>y(b,k);return t.$$set=b=>{"timeSpan"in b&&r(8,n=b.timeSpan),"date"in b&&r(7,i=b.date),"include"in b&&r(9,a=b.include),"exclude"in b&&r(10,s=b.exclude)},t.$$.update=()=>{if(t.$$.dirty&2176){e:r(7,i),r(11,l),l&&clearInterval(l),r(0,f=!0),r(11,l=setInterval(h,5e3)),h()}},[f,d,u,g,y,m,_,i,n,a,s,l,E,w]}var F2=class extends Cn{constructor(e){super();On(this,e,jG,VG,Bn,{timeSpan:8,date:7,include:9,exclude:10},FG)}},Xh=F2;var q2=_t(require("obsidian")),Hl=class extends q2.MarkdownRenderChild{constructor(e,r,n){super(r);this.a=e,this.b=n}load(){this.comp=new this.a({target:this.containerEl,props:this.b})}unload(){this.comp.$destroy()}};function G2(t,e,r){return M(this,null,function*(){let n=(0,Jh.parseYaml)(t),{height:i,width:a,date:s,navigation:l,timespan:u,exclude:f,include:d,theme:h}=n,{type:g}=n;g||(g=vs.day);let y=["YYYY-MM-DD","YYYY.MM.DD","YYYY/MM/DD","MM-DD-YYYY","MM.DD.YYYY","MM/DD/YYYY","DD-MM-YYYY","DD.MM.YYYY","DD/MM/YYYY"];if(s==null||s=="today"||s=="tomorrow"||s=="yesterday"||window.moment(s,y,!0).isValid()){let m;s==null?m=void 0:s=="today"?m=window.moment():s=="tomorrow"?m=window.moment().add(1,"day"):s=="yesterday"?m=window.moment().subtract(1,"day"):m=window.moment(s),e.style.padding="10px",g==vs.web?Jh.Platform.isDesktopApp&&r.addChild(new Hl(Mh,e,{height:i!=null?i:500,width:a!=null?a:500,date:m,theme:h!=null?h:"auto"})):g==vs.day?r.addChild(new Hl(Ph,e,{height:i,width:a,date:m,navigation:l,include:d,exclude:f})):g==vs.month?r.addChild(new Hl(Qh,e,{height:i,width:a,displayedMonth:m,include:d,exclude:f})):g==vs.schedule&&r.addChild(new Hl(Xh,e,{timeSpan:u,date:m,include:d,exclude:f}))}})}var V2=_t(require("obsidian"));var Tc="google-calendar-view-day",Ey=class extends V2.ItemView{constructor(e){super(e)}getViewType(){return Tc}getDisplayText(){return"Timeline View"}getIcon(){return"calendar-with-checkmark"}onOpen(){return M(this,null,function*(){this.timeline=new Ph({target:this.contentEl,props:{navigation:!0}})})}onClose(){return M(this,null,function*(){this.timeline.$destroy()})}};var j2=_t(require("obsidian"));var Ac="google-calendar-view-month",Cy=class extends j2.ItemView{constructor(e){super(e)}getViewType(){return Ac}getDisplayText(){return"Calendar Month View"}getIcon(){return"calendar-with-checkmark"}onOpen(){return M(this,null,function*(){this.calendar=new Qh({target:this.contentEl,props:{}})})}onClose(){return M(this,null,function*(){this.calendar.$destroy()})}};var K2=_t(require("obsidian"));var kc="google-calendar-view-web",by=class extends K2.ItemView{constructor(e){super(e)}getViewType(){return kc}getDisplayText(){return"Calendar Web View"}getIcon(){return"calendar-with-checkmark"}onOpen(){return M(this,null,function*(){this.calendar=new Mh({target:this.contentEl})})}onClose(){return M(this,null,function*(){this.calendar.$destroy()})}};var H2=_t(require("obsidian"));var Ic="google-calendar-view-schedule",xy=class extends H2.ItemView{constructor(e){super(e)}getViewType(){return Ic}getDisplayText(){return"Schedule View"}getIcon(){return"calendar-with-checkmark"}onOpen(){return M(this,null,function*(){this.calendar=new Xh({target:this.contentEl,props:{}})})}onClose(){return M(this,null,function*(){this.calendar.$destroy()})}};var Y2=_t(require("obsidian")),Sy=class extends Y2.FuzzySuggestModal{constructor(e,r,n,i,a){super(st.getInstance().app);this.eventList=e,this.setPlaceholder("Select an event to insert"),this.editor=r,this.start=n,this.end=i,this.word=a}getItems(){return this.eventList}getItemText(e){return`${e.summary}	`}onChooseItem(e){return M(this,null,function*(){let r=`[${e.summary}](${e.htmlLink}&cal=${e.parent.id})`;this.editor.replaceRange(r,this.start,this.end,this.word)})}};function W2(t){Rc("@today",t)||Rc("@tomorrow",t)||Rc("@yesterday",t)||Rc("@REGEX",t)||Rc("@YYYY-MM-DD",t)}function Rc(t,e){var s;let r=e.getCursor(),n=e.getCursor(),i="",a=window.moment();if(t==="@REGEX"){let l=e.getLine(r.line);if(l.length>50)return!1;let u=(s=l.match(/.*@([+,-])(\d+) /))!=null?s:[];if(u.length!=3||e.getCursor().ch!=u.index+u[0].length)return!1;if(n=gn(qr({},r),{ch:r.ch-u[1].length-u[2].length-1}),n.ch<0)return;i=e.getRange(n,r),u[1]=="+"?a=window.moment().add(u[2],"day"):a=window.moment().subtract(u[2],"day")}else if(t==="@YYYY-MM-DD"){if(n=gn(qr({},r),{ch:r.ch-t.length}),i=e.getRange(n,r),i.length!="@YYYY-MM-DD".length||!i.startsWith("@")||i.substring(1).length>100)return!1;let l=window.moment(i.substring(1));if(l.isValid())a=l;else return!1}else{if(n=gn(qr({},r),{ch:r.ch-t.length}),n.ch<0||e.getRange(n,r)!=t)return!1;switch(t){case"@today":a=window.moment();break;case"@tomorrow":a=window.moment().add(1,"day");break;case"@yesterday":a=window.moment().add(-1,"day");break;default:return!1}}return dr({startDate:a}).then(l=>{new Sy(l,e,n,r,i).open()}),!0}var z2=_t(Ba());function KG(t){return M(this,null,function*(){let e=/\[.*]\(https:\/\/www\.google\.com\/calendar\/event\?eid=(.*)&cal=(.*)\)/g,r,n=[];do r=e.exec(t),r&&n.push(r);while(r);return n.length?yield Promise.all(n.map(a=>M(this,null,function*(){if(a){let s=atob(a[1]).split(" ")[0];return yield Fl(s,a[2])}}))):[]})}function Q2(t){return M(this,null,function*(){let e=t.getCursor(),r=t.getValue(),n=/{{gEvent(\d?).(.*)}} /g,i,a=[];do i=n.exec(r),i&&a.push(i);while(i);if(!a.length)return;let s=yield KG(r);!s.length||a.forEach(l=>M(this,null,function*(){let u=l[1]?parseInt(l[1]):0,f=t.getCursor();if(f.ch-=3,t.getRange(f,t.getCursor())!="}} ")return!1;let d=z2.default.get(s[u],l[2],"");d===Object(d)&&(d=JSON.stringify(d)),r=r.replace(l[0],d!=null?d:""),t.setValue(r),e.ch+=d.length-l[0].length,t.setCursor(e)}))})}var X2=_t(require("obsidian"));var Yl=[".anyoneCanAddSelf",".attachments",".attachments[0]",".attachments[0]fileId",".attachments[0]fileUrl",".attachments[0]iconLink",".attachments[0]mimeType",".attachments[0]title",".attendees",".attendeesOmitted",".attendees[0]",".attendees[0].additionalGuests",".attendees[0].comment",".attendees[0].displayName",".attendees[0].email",".attendees[0].id",".attendees[0].optional",".attendees[0].organizer",".attendees[0].resource",".attendees[0].responseStatus",".attendees[0].self",".colorId",".conferenceData",".conferenceData.conferenceId",".conferenceData.conferenceSolution",".conferenceData.conferenceSolution.iconUri",".conferenceData.conferenceSolution.key",".conferenceData.conferenceSolution.key.type",".conferenceData.conferenceSolution.name",".conferenceData.createRequest",".conferenceData.createRequest.conferenceSolutionKey",".conferenceData.createRequest.conferenceSolutionKey.type",".conferenceData.createRequest.requestId",".conferenceData.createRequest.status",".conferenceData.createRequest.status.statusCode",".conferenceData.entryPoints",".conferenceData.entryPoints[0]",".conferenceData.entryPoints[0].accessCode",".conferenceData.entryPoints[0].entryPointType",".conferenceData.entryPoints[0].label",".conferenceData.entryPoints[0].meetingCode",".conferenceData.entryPoints[0].passcode",".conferenceData.entryPoints[0].password",".conferenceData.entryPoints[0].pin",".conferenceData.entryPoints[0].uri",".conferenceData.notes",".conferenceData.signature",".created",".creator",".creator.displayName",".creator.email",".creator.id",".creator.self",".description",".end",".end.date",".end.dateTime",".end.timeZone",".endTimeUnspecified",".etag",".eventType",".extendedProperties",".extendedProperties.private",".extendedProperties.shared",".gadget",".gadget.display",".gadget.height",".gadget.iconLink",".gadget.link",".gadget.preferences",".gadget.title",".gadget.type",".gadget.width",".guestsCanInviteOthers",".guestsCanModify",".guestsCanSeeOtherGuests",".hangoutLink",".htmlLink",".iCalUID",".id",".kind",".location",".locked",".organizer",".organizer.displayName",".organizer.email",".organizer.id",".organizer.self",".originalStartTime",".originalStartTime.date",".originalStartTime.dateTime",".originalStartTime.timeZone",".privateCopy",".parent",".parent.kind",".parent.id",".parent.summary",".parent.description",".parent.location",".parent.timeZone",".parent.conferenceProperties",".parent.conferenceProperties.allowedConferenceSolutionTypes",".recurrence",".recurrence[0]",".recurringEventId",".reminders",".reminders.overrides",".reminders.overrides[0]",".reminders.overrides[0].method",".reminders.overrides[0].minutes",".reminders.useDefault",".sequence",".source",".source.title",".source.url",".start",".start.date",".start.dateTime",".start.timeZone",".status",".summary",".transparency",".updated",".visibility"];var Ty=class extends X2.EditorSuggest{constructor(e){super(e)}onTrigger(e,r){let i=r.getLine(e.line).substring(0,e.ch).match(/{{gEvent(\d)?(\S+$)/);if(i){let a="{{gEvent".length;return i[1]&&a++,{end:e,start:{ch:i.index+a,line:e.line},query:i[2]}}}getSuggestions(e){return Yl.filter(r=>e.query===r.substring(0,e.query.length))}renderSuggestion(e,r){r.createEl("span",{text:e,cls:"suggestionText"})}selectSuggestion(e){if(!this.context)return;let{editor:r}=this.context;if(r.replaceRange(e,this.context.start,this.context.end),Yl.filter(i=>i.startsWith(`${e}.`)).length==0){let i=r.getCursor(),a=structuredClone(i);a.ch+=2,(r.getLine(a.line).length<a.ch||r.getRange(i,a)!="}}")&&r.replaceRange("}}",i),r.setCursor(a)}}};var fk=_t(require("obsidian"));var Nc=_t(require("obsidian")),Ay=class extends Nc.Modal{constructor(e,r){super(e);this.onSubmit=r}onOpen(){let{contentEl:e}=this;e.createEl("h1",{text:"Enter a name for the template"}),new Nc.Setting(e).setName("Name").addText(r=>r.onChange(n=>{this.result=n})),new Nc.Setting(e).addButton(r=>r.setButtonText("Save").setCta().onClick(()=>{this.close(),this.onSubmit(this.result)}))}onClose(){let{contentEl:e}=this;e.empty()}};function HG(t){fi(t,"svelte-6isfqn",".optionContainer.svelte-6isfqn{display:flex;flex-direction:column}.header.svelte-6isfqn{display:grid;grid-template-columns:[first] 30% auto [last] 30%}.center.svelte-6isfqn{text-align:center}.settingsContainer.svelte-6isfqn{display:flex;flex-direction:row;flex:1 1;gap:20px}.optionItem.svelte-6isfqn{display:flex;flex-direction:row;justify-content:space-between;align-items:center}.input.svelte-6isfqn,.eventList.svelte-6isfqn,.optionList.svelte-6isfqn,.calendarList.svelte-6isfqn{width:100%;display:flex;flex-direction:column}.eventList.svelte-6isfqn,.optionList.svelte-6isfqn,.calendarList.svelte-6isfqn{padding-left:16px}button.svelte-6isfqn{align-self:center}")}function J2(t,e,r){let n=t.slice();return n[21]=e[r],n}function Z2(t,e,r){let n=t.slice();return n[21]=e[r],n}function $2(t,e,r){let n=t.slice();return n[26]=e[r],n[27]=e,n[28]=r,n}function ek(t,e,r){let n=t.slice();return n[29]=e[r],n[30]=e,n[31]=r,n}function tk(t,e,r){let n=t.slice();return n[32]=e[r],n}function rk(t){let e,r=t[0].settings.insertTemplates,n=[];for(let i=0;i<r.length;i+=1)n[i]=nk(tk(t,r,i));return{c(){for(let i=0;i<n.length;i+=1)n[i].c();e=ia()},m(i,a){for(let s=0;s<n.length;s+=1)n[s].m(i,a);Se(i,e,a)},p(i,a){if(a[0]&1){r=i[0].settings.insertTemplates;let s;for(s=0;s<r.length;s+=1){let l=tk(i,r,s);n[s]?n[s].p(l,a):(n[s]=nk(l),n[s].c(),n[s].m(e.parentNode,e))}for(;s<n.length;s+=1)n[s].d(1);n.length=r.length}},d(i){En(n,i),i&&xe(e)}}}function nk(t){let e,r=t[32].name+"",n,i;return{c(){e=fe("option"),n=xr(r),e.__value=i=t[32].name,e.value=e.__value},m(a,s){Se(a,e,s),se(e,n)},p(a,s){s[0]&1&&r!==(r=a[32].name+"")&&di(n,r),s[0]&1&&i!==(i=a[32].name)&&(e.__value=i,e.value=e.__value)},d(a){a&&xe(e)}}}function YG(t){let e;return{c(){e=fe("span"),e.textContent="Loading..."},m(r,n){Se(r,e,n)},p:At,d(r){r&&xe(e)}}}function WG(t){let e,r=t[4],n=[];for(let i=0;i<r.length;i+=1)n[i]=ik(ek(t,r,i));return{c(){for(let i=0;i<n.length;i+=1)n[i].c();e=ia()},m(i,a){for(let s=0;s<n.length;s+=1)n[s].m(i,a);Se(i,e,a)},p(i,a){if(a[0]&144){r=i[4];let s;for(s=0;s<r.length;s+=1){let l=ek(i,r,s);n[s]?n[s].p(l,a):(n[s]=ik(l),n[s].c(),n[s].m(e.parentNode,e))}for(;s<n.length;s+=1)n[s].d(1);n.length=r.length}},d(i){En(n,i),i&&xe(e)}}}function ik(t){let e,r,n=t[29][0].summary+"",i,a,s,l,u,f,d,h;function g(){t[17].call(l,t[30],t[31])}return{c(){e=fe("div"),r=fe("label"),i=xr(n),s=Le(),l=fe("input"),f=Le(),re(r,"for",a=t[29][0].id),re(l,"type","checkbox"),re(l,"id",u=t[29][0].id),re(e,"class","optionItem svelte-6isfqn")},m(y,m){Se(y,e,m),se(e,r),se(r,i),se(e,s),se(e,l),l.checked=t[29][1],se(e,f),d||(h=[at(l,"change",g),at(l,"change",t[7])],d=!0)},p(y,m){t=y,m[0]&16&&n!==(n=t[29][0].summary+"")&&di(i,n),m[0]&16&&a!==(a=t[29][0].id)&&re(r,"for",a),m[0]&16&&u!==(u=t[29][0].id)&&re(l,"id",u),m[0]&16&&(l.checked=t[29][1])},d(y){y&&xe(e),d=!1,ln(h)}}}function zG(t){let e;return{c(){e=fe("span"),e.textContent="Loading..."},m(r,n){Se(r,e,n)},p:At,d(r){r&&xe(e)}}}function QG(t){let e,r=t[3],n=[];for(let i=0;i<r.length;i+=1)n[i]=ak($2(t,r,i));return{c(){for(let i=0;i<n.length;i+=1)n[i].c();e=ia()},m(i,a){for(let s=0;s<n.length;s+=1)n[s].m(i,a);Se(i,e,a)},p(i,a){if(a[0]&8){r=i[3];let s;for(s=0;s<r.length;s+=1){let l=$2(i,r,s);n[s]?n[s].p(l,a):(n[s]=ak(l),n[s].c(),n[s].m(e.parentNode,e))}for(;s<n.length;s+=1)n[s].d(1);n.length=r.length}},d(i){En(n,i),i&&xe(e)}}}function ak(t){let e,r,n=t[26][0].summary+"",i,a,s,l,u,f,d,h;function g(){t[18].call(l,t[27],t[28])}return{c(){e=fe("div"),r=fe("label"),i=xr(n),s=Le(),l=fe("input"),f=Le(),re(r,"for",a=t[26][0].id),re(l,"type","checkbox"),re(l,"id",u=t[26][0].id),re(e,"class","optionItem svelte-6isfqn")},m(y,m){Se(y,e,m),se(e,r),se(r,i),se(e,s),se(e,l),l.checked=t[26][1],se(e,f),d||(h=at(l,"change",g),d=!0)},p(y,m){t=y,m[0]&8&&n!==(n=t[26][0].summary+"")&&di(i,n),m[0]&8&&a!==(a=t[26][0].id)&&re(r,"for",a),m[0]&8&&u!==(u=t[26][0].id)&&re(l,"id",u),m[0]&8&&(l.checked=t[26][1])},d(y){y&&xe(e),d=!1,h()}}}function sk(t){let e,r,n,i,a,s,l,u=Yl,f=[];for(let g=0;g<u.length;g+=1)f[g]=ok(Z2(t,u,g));let d=t[5],h=[];for(let g=0;g<d.length;g+=1)h[g]=lk(J2(t,d,g));return{c(){e=fe("h4"),e.textContent="Table structure",r=Le(),n=fe("select");for(let g=0;g<f.length;g+=1)f[g].c();i=Le(),a=fe("div");for(let g=0;g<h.length;g+=1)h[g].c();re(n,"name","tableOptions"),re(n,"class","dropdown"),re(a,"class","optionList svelte-6isfqn")},m(g,y){Se(g,e,y),Se(g,r,y),Se(g,n,y);for(let m=0;m<f.length;m+=1)f[m].m(n,null);Se(g,i,y),Se(g,a,y);for(let m=0;m<h.length;m+=1)h[m].m(a,null);s||(l=at(n,"change",t[8]),s=!0)},p(g,y){if(y&0){u=Yl;let m;for(m=0;m<u.length;m+=1){let _=Z2(g,u,m);f[m]?f[m].p(_,y):(f[m]=ok(_),f[m].c(),f[m].m(n,null))}for(;m<f.length;m+=1)f[m].d(1);f.length=u.length}if(y[0]&544){d=g[5];let m;for(m=0;m<d.length;m+=1){let _=J2(g,d,m);h[m]?h[m].p(_,y):(h[m]=lk(_),h[m].c(),h[m].m(a,null))}for(;m<h.length;m+=1)h[m].d(1);h.length=d.length}},d(g){g&&xe(e),g&&xe(r),g&&xe(n),En(f,g),g&&xe(i),g&&xe(a),En(h,g),s=!1,l()}}}function ok(t){let e,r=t[21]+"",n,i;return{c(){e=fe("option"),n=xr(r),e.__value=i=t[21],e.value=e.__value},m(a,s){Se(a,e,s),se(e,n)},p:At,d(a){a&&xe(e)}}}function lk(t){let e,r,n=t[21]+"",i,a,s,l,u,f,d;function h(){return t[19](t[21])}return{c(){e=fe("div"),r=fe("span"),i=xr(n),a=Le(),s=fe("input"),u=Le(),re(s,"type","checkbox"),re(s,"id",l=t[21]),s.checked=!0,re(e,"class","optionItem svelte-6isfqn")},m(g,y){Se(g,e,y),se(e,r),se(r,i),se(e,a),se(e,s),se(e,u),f||(d=at(s,"click",h),f=!0)},p(g,y){t=g,y[0]&32&&n!==(n=t[21]+"")&&di(i,n),y[0]&32&&l!==(l=t[21])&&re(s,"id",l)},d(g){g&&xe(e),f=!1,d()}}}function XG(t){let e,r,n,i,a,s,l,u,f,d,h,g,y,m,_,E,w,b,k,N,D,B,ee,q,U,oe,ae,Ee,Ie,Qe,Ne,me,ne,Ge,Je,ut,Xe,ct,le=t[0].settings.insertTemplates.length&&rk(t);function Nt(L,H){return L[4]?WG:YG}let Bt=Nt(t,[-1,-1]),et=Bt(t);function tt(L,H){return L[3]?QG:zG}let ft=tt(t,[-1,-1]),I=ft(t),O=t[2]=="table"&&sk(t);return{c(){e=fe("div"),r=fe("div"),n=fe("select"),i=fe("option"),i.textContent="None",le&&le.c(),a=Le(),s=fe("h1"),s.textContent="Insert Options",l=Le(),u=fe("button"),u.textContent="Save as template",f=Le(),d=fe("hr"),h=Le(),g=fe("div"),y=fe("div"),m=fe("label"),m.textContent="Insert type",_=Le(),E=fe("select"),w=fe("option"),w.textContent="Bullet",k=fe("option"),k.textContent="Table",N=Le(),D=fe("div"),B=fe("label"),B.textContent="Insert date",ee=Le(),q=fe("input"),oe=Le(),ae=fe("h4"),ae.textContent="Calendars",Ee=Le(),Ie=fe("div"),et.c(),Qe=Le(),Ne=fe("h4"),Ne.textContent="Events",me=Le(),ne=fe("div"),I.c(),Ge=Le(),O&&O.c(),Je=Le(),ut=fe("button"),ut.textContent="Insert",i.__value="None",i.value=i.__value,re(n,"class","dropdown left"),t[1]===void 0&&Rl(()=>t[15].call(n)),re(s,"class","center svelte-6isfqn"),re(u,"class","right svelte-6isfqn"),re(r,"class","header svelte-6isfqn"),re(m,"for","insertType"),w.selected=b=!0,w.__value="bullet",w.value=w.__value,k.__value="table",k.value=k.__value,re(E,"class","dropdown"),t[2]===void 0&&Rl(()=>t[16].call(E)),re(y,"class","input svelte-6isfqn"),re(B,"for","date"),re(q,"type","date"),re(q,"name","date"),re(q,"id","date"),q.value=U=window.moment().format("YYYY-MM-DD"),re(D,"class","input svelte-6isfqn"),re(g,"class","settingsContainer svelte-6isfqn"),re(Ie,"class","calendarList svelte-6isfqn"),re(ne,"class","eventList svelte-6isfqn"),re(ut,"class","svelte-6isfqn"),re(e,"class","optionContainer svelte-6isfqn")},m(L,H){Se(L,e,H),se(e,r),se(r,n),se(n,i),le&&le.m(n,null),rc(n,t[1]),se(r,a),se(r,s),se(r,l),se(r,u),se(e,f),se(e,d),se(e,h),se(e,g),se(g,y),se(y,m),se(y,_),se(y,E),se(E,w),se(E,k),rc(E,t[2]),se(g,N),se(g,D),se(D,B),se(D,ee),se(D,q),se(e,oe),se(e,ae),se(e,Ee),se(e,Ie),et.m(Ie,null),se(e,Qe),se(e,Ne),se(e,me),se(e,ne),I.m(ne,null),se(e,Ge),O&&O.m(e,null),se(e,Je),se(e,ut),Xe||(ct=[at(n,"change",t[15]),at(n,"change",t[12]),at(u,"click",t[11]),at(E,"change",t[16]),at(q,"change",t[10]),at(ut,"click",t[6])],Xe=!0)},p(L,H){L[0].settings.insertTemplates.length?le?le.p(L,H):(le=rk(L),le.c(),le.m(n,null)):le&&(le.d(1),le=null),H[0]&3&&rc(n,L[1]),H[0]&4&&rc(E,L[2]),Bt===(Bt=Nt(L,H))&&et?et.p(L,H):(et.d(1),et=Bt(L),et&&(et.c(),et.m(Ie,null))),ft===(ft=tt(L,H))&&I?I.p(L,H):(I.d(1),I=ft(L),I&&(I.c(),I.m(ne,null))),L[2]=="table"?O?O.p(L,H):(O=sk(L),O.c(),O.m(e,Je)):O&&(O.d(1),O=null)},i:At,o:At,d(L){L&&xe(e),le&&le.d(),et.d(),I.d(),O&&O.d(),Xe=!1,ln(ct)}}}function JG(t,e,r){let{onSubmit:n}=e,{insertEventsModal:i}=e,a=st.getInstance(),s,l,u,f,d=[".summary",".description"];oo(()=>Sr(void 0,void 0,void 0,function*(){let q=yield Or();r(4,f=q.map(oe=>[oe,!0]));let U=yield dr();r(3,u=U.map(oe=>[oe,!0]))}));let h=()=>{let q=u.filter(U=>U[1]).map(U=>U[0]);n(l,q,d,i)},g=q=>{u.forEach(U=>{U[0].parent.id==q.target.id&&(U[1]=q.target.checked)}),r(3,u)},y=q=>{let U=q.target.value;U=="on"&&(U=q.target.id),d.contains(U)?d.remove(U):d.push(U),r(5,d)},m=q=>{d.contains(q)&&d.remove(q),r(5,d)},_=q=>Sr(void 0,void 0,void 0,function*(){let U=yield Or();r(4,f=U.map(ae=>[ae,!0]));let oe=yield dr({startDate:window.moment(q.target.value).local()});r(3,u=oe.map(ae=>[ae,!0])),r(3,u)}),E=()=>f.filter(q=>q[1]).map(q=>q[0].id),w=()=>{new Ay(app,q=>{let U={name:q,insertType:l,tableOptions:d,calendarList:E()};r(0,a.settings.insertTemplates=[...a.settings.insertTemplates,U],a),a.saveSettings(),wt("Added template")}).open()},b=q=>{let U=q.target.value;if(U=="None")return;let ae=a.settings.insertTemplates.find(Ee=>Ee.name==U);!ae||(r(2,l=ae.insertType),r(5,d=ae.tableOptions),f.forEach(Ee=>Ee[1]=ae.calendarList.contains(Ee[0].id)),u.forEach(Ee=>Ee[1]=ae.calendarList.contains(Ee[0].parent.id)),r(4,f),r(3,u))};function k(){s=zm(this),r(1,s),r(0,a)}function N(){l=zm(this),r(2,l)}function D(q,U){q[U][1]=this.checked,r(4,f)}function B(q,U){q[U][1]=this.checked,r(3,u)}let ee=q=>m(q);return t.$$set=q=>{"onSubmit"in q&&r(13,n=q.onSubmit),"insertEventsModal"in q&&r(14,i=q.insertEventsModal)},[a,s,l,u,f,d,h,g,y,m,_,w,b,n,i,k,N,D,B,ee]}var uk=class extends Cn{constructor(e){super();On(this,e,JG,XG,Bn,{onSubmit:13,insertEventsModal:14},HG,[-1,-1])}},ck=uk;var dk=_t(Ba()),ky=class extends fk.Modal{constructor(e){super(st.getInstance().app);this.editor=e}onOpen(){return M(this,null,function*(){let{contentEl:e}=this;new ck({target:e,props:{onSubmit:this.onSubmit,insertEventsModal:this}})})}onClose(){let{contentEl:e}=this;e.empty()}onSubmit(e,r,n,i){let a="",s="",l="";e=="bullet"?(r.forEach(u=>{l+=`
- ${`[${u.summary}](${u.htmlLink}&cal=${u.parent.id})`}`}),i.editor.replaceRange(l,i.editor.getCursor())):e=="table"&&(n.forEach(u=>{u=u.split(".").join(" ").toLocaleUpperCase(),a+=`| ${u} `,s+="| --- "}),a+=`|
`,s+=`|
`,r.forEach(u=>{n.forEach(f=>{let d=dk.default.get(u,f.substring(1),"");f==".summary"&&(d=`[${d}](${u.htmlLink}&cal=${u.parent.id})`),f.startsWith(".start")&&!f.contains("timeZone")&&(d=(u.start.date?window.moment(u.start.date):window.moment(u.start.dateTime)).format("YYYY-MM-DD HH:mm")),f.startsWith(".end")&&!f.contains("timeZone")&&(d=(u.start.date?window.moment(u.end.date):window.moment(u.end.dateTime)).format("YYYY-MM-DD HH:mm")),l+=`| ${d} `}),l+=`|
`}),i.editor.replaceRange(a+s+l,i.editor.getCursor())),i.close()}};var Iy=class{constructor(){}make(){return{getCalendars:()=>Or(),getEvent:(e,r)=>Fl(e,r),getEvents:e=>dr(e)}}};var By=_t(require("obsidian"));var Bc=_t(Ba());function hk(){return{async:!1,baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}var Wl=hk();function ZG(t){Wl=t}var pk=/[&<>"']/,$G=new RegExp(pk.source,"g"),gk=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,eV=new RegExp(gk.source,"g"),tV={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},mk=t=>tV[t];function nn(t,e){if(e){if(pk.test(t))return t.replace($G,mk)}else if(gk.test(t))return t.replace(eV,mk);return t}var rV=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function yk(t){return t.replace(rV,(e,r)=>(r=r.toLowerCase(),r==="colon"?":":r.charAt(0)==="#"?r.charAt(1)==="x"?String.fromCharCode(parseInt(r.substring(2),16)):String.fromCharCode(+r.substring(1)):""))}var nV=/(^|[^\[])\^/g;function er(t,e){t=typeof t=="string"?t:t.source,e=e||"";let r={replace:(n,i)=>(i=i.source||i,i=i.replace(nV,"$1"),t=t.replace(n,i),r),getRegex:()=>new RegExp(t,e)};return r}var iV=/[^\w:]/g,aV=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function vk(t,e,r){if(t){let n;try{n=decodeURIComponent(yk(r)).replace(iV,"").toLowerCase()}catch(i){return null}if(n.indexOf("javascript:")===0||n.indexOf("vbscript:")===0||n.indexOf("data:")===0)return null}e&&!aV.test(r)&&(r=uV(e,r));try{r=encodeURI(r).replace(/%25/g,"%")}catch(n){return null}return r}var Zh={},sV=/^[^:]+:\/*[^/]*$/,oV=/^([^:]+:)[\s\S]*$/,lV=/^([^:]+:\/*[^/]*)[\s\S]*$/;function uV(t,e){Zh[" "+t]||(sV.test(t)?Zh[" "+t]=t+"/":Zh[" "+t]=ep(t,"/",!0)),t=Zh[" "+t];let r=t.indexOf(":")===-1;return e.substring(0,2)==="//"?r?e:t.replace(oV,"$1")+e:e.charAt(0)==="/"?r?e:t.replace(lV,"$1")+e:t+e}var $h={exec:function(){}};function Mi(t){let e=1,r,n;for(;e<arguments.length;e++){r=arguments[e];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}function _k(t,e){let r=t.replace(/\|/g,(a,s,l)=>{let u=!1,f=s;for(;--f>=0&&l[f]==="\\";)u=!u;return u?"|":" |"}),n=r.split(/ \|/),i=0;if(n[0].trim()||n.shift(),n.length>0&&!n[n.length-1].trim()&&n.pop(),n.length>e)n.splice(e);else for(;n.length<e;)n.push("");for(;i<n.length;i++)n[i]=n[i].trim().replace(/\\\|/g,"|");return n}function ep(t,e,r){let n=t.length;if(n===0)return"";let i=0;for(;i<n;){let a=t.charAt(n-i-1);if(a===e&&!r)i++;else if(a!==e&&r)i++;else break}return t.slice(0,n-i)}function cV(t,e){if(t.indexOf(e[1])===-1)return-1;let r=t.length,n=0,i=0;for(;i<r;i++)if(t[i]==="\\")i++;else if(t[i]===e[0])n++;else if(t[i]===e[1]&&(n--,n<0))return i;return-1}function wk(t){t&&t.sanitize&&!t.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}function Ek(t,e){if(e<1)return"";let r="";for(;e>1;)e&1&&(r+=t),e>>=1,t+=t;return r+t}function Ck(t,e,r,n){let i=e.href,a=e.title?nn(e.title):null,s=t[1].replace(/\\([\[\]])/g,"$1");if(t[0].charAt(0)!=="!"){n.state.inLink=!0;let l={type:"link",raw:r,href:i,title:a,text:s,tokens:n.inlineTokens(s)};return n.state.inLink=!1,l}return{type:"image",raw:r,href:i,title:a,text:nn(s)}}function fV(t,e){let r=t.match(/^(\s+)(?:```)/);if(r===null)return e;let n=r[1];return e.split(`
`).map(i=>{let a=i.match(/^\s+/);if(a===null)return i;let[s]=a;return s.length>=n.length?i.slice(n.length):i}).join(`
`)}var tp=class{constructor(e){this.options=e||Wl}space(e){let r=this.rules.block.newline.exec(e);if(r&&r[0].length>0)return{type:"space",raw:r[0]}}code(e){let r=this.rules.block.code.exec(e);if(r){let n=r[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:r[0],codeBlockStyle:"indented",text:this.options.pedantic?n:ep(n,`
`)}}}fences(e){let r=this.rules.block.fences.exec(e);if(r){let n=r[0],i=fV(n,r[3]||"");return{type:"code",raw:n,lang:r[2]?r[2].trim().replace(this.rules.inline._escapes,"$1"):r[2],text:i}}}heading(e){let r=this.rules.block.heading.exec(e);if(r){let n=r[2].trim();if(/#$/.test(n)){let i=ep(n,"#");(this.options.pedantic||!i||/ $/.test(i))&&(n=i.trim())}return{type:"heading",raw:r[0],depth:r[1].length,text:n,tokens:this.lexer.inline(n)}}}hr(e){let r=this.rules.block.hr.exec(e);if(r)return{type:"hr",raw:r[0]}}blockquote(e){let r=this.rules.block.blockquote.exec(e);if(r){let n=r[0].replace(/^ *>[ \t]?/gm,""),i=this.lexer.state.top;this.lexer.state.top=!0;let a=this.lexer.blockTokens(n);return this.lexer.state.top=i,{type:"blockquote",raw:r[0],tokens:a,text:n}}}list(e){let r=this.rules.block.list.exec(e);if(r){let n,i,a,s,l,u,f,d,h,g,y,m,_=r[1].trim(),E=_.length>1,w={type:"list",raw:"",ordered:E,start:E?+_.slice(0,-1):"",loose:!1,items:[]};_=E?`\\d{1,9}\\${_.slice(-1)}`:`\\${_}`,this.options.pedantic&&(_=E?_:"[*+-]");let b=new RegExp(`^( {0,3}${_})((?:[	 ][^\\n]*)?(?:\\n|$))`);for(;e&&(m=!1,!(!(r=b.exec(e))||this.rules.block.hr.test(e)));){if(n=r[0],e=e.substring(n.length),d=r[2].split(`
`,1)[0],h=e.split(`
`,1)[0],this.options.pedantic?(s=2,y=d.trimLeft()):(s=r[2].search(/[^ ]/),s=s>4?1:s,y=d.slice(s),s+=r[1].length),u=!1,!d&&/^ *$/.test(h)&&(n+=h+`
`,e=e.substring(h.length+1),m=!0),!m){let N=new RegExp(`^ {0,${Math.min(3,s-1)}}(?:[*+-]|\\d{1,9}[.)])((?: [^\\n]*)?(?:\\n|$))`),D=new RegExp(`^ {0,${Math.min(3,s-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),B=new RegExp(`^ {0,${Math.min(3,s-1)}}(?:\`\`\`|~~~)`),ee=new RegExp(`^ {0,${Math.min(3,s-1)}}#`);for(;e&&(g=e.split(`
`,1)[0],d=g,this.options.pedantic&&(d=d.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!(B.test(d)||ee.test(d)||N.test(d)||D.test(e)));){if(d.search(/[^ ]/)>=s||!d.trim())y+=`
`+d.slice(s);else if(!u)y+=`
`+d;else break;!u&&!d.trim()&&(u=!0),n+=g+`
`,e=e.substring(g.length+1)}}w.loose||(f?w.loose=!0:/\n *\n *$/.test(n)&&(f=!0)),this.options.gfm&&(i=/^\[[ xX]\] /.exec(y),i&&(a=i[0]!=="[ ] ",y=y.replace(/^\[[ xX]\] +/,""))),w.items.push({type:"list_item",raw:n,task:!!i,checked:a,loose:!1,text:y}),w.raw+=n}w.items[w.items.length-1].raw=n.trimRight(),w.items[w.items.length-1].text=y.trimRight(),w.raw=w.raw.trimRight();let k=w.items.length;for(l=0;l<k;l++)if(this.lexer.state.top=!1,w.items[l].tokens=this.lexer.blockTokens(w.items[l].text,[]),!w.loose){let N=w.items[l].tokens.filter(B=>B.type==="space"),D=N.length>0&&N.some(B=>/\n.*\n/.test(B.raw));w.loose=D}if(w.loose)for(l=0;l<k;l++)w.items[l].loose=!0;return w}}html(e){let r=this.rules.block.html.exec(e);if(r){let n={type:"html",raw:r[0],pre:!this.options.sanitizer&&(r[1]==="pre"||r[1]==="script"||r[1]==="style"),text:r[0]};if(this.options.sanitize){let i=this.options.sanitizer?this.options.sanitizer(r[0]):nn(r[0]);n.type="paragraph",n.text=i,n.tokens=this.lexer.inline(i)}return n}}def(e){let r=this.rules.block.def.exec(e);if(r){let n=r[1].toLowerCase().replace(/\s+/g," "),i=r[2]?r[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline._escapes,"$1"):"",a=r[3]?r[3].substring(1,r[3].length-1).replace(this.rules.inline._escapes,"$1"):r[3];return{type:"def",tag:n,raw:r[0],href:i,title:a}}}table(e){let r=this.rules.block.table.exec(e);if(r){let n={type:"table",header:_k(r[1]).map(i=>({text:i})),align:r[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:r[3]&&r[3].trim()?r[3].replace(/\n[ \t]*$/,"").split(`
`):[]};if(n.header.length===n.align.length){n.raw=r[0];let i=n.align.length,a,s,l,u;for(a=0;a<i;a++)/^ *-+: *$/.test(n.align[a])?n.align[a]="right":/^ *:-+: *$/.test(n.align[a])?n.align[a]="center":/^ *:-+ *$/.test(n.align[a])?n.align[a]="left":n.align[a]=null;for(i=n.rows.length,a=0;a<i;a++)n.rows[a]=_k(n.rows[a],n.header.length).map(f=>({text:f}));for(i=n.header.length,s=0;s<i;s++)n.header[s].tokens=this.lexer.inline(n.header[s].text);for(i=n.rows.length,s=0;s<i;s++)for(u=n.rows[s],l=0;l<u.length;l++)u[l].tokens=this.lexer.inline(u[l].text);return n}}}lheading(e){let r=this.rules.block.lheading.exec(e);if(r)return{type:"heading",raw:r[0],depth:r[2].charAt(0)==="="?1:2,text:r[1],tokens:this.lexer.inline(r[1])}}paragraph(e){let r=this.rules.block.paragraph.exec(e);if(r){let n=r[1].charAt(r[1].length-1)===`
`?r[1].slice(0,-1):r[1];return{type:"paragraph",raw:r[0],text:n,tokens:this.lexer.inline(n)}}}text(e){let r=this.rules.block.text.exec(e);if(r)return{type:"text",raw:r[0],text:r[0],tokens:this.lexer.inline(r[0])}}escape(e){let r=this.rules.inline.escape.exec(e);if(r)return{type:"escape",raw:r[0],text:nn(r[1])}}tag(e){let r=this.rules.inline.tag.exec(e);if(r)return!this.lexer.state.inLink&&/^<a /i.test(r[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(r[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(r[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(r[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:r[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(r[0]):nn(r[0]):r[0]}}link(e){let r=this.rules.inline.link.exec(e);if(r){let n=r[2].trim();if(!this.options.pedantic&&/^</.test(n)){if(!/>$/.test(n))return;let s=ep(n.slice(0,-1),"\\");if((n.length-s.length)%2==0)return}else{let s=cV(r[2],"()");if(s>-1){let u=(r[0].indexOf("!")===0?5:4)+r[1].length+s;r[2]=r[2].substring(0,s),r[0]=r[0].substring(0,u).trim(),r[3]=""}}let i=r[2],a="";if(this.options.pedantic){let s=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(i);s&&(i=s[1],a=s[3])}else a=r[3]?r[3].slice(1,-1):"";return i=i.trim(),/^</.test(i)&&(this.options.pedantic&&!/>$/.test(n)?i=i.slice(1):i=i.slice(1,-1)),Ck(r,{href:i&&i.replace(this.rules.inline._escapes,"$1"),title:a&&a.replace(this.rules.inline._escapes,"$1")},r[0],this.lexer)}}reflink(e,r){let n;if((n=this.rules.inline.reflink.exec(e))||(n=this.rules.inline.nolink.exec(e))){let i=(n[2]||n[1]).replace(/\s+/g," ");if(i=r[i.toLowerCase()],!i){let a=n[0].charAt(0);return{type:"text",raw:a,text:a}}return Ck(n,i,n[0],this.lexer)}}emStrong(e,r,n=""){let i=this.rules.inline.emStrong.lDelim.exec(e);if(!i||i[3]&&n.match(/[\p{L}\p{N}]/u))return;let a=i[1]||i[2]||"";if(!a||a&&(n===""||this.rules.inline.punctuation.exec(n))){let s=i[0].length-1,l,u,f=s,d=0,h=i[0][0]==="*"?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(h.lastIndex=0,r=r.slice(-1*e.length+s);(i=h.exec(r))!=null;){if(l=i[1]||i[2]||i[3]||i[4]||i[5]||i[6],!l)continue;if(u=l.length,i[3]||i[4]){f+=u;continue}else if((i[5]||i[6])&&s%3&&!((s+u)%3)){d+=u;continue}if(f-=u,f>0)continue;u=Math.min(u,u+f+d);let g=e.slice(0,s+i.index+(i[0].length-l.length)+u);if(Math.min(s,u)%2){let m=g.slice(1,-1);return{type:"em",raw:g,text:m,tokens:this.lexer.inlineTokens(m)}}let y=g.slice(2,-2);return{type:"strong",raw:g,text:y,tokens:this.lexer.inlineTokens(y)}}}}codespan(e){let r=this.rules.inline.code.exec(e);if(r){let n=r[2].replace(/\n/g," "),i=/[^ ]/.test(n),a=/^ /.test(n)&&/ $/.test(n);return i&&a&&(n=n.substring(1,n.length-1)),n=nn(n,!0),{type:"codespan",raw:r[0],text:n}}}br(e){let r=this.rules.inline.br.exec(e);if(r)return{type:"br",raw:r[0]}}del(e){let r=this.rules.inline.del.exec(e);if(r)return{type:"del",raw:r[0],text:r[2],tokens:this.lexer.inlineTokens(r[2])}}autolink(e,r){let n=this.rules.inline.autolink.exec(e);if(n){let i,a;return n[2]==="@"?(i=nn(this.options.mangle?r(n[1]):n[1]),a="mailto:"+i):(i=nn(n[1]),a=i),{type:"link",raw:n[0],text:i,href:a,tokens:[{type:"text",raw:i,text:i}]}}}url(e,r){let n;if(n=this.rules.inline.url.exec(e)){let i,a;if(n[2]==="@")i=nn(this.options.mangle?r(n[0]):n[0]),a="mailto:"+i;else{let s;do s=n[0],n[0]=this.rules.inline._backpedal.exec(n[0])[0];while(s!==n[0]);i=nn(n[0]),n[1]==="www."?a="http://"+n[0]:a=n[0]}return{type:"link",raw:n[0],text:i,href:a,tokens:[{type:"text",raw:i,text:i}]}}}inlineText(e,r){let n=this.rules.inline.text.exec(e);if(n){let i;return this.lexer.state.inRawBlock?i=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(n[0]):nn(n[0]):n[0]:i=nn(this.options.smartypants?r(n[0]):n[0]),{type:"text",raw:n[0],text:i}}}},Ve={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:$h,lheading:/^((?:.|\n(?!\n))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/};Ve._label=/(?!\s*\])(?:\\.|[^\[\]\\])+/;Ve._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/;Ve.def=er(Ve.def).replace("label",Ve._label).replace("title",Ve._title).getRegex();Ve.bullet=/(?:[*+-]|\d{1,9}[.)])/;Ve.listItemStart=er(/^( *)(bull) */).replace("bull",Ve.bullet).getRegex();Ve.list=er(Ve.list).replace(/bull/g,Ve.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+Ve.def.source+")").getRegex();Ve._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul";Ve._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/;Ve.html=er(Ve.html,"i").replace("comment",Ve._comment).replace("tag",Ve._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex();Ve.paragraph=er(Ve._paragraph).replace("hr",Ve.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Ve._tag).getRegex();Ve.blockquote=er(Ve.blockquote).replace("paragraph",Ve.paragraph).getRegex();Ve.normal=Mi({},Ve);Ve.gfm=Mi({},Ve.normal,{table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"});Ve.gfm.table=er(Ve.gfm.table).replace("hr",Ve.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Ve._tag).getRegex();Ve.gfm.paragraph=er(Ve._paragraph).replace("hr",Ve.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",Ve.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Ve._tag).getRegex();Ve.pedantic=Mi({},Ve.normal,{html:er(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",Ve._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:$h,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:er(Ve.normal._paragraph).replace("hr",Ve.hr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",Ve.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});var De={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:$h,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/^(?:[^_*\\]|\\.)*?\_\_(?:[^_*\\]|\\.)*?\*(?:[^_*\\]|\\.)*?(?=\_\_)|(?:[^*\\]|\\.)+(?=[^*])|[punct_](\*+)(?=[\s]|$)|(?:[^punct*_\s\\]|\\.)(\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|(?:[^punct*_\s\\]|\\.)(\*+)(?=[^punct*_\s])/,rDelimUnd:/^(?:[^_*\\]|\\.)*?\*\*(?:[^_*\\]|\\.)*?\_(?:[^_*\\]|\\.)*?(?=\*\*)|(?:[^_\\]|\\.)+(?=[^_])|[punct*](\_+)(?=[\s]|$)|(?:[^punct*_\s\\]|\\.)(\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:$h,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};De._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~";De.punctuation=er(De.punctuation).replace(/punctuation/g,De._punctuation).getRegex();De.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g;De.escapedEmSt=/(?:^|[^\\])(?:\\\\)*\\[*_]/g;De._comment=er(Ve._comment).replace("(?:-->|$)","-->").getRegex();De.emStrong.lDelim=er(De.emStrong.lDelim).replace(/punct/g,De._punctuation).getRegex();De.emStrong.rDelimAst=er(De.emStrong.rDelimAst,"g").replace(/punct/g,De._punctuation).getRegex();De.emStrong.rDelimUnd=er(De.emStrong.rDelimUnd,"g").replace(/punct/g,De._punctuation).getRegex();De._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g;De._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/;De._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/;De.autolink=er(De.autolink).replace("scheme",De._scheme).replace("email",De._email).getRegex();De._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/;De.tag=er(De.tag).replace("comment",De._comment).replace("attribute",De._attribute).getRegex();De._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/;De._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/;De._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/;De.link=er(De.link).replace("label",De._label).replace("href",De._href).replace("title",De._title).getRegex();De.reflink=er(De.reflink).replace("label",De._label).replace("ref",Ve._label).getRegex();De.nolink=er(De.nolink).replace("ref",Ve._label).getRegex();De.reflinkSearch=er(De.reflinkSearch,"g").replace("reflink",De.reflink).replace("nolink",De.nolink).getRegex();De.normal=Mi({},De);De.pedantic=Mi({},De.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:er(/^!?\[(label)\]\((.*?)\)/).replace("label",De._label).getRegex(),reflink:er(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",De._label).getRegex()});De.gfm=Mi({},De.normal,{escape:er(De.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/});De.gfm.url=er(De.gfm.url,"i").replace("email",De.gfm._extended_email).getRegex();De.breaks=Mi({},De.gfm,{br:er(De.br).replace("{2,}","*").getRegex(),text:er(De.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});function dV(t){return t.replace(/---/g,"\u2014").replace(/--/g,"\u2013").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1\u2018").replace(/'/g,"\u2019").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1\u201C").replace(/"/g,"\u201D").replace(/\.{3}/g,"\u2026")}function bk(t){let e="",r,n,i=t.length;for(r=0;r<i;r++)n=t.charCodeAt(r),Math.random()>.5&&(n="x"+n.toString(16)),e+="&#"+n+";";return e}var ua=class{constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||Wl,this.options.tokenizer=this.options.tokenizer||new tp,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let r={block:Ve.normal,inline:De.normal};this.options.pedantic?(r.block=Ve.pedantic,r.inline=De.pedantic):this.options.gfm&&(r.block=Ve.gfm,this.options.breaks?r.inline=De.breaks:r.inline=De.gfm),this.tokenizer.rules=r}static get rules(){return{block:Ve,inline:De}}static lex(e,r){return new ua(r).lex(e)}static lexInline(e,r){return new ua(r).inlineTokens(e)}lex(e){e=e.replace(/\r\n|\r/g,`
`),this.blockTokens(e,this.tokens);let r;for(;r=this.inlineQueue.shift();)this.inlineTokens(r.src,r.tokens);return this.tokens}blockTokens(e,r=[]){this.options.pedantic?e=e.replace(/\t/g,"    ").replace(/^ +$/gm,""):e=e.replace(/^( *)(\t+)/gm,(l,u,f)=>u+"    ".repeat(f.length));let n,i,a,s;for(;e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(l=>(n=l.call({lexer:this},e,r))?(e=e.substring(n.raw.length),r.push(n),!0):!1))){if(n=this.tokenizer.space(e)){e=e.substring(n.raw.length),n.raw.length===1&&r.length>0?r[r.length-1].raw+=`
`:r.push(n);continue}if(n=this.tokenizer.code(e)){e=e.substring(n.raw.length),i=r[r.length-1],i&&(i.type==="paragraph"||i.type==="text")?(i.raw+=`
`+n.raw,i.text+=`
`+n.text,this.inlineQueue[this.inlineQueue.length-1].src=i.text):r.push(n);continue}if(n=this.tokenizer.fences(e)){e=e.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.heading(e)){e=e.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.hr(e)){e=e.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.blockquote(e)){e=e.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.list(e)){e=e.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.html(e)){e=e.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.def(e)){e=e.substring(n.raw.length),i=r[r.length-1],i&&(i.type==="paragraph"||i.type==="text")?(i.raw+=`
`+n.raw,i.text+=`
`+n.raw,this.inlineQueue[this.inlineQueue.length-1].src=i.text):this.tokens.links[n.tag]||(this.tokens.links[n.tag]={href:n.href,title:n.title});continue}if(n=this.tokenizer.table(e)){e=e.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.lheading(e)){e=e.substring(n.raw.length),r.push(n);continue}if(a=e,this.options.extensions&&this.options.extensions.startBlock){let l=1/0,u=e.slice(1),f;this.options.extensions.startBlock.forEach(function(d){f=d.call({lexer:this},u),typeof f=="number"&&f>=0&&(l=Math.min(l,f))}),l<1/0&&l>=0&&(a=e.substring(0,l+1))}if(this.state.top&&(n=this.tokenizer.paragraph(a))){i=r[r.length-1],s&&i.type==="paragraph"?(i.raw+=`
`+n.raw,i.text+=`
`+n.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):r.push(n),s=a.length!==e.length,e=e.substring(n.raw.length);continue}if(n=this.tokenizer.text(e)){e=e.substring(n.raw.length),i=r[r.length-1],i&&i.type==="text"?(i.raw+=`
`+n.raw,i.text+=`
`+n.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):r.push(n);continue}if(e){let l="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(l);break}else throw new Error(l)}}return this.state.top=!0,r}inline(e,r=[]){return this.inlineQueue.push({src:e,tokens:r}),r}inlineTokens(e,r=[]){let n,i,a,s=e,l,u,f;if(this.tokens.links){let d=Object.keys(this.tokens.links);if(d.length>0)for(;(l=this.tokenizer.rules.inline.reflinkSearch.exec(s))!=null;)d.includes(l[0].slice(l[0].lastIndexOf("[")+1,-1))&&(s=s.slice(0,l.index)+"["+Ek("a",l[0].length-2)+"]"+s.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(l=this.tokenizer.rules.inline.blockSkip.exec(s))!=null;)s=s.slice(0,l.index)+"["+Ek("a",l[0].length-2)+"]"+s.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(l=this.tokenizer.rules.inline.escapedEmSt.exec(s))!=null;)s=s.slice(0,l.index+l[0].length-2)+"++"+s.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex),this.tokenizer.rules.inline.escapedEmSt.lastIndex--;for(;e;)if(u||(f=""),u=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(d=>(n=d.call({lexer:this},e,r))?(e=e.substring(n.raw.length),r.push(n),!0):!1))){if(n=this.tokenizer.escape(e)){e=e.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.tag(e)){e=e.substring(n.raw.length),i=r[r.length-1],i&&n.type==="text"&&i.type==="text"?(i.raw+=n.raw,i.text+=n.text):r.push(n);continue}if(n=this.tokenizer.link(e)){e=e.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(n.raw.length),i=r[r.length-1],i&&n.type==="text"&&i.type==="text"?(i.raw+=n.raw,i.text+=n.text):r.push(n);continue}if(n=this.tokenizer.emStrong(e,s,f)){e=e.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.codespan(e)){e=e.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.br(e)){e=e.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.del(e)){e=e.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.autolink(e,bk)){e=e.substring(n.raw.length),r.push(n);continue}if(!this.state.inLink&&(n=this.tokenizer.url(e,bk))){e=e.substring(n.raw.length),r.push(n);continue}if(a=e,this.options.extensions&&this.options.extensions.startInline){let d=1/0,h=e.slice(1),g;this.options.extensions.startInline.forEach(function(y){g=y.call({lexer:this},h),typeof g=="number"&&g>=0&&(d=Math.min(d,g))}),d<1/0&&d>=0&&(a=e.substring(0,d+1))}if(n=this.tokenizer.inlineText(a,dV)){e=e.substring(n.raw.length),n.raw.slice(-1)!=="_"&&(f=n.raw.slice(-1)),u=!0,i=r[r.length-1],i&&i.type==="text"?(i.raw+=n.raw,i.text+=n.text):r.push(n);continue}if(e){let d="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(d);break}else throw new Error(d)}}return r}},rp=class{constructor(e){this.options=e||Wl}code(e,r,n){let i=(r||"").match(/\S*/)[0];if(this.options.highlight){let a=this.options.highlight(e,i);a!=null&&a!==e&&(n=!0,e=a)}return e=e.replace(/\n$/,"")+`
`,i?'<pre><code class="'+this.options.langPrefix+nn(i)+'">'+(n?e:nn(e,!0))+`</code></pre>
`:"<pre><code>"+(n?e:nn(e,!0))+`</code></pre>
`}blockquote(e){return`<blockquote>
${e}</blockquote>
`}html(e){return e}heading(e,r,n,i){if(this.options.headerIds){let a=this.options.headerPrefix+i.slug(n);return`<h${r} id="${a}">${e}</h${r}>
`}return`<h${r}>${e}</h${r}>
`}hr(){return this.options.xhtml?`<hr/>
`:`<hr>
`}list(e,r,n){let i=r?"ol":"ul",a=r&&n!==1?' start="'+n+'"':"";return"<"+i+a+`>
`+e+"</"+i+`>
`}listitem(e){return`<li>${e}</li>
`}checkbox(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "}paragraph(e){return`<p>${e}</p>
`}table(e,r){return r&&(r=`<tbody>${r}</tbody>`),`<table>
<thead>
`+e+`</thead>
`+r+`</table>
`}tablerow(e){return`<tr>
${e}</tr>
`}tablecell(e,r){let n=r.header?"th":"td";return(r.align?`<${n} align="${r.align}">`:`<${n}>`)+e+`</${n}>
`}strong(e){return`<strong>${e}</strong>`}em(e){return`<em>${e}</em>`}codespan(e){return`<code>${e}</code>`}br(){return this.options.xhtml?"<br/>":"<br>"}del(e){return`<del>${e}</del>`}link(e,r,n){if(e=vk(this.options.sanitize,this.options.baseUrl,e),e===null)return n;let i='<a href="'+e+'"';return r&&(i+=' title="'+r+'"'),i+=">"+n+"</a>",i}image(e,r,n){if(e=vk(this.options.sanitize,this.options.baseUrl,e),e===null)return n;let i=`<img src="${e}" alt="${n}"`;return r&&(i+=` title="${r}"`),i+=this.options.xhtml?"/>":">",i}text(e){return e}},Ry=class{strong(e){return e}em(e){return e}codespan(e){return e}del(e){return e}html(e){return e}text(e){return e}link(e,r,n){return""+n}image(e,r,n){return""+n}br(){return""}},Ny=class{constructor(){this.seen={}}serialize(e){return e.toLowerCase().trim().replace(/<[!\/a-z].*?>/ig,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")}getNextSafeSlug(e,r){let n=e,i=0;if(this.seen.hasOwnProperty(n)){i=this.seen[e];do i++,n=e+"-"+i;while(this.seen.hasOwnProperty(n))}return r||(this.seen[e]=i,this.seen[n]=0),n}slug(e,r={}){let n=this.serialize(e);return this.getNextSafeSlug(n,r.dryrun)}},Ui=class{constructor(e){this.options=e||Wl,this.options.renderer=this.options.renderer||new rp,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new Ry,this.slugger=new Ny}static parse(e,r){return new Ui(r).parse(e)}static parseInline(e,r){return new Ui(r).parseInline(e)}parse(e,r=!0){let n="",i,a,s,l,u,f,d,h,g,y,m,_,E,w,b,k,N,D,B,ee=e.length;for(i=0;i<ee;i++){if(y=e[i],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[y.type]&&(B=this.options.extensions.renderers[y.type].call({parser:this},y),B!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(y.type))){n+=B||"";continue}switch(y.type){case"space":continue;case"hr":{n+=this.renderer.hr();continue}case"heading":{n+=this.renderer.heading(this.parseInline(y.tokens),y.depth,yk(this.parseInline(y.tokens,this.textRenderer)),this.slugger);continue}case"code":{n+=this.renderer.code(y.text,y.lang,y.escaped);continue}case"table":{for(h="",d="",l=y.header.length,a=0;a<l;a++)d+=this.renderer.tablecell(this.parseInline(y.header[a].tokens),{header:!0,align:y.align[a]});for(h+=this.renderer.tablerow(d),g="",l=y.rows.length,a=0;a<l;a++){for(f=y.rows[a],d="",u=f.length,s=0;s<u;s++)d+=this.renderer.tablecell(this.parseInline(f[s].tokens),{header:!1,align:y.align[s]});g+=this.renderer.tablerow(d)}n+=this.renderer.table(h,g);continue}case"blockquote":{g=this.parse(y.tokens),n+=this.renderer.blockquote(g);continue}case"list":{for(m=y.ordered,_=y.start,E=y.loose,l=y.items.length,g="",a=0;a<l;a++)b=y.items[a],k=b.checked,N=b.task,w="",b.task&&(D=this.renderer.checkbox(k),E?b.tokens.length>0&&b.tokens[0].type==="paragraph"?(b.tokens[0].text=D+" "+b.tokens[0].text,b.tokens[0].tokens&&b.tokens[0].tokens.length>0&&b.tokens[0].tokens[0].type==="text"&&(b.tokens[0].tokens[0].text=D+" "+b.tokens[0].tokens[0].text)):b.tokens.unshift({type:"text",text:D}):w+=D),w+=this.parse(b.tokens,E),g+=this.renderer.listitem(w,N,k);n+=this.renderer.list(g,m,_);continue}case"html":{n+=this.renderer.html(y.text);continue}case"paragraph":{n+=this.renderer.paragraph(this.parseInline(y.tokens));continue}case"text":{for(g=y.tokens?this.parseInline(y.tokens):y.text;i+1<ee&&e[i+1].type==="text";)y=e[++i],g+=`
`+(y.tokens?this.parseInline(y.tokens):y.text);n+=r?this.renderer.paragraph(g):g;continue}default:{let q='Token with "'+y.type+'" type was not found.';if(this.options.silent){console.error(q);return}else throw new Error(q)}}}return n}parseInline(e,r){r=r||this.renderer;let n="",i,a,s,l=e.length;for(i=0;i<l;i++){if(a=e[i],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[a.type]&&(s=this.options.extensions.renderers[a.type].call({parser:this},a),s!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(a.type))){n+=s||"";continue}switch(a.type){case"escape":{n+=r.text(a.text);break}case"html":{n+=r.html(a.text);break}case"link":{n+=r.link(a.href,a.title,this.parseInline(a.tokens,r));break}case"image":{n+=r.image(a.href,a.title,a.text);break}case"strong":{n+=r.strong(this.parseInline(a.tokens,r));break}case"em":{n+=r.em(this.parseInline(a.tokens,r));break}case"codespan":{n+=r.codespan(a.text);break}case"br":{n+=r.br();break}case"del":{n+=r.del(this.parseInline(a.tokens,r));break}case"text":{n+=r.text(a.text);break}default:{let u='Token with "'+a.type+'" type was not found.';if(this.options.silent){console.error(u);return}else throw new Error(u)}}}return n}};function Ke(t,e,r){if(typeof t=="undefined"||t===null)throw new Error("marked(): input parameter is undefined or null");if(typeof t!="string")throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected");if(typeof e=="function"&&(r=e,e=null),e=Mi({},Ke.defaults,e||{}),wk(e),r){let i=e.highlight,a;try{a=ua.lex(t,e)}catch(u){return r(u)}let s=function(u){let f;if(!u)try{e.walkTokens&&Ke.walkTokens(a,e.walkTokens),f=Ui.parse(a,e)}catch(d){u=d}return e.highlight=i,u?r(u):r(null,f)};if(!i||i.length<3||(delete e.highlight,!a.length))return s();let l=0;Ke.walkTokens(a,function(u){u.type==="code"&&(l++,setTimeout(()=>{i(u.text,u.lang,function(f,d){if(f)return s(f);d!=null&&d!==u.text&&(u.text=d,u.escaped=!0),l--,l===0&&s()})},0))}),l===0&&s();return}function n(i){if(i.message+=`
Please report this to https://github.com/markedjs/marked.`,e.silent)return"<p>An error occurred:</p><pre>"+nn(i.message+"",!0)+"</pre>";throw i}try{let i=ua.lex(t,e);if(e.walkTokens){if(e.async)return Promise.all(Ke.walkTokens(i,e.walkTokens)).then(()=>Ui.parse(i,e)).catch(n);Ke.walkTokens(i,e.walkTokens)}return Ui.parse(i,e)}catch(i){n(i)}}Ke.options=Ke.setOptions=function(t){return Mi(Ke.defaults,t),ZG(Ke.defaults),Ke};Ke.getDefaults=hk;Ke.defaults=Wl;Ke.use=function(...t){let e=Ke.defaults.extensions||{renderers:{},childTokens:{}};t.forEach(r=>{let n=Mi({},r);if(n.async=Ke.defaults.async||n.async,r.extensions&&(r.extensions.forEach(i=>{if(!i.name)throw new Error("extension name required");if(i.renderer){let a=e.renderers[i.name];a?e.renderers[i.name]=function(...s){let l=i.renderer.apply(this,s);return l===!1&&(l=a.apply(this,s)),l}:e.renderers[i.name]=i.renderer}if(i.tokenizer){if(!i.level||i.level!=="block"&&i.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");e[i.level]?e[i.level].unshift(i.tokenizer):e[i.level]=[i.tokenizer],i.start&&(i.level==="block"?e.startBlock?e.startBlock.push(i.start):e.startBlock=[i.start]:i.level==="inline"&&(e.startInline?e.startInline.push(i.start):e.startInline=[i.start]))}i.childTokens&&(e.childTokens[i.name]=i.childTokens)}),n.extensions=e),r.renderer){let i=Ke.defaults.renderer||new rp;for(let a in r.renderer){let s=i[a];i[a]=(...l)=>{let u=r.renderer[a].apply(i,l);return u===!1&&(u=s.apply(i,l)),u}}n.renderer=i}if(r.tokenizer){let i=Ke.defaults.tokenizer||new tp;for(let a in r.tokenizer){let s=i[a];i[a]=(...l)=>{let u=r.tokenizer[a].apply(i,l);return u===!1&&(u=s.apply(i,l)),u}}n.tokenizer=i}if(r.walkTokens){let i=Ke.defaults.walkTokens;n.walkTokens=function(a){let s=[];return s.push(r.walkTokens.call(this,a)),i&&(s=s.concat(i.call(this,a))),s}}Ke.setOptions(n)})};Ke.walkTokens=function(t,e){let r=[];for(let n of t)switch(r=r.concat(e.call(Ke,n)),n.type){case"table":{for(let i of n.header)r=r.concat(Ke.walkTokens(i.tokens,e));for(let i of n.rows)for(let a of i)r=r.concat(Ke.walkTokens(a.tokens,e));break}case"list":{r=r.concat(Ke.walkTokens(n.items,e));break}default:Ke.defaults.extensions&&Ke.defaults.extensions.childTokens&&Ke.defaults.extensions.childTokens[n.type]?Ke.defaults.extensions.childTokens[n.type].forEach(function(i){r=r.concat(Ke.walkTokens(n[i],e))}):n.tokens&&(r=r.concat(Ke.walkTokens(n.tokens,e)))}return r};Ke.parseInline=function(t,e){if(typeof t=="undefined"||t===null)throw new Error("marked.parseInline(): input parameter is undefined or null");if(typeof t!="string")throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected");e=Mi({},Ke.defaults,e||{}),wk(e);try{let r=ua.lexInline(t,e);return e.walkTokens&&Ke.walkTokens(r,e.walkTokens),Ui.parseInline(r,e)}catch(r){if(r.message+=`
Please report this to https://github.com/markedjs/marked.`,e.silent)return"<p>An error occurred:</p><pre>"+nn(r.message+"",!0)+"</pre>";throw r}};Ke.Parser=Ui;Ke.parser=Ui.parse;Ke.Renderer=rp;Ke.TextRenderer=Ry;Ke.Lexer=ua;Ke.lexer=ua.lex;Ke.Tokenizer=tp;Ke.Slugger=Ny;Ke.parse=Ke;var Iee=Ke.options,Ree=Ke.setOptions,Nee=Ke.use,Bee=Ke.walkTokens,Dee=Ke.parseInline;var Oee=Ui.parse,Lee=ua.lex;var xk=(t,e,r)=>{if(console.log(t),t<0&&(t=e.length+t),!(t>=e.length&&t>=0))return t+1<e.length?r.substring(e[t].position.start.offset,e[t+1].position.start.offset-1):r.substring(e[t].position.start.offset,r.length)},Sk=t=>M(void 0,null,function*(){var h,g,y,m,_,E;let e=st.getInstance(),r=yield app.vault.adapter.read((0,By.normalizePath)(t.file.path)),n=(g=Bc.default.cloneDeep((h=app==null?void 0:app.metadataCache)==null?void 0:h.getFileCache(t.file).frontmatter))!=null?g:{};console.log(app.metadataCache.getFileCache(t.file));let i=/\[([^[]*)::([^[]*)\]/gm,a,s=[];do a=i.exec(r),s.push(a);while(a);if(s.forEach(w=>{w&&Bc.default.set(n,w[1].trim(),w[2].trim())}),!n){wt("No frontmatter found in note",!0);return}let l=hV(n);for(let[w,b]of Object.entries(l)){let k=Bc.default.get(n,w,null);k&&Bc.default.set(n,b,k)}let u=yield Or(),f=n.position;delete n.position;let d=u.find(w=>{var b,k;return w.id==((b=n.calendar)!=null?b:e.settings.defaultCalendar)||w.summary==((k=n.calendar)!=null?k:e.settings.defaultCalendar)});if(!d){wt("Event not created. Calendar not defined. Set a default calendar in the settings or set the field calendar");return}if(n.parent=d,n.summary||(n.summary=t.file.basename),n.description){if(typeof n.description=="string"){if(((y=n.description)==null?void 0:y.toLowerCase())=="header"&&(n.description="",((m=app==null?void 0:app.metadataCache)==null?void 0:m.getFileCache(t.file).headings).forEach(b=>{n.description+=`<h${b.level}>${b.heading}</h${b.level}>`})),((_=n.description)==null?void 0:_.toLowerCase())=="file"){let w=Ke.parse(r.substring(f.end.offset));n.description=w}}else if(typeof n.description=="object"){let w=(E=app==null?void 0:app.metadataCache)==null?void 0:E.getFileCache(t.file).headings,b=n.description.map(N=>{if(typeof N=="number"){let D=xk(N,w,r);return D||-1}else if(typeof N=="object"){if(N.length!=2)return-1;let[D,B]=N;if(D<0&&(D=w.length+D),B<0&&(B=w.length+B),D>=w.length||B>=w.length||D<0||B<0||D>B)return-1;let ee="";for(let q=D;q<=B;q++){let U=xk(q,w,r);if(!U)return-1;ee+=U+`
`}return ee}});if(console.log(b),b.contains(-1)){wt("Event not created.A Header in the header list is out of range",!0);return}let k=Ke.parse(b.join(`
`));n.description=k}}if(!n.start&&!n.startTime&&(n.start={date:window.moment()}),!n.end&&!n.endTime&&(n.end=n.start),n.start.date?(n.start.date=window.moment(n.start.date).format("YYYY-MM-DD"),n.end.date=window.moment(n.end.date).clone().add(1,"day").format("YYYY-MM-DD")):(n.start.dateTime=window.moment(n.start.dateTime).format(),n.end.dateTime=window.moment(n.end.dateTime).format()),console.log(n),n.recurrence)try{let w=nA.fromText(n.recurrence),b=new mo;b.rrule(w),n.recurrence=b.valueOf()}catch(w){wt("Event not created. Error in recurrence text.",!0);return}return n}),hV=t=>{var r;let e=new Map;if(typeof t.mapping=="string"){t.mapping.endsWith(".md")||(t.mapping+=".md");let n=(0,By.normalizePath)(t.mapping),i=app.vault.getAbstractFileByPath(n);if(!i)return wt(`Mapping Error, file "${n}" not found.`),e;if(t=(r=app==null?void 0:app.metadataCache)==null?void 0:r.getFileCache(i).frontmatter,!t)return wt(`Mapping Error, file "${n}" does not contain frontmatter.`),e}return t.mapping?t.mapping:e};var pV={googleClientId:"",googleClientSecret:"",googleRefreshToken:"",useCustomClient:!0,googleOAuthServer:"https://obsidian-google-calendar.vercel.app",refreshInterval:10,showNotice:!0,autoCreateEventNotes:!0,autoCreateEventKeepOpen:!1,importStartOffset:1,importEndOffset:1,defaultCalendar:"",calendarBlackList:[],insertTemplates:[],webViewDefaultColorMode:Lh(),useDefaultTemplate:!1,defaultTemplate:"",defaultFolder:app.vault.config.newFileFolderPath,activateDailyNoteAddon:!1,dailyNoteDotColor:"#6aa1d8",debugMode:!1,timelineHourFormat:0},st=class extends zl.Plugin{constructor(){super(...arguments);this.events=[];this.initView=e=>M(this,null,function*(){this.app.workspace.getLeavesOfType(e).length===0&&(yield this.app.workspace.getRightLeaf(!1).setViewState({type:e})),this.app.workspace.revealLeaf(this.app.workspace.getLeavesOfType(e).first())});this.onLayoutReady=()=>{var n;wc(this);let e=(n=this.app.internalPlugins)==null?void 0:n.plugins.templates;e&&e.enabled&&(this.coreTemplatePlugin=e);let r=this.app.plugins.plugins["templater-obsidian"];r&&r._loaded&&(this.templaterPlugin=r),sy(this)}}static getInstance(){return st.instance}onload(){return M(this,null,function*(){st.instance=this,this.api=new Iy().make(),yield this.loadSettings(),this.app.workspace.onLayoutReady(this.onLayoutReady),this.events.push(this.app.vault.on("create",()=>wc(this))),this.events.push(this.app.vault.on("delete",()=>wc(this))),this.events.push(this.app.vault.on("rename",()=>wc(this))),this.events.forEach(e=>{this.registerEvent(e)}),this.registerMarkdownCodeBlockProcessor("gEvent",(e,r,n)=>G2(e,r,n)),this.registerEditorSuggest(new Ty(this.app)),this.registerView(Tc,e=>new Ey(e)),this.registerView(Ac,e=>new Cy(e)),this.registerView(kc,e=>new by(e)),this.registerView(Ic,e=>new xy(e)),this.registerEvent(this.app.workspace.on("editor-change",e=>{W2(e),Q2(e)})),this.addCommand({id:"open-google-calendar-timline-view",name:"Open Google Calendar timeline view",callback:()=>this.initView(Tc)}),this.addCommand({id:"open-google-calendar-month-view",name:"Open Google Calendar month view",callback:()=>this.initView(Ac)}),this.addCommand({id:"open-google-calendar-web-view",name:"Open Google Calendar web view",callback:()=>this.initView(kc)}),this.addCommand({id:"open-google-calendar-schedule-view",name:"Open Google Calendar schedule view",callback:()=>this.initView(Ic)}),this.addCommand({id:"list-google-calendars",name:"List Google Calendars",checkCallback:e=>{let r=zt();if(e)return r;!r||Or().then(n=>{new Dh(n).open()})}}),this.addCommand({id:"create-google-calendar-event",name:"Create Google Calendar Event",checkCallback:e=>{let r=zt();if(e)return r;!r||new mi({start:{},end:{}},()=>{Bi()}).open()}}),this.addCommand({id:"list-google-calendars",name:"List Google Calendars",checkCallback:e=>{let r=zt();if(e)return r;!r||Or().then(n=>{new Dh(n).open()})}}),this.addCommand({id:"list-google-events",name:"List Google Events",checkCallback:e=>{let r=zt();if(e)return r;!r||dr().then(n=>{new Pi(n,"details").open()})}}),this.addCommand({id:"google-calendar-trigger-auto-import",name:"Google Calendar Trigger Auto Import",checkCallback:e=>{let r=zt();if(e)return r;!r||sy(this)}}),this.addCommand({id:"google-calendar-create-event-note",name:"Create Event Note",checkCallback:e=>{let r=zt();if(e)return r;!r||dr().then(n=>{new Pi(n,"createNote").open()})}}),this.addCommand({id:"google-calendar-create-event-note-current-event",name:"Create Event Note for current event",checkCallback:e=>{let r=zt();if(e)return r;!r||dr().then(n=>{let i=n.filter(a=>{if(a.start.date)return!1;let s=window.moment(a.start.dateTime),l=window.moment(a.end.dateTime),u=window.moment();return!(u.isBefore(s)||u.isAfter(l))});i.length==0&&(i=n.filter(a=>{if(a.start.date)return!1;let s=window.moment(a.start.dateTime).subtract(1,"hour"),l=window.moment(a.end.dateTime),u=window.moment();return!(u.isBefore(s)||u.isAfter(l))})),i.length==0&&(i=n.filter(a=>!!a.start.date)),i.length==1?this.settings.useDefaultTemplate&&this.settings.defaultFolder&&this.settings.defaultFolder?vo(i[0],this.settings.defaultFolder,this.settings.defaultTemplate):new _o(i[0],()=>{}).open():new Pi(i,"createNote").open()})}}),this.addCommand({id:"insert-google-event-codeblock",name:"Insert Google Event CodeBlock",editorCallback:e=>{e.replaceRange("```gEvent\ndate: "+window.moment().format("YYYY-MM-DD")+"\ntype: day\n```",e.getCursor())}}),this.addCommand({id:"insert-google-event-template",name:"Insert Google Event Template",editorCallback:e=>{e.replaceRange("{{gEvent.}}",e.getCursor());let r=e.getCursor();r.ch+="{{gEvent.".length,e.setCursor(r)}}),this.addCommand({id:"insert-google-events",name:"Insert Google events",editorCheckCallback:(e,r)=>{let n=zt();if(e)return n;!n||new ky(r).open()}}),this.addCommand({id:"create-google-calendar-event-from-frontmatter ",name:"Create Google Calendar Event from frontmatter",editorCheckCallback:(e,r,n)=>{let i=zt();if(e)return i;!i||!n.file||Sk(n).then(a=>{!a||bh(a)})}}),this.addCommand({id:"copy-google-calendar-refresh-token",name:"Copy Google Calendar Refresh Token to Clipboard",callback:()=>{let e=wa();if(e==null||e==""){new zl.Notice("No Refresh Token. Please Login.");return}navigator.clipboard.writeText(e),new zl.Notice("Token copied")}}),this.settingsTab=new Ym(this.app,this),this.addSettingTab(this.settingsTab),this.registerObsidianProtocolHandler("googleLogin",e=>M(this,null,function*(){this.settings.useCustomClient||(Sf(e.uid),Xa(e.at),Ja(+new Date+36e5),new zl.Notice("Login successful!"),this.settingsTab.display())}))})}onunload(){this.app.workspace.detachLeavesOfType(Tc),this.app.workspace.detachLeavesOfType(Ac),this.app.workspace.detachLeavesOfType(kc),this.app.workspace.detachLeavesOfType(Ic);for(let e in this.events)this.app.vault.offref(e);this.events=[]}loadSettings(){return M(this,null,function*(){this.settings=Object.assign({},pV,yield this.loadData())})}saveSettings(){return M(this,null,function*(){yield this.saveData(this.settings)})}};
/*!
 * rrule.js - Library for working with recurrence rules for calendar dates.
 * https://github.com/jakubroztocil/rrule
 *
 * Copyright 2010, Jakub Roztocil and Lars Schoning
 * Licenced under the BSD licence.
 * https://github.com/jakubroztocil/rrule/blob/master/LICENCE
 *
 * Based on:
 * python-dateutil - Extensions to the standard Python datetime module.
 * Copyright (c) 2003-2011 - Gustavo Niemeyer <gustavo@niemeyer.net>
 * Copyright (c) 2012 - Tomi Pievilinen <tomi.pievilainen@iki.fi>
 * https://github.com/jakubroztocil/rrule/blob/master/LICENCE
 *
 */
/*!
* rrule.js - Library for working with recurrence rules for calendar dates.
* https://github.com/jakubroztocil/rrule
*
* Copyright 2010, Jakub Roztocil and Lars Schoning
* Licenced under the BSD licence.
* https://github.com/jakubroztocil/rrule/blob/master/LICENCE
*
*/
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */
